{"ast":null,"code":"import React,{memo,useCallback,useState,useEffect}from'react';import{Link}from'react-router-dom';import FavoriteButton from'./FavoriteButton';import{supabase}from'../lib/supabase.js';// Memoized category icon component for better performance\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CategoryIcon=/*#__PURE__*/memo(_ref=>{let{category,listingType}=_ref;if(listingType==='product'){return/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"})});}if(listingType==='provider'){return/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"})});}const icons={'Veterinary':/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"})}),'Pet Grooming':/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M14.828 14.828a4 4 0 01-5.656 0M9 10h1.5a1.5 1.5 0 011.5 1.5v1a1.5 1.5 0 01-1.5 1.5H9m0-5a1.5 1.5 0 011.5-1.5H12a1.5 1.5 0 011.5 1.5v1a1.5 1.5 0 01-1.5 1.5H10.5A1.5 1.5 0 019 11.5V10z\"})}),'Pet Training':/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"})}),'Pet Breeding':/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"})}),default:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"})})};return icons[category]||icons.default;});CategoryIcon.displayName='CategoryIcon';// Optimized image component with basic lazy loading\nconst OptimizedImage=/*#__PURE__*/memo(_ref2=>{let{src,alt,className}=_ref2;if(!src)return null;return/*#__PURE__*/_jsx(\"img\",{src:src,alt:alt,className:className,loading:\"lazy\",decoding:\"async\",onError:e=>{e.target.style.display='none';}});});OptimizedImage.displayName='OptimizedImage';// Memoized marketplace card component\nconst MarketplaceCard=/*#__PURE__*/memo(_ref3=>{var _providerServices$,_providerServices$2,_listing$provider_nam,_providerServices$3,_providerServices$4;let{listing}=_ref3;const[providerServices,setProviderServices]=useState([]);const[servicesLoading,setServicesLoading]=useState(false);const handleScrollToTop=useCallback(()=>{window.scrollTo({top:0,behavior:'smooth'});},[]);// Fetch services for provider listings\nuseEffect(()=>{const fetchProviderServices=async()=>{if(listing.listing_type!=='provider'||!listing.provider_email&&!listing.provider_id)return;setServicesLoading(true);try{let query=supabase.from('marketplace_listings').select('listing_id, name, service_types, price, provider_email').eq('active',true).not('service_type','like','%LuniTriage%')// Exclude LuniTriage services\n.order('service_type',{ascending:true});// Order by service_type to group Mobile services first\n// Try provider_email first, then provider_id approach\nif(listing.provider_email){query=query.eq('provider_email',listing.provider_email);}else if(listing.provider_id){// Get provider email first, then use it to fetch services\nconst{data:providerData}=await supabase.from('providers').select('email').eq('id',listing.provider_id).single();if(providerData!==null&&providerData!==void 0&&providerData.email){query=query.eq('provider_email',providerData.email);}else{console.log('No provider email found for provider_id:',listing.provider_id);setServicesLoading(false);return;}}else{console.log('No provider_email or provider_id found for listing:',listing.name);setServicesLoading(false);return;}const{data:services,error}=await query;if(!error&&services){// Store all services for count, but show top 3 for display\nconst allNonLuniServices=services.filter(service=>!service.service_type.includes('LuniTriage'));// Prioritize Mobile services first for display\nconst mobileServices=services.filter(service=>!service.service_type.includes('LuniTriage')&&service.service_type.includes('Mobile')).slice(0,3);// If we don't have 3 mobile services, fill with other non-LuniTriage services\nif(mobileServices.length<3){const otherServices=services.filter(service=>!service.service_type.includes('LuniTriage')&&!service.service_type.includes('Mobile')).slice(0,3-mobileServices.length);mobileServices.push(...otherServices);}// Add total count to the services for display\nconst servicesWithCount=mobileServices.map(service=>({...service,totalCount:allNonLuniServices.length}));console.log('Fetched services for provider:',listing.name);console.log('Total non-LuniTriage services:',allNonLuniServices.length);console.log('Top 3 services to display:',servicesWithCount);setProviderServices(servicesWithCount);}else if(error){console.error('Error fetching services for provider:',listing.name,error);}}catch(error){console.error('Error fetching provider services:',error);}finally{setServicesLoading(false);}};fetchProviderServices();},[listing.listing_type,listing.provider_email,listing.provider_id]);// Get fallback emoji for category\nconst getCategoryEmoji=useCallback((category,listingType)=>{if(listingType==='product')return'ðŸ“¦';if(listingType==='provider')return'ðŸ‘©â€âš•ï¸';const emojis={'Veterinary':'ðŸ¥','Pet Grooming':'âœ‚ï¸','Pet Training':'ðŸŽ“','Pet Breeding':'ðŸ•','Nutritionists':'ðŸ¥—','Holistic Care':'ðŸŒ¿','vet_nurse':'ðŸ‘©â€âš•ï¸'};return emojis[category]||'ðŸ¾';},[]);// Get price range for provider services\nconst getPriceRange=useCallback(()=>{if(listing.listing_type!=='provider'){return`$${listing.price||0}`;}// For providers, use the pre-calculated price range\nif(listing.price_min&&listing.price_max){if(listing.price_min===listing.price_max){return`$${listing.price_min}`;}else{return`$${listing.price_min} - $${listing.price_max}`;}}// Fallback to providerServices if available\nif(providerServices.length>0){const prices=providerServices.map(service=>parseFloat(service.price_from));const minPrice=Math.min(...prices);const maxPrice=Math.max(...prices);if(minPrice===maxPrice){return`$${minPrice}`;}else{return`$${minPrice} - $${maxPrice}`;}}return`$${listing.price||0}`;},[listing,providerServices]);return/*#__PURE__*/_jsx(Link,{to:listing.listing_type==='provider'?`/provider/${encodeURIComponent(listing.provider_email||listing.provider_id)}`:listing.listing_type==='service'?`/provider/${encodeURIComponent(listing.provider_email||listing.provider_id)}`:`/product/${listing.listing_id}`,className:\"group h-full\",onClick:handleScrollToTop,children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-300 h-full flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-44 sm:h-52 bg-gradient-to-br from-primary-100 to-primary-200 rounded-t-2xl overflow-hidden\",children:[listing.image_url&&/*#__PURE__*/_jsx(OptimizedImage,{src:listing.image_url,alt:listing.name,className:\"w-full h-full object-cover border-0\"}),/*#__PURE__*/_jsx(\"div\",{className:`${listing.image_url?'hidden':'flex'} w-full h-full items-center justify-center text-base`,children:getCategoryEmoji(listing.category,listing.listing_type)}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 sm:top-3 left-2 sm:left-3\",children:/*#__PURE__*/_jsxs(\"span\",{className:`inline-flex items-center px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-xs font-medium font-montserrat ${listing.listing_type==='product'?'bg-[#E5F4F1] text-[#4A9A64]':listing.listing_type==='provider'?'bg-[#f0f4ff] text-[#3b82f6]':'bg-[#fef7f0] text-[#e06b1a]'}`,children:[/*#__PURE__*/_jsx(CategoryIcon,{category:listing.category,listingType:listing.listing_type}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 hidden sm:inline\",children:listing.listing_type==='product'?'Product':listing.listing_type==='provider'?'Provider':'Service'})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-2 sm:top-3 right-2 sm:right-3 flex items-center space-x-2\",children:[listing.verified&&/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-xs font-medium bg-[#E5F4F1] text-[#4A9A64] font-montserrat\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-3 h-3 mr-1\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\",clipRule:\"evenodd\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Verified\"})]}),/*#__PURE__*/_jsx(FavoriteButton,{listingId:listing.listing_id,listingType:listing.listing_type,size:\"sm\",className:\"z-10\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col p-3 sm:p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-2 font-montserrat group-hover:text-[#5EB47C] transition-colors min-w-0 line-clamp-2\",children:listing.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 mb-3 font-montserrat flex-1\",children:listing.listing_type==='provider'&&providerServices.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[providerServices.slice(0,3).map((service,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 \",service.title]}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"$\",service.price_from]})]},index)),((_providerServices$=providerServices[0])===null||_providerServices$===void 0?void 0:_providerServices$.totalCount)>3&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:[\"+ \",(((_providerServices$2=providerServices[0])===null||_providerServices$2===void 0?void 0:_providerServices$2.totalCount)||providerServices.length)-3,\" more services\"]})]}):listing.listing_type==='provider'&&servicesLoading?/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400\",children:\"Loading services...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"line-clamp-2\",children:listing.description})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-[#E5F4F1] rounded-full flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-[#5EB47C] font-medium text-sm font-montserrat\",children:((_listing$provider_nam=listing.provider_name)===null||_listing$provider_nam===void 0?void 0:_listing$provider_nam.charAt(0))||'P'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 font-montserrat truncate\",children:listing.provider_name||'Provider'}),listing.rating>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex text-yellow-400 mr-1\",children:[...Array(5)].map((_,i)=>/*#__PURE__*/_jsx(\"svg\",{className:\"w-3 h-3\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"})},i))}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500 font-montserrat\",children:[listing.rating,\" (\",listing.reviews_count,\")\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 min-w-0\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-bold text-gray-900 font-montserrat\",children:[getPriceRange(),listing.listing_type==='service'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-normal text-gray-500 ml-1\",children:\"per session\"}),listing.listing_type==='provider'&&providerServices.length>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs font-normal text-gray-500 ml-1\",children:[((_providerServices$3=providerServices[0])===null||_providerServices$3===void 0?void 0:_providerServices$3.totalCount)||providerServices.length,\" service\",(((_providerServices$4=providerServices[0])===null||_providerServices$4===void 0?void 0:_providerServices$4.totalCount)||providerServices.length)!==1?'s':'']})]})}),listing.city&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-500 ml-2 flex-shrink-0\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"w-3 h-3 mr-1\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"}),/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-montserrat truncate\",children:listing.city})]})]}),listing.listing_type==='product'&&listing.stock_quantity!==null&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium font-montserrat ${listing.stock_quantity>10?'bg-green-100 text-green-800':listing.stock_quantity>0?'bg-yellow-100 text-yellow-800':'bg-red-100 text-red-800'}`,children:listing.stock_quantity>10?'In Stock':listing.stock_quantity>0?`${listing.stock_quantity} left`:'Out of Stock'})})]})]})});});MarketplaceCard.displayName='MarketplaceCard';export default MarketplaceCard;","map":{"version":3,"names":["React","memo","useCallback","useState","useEffect","Link","FavoriteButton","supabase","jsx","_jsx","jsxs","_jsxs","CategoryIcon","_ref","category","listingType","className","fill","stroke","viewBox","children","strokeLinecap","strokeLinejoin","strokeWidth","d","icons","default","displayName","OptimizedImage","_ref2","src","alt","loading","decoding","onError","e","target","style","display","MarketplaceCard","_ref3","_providerServices$","_providerServices$2","_listing$provider_nam","_providerServices$3","_providerServices$4","listing","providerServices","setProviderServices","servicesLoading","setServicesLoading","handleScrollToTop","window","scrollTo","top","behavior","fetchProviderServices","listing_type","provider_email","provider_id","query","from","select","eq","not","order","ascending","data","providerData","single","email","console","log","name","services","error","allNonLuniServices","filter","service","service_type","includes","mobileServices","slice","length","otherServices","push","servicesWithCount","map","totalCount","getCategoryEmoji","emojis","getPriceRange","price","price_min","price_max","prices","parseFloat","price_from","minPrice","Math","min","maxPrice","max","to","encodeURIComponent","listing_id","onClick","image_url","verified","fillRule","clipRule","listingId","size","index","title","description","provider_name","charAt","rating","Array","_","i","reviews_count","city","stock_quantity"],"sources":["/workspace/src/components/MarketplaceCard.js"],"sourcesContent":["import React, { memo, useCallback, useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport FavoriteButton from './FavoriteButton';\nimport { supabase } from '../lib/supabase.js';\n\n// Memoized category icon component for better performance\nconst CategoryIcon = memo(({ category, listingType }) => {\n  if (listingType === 'product') {\n    return (\n      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\" />\n      </svg>\n    );\n  }\n\n  if (listingType === 'provider') {\n    return (\n      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n      </svg>\n    );\n  }\n\n  const icons = {\n    'Veterinary': (\n      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\" />\n      </svg>\n    ),\n    'Pet Grooming': (\n      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h1.5a1.5 1.5 0 011.5 1.5v1a1.5 1.5 0 01-1.5 1.5H9m0-5a1.5 1.5 0 011.5-1.5H12a1.5 1.5 0 011.5 1.5v1a1.5 1.5 0 01-1.5 1.5H10.5A1.5 1.5 0 019 11.5V10z\" />\n      </svg>\n    ),\n    'Pet Training': (\n      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\n      </svg>\n    ),\n    'Pet Breeding': (\n      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n      </svg>\n    ),\n    default: (\n      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\n      </svg>\n    )\n  };\n\n  return icons[category] || icons.default;\n});\n\nCategoryIcon.displayName = 'CategoryIcon';\n\n// Optimized image component with basic lazy loading\nconst OptimizedImage = memo(({ src, alt, className }) => {\n  if (!src) return null;\n\n  return (\n    <img\n      src={src}\n      alt={alt}\n      className={className}\n      loading=\"lazy\"\n      decoding=\"async\"\n      onError={(e) => {\n        e.target.style.display = 'none';\n      }}\n    />\n  );\n});\n\nOptimizedImage.displayName = 'OptimizedImage';\n\n// Memoized marketplace card component\nconst MarketplaceCard = memo(({ listing }) => {\n  const [providerServices, setProviderServices] = useState([]);\n  const [servicesLoading, setServicesLoading] = useState(false);\n\n  const handleScrollToTop = useCallback(() => {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }, []);\n\n  // Fetch services for provider listings\n  useEffect(() => {\n    const fetchProviderServices = async () => {\n      if (listing.listing_type !== 'provider' || (!listing.provider_email && !listing.provider_id)) return;\n      \n      setServicesLoading(true);\n      try {\n        let query = supabase\n          .from('marketplace_listings')\n          .select('listing_id, name, service_types, price, provider_email')\n          .eq('active', true)\n          .not('service_type', 'like', '%LuniTriage%') // Exclude LuniTriage services\n          .order('service_type', { ascending: true }) // Order by service_type to group Mobile services first\n\n        // Try provider_email first, then provider_id approach\n        if (listing.provider_email) {\n          query = query.eq('provider_email', listing.provider_email);\n        } else if (listing.provider_id) {\n          // Get provider email first, then use it to fetch services\n          const { data: providerData } = await supabase\n            .from('providers')\n            .select('email')\n            .eq('id', listing.provider_id)\n            .single();\n            \n          if (providerData?.email) {\n            query = query.eq('provider_email', providerData.email);\n          } else {\n            console.log('No provider email found for provider_id:', listing.provider_id);\n            setServicesLoading(false);\n            return;\n          }\n        } else {\n          console.log('No provider_email or provider_id found for listing:', listing.name);\n          setServicesLoading(false);\n          return;\n        }\n\n        const { data: services, error } = await query;\n\n        if (!error && services) {\n          // Store all services for count, but show top 3 for display\n          const allNonLuniServices = services.filter(service => \n            !service.service_type.includes('LuniTriage')\n          );\n          \n          // Prioritize Mobile services first for display\n          const mobileServices = services\n            .filter(service => \n              !service.service_type.includes('LuniTriage') &&\n              service.service_type.includes('Mobile')\n            )\n            .slice(0, 3);\n          \n          // If we don't have 3 mobile services, fill with other non-LuniTriage services\n          if (mobileServices.length < 3) {\n            const otherServices = services\n              .filter(service => \n                !service.service_type.includes('LuniTriage') &&\n                !service.service_type.includes('Mobile')\n              )\n              .slice(0, 3 - mobileServices.length);\n            mobileServices.push(...otherServices);\n          }\n          \n          // Add total count to the services for display\n          const servicesWithCount = mobileServices.map(service => ({\n            ...service,\n            totalCount: allNonLuniServices.length\n          }));\n          \n          console.log('Fetched services for provider:', listing.name);\n          console.log('Total non-LuniTriage services:', allNonLuniServices.length);\n          console.log('Top 3 services to display:', servicesWithCount);\n          setProviderServices(servicesWithCount);\n        } else if (error) {\n          console.error('Error fetching services for provider:', listing.name, error);\n        }\n      } catch (error) {\n        console.error('Error fetching provider services:', error);\n      } finally {\n        setServicesLoading(false);\n      }\n    };\n\n    fetchProviderServices();\n  }, [listing.listing_type, listing.provider_email, listing.provider_id]);\n\n  // Get fallback emoji for category\n  const getCategoryEmoji = useCallback((category, listingType) => {\n    if (listingType === 'product') return 'ðŸ“¦';\n    if (listingType === 'provider') return 'ðŸ‘©â€âš•ï¸';\n    \n    const emojis = {\n      'Veterinary': 'ðŸ¥',\n      'Pet Grooming': 'âœ‚ï¸',\n      'Pet Training': 'ðŸŽ“',\n      'Pet Breeding': 'ðŸ•',\n      'Nutritionists': 'ðŸ¥—',\n      'Holistic Care': 'ðŸŒ¿',\n      'vet_nurse': 'ðŸ‘©â€âš•ï¸'\n    };\n    \n    return emojis[category] || 'ðŸ¾';\n  }, []);\n\n  // Get price range for provider services\n  const getPriceRange = useCallback(() => {\n    if (listing.listing_type !== 'provider') {\n      return `$${listing.price || 0}`;\n    }\n\n    // For providers, use the pre-calculated price range\n    if (listing.price_min && listing.price_max) {\n      if (listing.price_min === listing.price_max) {\n        return `$${listing.price_min}`;\n      } else {\n        return `$${listing.price_min} - $${listing.price_max}`;\n      }\n    }\n\n    // Fallback to providerServices if available\n    if (providerServices.length > 0) {\n      const prices = providerServices.map(service => parseFloat(service.price_from));\n      const minPrice = Math.min(...prices);\n      const maxPrice = Math.max(...prices);\n\n      if (minPrice === maxPrice) {\n        return `$${minPrice}`;\n      } else {\n        return `$${minPrice} - $${maxPrice}`;\n      }\n    }\n\n    return `$${listing.price || 0}`;\n  }, [listing, providerServices]);\n\n  return (\n    <Link\n      to={listing.listing_type === 'provider' ? `/provider/${encodeURIComponent(listing.provider_email || listing.provider_id)}` : \n          listing.listing_type === 'service' ? `/provider/${encodeURIComponent(listing.provider_email || listing.provider_id)}` : \n          `/product/${listing.listing_id}`}\n      className=\"group h-full\"\n      onClick={handleScrollToTop}\n    >\n      <div className=\"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-300 h-full flex flex-col\">\n        {/* Listing Image */}\n        <div className=\"relative h-44 sm:h-52 bg-gradient-to-br from-primary-100 to-primary-200 rounded-t-2xl overflow-hidden\">\n          {listing.image_url && (\n            <OptimizedImage\n              src={listing.image_url}\n              alt={listing.name}\n              className=\"w-full h-full object-cover border-0\"\n            />\n          )}\n          <div className={`${listing.image_url ? 'hidden' : 'flex'} w-full h-full items-center justify-center text-base`}>\n            {getCategoryEmoji(listing.category, listing.listing_type)}\n          </div>\n          \n          {/* Listing Type Badge */}\n          <div className=\"absolute top-2 sm:top-3 left-2 sm:left-3\">\n            <span className={`inline-flex items-center px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-xs font-medium font-montserrat ${\n              listing.listing_type === 'product' \n                ? 'bg-[#E5F4F1] text-[#4A9A64]' \n                : listing.listing_type === 'provider'\n                ? 'bg-[#f0f4ff] text-[#3b82f6]'\n                : 'bg-[#fef7f0] text-[#e06b1a]'\n            }`}>\n              <CategoryIcon category={listing.category} listingType={listing.listing_type} />\n              <span className=\"ml-1 hidden sm:inline\">\n                {listing.listing_type === 'product' ? 'Product' : \n                 listing.listing_type === 'provider' ? 'Provider' : 'Service'}\n              </span>\n            </span>\n          </div>\n\n          {/* Top right badges and favorite button */}\n          <div className=\"absolute top-2 sm:top-3 right-2 sm:right-3 flex items-center space-x-2\">\n            {/* Verified Badge */}\n            {listing.verified && (\n              <span className=\"inline-flex items-center px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full text-xs font-medium bg-[#E5F4F1] text-[#4A9A64] font-montserrat\">\n                <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                </svg>\n                <span className=\"hidden sm:inline\">Verified</span>\n              </span>\n            )}\n            \n            {/* Favorite Button */}\n            <FavoriteButton\n              listingId={listing.listing_id}\n              listingType={listing.listing_type}\n              size=\"sm\"\n              className=\"z-10\"\n            />\n          </div>\n        </div>\n\n        {/* Listing Content */}\n        <div className=\"flex-1 flex flex-col p-3 sm:p-4\">\n          <h3 className=\"font-semibold text-gray-900 mb-2 font-montserrat group-hover:text-[#5EB47C] transition-colors min-w-0 line-clamp-2\">\n            {listing.name}\n          </h3>\n          \n          {/* Description - Show services for providers */}\n          <div className=\"text-sm text-gray-600 mb-3 font-montserrat flex-1\">\n            {listing.listing_type === 'provider' && providerServices.length > 0 ? (\n              <div className=\"space-y-1\">\n                {providerServices.slice(0, 3).map((service, index) => (\n                  <div key={index} className=\"flex justify-between items-center\">\n                    <span>â€¢ {service.title}</span>\n                    <span className=\"font-medium\">${service.price_from}</span>\n                  </div>\n                ))}\n                {providerServices[0]?.totalCount > 3 && (\n                  <div className=\"text-xs text-gray-500 mt-1\">\n                    + {(providerServices[0]?.totalCount || providerServices.length) - 3} more services\n                  </div>\n                )}\n              </div>\n            ) : listing.listing_type === 'provider' && servicesLoading ? (\n              <div className=\"text-xs text-gray-400\">Loading services...</div>\n            ) : (\n              <div className=\"line-clamp-2\">{listing.description}</div>\n            )}\n          </div>\n\n          {/* Provider Info */}\n          <div className=\"flex items-center mb-3\">\n            <div className=\"w-8 h-8 bg-[#E5F4F1] rounded-full flex items-center justify-center mr-3\">\n              <span className=\"text-[#5EB47C] font-medium text-sm font-montserrat\">\n                {listing.provider_name?.charAt(0) || 'P'}\n              </span>\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm font-medium text-gray-900 font-montserrat truncate\">\n                {listing.provider_name || 'Provider'}\n              </p>\n              {listing.rating > 0 && (\n                <div className=\"flex items-center\">\n                  <div className=\"flex text-yellow-400 mr-1\">\n                    {[...Array(5)].map((_, i) => (\n                      <svg key={i} className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                      </svg>\n                    ))}\n                  </div>\n                  <span className=\"text-xs text-gray-500 font-montserrat\">\n                    {listing.rating} ({listing.reviews_count})\n                  </span>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Price and Location */}\n          <div className=\"flex items-center justify-between mt-auto\">\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-lg font-bold text-gray-900 font-montserrat\">\n                {getPriceRange()}\n                {listing.listing_type === 'service' && (\n                  <span className=\"text-xs font-normal text-gray-500 ml-1\">per session</span>\n                )}\n                {listing.listing_type === 'provider' && providerServices.length > 0 && (\n                  <span className=\"text-xs font-normal text-gray-500 ml-1\">\n                    {providerServices[0]?.totalCount || providerServices.length} service{(providerServices[0]?.totalCount || providerServices.length) !== 1 ? 's' : ''}\n                  </span>\n                )}\n              </p>\n            </div>\n            {listing.city && (\n              <div className=\"flex items-center text-gray-500 ml-2 flex-shrink-0\">\n                <svg className=\"w-3 h-3 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\n                </svg>\n                <span className=\"text-xs font-montserrat truncate\">{listing.city}</span>\n              </div>\n            )}\n          </div>\n\n          {/* Stock for products */}\n          {listing.listing_type === 'product' && listing.stock_quantity !== null && (\n            <div className=\"mt-2\">\n              <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium font-montserrat ${\n                listing.stock_quantity > 10 \n                  ? 'bg-green-100 text-green-800' \n                  : listing.stock_quantity > 0 \n                  ? 'bg-yellow-100 text-yellow-800'\n                  : 'bg-red-100 text-red-800'\n              }`}>\n                {listing.stock_quantity > 10 ? 'In Stock' : \n                 listing.stock_quantity > 0 ? `${listing.stock_quantity} left` : 'Out of Stock'}\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n    </Link>\n  );\n});\n\nMarketplaceCard.displayName = 'MarketplaceCard';\n\nexport default MarketplaceCard;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,IAAI,CAAEC,WAAW,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACrE,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,OAASC,QAAQ,KAAQ,oBAAoB,CAE7C;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,YAAY,cAAGX,IAAI,CAACY,IAAA,EAA+B,IAA9B,CAAEC,QAAQ,CAAEC,WAAY,CAAC,CAAAF,IAAA,CAClD,GAAIE,WAAW,GAAK,SAAS,CAAE,CAC7B,mBACEN,IAAA,QAAKO,SAAS,CAAC,SAAS,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAC,QAAA,cAC5EX,IAAA,SAAMY,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAC,GAAG,CAACC,CAAC,CAAC,4CAA4C,CAAE,CAAC,CACjH,CAAC,CAEV,CAEA,GAAIT,WAAW,GAAK,UAAU,CAAE,CAC9B,mBACEN,IAAA,QAAKO,SAAS,CAAC,SAAS,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAC,QAAA,cAC5EX,IAAA,SAAMY,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAC,GAAG,CAACC,CAAC,CAAC,qEAAqE,CAAE,CAAC,CAC1I,CAAC,CAEV,CAEA,KAAM,CAAAC,KAAK,CAAG,CACZ,YAAY,cACVhB,IAAA,QAAKO,SAAS,CAAC,SAAS,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAC,QAAA,cAC5EX,IAAA,SAAMY,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAC,GAAG,CAACC,CAAC,CAAC,6HAA6H,CAAE,CAAC,CAClM,CACN,CACD,cAAc,cACZf,IAAA,QAAKO,SAAS,CAAC,SAAS,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAC,QAAA,cAC5EX,IAAA,SAAMY,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAC,GAAG,CAACC,CAAC,CAAC,yLAAyL,CAAE,CAAC,CAC9P,CACN,CACD,cAAc,cACZf,IAAA,QAAKO,SAAS,CAAC,SAAS,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAC,QAAA,cAC5EX,IAAA,SAAMY,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAC,GAAG,CAACC,CAAC,CAAC,oPAAoP,CAAE,CAAC,CACzT,CACN,CACD,cAAc,cACZf,IAAA,QAAKO,SAAS,CAAC,SAAS,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAC,QAAA,cAC5EX,IAAA,SAAMY,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAC,GAAG,CAACC,CAAC,CAAC,wQAAwQ,CAAE,CAAC,CAC7U,CACN,CACDE,OAAO,cACLjB,IAAA,QAAKO,SAAS,CAAC,SAAS,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAC,QAAA,cAC5EX,IAAA,SAAMY,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAC,GAAG,CAACC,CAAC,CAAC,2IAA2I,CAAE,CAAC,CAChN,CAET,CAAC,CAED,MAAO,CAAAC,KAAK,CAACX,QAAQ,CAAC,EAAIW,KAAK,CAACC,OAAO,CACzC,CAAC,CAAC,CAEFd,YAAY,CAACe,WAAW,CAAG,cAAc,CAEzC;AACA,KAAM,CAAAC,cAAc,cAAG3B,IAAI,CAAC4B,KAAA,EAA6B,IAA5B,CAAEC,GAAG,CAAEC,GAAG,CAAEf,SAAU,CAAC,CAAAa,KAAA,CAClD,GAAI,CAACC,GAAG,CAAE,MAAO,KAAI,CAErB,mBACErB,IAAA,QACEqB,GAAG,CAAEA,GAAI,CACTC,GAAG,CAAEA,GAAI,CACTf,SAAS,CAAEA,SAAU,CACrBgB,OAAO,CAAC,MAAM,CACdC,QAAQ,CAAC,OAAO,CAChBC,OAAO,CAAGC,CAAC,EAAK,CACdA,CAAC,CAACC,MAAM,CAACC,KAAK,CAACC,OAAO,CAAG,MAAM,CACjC,CAAE,CACH,CAAC,CAEN,CAAC,CAAC,CAEFV,cAAc,CAACD,WAAW,CAAG,gBAAgB,CAE7C;AACA,KAAM,CAAAY,eAAe,cAAGtC,IAAI,CAACuC,KAAA,EAAiB,KAAAC,kBAAA,CAAAC,mBAAA,CAAAC,qBAAA,CAAAC,mBAAA,CAAAC,mBAAA,IAAhB,CAAEC,OAAQ,CAAC,CAAAN,KAAA,CACvC,KAAM,CAACO,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG7C,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAAC8C,eAAe,CAAEC,kBAAkB,CAAC,CAAG/C,QAAQ,CAAC,KAAK,CAAC,CAE7D,KAAM,CAAAgD,iBAAiB,CAAGjD,WAAW,CAAC,IAAM,CAC1CkD,MAAM,CAACC,QAAQ,CAAC,CAAEC,GAAG,CAAE,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CACjD,CAAC,CAAE,EAAE,CAAC,CAEN;AACAnD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoD,qBAAqB,CAAG,KAAAA,CAAA,GAAY,CACxC,GAAIV,OAAO,CAACW,YAAY,GAAK,UAAU,EAAK,CAACX,OAAO,CAACY,cAAc,EAAI,CAACZ,OAAO,CAACa,WAAY,CAAE,OAE9FT,kBAAkB,CAAC,IAAI,CAAC,CACxB,GAAI,CACF,GAAI,CAAAU,KAAK,CAAGrD,QAAQ,CACjBsD,IAAI,CAAC,sBAAsB,CAAC,CAC5BC,MAAM,CAAC,wDAAwD,CAAC,CAChEC,EAAE,CAAC,QAAQ,CAAE,IAAI,CAAC,CAClBC,GAAG,CAAC,cAAc,CAAE,MAAM,CAAE,cAAc,CAAE;AAAA,CAC5CC,KAAK,CAAC,cAAc,CAAE,CAAEC,SAAS,CAAE,IAAK,CAAC,CAAC,CAAC;AAE9C;AACA,GAAIpB,OAAO,CAACY,cAAc,CAAE,CAC1BE,KAAK,CAAGA,KAAK,CAACG,EAAE,CAAC,gBAAgB,CAAEjB,OAAO,CAACY,cAAc,CAAC,CAC5D,CAAC,IAAM,IAAIZ,OAAO,CAACa,WAAW,CAAE,CAC9B;AACA,KAAM,CAAEQ,IAAI,CAAEC,YAAa,CAAC,CAAG,KAAM,CAAA7D,QAAQ,CAC1CsD,IAAI,CAAC,WAAW,CAAC,CACjBC,MAAM,CAAC,OAAO,CAAC,CACfC,EAAE,CAAC,IAAI,CAAEjB,OAAO,CAACa,WAAW,CAAC,CAC7BU,MAAM,CAAC,CAAC,CAEX,GAAID,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAEE,KAAK,CAAE,CACvBV,KAAK,CAAGA,KAAK,CAACG,EAAE,CAAC,gBAAgB,CAAEK,YAAY,CAACE,KAAK,CAAC,CACxD,CAAC,IAAM,CACLC,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAE1B,OAAO,CAACa,WAAW,CAAC,CAC5ET,kBAAkB,CAAC,KAAK,CAAC,CACzB,OACF,CACF,CAAC,IAAM,CACLqB,OAAO,CAACC,GAAG,CAAC,qDAAqD,CAAE1B,OAAO,CAAC2B,IAAI,CAAC,CAChFvB,kBAAkB,CAAC,KAAK,CAAC,CACzB,OACF,CAEA,KAAM,CAAEiB,IAAI,CAAEO,QAAQ,CAAEC,KAAM,CAAC,CAAG,KAAM,CAAAf,KAAK,CAE7C,GAAI,CAACe,KAAK,EAAID,QAAQ,CAAE,CACtB;AACA,KAAM,CAAAE,kBAAkB,CAAGF,QAAQ,CAACG,MAAM,CAACC,OAAO,EAChD,CAACA,OAAO,CAACC,YAAY,CAACC,QAAQ,CAAC,YAAY,CAC7C,CAAC,CAED;AACA,KAAM,CAAAC,cAAc,CAAGP,QAAQ,CAC5BG,MAAM,CAACC,OAAO,EACb,CAACA,OAAO,CAACC,YAAY,CAACC,QAAQ,CAAC,YAAY,CAAC,EAC5CF,OAAO,CAACC,YAAY,CAACC,QAAQ,CAAC,QAAQ,CACxC,CAAC,CACAE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAEd;AACA,GAAID,cAAc,CAACE,MAAM,CAAG,CAAC,CAAE,CAC7B,KAAM,CAAAC,aAAa,CAAGV,QAAQ,CAC3BG,MAAM,CAACC,OAAO,EACb,CAACA,OAAO,CAACC,YAAY,CAACC,QAAQ,CAAC,YAAY,CAAC,EAC5C,CAACF,OAAO,CAACC,YAAY,CAACC,QAAQ,CAAC,QAAQ,CACzC,CAAC,CACAE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAGD,cAAc,CAACE,MAAM,CAAC,CACtCF,cAAc,CAACI,IAAI,CAAC,GAAGD,aAAa,CAAC,CACvC,CAEA;AACA,KAAM,CAAAE,iBAAiB,CAAGL,cAAc,CAACM,GAAG,CAACT,OAAO,GAAK,CACvD,GAAGA,OAAO,CACVU,UAAU,CAAEZ,kBAAkB,CAACO,MACjC,CAAC,CAAC,CAAC,CAEHZ,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAE1B,OAAO,CAAC2B,IAAI,CAAC,CAC3DF,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAEI,kBAAkB,CAACO,MAAM,CAAC,CACxEZ,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAEc,iBAAiB,CAAC,CAC5DtC,mBAAmB,CAACsC,iBAAiB,CAAC,CACxC,CAAC,IAAM,IAAIX,KAAK,CAAE,CAChBJ,OAAO,CAACI,KAAK,CAAC,uCAAuC,CAAE7B,OAAO,CAAC2B,IAAI,CAAEE,KAAK,CAAC,CAC7E,CACF,CAAE,MAAOA,KAAK,CAAE,CACdJ,OAAO,CAACI,KAAK,CAAC,mCAAmC,CAAEA,KAAK,CAAC,CAC3D,CAAC,OAAS,CACRzB,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACF,CAAC,CAEDM,qBAAqB,CAAC,CAAC,CACzB,CAAC,CAAE,CAACV,OAAO,CAACW,YAAY,CAAEX,OAAO,CAACY,cAAc,CAAEZ,OAAO,CAACa,WAAW,CAAC,CAAC,CAEvE;AACA,KAAM,CAAA8B,gBAAgB,CAAGvF,WAAW,CAAC,CAACY,QAAQ,CAAEC,WAAW,GAAK,CAC9D,GAAIA,WAAW,GAAK,SAAS,CAAE,MAAO,IAAI,CAC1C,GAAIA,WAAW,GAAK,UAAU,CAAE,MAAO,OAAO,CAE9C,KAAM,CAAA2E,MAAM,CAAG,CACb,YAAY,CAAE,IAAI,CAClB,cAAc,CAAE,IAAI,CACpB,cAAc,CAAE,IAAI,CACpB,cAAc,CAAE,IAAI,CACpB,eAAe,CAAE,IAAI,CACrB,eAAe,CAAE,IAAI,CACrB,WAAW,CAAE,OACf,CAAC,CAED,MAAO,CAAAA,MAAM,CAAC5E,QAAQ,CAAC,EAAI,IAAI,CACjC,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAA6E,aAAa,CAAGzF,WAAW,CAAC,IAAM,CACtC,GAAI4C,OAAO,CAACW,YAAY,GAAK,UAAU,CAAE,CACvC,MAAO,IAAIX,OAAO,CAAC8C,KAAK,EAAI,CAAC,EAAE,CACjC,CAEA;AACA,GAAI9C,OAAO,CAAC+C,SAAS,EAAI/C,OAAO,CAACgD,SAAS,CAAE,CAC1C,GAAIhD,OAAO,CAAC+C,SAAS,GAAK/C,OAAO,CAACgD,SAAS,CAAE,CAC3C,MAAO,IAAIhD,OAAO,CAAC+C,SAAS,EAAE,CAChC,CAAC,IAAM,CACL,MAAO,IAAI/C,OAAO,CAAC+C,SAAS,OAAO/C,OAAO,CAACgD,SAAS,EAAE,CACxD,CACF,CAEA;AACA,GAAI/C,gBAAgB,CAACoC,MAAM,CAAG,CAAC,CAAE,CAC/B,KAAM,CAAAY,MAAM,CAAGhD,gBAAgB,CAACwC,GAAG,CAACT,OAAO,EAAIkB,UAAU,CAAClB,OAAO,CAACmB,UAAU,CAAC,CAAC,CAC9E,KAAM,CAAAC,QAAQ,CAAGC,IAAI,CAACC,GAAG,CAAC,GAAGL,MAAM,CAAC,CACpC,KAAM,CAAAM,QAAQ,CAAGF,IAAI,CAACG,GAAG,CAAC,GAAGP,MAAM,CAAC,CAEpC,GAAIG,QAAQ,GAAKG,QAAQ,CAAE,CACzB,MAAO,IAAIH,QAAQ,EAAE,CACvB,CAAC,IAAM,CACL,MAAO,IAAIA,QAAQ,OAAOG,QAAQ,EAAE,CACtC,CACF,CAEA,MAAO,IAAIvD,OAAO,CAAC8C,KAAK,EAAI,CAAC,EAAE,CACjC,CAAC,CAAE,CAAC9C,OAAO,CAAEC,gBAAgB,CAAC,CAAC,CAE/B,mBACEtC,IAAA,CAACJ,IAAI,EACHkG,EAAE,CAAEzD,OAAO,CAACW,YAAY,GAAK,UAAU,CAAG,aAAa+C,kBAAkB,CAAC1D,OAAO,CAACY,cAAc,EAAIZ,OAAO,CAACa,WAAW,CAAC,EAAE,CACtHb,OAAO,CAACW,YAAY,GAAK,SAAS,CAAG,aAAa+C,kBAAkB,CAAC1D,OAAO,CAACY,cAAc,EAAIZ,OAAO,CAACa,WAAW,CAAC,EAAE,CACrH,YAAYb,OAAO,CAAC2D,UAAU,EAAG,CACrCzF,SAAS,CAAC,cAAc,CACxB0F,OAAO,CAAEvD,iBAAkB,CAAA/B,QAAA,cAE3BT,KAAA,QAAKK,SAAS,CAAC,2IAA2I,CAAAI,QAAA,eAExJT,KAAA,QAAKK,SAAS,CAAC,uGAAuG,CAAAI,QAAA,EACnH0B,OAAO,CAAC6D,SAAS,eAChBlG,IAAA,CAACmB,cAAc,EACbE,GAAG,CAAEgB,OAAO,CAAC6D,SAAU,CACvB5E,GAAG,CAAEe,OAAO,CAAC2B,IAAK,CAClBzD,SAAS,CAAC,qCAAqC,CAChD,CACF,cACDP,IAAA,QAAKO,SAAS,CAAE,GAAG8B,OAAO,CAAC6D,SAAS,CAAG,QAAQ,CAAG,MAAM,sDAAuD,CAAAvF,QAAA,CAC5GqE,gBAAgB,CAAC3C,OAAO,CAAChC,QAAQ,CAAEgC,OAAO,CAACW,YAAY,CAAC,CACtD,CAAC,cAGNhD,IAAA,QAAKO,SAAS,CAAC,0CAA0C,CAAAI,QAAA,cACvDT,KAAA,SAAMK,SAAS,CAAE,2GACf8B,OAAO,CAACW,YAAY,GAAK,SAAS,CAC9B,6BAA6B,CAC7BX,OAAO,CAACW,YAAY,GAAK,UAAU,CACnC,6BAA6B,CAC7B,6BAA6B,EAChC,CAAArC,QAAA,eACDX,IAAA,CAACG,YAAY,EAACE,QAAQ,CAAEgC,OAAO,CAAChC,QAAS,CAACC,WAAW,CAAE+B,OAAO,CAACW,YAAa,CAAE,CAAC,cAC/EhD,IAAA,SAAMO,SAAS,CAAC,uBAAuB,CAAAI,QAAA,CACpC0B,OAAO,CAACW,YAAY,GAAK,SAAS,CAAG,SAAS,CAC9CX,OAAO,CAACW,YAAY,GAAK,UAAU,CAAG,UAAU,CAAG,SAAS,CACzD,CAAC,EACH,CAAC,CACJ,CAAC,cAGN9C,KAAA,QAAKK,SAAS,CAAC,wEAAwE,CAAAI,QAAA,EAEpF0B,OAAO,CAAC8D,QAAQ,eACfjG,KAAA,SAAMK,SAAS,CAAC,qIAAqI,CAAAI,QAAA,eACnJX,IAAA,QAAKO,SAAS,CAAC,cAAc,CAACC,IAAI,CAAC,cAAc,CAACE,OAAO,CAAC,WAAW,CAAAC,QAAA,cACnEX,IAAA,SAAMoG,QAAQ,CAAC,SAAS,CAACrF,CAAC,CAAC,uIAAuI,CAACsF,QAAQ,CAAC,SAAS,CAAE,CAAC,CACrL,CAAC,cACNrG,IAAA,SAAMO,SAAS,CAAC,kBAAkB,CAAAI,QAAA,CAAC,UAAQ,CAAM,CAAC,EAC9C,CACP,cAGDX,IAAA,CAACH,cAAc,EACbyG,SAAS,CAAEjE,OAAO,CAAC2D,UAAW,CAC9B1F,WAAW,CAAE+B,OAAO,CAACW,YAAa,CAClCuD,IAAI,CAAC,IAAI,CACThG,SAAS,CAAC,MAAM,CACjB,CAAC,EACC,CAAC,EACH,CAAC,cAGNL,KAAA,QAAKK,SAAS,CAAC,iCAAiC,CAAAI,QAAA,eAC9CX,IAAA,OAAIO,SAAS,CAAC,oHAAoH,CAAAI,QAAA,CAC/H0B,OAAO,CAAC2B,IAAI,CACX,CAAC,cAGLhE,IAAA,QAAKO,SAAS,CAAC,mDAAmD,CAAAI,QAAA,CAC/D0B,OAAO,CAACW,YAAY,GAAK,UAAU,EAAIV,gBAAgB,CAACoC,MAAM,CAAG,CAAC,cACjExE,KAAA,QAAKK,SAAS,CAAC,WAAW,CAAAI,QAAA,EACvB2B,gBAAgB,CAACmC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAACK,GAAG,CAAC,CAACT,OAAO,CAAEmC,KAAK,gBAC/CtG,KAAA,QAAiBK,SAAS,CAAC,mCAAmC,CAAAI,QAAA,eAC5DT,KAAA,SAAAS,QAAA,EAAM,SAAE,CAAC0D,OAAO,CAACoC,KAAK,EAAO,CAAC,cAC9BvG,KAAA,SAAMK,SAAS,CAAC,aAAa,CAAAI,QAAA,EAAC,GAAC,CAAC0D,OAAO,CAACmB,UAAU,EAAO,CAAC,GAFlDgB,KAGL,CACN,CAAC,CACD,EAAAxE,kBAAA,CAAAM,gBAAgB,CAAC,CAAC,CAAC,UAAAN,kBAAA,iBAAnBA,kBAAA,CAAqB+C,UAAU,EAAG,CAAC,eAClC7E,KAAA,QAAKK,SAAS,CAAC,4BAA4B,CAAAI,QAAA,EAAC,IACxC,CAAC,CAAC,EAAAsB,mBAAA,CAAAK,gBAAgB,CAAC,CAAC,CAAC,UAAAL,mBAAA,iBAAnBA,mBAAA,CAAqB8C,UAAU,GAAIzC,gBAAgB,CAACoC,MAAM,EAAI,CAAC,CAAC,gBACtE,EAAK,CACN,EACE,CAAC,CACJrC,OAAO,CAACW,YAAY,GAAK,UAAU,EAAIR,eAAe,cACxDxC,IAAA,QAAKO,SAAS,CAAC,uBAAuB,CAAAI,QAAA,CAAC,qBAAmB,CAAK,CAAC,cAEhEX,IAAA,QAAKO,SAAS,CAAC,cAAc,CAAAI,QAAA,CAAE0B,OAAO,CAACqE,WAAW,CAAM,CACzD,CACE,CAAC,cAGNxG,KAAA,QAAKK,SAAS,CAAC,wBAAwB,CAAAI,QAAA,eACrCX,IAAA,QAAKO,SAAS,CAAC,yEAAyE,CAAAI,QAAA,cACtFX,IAAA,SAAMO,SAAS,CAAC,oDAAoD,CAAAI,QAAA,CACjE,EAAAuB,qBAAA,CAAAG,OAAO,CAACsE,aAAa,UAAAzE,qBAAA,iBAArBA,qBAAA,CAAuB0E,MAAM,CAAC,CAAC,CAAC,GAAI,GAAG,CACpC,CAAC,CACJ,CAAC,cACN1G,KAAA,QAAKK,SAAS,CAAC,gBAAgB,CAAAI,QAAA,eAC7BX,IAAA,MAAGO,SAAS,CAAC,4DAA4D,CAAAI,QAAA,CACtE0B,OAAO,CAACsE,aAAa,EAAI,UAAU,CACnC,CAAC,CACHtE,OAAO,CAACwE,MAAM,CAAG,CAAC,eACjB3G,KAAA,QAAKK,SAAS,CAAC,mBAAmB,CAAAI,QAAA,eAChCX,IAAA,QAAKO,SAAS,CAAC,2BAA2B,CAAAI,QAAA,CACvC,CAAC,GAAGmG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAChC,GAAG,CAAC,CAACiC,CAAC,CAAEC,CAAC,gBACtBhH,IAAA,QAAaO,SAAS,CAAC,SAAS,CAACC,IAAI,CAAC,cAAc,CAACE,OAAO,CAAC,WAAW,CAAAC,QAAA,cACtEX,IAAA,SAAMe,CAAC,CAAC,0VAA0V,CAAE,CAAC,EAD7ViG,CAEL,CACN,CAAC,CACC,CAAC,cACN9G,KAAA,SAAMK,SAAS,CAAC,uCAAuC,CAAAI,QAAA,EACpD0B,OAAO,CAACwE,MAAM,CAAC,IAAE,CAACxE,OAAO,CAAC4E,aAAa,CAAC,GAC3C,EAAM,CAAC,EACJ,CACN,EACE,CAAC,EACH,CAAC,cAGN/G,KAAA,QAAKK,SAAS,CAAC,2CAA2C,CAAAI,QAAA,eACxDX,IAAA,QAAKO,SAAS,CAAC,gBAAgB,CAAAI,QAAA,cAC7BT,KAAA,MAAGK,SAAS,CAAC,iDAAiD,CAAAI,QAAA,EAC3DuE,aAAa,CAAC,CAAC,CACf7C,OAAO,CAACW,YAAY,GAAK,SAAS,eACjChD,IAAA,SAAMO,SAAS,CAAC,wCAAwC,CAAAI,QAAA,CAAC,aAAW,CAAM,CAC3E,CACA0B,OAAO,CAACW,YAAY,GAAK,UAAU,EAAIV,gBAAgB,CAACoC,MAAM,CAAG,CAAC,eACjExE,KAAA,SAAMK,SAAS,CAAC,wCAAwC,CAAAI,QAAA,EACrD,EAAAwB,mBAAA,CAAAG,gBAAgB,CAAC,CAAC,CAAC,UAAAH,mBAAA,iBAAnBA,mBAAA,CAAqB4C,UAAU,GAAIzC,gBAAgB,CAACoC,MAAM,CAAC,UAAQ,CAAC,CAAC,EAAAtC,mBAAA,CAAAE,gBAAgB,CAAC,CAAC,CAAC,UAAAF,mBAAA,iBAAnBA,mBAAA,CAAqB2C,UAAU,GAAIzC,gBAAgB,CAACoC,MAAM,IAAM,CAAC,CAAG,GAAG,CAAG,EAAE,EAC9I,CACP,EACA,CAAC,CACD,CAAC,CACLrC,OAAO,CAAC6E,IAAI,eACXhH,KAAA,QAAKK,SAAS,CAAC,oDAAoD,CAAAI,QAAA,eACjET,KAAA,QAAKK,SAAS,CAAC,cAAc,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAC,QAAA,eACjFX,IAAA,SAAMY,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAC,GAAG,CAACC,CAAC,CAAC,oFAAoF,CAAE,CAAC,cAC5Jf,IAAA,SAAMY,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAC,GAAG,CAACC,CAAC,CAAC,kCAAkC,CAAE,CAAC,EACvG,CAAC,cACNf,IAAA,SAAMO,SAAS,CAAC,kCAAkC,CAAAI,QAAA,CAAE0B,OAAO,CAAC6E,IAAI,CAAO,CAAC,EACrE,CACN,EACE,CAAC,CAGL7E,OAAO,CAACW,YAAY,GAAK,SAAS,EAAIX,OAAO,CAAC8E,cAAc,GAAK,IAAI,eACpEnH,IAAA,QAAKO,SAAS,CAAC,MAAM,CAAAI,QAAA,cACnBX,IAAA,SAAMO,SAAS,CAAE,uFACf8B,OAAO,CAAC8E,cAAc,CAAG,EAAE,CACvB,6BAA6B,CAC7B9E,OAAO,CAAC8E,cAAc,CAAG,CAAC,CAC1B,+BAA+B,CAC/B,yBAAyB,EAC5B,CAAAxG,QAAA,CACA0B,OAAO,CAAC8E,cAAc,CAAG,EAAE,CAAG,UAAU,CACxC9E,OAAO,CAAC8E,cAAc,CAAG,CAAC,CAAG,GAAG9E,OAAO,CAAC8E,cAAc,OAAO,CAAG,cAAc,CAC3E,CAAC,CACJ,CACN,EACE,CAAC,EACH,CAAC,CACF,CAAC,CAEX,CAAC,CAAC,CAEFrF,eAAe,CAACZ,WAAW,CAAG,iBAAiB,CAE/C,cAAe,CAAAY,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}