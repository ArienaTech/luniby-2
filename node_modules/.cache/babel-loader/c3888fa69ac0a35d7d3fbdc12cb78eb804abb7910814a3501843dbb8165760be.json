{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{supabase}from'../lib/supabase.js';import{productService}from'../services/productService.js';// Pet Business components matching other professional dashboards but focused on products\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BusinessOverview=_ref=>{var _profile$full_name,_user$email;let{user,profile}=_ref;const[stats,setStats]=useState({monthlyRevenue:0,activeCustomers:0,productsInStock:0,ordersThisMonth:0});const[loading,setLoading]=useState(true);useEffect(()=>{loadBusinessStats();},[user]);const loadBusinessStats=async()=>{if(!(user!==null&&user!==void 0&&user.id)){setLoading(false);return;}try{const{data,error}=await productService.getBusinessStats(user.id);if(error){console.error('Error loading business stats:',error);// Use default values if error\nsetStats({monthlyRevenue:0,activeCustomers:0,productsInStock:0,ordersThisMonth:0});}else{setStats({monthlyRevenue:Math.round(data.totalStockValue*0.1),// Estimate 10% of inventory value as monthly revenue\nactiveCustomers:Math.floor(data.totalProducts*2.5),// Estimate customers based on product count\nproductsInStock:data.totalProducts,ordersThisMonth:Math.floor(data.totalProducts*0.3)// Estimate orders\n});}}catch(error){console.error('Error in loadBusinessStats:',error);setStats({monthlyRevenue:0,activeCustomers:0,productsInStock:0,ordersThisMonth:0});}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5EB47C] mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading dashboard...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg border\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold mb-2 text-gray-900\",children:[\"Welcome back, \",(profile===null||profile===void 0?void 0:(_profile$full_name=profile.full_name)===null||_profile$full_name===void 0?void 0:_profile$full_name.split(' ')[0])||(user===null||user===void 0?void 0:(_user$email=user.email)===null||_user$email===void 0?void 0:_user$email.split('@')[0])||'Business Owner']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"You have \",stats.ordersThisMonth,\" orders this month and \",stats.productsInStock,\" products in your catalog.\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-4 sm:p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 p-3 sm:p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600 text-xs sm:text-sm font-medium\",children:\"Monthly Revenue\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl sm:text-2xl font-bold text-blue-900\",children:[\"$\",stats.monthlyRevenue.toLocaleString()]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 sm:w-8 sm:h-8 text-blue-600\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg sm:text-xl\",children:\"\\uD83D\\uDCB0\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 p-3 sm:p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 text-xs sm:text-sm font-medium\",children:\"Active Customers\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl sm:text-2xl font-bold text-green-900\",children:stats.activeCustomers})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 sm:w-8 sm:h-8 text-green-600\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg sm:text-xl\",children:\"\\uD83D\\uDC65\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-50 p-3 sm:p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-600 text-xs sm:text-sm font-medium\",children:\"Products in Stock\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl sm:text-2xl font-bold text-purple-900\",children:stats.productsInStock})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 sm:w-8 sm:h-8 text-purple-600\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg sm:text-xl\",children:\"\\uD83D\\uDCE6\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-orange-50 p-3 sm:p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-orange-600 text-xs sm:text-sm font-medium\",children:\"Orders This Month\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl sm:text-2xl font-bold text-orange-900\",children:stats.ordersThisMonth})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 sm:w-8 sm:h-8 text-orange-600\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg sm:text-xl\",children:\"\\uD83D\\uDCCA\"})})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(RecentOrdersWidget,{user:user}),/*#__PURE__*/_jsx(TopProductsWidget,{user:user})]})]});};const RecentOrdersWidget=_ref2=>{let{user}=_ref2;const[recentOrders,setRecentOrders]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{loadRecentOrders();},[user]);const loadRecentOrders=async()=>{if(!(user!==null&&user!==void 0&&user.id)){setLoading(false);return;}try{// For now, we'll show empty state since orders table isn't implemented yet\n// In the future, this would fetch from an orders table\nsetRecentOrders([]);}catch(error){console.error('Error loading recent orders:',error);setRecentOrders([]);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Recent Orders\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-6 w-6 border-b-2 border-[#5EB47C] mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600\",children:\"Loading...\"})]}):recentOrders.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-4xl mb-4\",children:\"\\uD83D\\uDCE6\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No orders yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Orders will appear here once customers start purchasing your products\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:recentOrders.map(order=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600 font-semibold text-sm\",children:\"#\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900\",children:[\"Order #\",order.id,\" - \",order.customer_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[order.items,\" \\u2022 $\",order.total]}),/*#__PURE__*/_jsx(\"span\",{className:`inline-block px-2 py-1 text-xs rounded-full mt-1 ${order.status==='shipped'?'bg-green-100 text-green-800':order.status==='processing'?'bg-yellow-100 text-yellow-800':'bg-blue-100 text-blue-800'}`,children:order.status.charAt(0).toUpperCase()+order.status.slice(1)})]})]},order.id))})})]});};const TopProductsWidget=_ref3=>{let{user}=_ref3;const[topProducts,setTopProducts]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{loadTopProducts();},[user]);const loadTopProducts=async()=>{if(!(user!==null&&user!==void 0&&user.id)){setLoading(false);return;}try{const{data,error}=await productService.getProducts(user.id);if(error){console.error('Error loading top products:',error);setTopProducts([]);}else{// Sort by stock quantity descending to show most stocked items as \"top selling\"\nconst sortedProducts=data.sort((a,b)=>b.stock_quantity-a.stock_quantity).slice(0,3);setTopProducts(sortedProducts);}}catch(error){console.error('Error in loadTopProducts:',error);setTopProducts([]);}finally{setLoading(false);}};const getProductEmoji=category=>{switch(category){case'Food':return'ðŸ¥«';case'Toys':return'ðŸ§¸';case'Accessories':return'ðŸ›ï¸';case'Health':return'ðŸ’Š';case'Grooming':return'ðŸ§´';default:return'ðŸ“¦';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Your Products\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-6 w-6 border-b-2 border-[#5EB47C] mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600\",children:\"Loading...\"})]}):topProducts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-2xl mb-2\",children:\"\\uD83D\\uDCE6\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"No products yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Add products to your catalog to see them here\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:topProducts.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-500 text-lg\",children:getProductEmoji(product.category)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[product.stock_quantity,\" units in stock \\u2022 $\",product.price]})]})]},product.id))})})]});};const ProductCatalog=_ref4=>{var _editingProduct$image;let{user,profile}=_ref4;const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[showAddModal,setShowAddModal]=useState(false);const[showEditModal,setShowEditModal]=useState(false);const[editingProduct,setEditingProduct]=useState(null);const[showDeleteModal,setShowDeleteModal]=useState(false);const[deletingProduct,setDeletingProduct]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[filterCategory,setFilterCategory]=useState('All');const[showProductDetail,setShowProductDetail]=useState(false);const[detailProduct,setDetailProduct]=useState(null);const[error,setError]=useState(null);const[newProduct,setNewProduct]=useState({name:'',category:'Food',price:'',stock_quantity:'',description:'',image:'ðŸ“¦',images:[]});// Load products from Supabase\nReact.useEffect(()=>{loadProducts();},[user]);const loadProducts=async()=>{if(!(user!==null&&user!==void 0&&user.id)){setLoading(false);return;}try{setLoading(true);setError(null);const{data,error:fetchError}=await productService.getProducts(user.id);if(fetchError){console.error('Error loading products:',fetchError);setError('Failed to load products. Please try again.');setProducts([]);}else{// Transform data to match component expectations\nconst transformedProducts=data.map(product=>({...product,stock:product.stock_quantity,// Map stock_quantity to stock for compatibility\nstatus:product.stock_quantity>10?'in_stock':'low_stock',image:getProductEmoji(product.category)}));setProducts(transformedProducts);}}catch(error){console.error('Error in loadProducts:',error);setError('Failed to load products. Please try again.');setProducts([]);}finally{setLoading(false);}};const handleAddProduct=async e=>{e.preventDefault();// Validate required fields\nif(!newProduct.name||!newProduct.price||!newProduct.stock_quantity){alert('Please fill in all required fields');return;}try{setLoading(true);const productData={...newProduct,provider_id:user===null||user===void 0?void 0:user.id,price:parseFloat(newProduct.price),stock_quantity:parseInt(newProduct.stock_quantity),images:newProduct.images||[]};const{data,error}=await productService.createProduct(productData);if(error){console.error('Error creating product:',error);alert('Failed to create product. Please try again.');return;}// Reload products to get the updated list\nawait loadProducts();// Reset form and close modal\nsetNewProduct({name:'',category:'Food',price:'',stock_quantity:'',description:'',image:'ðŸ“¦',images:[]});setShowAddModal(false);console.log('New product added:',data);}catch(error){console.error('Error in handleAddProduct:',error);alert('Failed to create product. Please try again.');}finally{setLoading(false);}};const handleEditProduct=product=>{setEditingProduct({...product,images:product.images||[]});setShowEditModal(true);};const handleUpdateProduct=async e=>{e.preventDefault();if(!editingProduct.name||!editingProduct.price||!editingProduct.stock_quantity){alert('Please fill in all required fields');return;}try{setLoading(true);const updates={name:editingProduct.name,category:editingProduct.category,price:parseFloat(editingProduct.price),stock_quantity:parseInt(editingProduct.stock_quantity),description:editingProduct.description,images:editingProduct.images||[]};const{data,error}=await productService.updateProduct(editingProduct.id,updates);if(error){console.error('Error updating product:',error);alert('Failed to update product. Please try again.');return;}// Reload products to get the updated list\nawait loadProducts();setShowEditModal(false);setEditingProduct(null);console.log('Product updated:',data);}catch(error){console.error('Error in handleUpdateProduct:',error);alert('Failed to update product. Please try again.');}finally{setLoading(false);}};const handleDeleteProduct=product=>{setDeletingProduct(product);setShowDeleteModal(true);};const confirmDeleteProduct=async()=>{if(!(deletingProduct!==null&&deletingProduct!==void 0&&deletingProduct.id))return;try{setLoading(true);const{data,error}=await productService.deleteProduct(deletingProduct.id);if(error){console.error('Error deleting product:',error);alert('Failed to delete product. Please try again.');return;}// Reload products to get the updated list\nawait loadProducts();setShowDeleteModal(false);setDeletingProduct(null);console.log('Product deleted:',data);}catch(error){console.error('Error in confirmDeleteProduct:',error);alert('Failed to delete product. Please try again.');}finally{setLoading(false);}};const getProductEmoji=category=>{switch(category){case'Food':return'ðŸ¥«';case'Toys':return'ðŸ§¸';case'Accessories':return'ðŸ›ï¸';case'Health':return'ðŸ’Š';case'Grooming':return'ðŸ§´';default:return'ðŸ“¦';}};const handleImageUpload=function(e){let isEditing=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const files=Array.from(e.target.files);const currentImages=isEditing?editingProduct.images:newProduct.images;if(currentImages.length+files.length>4){alert('You can only upload up to 4 images per product');return;}files.forEach(file=>{if(file.type.startsWith('image/')){const reader=new FileReader();reader.onload=event=>{const imageData={id:Date.now()+Math.random(),file:file,preview:event.target.result,name:file.name};if(isEditing){setEditingProduct(prev=>({...prev,images:[...prev.images,imageData]}));}else{setNewProduct(prev=>({...prev,images:[...prev.images,imageData]}));}};reader.readAsDataURL(file);}});};const removeImage=function(imageId){let isEditing=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(isEditing){setEditingProduct(prev=>({...prev,images:prev.images.filter(img=>img.id!==imageId)}));}else{setNewProduct(prev=>({...prev,images:prev.images.filter(img=>img.id!==imageId)}));}};const handleProductClick=product=>{setDetailProduct(product);setShowProductDetail(true);};// Filter products based on search and category\nconst filteredProducts=products.filter(product=>{const matchesSearch=product.name.toLowerCase().includes(searchTerm.toLowerCase())||product.description.toLowerCase().includes(searchTerm.toLowerCase());const matchesCategory=filterCategory==='All'||product.category===filterCategory;return matchesSearch&&matchesCategory;});return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Product Catalog\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Manage your product inventory and listings\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddModal(true),className:\"w-full sm:w-auto px-4 py-2 bg-[#5EB47C] text-white rounded-lg hover:bg-[#4A9B63] transition-colors\",children:\"Add New Product\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search products...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"select\",{value:filterCategory,onChange:e=>setFilterCategory(e.target.value),className:\"w-full sm:w-auto px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"All\",children:\"All Categories\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Food\",children:\"Food & Treats\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Toys\",children:\"Toys & Games\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Accessories\",children:\"Accessories\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Health\",children:\"Health & Supplements\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Grooming\",children:\"Grooming Supplies\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-sm text-gray-500\",children:[\"Showing \",filteredProducts.length,\" of \",products.length,\" products\"]})]}),showAddModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-4\",children:\"Add New Product\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddProduct,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Product Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:newProduct.name,onChange:e=>setNewProduct({...newProduct,name:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\",placeholder:\"e.g., Premium Dog Food\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Category *\"}),/*#__PURE__*/_jsxs(\"select\",{value:newProduct.category,onChange:e=>setNewProduct({...newProduct,category:e.target.value,image:getProductEmoji(e.target.value)}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Food\",children:\"Food & Treats\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Toys\",children:\"Toys & Games\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Accessories\",children:\"Accessories\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Health\",children:\"Health & Supplements\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Grooming\",children:\"Grooming Supplies\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Price *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",required:true,value:newProduct.price,onChange:e=>setNewProduct({...newProduct,price:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\",placeholder:\"29.99\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Stock Quantity *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",required:true,value:newProduct.stock_quantity,onChange:e=>setNewProduct({...newProduct,stock_quantity:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\",placeholder:\"50\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newProduct.description,onChange:e=>setNewProduct({...newProduct,description:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\",placeholder:\"Product description...\",rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Product Images (up to 4)\"}),newProduct.images.length<4&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center pt-5 pb-6\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 mb-4 text-gray-500\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2 text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Click to upload\"}),\" or drag and drop\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"PNG, JPG, GIF up to 10MB (\",4-newProduct.images.length,\" remaining)\"]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"hidden\",multiple:true,accept:\"image/*\",onChange:e=>handleImageUpload(e,false)})]})}),newProduct.images.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-2 mb-4\",children:newProduct.images.map(image=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"img\",{src:image.preview,alt:image.name,className:\"w-full h-24 object-cover rounded-lg border\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeImage(image.id,false),className:\"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded\",children:image.name.length>10?image.name.substring(0,10)+'...':image.name})]},image.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddModal(false),className:\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"flex-1 px-4 py-2 bg-[#5EB47C] text-white rounded-lg hover:bg-[#4A9B63] transition-colors\",children:\"Add Product\"})]})]})]})}),showEditModal&&editingProduct&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-4\",children:\"Edit Product\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdateProduct,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Product Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:editingProduct.name,onChange:e=>setEditingProduct({...editingProduct,name:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Category *\"}),/*#__PURE__*/_jsxs(\"select\",{value:editingProduct.category,onChange:e=>setEditingProduct({...editingProduct,category:e.target.value,image:getProductEmoji(e.target.value)}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Food\",children:\"Food & Treats\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Toys\",children:\"Toys & Games\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Accessories\",children:\"Accessories\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Health\",children:\"Health & Supplements\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Grooming\",children:\"Grooming Supplies\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Price *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",required:true,value:editingProduct.price,onChange:e=>setEditingProduct({...editingProduct,price:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Stock Quantity *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",required:true,value:editingProduct.stock_quantity,onChange:e=>setEditingProduct({...editingProduct,stock_quantity:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editingProduct.description,onChange:e=>setEditingProduct({...editingProduct,description:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\",rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Product Images (up to 4)\"}),editingProduct.images&&editingProduct.images.length<4&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center pt-5 pb-6\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 mb-4 text-gray-500\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2 text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Click to upload\"}),\" or drag and drop\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"PNG, JPG, GIF up to 10MB (\",4-(((_editingProduct$image=editingProduct.images)===null||_editingProduct$image===void 0?void 0:_editingProduct$image.length)||0),\" remaining)\"]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"hidden\",multiple:true,accept:\"image/*\",onChange:e=>handleImageUpload(e,true)})]})}),editingProduct.images&&editingProduct.images.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-2 mb-4\",children:editingProduct.images.map(image=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"img\",{src:image.preview,alt:image.name,className:\"w-full h-24 object-cover rounded-lg border\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeImage(image.id,true),className:\"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded\",children:image.name.length>10?image.name.substring(0,10)+'...':image.name})]},image.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowEditModal(false);setEditingProduct(null);},className:\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"flex-1 px-4 py-2 bg-[#5EB47C] text-white rounded-lg hover:bg-[#4A9B63] transition-colors\",children:\"Update Product\"})]})]})]})}),showDeleteModal&&deletingProduct&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-sm\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-4\",children:\"Delete Product\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-6\",children:[\"Are you sure you want to delete \\\"\",deletingProduct.name,\"\\\"? This action cannot be undone.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowDeleteModal(false);setDeletingProduct(null);},className:\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:confirmDeleteProduct,className:\"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\",children:\"Delete\"})]})]})}),showProductDetail&&detailProduct&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:detailProduct.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowProductDetail(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),detailProduct.images&&detailProduct.images.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-3\",children:\"Product Images\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-4\",children:detailProduct.images.map((image,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:image.preview,alt:`${detailProduct.name} - View ${index+1}`,className:\"w-full h-32 object-cover rounded-lg border\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded\",children:[index+1,\" of \",detailProduct.images.length]})]},image.id))})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 text-center py-8 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl mb-2\",children:detailProduct.image}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No images uploaded\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Category\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:detailProduct.category})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Price\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-green-600\",children:[\"$\",detailProduct.price]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Stock\"}),/*#__PURE__*/_jsxs(\"p\",{className:`font-medium ${detailProduct.status==='in_stock'?'text-green-600':'text-red-600'}`,children:[detailProduct.stock,\" units\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Status\"}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 text-xs rounded-full ${detailProduct.status==='in_stock'?'bg-green-100 text-green-800':'bg-red-100 text-red-800'}`,children:detailProduct.status==='in_stock'?'In Stock':'Low Stock'})]})]}),detailProduct.description&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900 mt-1\",children:detailProduct.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3 mt-6 pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowProductDetail(false);handleEditProduct(detailProduct);},className:\"flex-1 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors\",children:\"Edit Product\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowProductDetail(false);handleDeleteProduct(detailProduct);},className:\"flex-1 px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors\",children:\"Delete Product\"})]})]})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-400 mr-3\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-800 font-medium\",children:\"Error loading products\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-sm\",children:error})]}),/*#__PURE__*/_jsx(\"button\",{onClick:loadProducts,className:\"ml-auto px-3 py-1 bg-red-100 text-red-800 text-sm rounded hover:bg-red-200 transition-colors\",children:\"Retry\"})]})}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5EB47C] mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading products...\"})]}):filteredProducts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-6xl mb-4\",children:\"\\uD83D\\uDCE6\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:searchTerm||filterCategory!=='All'?'No products found':'No products yet'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:searchTerm||filterCategory!=='All'?'Try adjusting your search or filter criteria':'Start building your product catalog by adding your first product'}),!searchTerm&&filterCategory==='All'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddModal(true),className:\"px-4 py-2 bg-[#5EB47C] text-white rounded-lg hover:bg-[#4A9B63] transition-colors\",children:\"Add Your First Product\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:filteredProducts.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border rounded-lg p-4 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-4 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 cursor-pointer\",onClick:()=>handleProductClick(product),children:product.images&&product.images.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.images[0].preview,alt:product.name,className:\"w-16 h-16 object-cover rounded-lg border hover:opacity-80 transition-opacity\"}),product.images.length>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute -bottom-1 -right-1 bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\",children:[\"+\",product.images.length-1]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-2xl hover:bg-gray-200 transition-colors\",children:product.image})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:product.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-bold text-green-600\",children:[\"$\",product.price]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:product.category})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:`text-sm font-medium ${product.status==='in_stock'?'text-green-600':'text-red-600'}`,children:[product.stock,\" in stock\"]}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 text-xs rounded-full ${product.status==='in_stock'?'bg-green-100 text-green-800':'bg-red-100 text-red-800'}`,children:product.status==='in_stock'?'In Stock':'Low Stock'})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 pt-2 border-t border-gray-100\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditProduct(product),className:\"flex-1 px-3 py-2 text-sm bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 transition-colors\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteProduct(product),className:\"flex-1 px-3 py-2 text-sm bg-red-50 text-red-600 rounded-md hover:bg-red-100 transition-colors\",children:\"Delete\"})]})]},product.id))})]});};const OrderManagement=_ref5=>{let{user,profile}=_ref5;const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{loadOrders();},[user]);const loadOrders=async()=>{if(!(user!==null&&user!==void 0&&user.id)){setLoading(false);return;}try{// For now, we'll show empty state since orders table isn't implemented yet\n// In the future, this would fetch from an orders table\nsetOrders([]);}catch(error){console.error('Error loading orders:',error);setOrders([]);}finally{setLoading(false);}};const pendingOrders=orders.filter(order=>order.status==='pending'||order.status==='processing');const shippedOrders=orders.filter(order=>order.status==='shipped'||order.status==='delivered'||order.status==='in_transit');return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Order Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Track and manage customer orders\"})]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5EB47C] mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading orders...\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Pending Orders\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:pendingOrders.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-4xl mb-4\",children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No pending orders\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"New orders will appear here when customers make purchases\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:pendingOrders.map(order=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 p-4 bg-yellow-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-yellow-600 font-semibold text-sm\",children:\"#\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900\",children:[\"Order #\",order.id,\" - \",order.customer_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[order.items,\" \\u2022 $\",order.total]}),/*#__PURE__*/_jsx(\"span\",{className:`inline-block px-2 py-1 text-xs rounded-full mt-1 ${order.status==='processing'?'bg-yellow-100 text-yellow-800':'bg-blue-100 text-blue-800'}`,children:order.status.charAt(0).toUpperCase()+order.status.slice(1)})]})]},order.id))})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Recent Shipments\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:shippedOrders.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-4xl mb-4\",children:\"\\uD83D\\uDCE6\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No shipments yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Completed orders will appear here once they're shipped\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:shippedOrders.map(order=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 p-4 bg-green-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 font-semibold text-sm\",children:\"\\u2713\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900\",children:[\"Order #\",order.id,\" - \",order.customer_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[order.items,\" \\u2022 $\",order.total]}),/*#__PURE__*/_jsx(\"span\",{className:`inline-block px-2 py-1 text-xs rounded-full mt-1 ${order.status==='delivered'?'bg-green-100 text-green-800':'bg-blue-100 text-blue-800'}`,children:order.status.charAt(0).toUpperCase()+order.status.slice(1)})]})]},order.id))})})]})]})]});};const InventoryManagement=_ref6=>{let{user,profile}=_ref6;const[lowStockProducts,setLowStockProducts]=useState([]);const[categoryStats,setCategoryStats]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{loadInventoryData();},[user]);const loadInventoryData=async()=>{if(!(user!==null&&user!==void 0&&user.id)){setLoading(false);return;}try{const{data,error}=await productService.getProducts(user.id);if(error){console.error('Error loading inventory data:',error);setLowStockProducts([]);setCategoryStats([]);}else{// Filter low stock products (less than 10 units)\nconst lowStock=data.filter(product=>product.stock_quantity<10);setLowStockProducts(lowStock);// Calculate category statistics\nconst categoryMap={};data.forEach(product=>{if(categoryMap[product.category]){categoryMap[product.category]++;}else{categoryMap[product.category]=1;}});const stats=Object.entries(categoryMap).map(_ref7=>{let[category,count]=_ref7;return{category,count,emoji:getProductEmoji(category)};});setCategoryStats(stats);}}catch(error){console.error('Error in loadInventoryData:',error);setLowStockProducts([]);setCategoryStats([]);}finally{setLoading(false);}};const getProductEmoji=category=>{switch(category){case'Food':return'ðŸ¥«';case'Toys':return'ðŸ§¸';case'Accessories':return'ðŸ›ï¸';case'Health':return'ðŸ’Š';case'Grooming':return'ðŸ§´';default:return'ðŸ“¦';}};const getStockLevel=quantity=>{if(quantity===0)return{level:'Out of Stock',color:'red',bgColor:'bg-red-50'};if(quantity<5)return{level:'Critical',color:'red',bgColor:'bg-red-50'};if(quantity<10)return{level:'Low',color:'yellow',bgColor:'bg-yellow-50'};return{level:'Good',color:'green',bgColor:'bg-green-50'};};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Inventory Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Monitor stock levels and manage inventory\"})]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5EB47C] mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading inventory data...\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Low Stock Alerts\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:lowStockProducts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-4xl mb-4\",children:\"\\u2705\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"All products well stocked\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Products with low stock (less than 10 units) will appear here\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:lowStockProducts.map(product=>{const stockInfo=getStockLevel(product.stock_quantity);return/*#__PURE__*/_jsxs(\"div\",{className:`flex items-center space-x-4 p-4 ${stockInfo.bgColor} rounded-lg`,children:[/*#__PURE__*/_jsx(\"div\",{className:`w-10 h-10 bg-${stockInfo.color}-100 rounded-full flex items-center justify-center`,children:/*#__PURE__*/_jsx(\"span\",{className:`text-${stockInfo.color}-600 font-semibold text-sm`,children:stockInfo.color==='red'?'!':'âš '})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:product.stock_quantity===0?'Out of stock':`Only ${product.stock_quantity} units remaining`}),/*#__PURE__*/_jsx(\"span\",{className:`inline-block px-2 py-1 bg-${stockInfo.color}-100 text-${stockInfo.color}-800 text-xs rounded-full mt-1`,children:stockInfo.level})]})]},product.id);})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Product Categories\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:categoryStats.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-4xl mb-4\",children:\"\\uD83D\\uDCE6\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No products yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Add products to see category breakdown\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:categoryStats.map(stat=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:stat.emoji}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:stat.category})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-semibold text-gray-600\",children:[stat.count,\" product\",stat.count!==1?'s':'']})]},stat.category))})})]})]})]});};const BusinessMessages=_ref8=>{let{user,profile}=_ref8;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Customer Messages\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Communicate with your customers about orders and products\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-6xl mb-4\",children:\"\\uD83D\\uDCAC\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Customer Messaging Coming Soon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Chat directly with customers about their orders, answer product questions, and provide customer support.\"})]})]});};const BusinessAnalytics=_ref9=>{let{user,profile}=_ref9;const[analyticsData,setAnalyticsData]=useState({totalOrders:0,totalRevenue:0,avgOrderValue:0,customerRetention:0});const[loading,setLoading]=useState(true);useEffect(()=>{loadAnalyticsData();},[user]);const loadAnalyticsData=async()=>{if(!(user!==null&&user!==void 0&&user.id)){setLoading(false);return;}try{// For now, we'll calculate basic analytics from product data\n// In the future, this would include real order and customer data\nconst{data:products,error}=await productService.getProducts(user.id);if(error){console.error('Error loading analytics data:',error);setAnalyticsData({totalOrders:0,totalRevenue:0,avgOrderValue:0,customerRetention:0});}else{// Calculate basic metrics from products\nconst totalProducts=products.length;const totalStockValue=products.reduce((sum,product)=>sum+product.price*product.stock_quantity,0);setAnalyticsData({totalOrders:0,// Will be populated when order system is implemented\ntotalRevenue:0,// Will be populated when order system is implemented  \navgOrderValue:0,// Will be populated when order system is implemented\ncustomerRetention:0// Will be populated when customer tracking is implemented\n});}}catch(error){console.error('Error in loadAnalyticsData:',error);setAnalyticsData({totalOrders:0,totalRevenue:0,avgOrderValue:0,customerRetention:0});}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Business Analytics\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"View your business performance and sales insights\"})]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5EB47C] mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading analytics...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-4 sm:p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs sm:text-sm font-medium text-gray-600\",children:\"Total Orders\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl sm:text-2xl font-bold text-gray-900\",children:analyticsData.totalOrders})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 sm:w-8 sm:h-8 text-blue-600\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg sm:text-xl\",children:\"\\uD83D\\uDCCA\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-4 sm:p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs sm:text-sm font-medium text-gray-600\",children:\"Total Revenue\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl sm:text-2xl font-bold text-gray-900\",children:[\"$\",analyticsData.totalRevenue.toLocaleString()]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 sm:w-8 sm:h-8 text-green-600\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg sm:text-xl\",children:\"\\uD83D\\uDCB0\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-4 sm:p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs sm:text-sm font-medium text-gray-600\",children:\"Avg. Order Value\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl sm:text-2xl font-bold text-gray-900\",children:[\"$\",analyticsData.avgOrderValue]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 sm:w-8 sm:h-8 text-purple-600\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg sm:text-xl\",children:\"\\uD83D\\uDED2\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-4 sm:p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs sm:text-sm font-medium text-gray-600\",children:\"Customer Retention\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl sm:text-2xl font-bold text-gray-900\",children:[analyticsData.customerRetention,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 sm:w-8 sm:h-8 text-yellow-600\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg sm:text-xl\",children:\"\\u2B50\"})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Sales Performance\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-4xl mb-4\",children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Analytics Coming Soon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Detailed analytics will be available once you start receiving orders and tracking customer interactions\"})]})]})]})]});};const BusinessProfile=_ref0=>{let{user,profile,onProfileUpdate}=_ref0;const[businessInfo,setBusinessInfo]=useState({businessName:'',yearsInBusiness:'',businessType:'Pet Supply Store',location:''});const[loading,setLoading]=useState(true);useEffect(()=>{loadBusinessProfile();},[user,profile]);const loadBusinessProfile=async()=>{try{setLoading(true);// Start with profile data - use personal location as business location\nlet locationData='';let businessName='';let businessType='Pet Supply Store';let yearsInBusiness='';if(profile){console.log('ðŸ“‹ Profile data received:',profile);// Use the personal location from signup as the business location\nlocationData=profile.location||'';// Parse business name and years from organization field\nif(profile.organization){if(profile.organization.includes('|years:')){const parts=profile.organization.split('|years:');businessName=parts[0];yearsInBusiness=parts[1];}else{businessName=profile.organization;}}else{businessName=profile.full_name||'';}businessType='Pet Supply Store';// Default for pet business\nconsole.log('ðŸ“‹ Extracted from profile - businessName:',businessName,'location:',locationData,'years:',yearsInBusiness);}else{console.log('âš ï¸ No profile data received');}// If no location in profile, try to get it from auth user metadata\nif(user!==null&&user!==void 0&&user.id&&!locationData){try{var _userData$user;const{data:userData,error:userError}=await supabase.auth.getUser();if(!userError&&userData!==null&&userData!==void 0&&(_userData$user=userData.user)!==null&&_userData$user!==void 0&&_userData$user.user_metadata){const metadata=userData.user.user_metadata;// Reconstruct location from signup data\nconst locationParts=[metadata.address,metadata.city,metadata.country].filter(Boolean);if(locationParts.length>0){locationData=locationParts.join(', ');}// Also get business name from metadata if not in profile\nif(!businessName&&metadata.business_name){businessName=metadata.business_name;}}}catch(error){console.log('Could not retrieve user metadata:',error);}}// Skip providers table query for now due to 406 errors\n// We have all the data we need from the profile and auth metadata\nconst finalBusinessInfo={businessName:businessName,yearsInBusiness:yearsInBusiness||'',// Now extracted from profile\nbusinessType:businessType,location:locationData};console.log('ðŸ“‹ Setting business info:',finalBusinessInfo);setBusinessInfo(finalBusinessInfo);}catch(error){console.error('Error loading business profile:',error);// Fallback to basic profile data\nif(profile){setBusinessInfo({businessName:profile.organization||profile.full_name||'',yearsInBusiness:'',businessType:'Pet Supply Store',location:profile.location||''});}}finally{setLoading(false);}};const handleSave=async()=>{try{setLoading(true);if(!(user!==null&&user!==void 0&&user.id)){alert('Error: User not found');return;}console.log('ðŸ’¾ Saving business profile:',businessInfo);console.log('ðŸ‘¤ User ID:',user.id);// First, check if profile exists\nconst{data:existingProfile,error:checkError}=await supabase.from('profiles').select('id, email, organization, location').eq('id',user.id).single();if(checkError){console.error('âŒ Error checking existing profile:',checkError);if(checkError.code==='PGRST116'){var _user$user_metadata,_user$user_metadata2;// Profile doesn't exist, create it\nconsole.log('ðŸ“ Profile does not exist, creating new profile...');// Create organization data with years if provided\nlet organizationData=businessInfo.businessName;if(businessInfo.yearsInBusiness){organizationData=`${businessInfo.businessName}|years:${businessInfo.yearsInBusiness}`;}const{data:newProfile,error:insertError}=await supabase.from('profiles').insert({id:user.id,email:user.email,full_name:((_user$user_metadata=user.user_metadata)===null||_user$user_metadata===void 0?void 0:_user$user_metadata.full_name)||'',phone:((_user$user_metadata2=user.user_metadata)===null||_user$user_metadata2===void 0?void 0:_user$user_metadata2.phone)||'',organization:organizationData,location:businessInfo.location,role:'pet_business',created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select();if(insertError){console.error('âŒ Error creating profile:',insertError);alert(`Error creating profile: ${insertError.message}. Please try again.`);return;}console.log('âœ… Profile created successfully:',newProfile);}else{alert(`Error checking profile: ${checkError.message}. Please try again.`);return;}}else{// Profile exists, update it\nconsole.log('ðŸ“ Profile exists, updating with data:',{organization:businessInfo.businessName,location:businessInfo.location});// Store business info including years in business\n// We'll append years in business to the organization field in a structured way\nlet organizationData=businessInfo.businessName;if(businessInfo.yearsInBusiness){organizationData=`${businessInfo.businessName}|years:${businessInfo.yearsInBusiness}`;}const updateData={organization:organizationData,// Store business name and years together\nlocation:businessInfo.location,updated_at:new Date().toISOString()};console.log('ðŸ“ Storing organization data:',organizationData);const{data:updateResult,error:profileError}=await supabase.from('profiles').update(updateData).eq('id',user.id).select();if(profileError){console.error('âŒ Error updating profile:',profileError);alert(`Error saving profile: ${profileError.message}. Please try again.`);return;}console.log('âœ… Profile updated successfully:',updateResult);}// Skip providers table update due to 406 errors\nconsole.log('ðŸ“ Skipping providers table update - using profiles table only');// Show success message\nalert('âœ… Business profile saved successfully!');console.log('ðŸŽ‰ Business profile saved:',businessInfo);// Reload the profile data from the main component to reflect changes everywhere\nconsole.log('ðŸ”„ Refreshing profile data in main component...');if(onProfileUpdate){await onProfileUpdate();}// Also reload local data\nawait loadBusinessProfile();console.log('âœ… Profile data refreshed');}catch(error){console.error('âŒ Error saving business profile:',error);alert(`Error saving profile: ${error.message||'Unknown error'}. Please try again.`);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Business Profile\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Manage your business information and store details\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5EB47C] mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading business profile...\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Business Profile\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Manage your business information and store details\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Business Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Business Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:businessInfo.businessName,onChange:e=>setBusinessInfo({...businessInfo,businessName:e.target.value}),placeholder:\"Enter your business name\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Years in Business\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:businessInfo.yearsInBusiness,onChange:e=>setBusinessInfo({...businessInfo,yearsInBusiness:e.target.value}),placeholder:\"0\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Business Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:businessInfo.businessType,onChange:e=>setBusinessInfo({...businessInfo,businessType:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Pet Supply Store\",children:\"Pet Supply Store\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pet Food Retailer\",children:\"Pet Food Retailer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pet Accessories Shop\",children:\"Pet Accessories Shop\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Online Pet Store\",children:\"Online Pet Store\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Pet Boutique\",children:\"Pet Boutique\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Business Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:businessInfo.location,onChange:e=>setBusinessInfo({...businessInfo,location:e.target.value}),placeholder:\"City, Country\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"This is populated from your personal location provided during signup\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Store Status\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-blue-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:\"Dashboard Access\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\",children:\"Active\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-blue-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:\"Product Management\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\",children:\"Enabled\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:\"Order Management\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full\",children:\"Coming Soon\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,disabled:loading,className:`w-full sm:w-auto px-6 py-2 text-white rounded-lg transition-colors ${loading?'bg-gray-400 cursor-not-allowed':'bg-[#5EB47C] hover:bg-[#4A9B63]'}`,children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Saving...\"})]}):'Save Changes'})]})})]});};const PetBusinessDashboard=()=>{var _user$user_metadata3,_user$email2;const[user,setUser]=useState(null);const[profile,setProfile]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[activeSection,setActiveSection]=useState('overview');const navigate=useNavigate();// Pet Business navigation focused on products and sales\nconst businessNavigation=[{id:'overview',name:'Overview',icon:/*#__PURE__*/_jsxs(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2z\"}),/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M8 5a2 2 0 012-2h4a2 2 0 012 2v4H8V5z\"})]})},{id:'products',name:'Products',icon:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"})})},{id:'orders',name:'Orders',icon:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"})})},{id:'inventory',name:'Inventory',icon:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4\"})})},{id:'messages',name:'Messages',icon:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"})})},{id:'analytics',name:'Analytics',icon:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"})})},{id:'profile',name:'Profile',icon:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"})})}];useEffect(()=>{fetchUserData();},[]);const fetchUserData=async()=>{try{// Get current user\nconst{data:{user:currentUser},error:userError}=await supabase.auth.getUser();if(userError){console.error('Error getting user:',userError);setError('Error loading user data');setLoading(false);return;}if(!currentUser){console.log('No user found, redirecting to sign in');navigate('/signin');return;}setUser(currentUser);// Get user profile\nconst{data:profileData,error:profileError}=await supabase.from('profiles').select('*').eq('id',currentUser.id).single();if(profileError){console.error('Error getting profile:',profileError);console.log('PetBusinessDashboard - No profile found, using basic user data');}else{setProfile(profileData);console.log('âœ… PetBusinessDashboard - Profile loaded successfully');}setLoading(false);}catch(error){console.error('Error in fetchUserData:',error);setError('Error loading dashboard data');setLoading(false);}};// Render active section content\nconst renderActiveSection=()=>{switch(activeSection){case'overview':return/*#__PURE__*/_jsx(BusinessOverview,{user:user,profile:profile});case'products':return/*#__PURE__*/_jsx(ProductCatalog,{user:user,profile:profile});case'orders':return/*#__PURE__*/_jsx(OrderManagement,{user:user,profile:profile});case'inventory':return/*#__PURE__*/_jsx(InventoryManagement,{user:user,profile:profile});case'messages':return/*#__PURE__*/_jsx(BusinessMessages,{user:user,profile:profile});case'analytics':return/*#__PURE__*/_jsx(BusinessAnalytics,{user:user,profile:profile});case'profile':return/*#__PURE__*/_jsx(BusinessProfile,{user:user,profile:profile,onProfileUpdate:fetchUserData});default:return/*#__PURE__*/_jsx(BusinessOverview,{user:user,profile:profile});}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#5EB47C] mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading your business dashboard...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 mb-4\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 font-montserrat\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"mt-4 px-4 py-2 bg-[#5EB47C] text-white rounded hover:bg-[#4A9B63]\",children:\"Retry\"})]})});}// Get display name from profile or user data\nconst displayName=(profile===null||profile===void 0?void 0:profile.full_name)||(user===null||user===void 0?void 0:(_user$user_metadata3=user.user_metadata)===null||_user$user_metadata3===void 0?void 0:_user$user_metadata3.full_name)||(user===null||user===void 0?void 0:(_user$email2=user.email)===null||_user$email2===void 0?void 0:_user$email2.split('@')[0])||'Business Owner';const firstName=displayName.split(' ')[0]||'Owner';return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:hidden bg-white border-b border-gray-200 px-4 py-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 min-w-0 flex-1\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://wagrmmbkukwblfpfxxcb.supabase.co/storage/v1/object/public/web-img/PetBusiness.svg\",alt:\"Pet Business\",className:\"w-8 h-8 flex-shrink-0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-md font-medium text-gray-900 truncate\",children:[\"Welcome back, \",firstName]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 truncate\",children:\"Pet Business Owner\"})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:hidden bg-white border-b border-gray-200 px-2 py-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex overflow-x-auto space-x-1 pb-2\",children:businessNavigation.map(item=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveSection(item.id),className:`flex-shrink-0 flex items-center px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${activeSection===item.id?'bg-green-100 text-[#5EB47C]':'text-gray-600 hover:text-gray-900 hover:bg-gray-50'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:item.icon}),item.name]},item.id))})}),/*#__PURE__*/_jsx(\"div\",{className:\"hidden lg:block w-64 bg-white shadow-sm border-r border-gray-200 min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://wagrmmbkukwblfpfxxcb.supabase.co/storage/v1/object/public/web-img/PetBusiness.svg\",alt:\"Pet Business\",className:\"w-10 h-10\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-semibold text-gray-900 truncate\",children:\"Pet Business\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 truncate\",children:displayName})]})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"space-y-2\",children:businessNavigation.map(item=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveSection(item.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${activeSection===item.id?'bg-green-100 text-[#5EB47C]':'text-gray-600 hover:text-gray-900 hover:bg-gray-50'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-3\",children:item.icon}),item.name]},item.id))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 p-3 sm:p-4 lg:p-6\",children:renderActiveSection()})]})});};export default PetBusinessDashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","supabase","productService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BusinessOverview","_ref","_profile$full_name","_user$email","user","profile","stats","setStats","monthlyRevenue","activeCustomers","productsInStock","ordersThisMonth","loading","setLoading","loadBusinessStats","id","data","error","getBusinessStats","console","Math","round","totalStockValue","floor","totalProducts","className","children","full_name","split","email","toLocaleString","RecentOrdersWidget","TopProductsWidget","_ref2","recentOrders","setRecentOrders","loadRecentOrders","length","map","order","customer_name","items","total","status","charAt","toUpperCase","slice","_ref3","topProducts","setTopProducts","loadTopProducts","getProducts","sortedProducts","sort","a","b","stock_quantity","getProductEmoji","category","product","name","price","ProductCatalog","_ref4","_editingProduct$image","products","setProducts","showAddModal","setShowAddModal","showEditModal","setShowEditModal","editingProduct","setEditingProduct","showDeleteModal","setShowDeleteModal","deletingProduct","setDeletingProduct","searchTerm","setSearchTerm","filterCategory","setFilterCategory","showProductDetail","setShowProductDetail","detailProduct","setDetailProduct","setError","newProduct","setNewProduct","description","image","images","loadProducts","fetchError","transformedProducts","stock","handleAddProduct","e","preventDefault","alert","productData","provider_id","parseFloat","parseInt","createProduct","log","handleEditProduct","handleUpdateProduct","updates","updateProduct","handleDeleteProduct","confirmDeleteProduct","deleteProduct","handleImageUpload","isEditing","arguments","undefined","files","Array","from","target","currentImages","forEach","file","type","startsWith","reader","FileReader","onload","event","imageData","Date","now","random","preview","result","prev","readAsDataURL","removeImage","imageId","filter","img","handleProductClick","filteredProducts","matchesSearch","toLowerCase","includes","matchesCategory","onClick","placeholder","value","onChange","onSubmit","required","step","min","rows","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","multiple","accept","src","alt","substring","index","OrderManagement","_ref5","orders","setOrders","loadOrders","pendingOrders","shippedOrders","InventoryManagement","_ref6","lowStockProducts","setLowStockProducts","categoryStats","setCategoryStats","loadInventoryData","lowStock","categoryMap","Object","entries","_ref7","count","emoji","getStockLevel","quantity","level","color","bgColor","stockInfo","stat","BusinessMessages","_ref8","BusinessAnalytics","_ref9","analyticsData","setAnalyticsData","totalOrders","totalRevenue","avgOrderValue","customerRetention","loadAnalyticsData","reduce","sum","BusinessProfile","_ref0","onProfileUpdate","businessInfo","setBusinessInfo","businessName","yearsInBusiness","businessType","location","loadBusinessProfile","locationData","organization","parts","_userData$user","userData","userError","auth","getUser","user_metadata","metadata","locationParts","address","city","country","Boolean","join","business_name","finalBusinessInfo","handleSave","existingProfile","checkError","select","eq","single","code","_user$user_metadata","_user$user_metadata2","organizationData","newProfile","insertError","insert","phone","role","created_at","toISOString","updated_at","message","updateData","updateResult","profileError","update","disabled","PetBusinessDashboard","_user$user_metadata3","_user$email2","setUser","setProfile","activeSection","setActiveSection","navigate","businessNavigation","icon","fetchUserData","currentUser","profileData","renderActiveSection","window","reload","displayName","firstName","item"],"sources":["/workspace/src/components/PetBusinessDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../lib/supabase.js';\nimport { productService } from '../services/productService.js';\n\n// Pet Business components matching other professional dashboards but focused on products\nconst BusinessOverview = ({ user, profile }) => {\n  const [stats, setStats] = useState({\n    monthlyRevenue: 0,\n    activeCustomers: 0,\n    productsInStock: 0,\n    ordersThisMonth: 0\n  });\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadBusinessStats();\n  }, [user]);\n\n  const loadBusinessStats = async () => {\n    if (!user?.id) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const { data, error } = await productService.getBusinessStats(user.id);\n      \n      if (error) {\n        console.error('Error loading business stats:', error);\n        // Use default values if error\n        setStats({\n          monthlyRevenue: 0,\n          activeCustomers: 0,\n          productsInStock: 0,\n          ordersThisMonth: 0\n        });\n      } else {\n        setStats({\n          monthlyRevenue: Math.round(data.totalStockValue * 0.1), // Estimate 10% of inventory value as monthly revenue\n          activeCustomers: Math.floor(data.totalProducts * 2.5), // Estimate customers based on product count\n          productsInStock: data.totalProducts,\n          ordersThisMonth: Math.floor(data.totalProducts * 0.3) // Estimate orders\n        });\n      }\n    } catch (error) {\n      console.error('Error in loadBusinessStats:', error);\n      setStats({\n        monthlyRevenue: 0,\n        activeCustomers: 0,\n        productsInStock: 0,\n        ordersThisMonth: 0\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5EB47C] mx-auto\"></div>\n        <p className=\"mt-4 text-gray-600\">Loading dashboard...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Welcome Header */}\n      <div className=\"bg-white p-6 rounded-lg border\">\n        <h1 className=\"text-2xl font-bold mb-2 text-gray-900\">\n          Welcome back, {profile?.full_name?.split(' ')[0] || user?.email?.split('@')[0] || 'Business Owner'}\n        </h1>\n        <p className=\"text-gray-600\">\n          You have {stats.ordersThisMonth} orders this month and {stats.productsInStock} products in your catalog.\n        </p>\n      </div>\n\n      {/* Quick Stats */}\n      <div className=\"bg-white rounded-lg shadow-sm border p-4 sm:p-6\">\n        <div className=\"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4\">\n          <div className=\"bg-blue-50 p-3 sm:p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-blue-600 text-xs sm:text-sm font-medium\">Monthly Revenue</p>\n                <p className=\"text-xl sm:text-2xl font-bold text-blue-900\">${stats.monthlyRevenue.toLocaleString()}</p>\n              </div>\n              <div className=\"w-6 h-6 sm:w-8 sm:h-8 text-blue-600\">\n                <span className=\"text-lg sm:text-xl\">ðŸ’°</span>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-green-50 p-3 sm:p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-green-600 text-xs sm:text-sm font-medium\">Active Customers</p>\n                <p className=\"text-xl sm:text-2xl font-bold text-green-900\">{stats.activeCustomers}</p>\n              </div>\n              <div className=\"w-6 h-6 sm:w-8 sm:h-8 text-green-600\">\n                <span className=\"text-lg sm:text-xl\">ðŸ‘¥</span>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-purple-50 p-3 sm:p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-purple-600 text-xs sm:text-sm font-medium\">Products in Stock</p>\n                <p className=\"text-xl sm:text-2xl font-bold text-purple-900\">{stats.productsInStock}</p>\n              </div>\n              <div className=\"w-6 h-6 sm:w-8 sm:h-8 text-purple-600\">\n                <span className=\"text-lg sm:text-xl\">ðŸ“¦</span>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-orange-50 p-3 sm:p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-orange-600 text-xs sm:text-sm font-medium\">Orders This Month</p>\n                <p className=\"text-xl sm:text-2xl font-bold text-orange-900\">{stats.ordersThisMonth}</p>\n              </div>\n              <div className=\"w-6 h-6 sm:w-8 sm:h-8 text-orange-600\">\n                <span className=\"text-lg sm:text-xl\">ðŸ“Š</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Recent Orders & Top Products */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Recent Orders */}\n        <RecentOrdersWidget user={user} />\n\n        {/* Top Products */}\n        <TopProductsWidget user={user} />\n      </div>\n    </div>\n  );\n};\n\nconst RecentOrdersWidget = ({ user }) => {\n  const [recentOrders, setRecentOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadRecentOrders();\n  }, [user]);\n\n  const loadRecentOrders = async () => {\n    if (!user?.id) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      // For now, we'll show empty state since orders table isn't implemented yet\n      // In the future, this would fetch from an orders table\n      setRecentOrders([]);\n    } catch (error) {\n      console.error('Error loading recent orders:', error);\n      setRecentOrders([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm border\">\n      <div className=\"p-6 border-b border-gray-200\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">Recent Orders</h3>\n      </div>\n      <div className=\"p-6\">\n        {loading ? (\n          <div className=\"text-center py-4\">\n            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-[#5EB47C] mx-auto\"></div>\n            <p className=\"mt-2 text-sm text-gray-600\">Loading...</p>\n          </div>\n        ) : recentOrders.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <div className=\"text-gray-400 text-4xl mb-4\">ðŸ“¦</div>\n            <h4 className=\"text-lg font-medium text-gray-900 mb-2\">No orders yet</h4>\n            <p className=\"text-gray-600 text-sm\">\n              Orders will appear here once customers start purchasing your products\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {recentOrders.map((order) => (\n              <div key={order.id} className=\"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg\">\n                <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n                  <span className=\"text-blue-600 font-semibold text-sm\">#</span>\n                </div>\n                <div className=\"flex-1\">\n                  <p className=\"font-medium text-gray-900\">Order #{order.id} - {order.customer_name}</p>\n                  <p className=\"text-sm text-gray-600\">{order.items} â€¢ ${order.total}</p>\n                  <span className={`inline-block px-2 py-1 text-xs rounded-full mt-1 ${\n                    order.status === 'shipped' ? 'bg-green-100 text-green-800' :\n                    order.status === 'processing' ? 'bg-yellow-100 text-yellow-800' :\n                    'bg-blue-100 text-blue-800'\n                  }`}>\n                    {order.status.charAt(0).toUpperCase() + order.status.slice(1)}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst TopProductsWidget = ({ user }) => {\n  const [topProducts, setTopProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadTopProducts();\n  }, [user]);\n\n  const loadTopProducts = async () => {\n    if (!user?.id) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const { data, error } = await productService.getProducts(user.id);\n      \n      if (error) {\n        console.error('Error loading top products:', error);\n        setTopProducts([]);\n      } else {\n        // Sort by stock quantity descending to show most stocked items as \"top selling\"\n        const sortedProducts = data\n          .sort((a, b) => b.stock_quantity - a.stock_quantity)\n          .slice(0, 3);\n        setTopProducts(sortedProducts);\n      }\n    } catch (error) {\n      console.error('Error in loadTopProducts:', error);\n      setTopProducts([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getProductEmoji = (category) => {\n    switch (category) {\n      case 'Food': return 'ðŸ¥«';\n      case 'Toys': return 'ðŸ§¸';\n      case 'Accessories': return 'ðŸ›ï¸';\n      case 'Health': return 'ðŸ’Š';\n      case 'Grooming': return 'ðŸ§´';\n      default: return 'ðŸ“¦';\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm border\">\n      <div className=\"p-6 border-b border-gray-200\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">Your Products</h3>\n      </div>\n      <div className=\"p-6\">\n        {loading ? (\n          <div className=\"text-center py-4\">\n            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-[#5EB47C] mx-auto\"></div>\n            <p className=\"mt-2 text-sm text-gray-600\">Loading...</p>\n          </div>\n        ) : topProducts.length === 0 ? (\n          <div className=\"text-center py-4\">\n            <div className=\"text-gray-400 text-2xl mb-2\">ðŸ“¦</div>\n            <p className=\"text-sm text-gray-600\">No products yet</p>\n            <p className=\"text-xs text-gray-500\">Add products to your catalog to see them here</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {topProducts.map((product) => (\n              <div key={product.id} className=\"flex items-start space-x-3\">\n                <span className=\"text-green-500 text-lg\">{getProductEmoji(product.category)}</span>\n                <div>\n                  <p className=\"text-sm font-medium text-gray-900\">{product.name}</p>\n                  <p className=\"text-xs text-gray-500\">{product.stock_quantity} units in stock â€¢ ${product.price}</p>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst ProductCatalog = ({ user, profile }) => {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [deletingProduct, setDeletingProduct] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterCategory, setFilterCategory] = useState('All');\n  const [showProductDetail, setShowProductDetail] = useState(false);\n  const [detailProduct, setDetailProduct] = useState(null);\n  const [error, setError] = useState(null);\n  const [newProduct, setNewProduct] = useState({\n    name: '',\n    category: 'Food',\n    price: '',\n    stock_quantity: '',\n    description: '',\n    image: 'ðŸ“¦',\n    images: []\n  });\n\n  // Load products from Supabase\n  React.useEffect(() => {\n    loadProducts();\n  }, [user]);\n\n  const loadProducts = async () => {\n    if (!user?.id) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const { data, error: fetchError } = await productService.getProducts(user.id);\n      \n      if (fetchError) {\n        console.error('Error loading products:', fetchError);\n        setError('Failed to load products. Please try again.');\n        setProducts([]);\n      } else {\n        // Transform data to match component expectations\n        const transformedProducts = data.map(product => ({\n          ...product,\n          stock: product.stock_quantity, // Map stock_quantity to stock for compatibility\n          status: product.stock_quantity > 10 ? 'in_stock' : 'low_stock',\n          image: getProductEmoji(product.category)\n        }));\n        setProducts(transformedProducts);\n      }\n    } catch (error) {\n      console.error('Error in loadProducts:', error);\n      setError('Failed to load products. Please try again.');\n      setProducts([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddProduct = async (e) => {\n    e.preventDefault();\n    \n    // Validate required fields\n    if (!newProduct.name || !newProduct.price || !newProduct.stock_quantity) {\n      alert('Please fill in all required fields');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      \n      const productData = {\n        ...newProduct,\n        provider_id: user?.id,\n        price: parseFloat(newProduct.price),\n        stock_quantity: parseInt(newProduct.stock_quantity),\n        images: newProduct.images || []\n      };\n      \n      const { data, error } = await productService.createProduct(productData);\n      \n      if (error) {\n        console.error('Error creating product:', error);\n        alert('Failed to create product. Please try again.');\n        return;\n      }\n      \n      // Reload products to get the updated list\n      await loadProducts();\n      \n      // Reset form and close modal\n      setNewProduct({ \n        name: '', \n        category: 'Food', \n        price: '', \n        stock_quantity: '', \n        description: '', \n        image: 'ðŸ“¦', \n        images: [] \n      });\n      setShowAddModal(false);\n      \n      console.log('New product added:', data);\n    } catch (error) {\n      console.error('Error in handleAddProduct:', error);\n      alert('Failed to create product. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditProduct = (product) => {\n    setEditingProduct({\n      ...product,\n      images: product.images || []\n    });\n    setShowEditModal(true);\n  };\n\n  const handleUpdateProduct = async (e) => {\n    e.preventDefault();\n    \n    if (!editingProduct.name || !editingProduct.price || !editingProduct.stock_quantity) {\n      alert('Please fill in all required fields');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      \n      const updates = {\n        name: editingProduct.name,\n        category: editingProduct.category,\n        price: parseFloat(editingProduct.price),\n        stock_quantity: parseInt(editingProduct.stock_quantity),\n        description: editingProduct.description,\n        images: editingProduct.images || []\n      };\n      \n      const { data, error } = await productService.updateProduct(editingProduct.id, updates);\n      \n      if (error) {\n        console.error('Error updating product:', error);\n        alert('Failed to update product. Please try again.');\n        return;\n      }\n      \n      // Reload products to get the updated list\n      await loadProducts();\n      \n      setShowEditModal(false);\n      setEditingProduct(null);\n      \n      console.log('Product updated:', data);\n    } catch (error) {\n      console.error('Error in handleUpdateProduct:', error);\n      alert('Failed to update product. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteProduct = (product) => {\n    setDeletingProduct(product);\n    setShowDeleteModal(true);\n  };\n\n  const confirmDeleteProduct = async () => {\n    if (!deletingProduct?.id) return;\n    \n    try {\n      setLoading(true);\n      \n      const { data, error } = await productService.deleteProduct(deletingProduct.id);\n      \n      if (error) {\n        console.error('Error deleting product:', error);\n        alert('Failed to delete product. Please try again.');\n        return;\n      }\n      \n      // Reload products to get the updated list\n      await loadProducts();\n      \n      setShowDeleteModal(false);\n      setDeletingProduct(null);\n      \n      console.log('Product deleted:', data);\n    } catch (error) {\n      console.error('Error in confirmDeleteProduct:', error);\n      alert('Failed to delete product. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getProductEmoji = (category) => {\n    switch (category) {\n      case 'Food': return 'ðŸ¥«';\n      case 'Toys': return 'ðŸ§¸';\n      case 'Accessories': return 'ðŸ›ï¸';\n      case 'Health': return 'ðŸ’Š';\n      case 'Grooming': return 'ðŸ§´';\n      default: return 'ðŸ“¦';\n    }\n  };\n\n  const handleImageUpload = (e, isEditing = false) => {\n    const files = Array.from(e.target.files);\n    const currentImages = isEditing ? editingProduct.images : newProduct.images;\n    \n    if (currentImages.length + files.length > 4) {\n      alert('You can only upload up to 4 images per product');\n      return;\n    }\n\n    files.forEach(file => {\n      if (file.type.startsWith('image/')) {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          const imageData = {\n            id: Date.now() + Math.random(),\n            file: file,\n            preview: event.target.result,\n            name: file.name\n          };\n          \n          if (isEditing) {\n            setEditingProduct(prev => ({\n              ...prev,\n              images: [...prev.images, imageData]\n            }));\n          } else {\n            setNewProduct(prev => ({\n              ...prev,\n              images: [...prev.images, imageData]\n            }));\n          }\n        };\n        reader.readAsDataURL(file);\n      }\n    });\n  };\n\n  const removeImage = (imageId, isEditing = false) => {\n    if (isEditing) {\n      setEditingProduct(prev => ({\n        ...prev,\n        images: prev.images.filter(img => img.id !== imageId)\n      }));\n    } else {\n      setNewProduct(prev => ({\n        ...prev,\n        images: prev.images.filter(img => img.id !== imageId)\n      }));\n    }\n  };\n\n  const handleProductClick = (product) => {\n    setDetailProduct(product);\n    setShowProductDetail(true);\n  };\n\n  // Filter products based on search and category\n  const filteredProducts = products.filter(product => {\n    const matchesSearch = product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         product.description.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = filterCategory === 'All' || product.category === filterCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Product Catalog</h1>\n          <p className=\"text-gray-600\">Manage your product inventory and listings</p>\n        </div>\n        <button \n          onClick={() => setShowAddModal(true)}\n          className=\"w-full sm:w-auto px-4 py-2 bg-[#5EB47C] text-white rounded-lg hover:bg-[#4A9B63] transition-colors\"\n        >\n          Add New Product\n        </button>\n      </div>\n\n      {/* Search and Filter */}\n      <div className=\"bg-white rounded-lg border p-4\">\n        <div className=\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\">\n          <div className=\"flex-1\">\n            <input\n              type=\"text\"\n              placeholder=\"Search products...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n            />\n          </div>\n          <div>\n            <select\n              value={filterCategory}\n              onChange={(e) => setFilterCategory(e.target.value)}\n              className=\"w-full sm:w-auto px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n            >\n              <option value=\"All\">All Categories</option>\n              <option value=\"Food\">Food & Treats</option>\n              <option value=\"Toys\">Toys & Games</option>\n              <option value=\"Accessories\">Accessories</option>\n              <option value=\"Health\">Health & Supplements</option>\n              <option value=\"Grooming\">Grooming Supplies</option>\n            </select>\n          </div>\n        </div>\n        <div className=\"mt-2 text-sm text-gray-500\">\n          Showing {filteredProducts.length} of {products.length} products\n        </div>\n      </div>\n\n      {/* Add Product Modal */}\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Add New Product</h2>\n            <form onSubmit={handleAddProduct} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Product Name *</label>\n                <input\n                  type=\"text\"\n                  required\n                  value={newProduct.name}\n                  onChange={(e) => setNewProduct({...newProduct, name: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                  placeholder=\"e.g., Premium Dog Food\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Category *</label>\n                <select\n                  value={newProduct.category}\n                  onChange={(e) => setNewProduct({...newProduct, category: e.target.value, image: getProductEmoji(e.target.value)})}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                >\n                  <option value=\"Food\">Food & Treats</option>\n                  <option value=\"Toys\">Toys & Games</option>\n                  <option value=\"Accessories\">Accessories</option>\n                  <option value=\"Health\">Health & Supplements</option>\n                  <option value=\"Grooming\">Grooming Supplies</option>\n                </select>\n              </div>\n              \n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Price *</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    required\n                    value={newProduct.price}\n                    onChange={(e) => setNewProduct({...newProduct, price: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                    placeholder=\"29.99\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Stock Quantity *</label>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    required\n                    value={newProduct.stock_quantity}\n                    onChange={(e) => setNewProduct({...newProduct, stock_quantity: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                    placeholder=\"50\"\n                  />\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n                <textarea\n                  value={newProduct.description}\n                  onChange={(e) => setNewProduct({...newProduct, description: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                  placeholder=\"Product description...\"\n                  rows=\"3\"\n                />\n              </div>\n\n              {/* Image Upload Section */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Product Images (up to 4)\n                </label>\n                \n                {/* Image Upload Area */}\n                {newProduct.images.length < 4 && (\n                  <div className=\"mb-4\">\n                    <label className=\"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100\">\n                      <div className=\"flex flex-col items-center justify-center pt-5 pb-6\">\n                        <svg className=\"w-8 h-8 mb-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                        </svg>\n                        <p className=\"mb-2 text-sm text-gray-500\">\n                          <span className=\"font-semibold\">Click to upload</span> or drag and drop\n                        </p>\n                        <p className=\"text-xs text-gray-500\">PNG, JPG, GIF up to 10MB ({4 - newProduct.images.length} remaining)</p>\n                      </div>\n                      <input \n                        type=\"file\" \n                        className=\"hidden\" \n                        multiple \n                        accept=\"image/*\"\n                        onChange={(e) => handleImageUpload(e, false)}\n                      />\n                    </label>\n                  </div>\n                )}\n\n                {/* Image Previews */}\n                {newProduct.images.length > 0 && (\n                  <div className=\"grid grid-cols-2 gap-2 mb-4\">\n                    {newProduct.images.map((image) => (\n                      <div key={image.id} className=\"relative group\">\n                        <img\n                          src={image.preview}\n                          alt={image.name}\n                          className=\"w-full h-24 object-cover rounded-lg border\"\n                        />\n                        <button\n                          type=\"button\"\n                          onClick={() => removeImage(image.id, false)}\n                          className=\"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity\"\n                        >\n                          Ã—\n                        </button>\n                        <div className=\"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded\">\n                          {image.name.length > 10 ? image.name.substring(0, 10) + '...' : image.name}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowAddModal(false)}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"flex-1 px-4 py-2 bg-[#5EB47C] text-white rounded-lg hover:bg-[#4A9B63] transition-colors\"\n                >\n                  Add Product\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Edit Product Modal */}\n      {showEditModal && editingProduct && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Edit Product</h2>\n            <form onSubmit={handleUpdateProduct} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Product Name *</label>\n                <input\n                  type=\"text\"\n                  required\n                  value={editingProduct.name}\n                  onChange={(e) => setEditingProduct({...editingProduct, name: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Category *</label>\n                <select\n                  value={editingProduct.category}\n                  onChange={(e) => setEditingProduct({...editingProduct, category: e.target.value, image: getProductEmoji(e.target.value)})}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                >\n                  <option value=\"Food\">Food & Treats</option>\n                  <option value=\"Toys\">Toys & Games</option>\n                  <option value=\"Accessories\">Accessories</option>\n                  <option value=\"Health\">Health & Supplements</option>\n                  <option value=\"Grooming\">Grooming Supplies</option>\n                </select>\n              </div>\n              \n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Price *</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    required\n                    value={editingProduct.price}\n                    onChange={(e) => setEditingProduct({...editingProduct, price: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Stock Quantity *</label>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    required\n                    value={editingProduct.stock_quantity}\n                    onChange={(e) => setEditingProduct({...editingProduct, stock_quantity: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                  />\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n                <textarea\n                  value={editingProduct.description}\n                  onChange={(e) => setEditingProduct({...editingProduct, description: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                  rows=\"3\"\n                />\n              </div>\n\n              {/* Image Upload Section for Edit */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Product Images (up to 4)\n                </label>\n                \n                {/* Image Upload Area */}\n                {editingProduct.images && editingProduct.images.length < 4 && (\n                  <div className=\"mb-4\">\n                    <label className=\"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100\">\n                      <div className=\"flex flex-col items-center justify-center pt-5 pb-6\">\n                        <svg className=\"w-8 h-8 mb-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                        </svg>\n                        <p className=\"mb-2 text-sm text-gray-500\">\n                          <span className=\"font-semibold\">Click to upload</span> or drag and drop\n                        </p>\n                        <p className=\"text-xs text-gray-500\">PNG, JPG, GIF up to 10MB ({4 - (editingProduct.images?.length || 0)} remaining)</p>\n                      </div>\n                      <input \n                        type=\"file\" \n                        className=\"hidden\" \n                        multiple \n                        accept=\"image/*\"\n                        onChange={(e) => handleImageUpload(e, true)}\n                      />\n                    </label>\n                  </div>\n                )}\n\n                {/* Image Previews for Edit */}\n                {editingProduct.images && editingProduct.images.length > 0 && (\n                  <div className=\"grid grid-cols-2 gap-2 mb-4\">\n                    {editingProduct.images.map((image) => (\n                      <div key={image.id} className=\"relative group\">\n                        <img\n                          src={image.preview}\n                          alt={image.name}\n                          className=\"w-full h-24 object-cover rounded-lg border\"\n                        />\n                        <button\n                          type=\"button\"\n                          onClick={() => removeImage(image.id, true)}\n                          className=\"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity\"\n                        >\n                          Ã—\n                        </button>\n                        <div className=\"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded\">\n                          {image.name.length > 10 ? image.name.substring(0, 10) + '...' : image.name}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"flex space-x-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {setShowEditModal(false); setEditingProduct(null);}}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"flex-1 px-4 py-2 bg-[#5EB47C] text-white rounded-lg hover:bg-[#4A9B63] transition-colors\"\n                >\n                  Update Product\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Delete Confirmation Modal */}\n      {showDeleteModal && deletingProduct && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-sm\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Delete Product</h2>\n            <p className=\"text-gray-600 mb-6\">\n              Are you sure you want to delete \"{deletingProduct.name}\"? This action cannot be undone.\n            </p>\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={() => {setShowDeleteModal(false); setDeletingProduct(null);}}\n                className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={confirmDeleteProduct}\n                className=\"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n              >\n                Delete\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Product Detail Modal */}\n      {showProductDetail && detailProduct && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h2 className=\"text-xl font-bold text-gray-900\">{detailProduct.name}</h2>\n              <button\n                onClick={() => setShowProductDetail(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            \n            {/* Product Images */}\n            {detailProduct.images && detailProduct.images.length > 0 ? (\n              <div className=\"mb-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Product Images</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  {detailProduct.images.map((image, index) => (\n                    <div key={image.id} className=\"relative\">\n                      <img\n                        src={image.preview}\n                        alt={`${detailProduct.name} - View ${index + 1}`}\n                        className=\"w-full h-32 object-cover rounded-lg border\"\n                      />\n                      <div className=\"absolute top-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded\">\n                        {index + 1} of {detailProduct.images.length}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ) : (\n              <div className=\"mb-6 text-center py-8 bg-gray-50 rounded-lg\">\n                <div className=\"text-4xl mb-2\">{detailProduct.image}</div>\n                <p className=\"text-gray-500\">No images uploaded</p>\n              </div>\n            )}\n            \n            {/* Product Details */}\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700\">Category</label>\n                  <p className=\"text-gray-900\">{detailProduct.category}</p>\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700\">Price</label>\n                  <p className=\"text-xl font-bold text-green-600\">${detailProduct.price}</p>\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700\">Stock</label>\n                  <p className={`font-medium ${\n                    detailProduct.status === 'in_stock' ? 'text-green-600' : 'text-red-600'\n                  }`}>\n                    {detailProduct.stock} units\n                  </p>\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700\">Status</label>\n                  <span className={`px-2 py-1 text-xs rounded-full ${\n                    detailProduct.status === 'in_stock' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                  }`}>\n                    {detailProduct.status === 'in_stock' ? 'In Stock' : 'Low Stock'}\n                  </span>\n                </div>\n              </div>\n              \n              {detailProduct.description && (\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700\">Description</label>\n                  <p className=\"text-gray-900 mt-1\">{detailProduct.description}</p>\n                </div>\n              )}\n            </div>\n            \n            {/* Action Buttons */}\n            <div className=\"flex space-x-3 mt-6 pt-4 border-t border-gray-200\">\n              <button\n                onClick={() => {\n                  setShowProductDetail(false);\n                  handleEditProduct(detailProduct);\n                }}\n                className=\"flex-1 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors\"\n              >\n                Edit Product\n              </button>\n              <button\n                onClick={() => {\n                  setShowProductDetail(false);\n                  handleDeleteProduct(detailProduct);\n                }}\n                className=\"flex-1 px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors\"\n              >\n                Delete Product\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\">\n          <div className=\"flex items-center\">\n            <div className=\"text-red-400 mr-3\">âš ï¸</div>\n            <div>\n              <p className=\"text-red-800 font-medium\">Error loading products</p>\n              <p className=\"text-red-600 text-sm\">{error}</p>\n            </div>\n            <button\n              onClick={loadProducts}\n              className=\"ml-auto px-3 py-1 bg-red-100 text-red-800 text-sm rounded hover:bg-red-200 transition-colors\"\n            >\n              Retry\n            </button>\n          </div>\n        </div>\n      )}\n\n      {loading ? (\n        <div className=\"text-center py-12 bg-gray-50 rounded-lg\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5EB47C] mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading products...</p>\n        </div>\n      ) : filteredProducts.length === 0 ? (\n        <div className=\"text-center py-12 bg-gray-50 rounded-lg\">\n          <div className=\"text-gray-400 text-6xl mb-4\">ðŸ“¦</div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n            {searchTerm || filterCategory !== 'All' ? 'No products found' : 'No products yet'}\n          </h3>\n          <p className=\"text-gray-600 mb-4\">\n            {searchTerm || filterCategory !== 'All' \n              ? 'Try adjusting your search or filter criteria'\n              : 'Start building your product catalog by adding your first product'\n            }\n          </p>\n          {!searchTerm && filterCategory === 'All' && (\n            <button \n              onClick={() => setShowAddModal(true)}\n              className=\"px-4 py-2 bg-[#5EB47C] text-white rounded-lg hover:bg-[#4A9B63] transition-colors\"\n            >\n              Add Your First Product\n            </button>\n          )}\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {filteredProducts.map((product) => (\n            <div key={product.id} className=\"bg-white border rounded-lg p-4 hover:shadow-md transition-shadow\">\n              <div className=\"flex items-start space-x-4 mb-4\">\n                <div className=\"flex-shrink-0 cursor-pointer\" onClick={() => handleProductClick(product)}>\n                  {product.images && product.images.length > 0 ? (\n                    <div className=\"relative\">\n                      <img\n                        src={product.images[0].preview}\n                        alt={product.name}\n                        className=\"w-16 h-16 object-cover rounded-lg border hover:opacity-80 transition-opacity\"\n                      />\n                      {product.images.length > 1 && (\n                        <div className=\"absolute -bottom-1 -right-1 bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\n                          +{product.images.length - 1}\n                        </div>\n                      )}\n                    </div>\n                  ) : (\n                    <div className=\"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-2xl hover:bg-gray-200 transition-colors\">\n                      {product.image}\n                    </div>\n                  )}\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"font-semibold text-gray-900\">{product.name}</h3>\n                  <p className=\"text-sm text-gray-600 mb-2\">{product.description}</p>\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-lg font-bold text-green-600\">${product.price}</p>\n                      <p className=\"text-xs text-gray-500\">{product.category}</p>\n                    </div>\n                    <div className=\"text-right\">\n                      <p className={`text-sm font-medium ${\n                        product.status === 'in_stock' ? 'text-green-600' : 'text-red-600'\n                      }`}>\n                        {product.stock} in stock\n                      </p>\n                      <span className={`px-2 py-1 text-xs rounded-full ${\n                        product.status === 'in_stock' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                      }`}>\n                        {product.status === 'in_stock' ? 'In Stock' : 'Low Stock'}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              {/* Product Actions */}\n              <div className=\"flex space-x-2 pt-2 border-t border-gray-100\">\n                <button\n                  onClick={() => handleEditProduct(product)}\n                  className=\"flex-1 px-3 py-2 text-sm bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 transition-colors\"\n                >\n                  Edit\n                </button>\n                <button\n                  onClick={() => handleDeleteProduct(product)}\n                  className=\"flex-1 px-3 py-2 text-sm bg-red-50 text-red-600 rounded-md hover:bg-red-100 transition-colors\"\n                >\n                  Delete\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst OrderManagement = ({ user, profile }) => {\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadOrders();\n  }, [user]);\n\n  const loadOrders = async () => {\n    if (!user?.id) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      // For now, we'll show empty state since orders table isn't implemented yet\n      // In the future, this would fetch from an orders table\n      setOrders([]);\n    } catch (error) {\n      console.error('Error loading orders:', error);\n      setOrders([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const pendingOrders = orders.filter(order => order.status === 'pending' || order.status === 'processing');\n  const shippedOrders = orders.filter(order => order.status === 'shipped' || order.status === 'delivered' || order.status === 'in_transit');\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Order Management</h1>\n        <p className=\"text-gray-600\">Track and manage customer orders</p>\n      </div>\n\n      {loading ? (\n        <div className=\"text-center py-12\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5EB47C] mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading orders...</p>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Pending Orders */}\n          <div className=\"bg-white rounded-lg shadow-sm border\">\n            <div className=\"p-6 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Pending Orders</h3>\n            </div>\n            <div className=\"p-6\">\n              {pendingOrders.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"text-gray-400 text-4xl mb-4\">â³</div>\n                  <h4 className=\"text-lg font-medium text-gray-900 mb-2\">No pending orders</h4>\n                  <p className=\"text-gray-600 text-sm\">\n                    New orders will appear here when customers make purchases\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {pendingOrders.map((order) => (\n                    <div key={order.id} className=\"flex items-center space-x-4 p-4 bg-yellow-50 rounded-lg\">\n                      <div className=\"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center\">\n                        <span className=\"text-yellow-600 font-semibold text-sm\">#</span>\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium text-gray-900\">Order #{order.id} - {order.customer_name}</p>\n                        <p className=\"text-sm text-gray-600\">{order.items} â€¢ ${order.total}</p>\n                        <span className={`inline-block px-2 py-1 text-xs rounded-full mt-1 ${\n                          order.status === 'processing' ? 'bg-yellow-100 text-yellow-800' : 'bg-blue-100 text-blue-800'\n                        }`}>\n                          {order.status.charAt(0).toUpperCase() + order.status.slice(1)}\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Recent Shipments */}\n          <div className=\"bg-white rounded-lg shadow-sm border\">\n            <div className=\"p-6 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Recent Shipments</h3>\n            </div>\n            <div className=\"p-6\">\n              {shippedOrders.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"text-gray-400 text-4xl mb-4\">ðŸ“¦</div>\n                  <h4 className=\"text-lg font-medium text-gray-900 mb-2\">No shipments yet</h4>\n                  <p className=\"text-gray-600 text-sm\">\n                    Completed orders will appear here once they're shipped\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {shippedOrders.map((order) => (\n                    <div key={order.id} className=\"flex items-center space-x-4 p-4 bg-green-50 rounded-lg\">\n                      <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center\">\n                        <span className=\"text-green-600 font-semibold text-sm\">âœ“</span>\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium text-gray-900\">Order #{order.id} - {order.customer_name}</p>\n                        <p className=\"text-sm text-gray-600\">{order.items} â€¢ ${order.total}</p>\n                        <span className={`inline-block px-2 py-1 text-xs rounded-full mt-1 ${\n                          order.status === 'delivered' ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'\n                        }`}>\n                          {order.status.charAt(0).toUpperCase() + order.status.slice(1)}\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst InventoryManagement = ({ user, profile }) => {\n  const [lowStockProducts, setLowStockProducts] = useState([]);\n  const [categoryStats, setCategoryStats] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadInventoryData();\n  }, [user]);\n\n  const loadInventoryData = async () => {\n    if (!user?.id) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const { data, error } = await productService.getProducts(user.id);\n      \n      if (error) {\n        console.error('Error loading inventory data:', error);\n        setLowStockProducts([]);\n        setCategoryStats([]);\n      } else {\n        // Filter low stock products (less than 10 units)\n        const lowStock = data.filter(product => product.stock_quantity < 10);\n        setLowStockProducts(lowStock);\n\n        // Calculate category statistics\n        const categoryMap = {};\n        data.forEach(product => {\n          if (categoryMap[product.category]) {\n            categoryMap[product.category]++;\n          } else {\n            categoryMap[product.category] = 1;\n          }\n        });\n\n        const stats = Object.entries(categoryMap).map(([category, count]) => ({\n          category,\n          count,\n          emoji: getProductEmoji(category)\n        }));\n        setCategoryStats(stats);\n      }\n    } catch (error) {\n      console.error('Error in loadInventoryData:', error);\n      setLowStockProducts([]);\n      setCategoryStats([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getProductEmoji = (category) => {\n    switch (category) {\n      case 'Food': return 'ðŸ¥«';\n      case 'Toys': return 'ðŸ§¸';\n      case 'Accessories': return 'ðŸ›ï¸';\n      case 'Health': return 'ðŸ’Š';\n      case 'Grooming': return 'ðŸ§´';\n      default: return 'ðŸ“¦';\n    }\n  };\n\n  const getStockLevel = (quantity) => {\n    if (quantity === 0) return { level: 'Out of Stock', color: 'red', bgColor: 'bg-red-50' };\n    if (quantity < 5) return { level: 'Critical', color: 'red', bgColor: 'bg-red-50' };\n    if (quantity < 10) return { level: 'Low', color: 'yellow', bgColor: 'bg-yellow-50' };\n    return { level: 'Good', color: 'green', bgColor: 'bg-green-50' };\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Inventory Management</h1>\n        <p className=\"text-gray-600\">Monitor stock levels and manage inventory</p>\n      </div>\n\n      {loading ? (\n        <div className=\"text-center py-12\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5EB47C] mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading inventory data...</p>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Low Stock Alerts */}\n          <div className=\"bg-white rounded-lg shadow-sm border\">\n            <div className=\"p-6 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Low Stock Alerts</h3>\n            </div>\n            <div className=\"p-6\">\n              {lowStockProducts.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"text-gray-400 text-4xl mb-4\">âœ…</div>\n                  <h4 className=\"text-lg font-medium text-gray-900 mb-2\">All products well stocked</h4>\n                  <p className=\"text-gray-600 text-sm\">\n                    Products with low stock (less than 10 units) will appear here\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {lowStockProducts.map((product) => {\n                    const stockInfo = getStockLevel(product.stock_quantity);\n                    return (\n                      <div key={product.id} className={`flex items-center space-x-4 p-4 ${stockInfo.bgColor} rounded-lg`}>\n                        <div className={`w-10 h-10 bg-${stockInfo.color}-100 rounded-full flex items-center justify-center`}>\n                          <span className={`text-${stockInfo.color}-600 font-semibold text-sm`}>\n                            {stockInfo.color === 'red' ? '!' : 'âš '}\n                          </span>\n                        </div>\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium text-gray-900\">{product.name}</p>\n                          <p className=\"text-sm text-gray-600\">\n                            {product.stock_quantity === 0 ? 'Out of stock' : `Only ${product.stock_quantity} units remaining`}\n                          </p>\n                          <span className={`inline-block px-2 py-1 bg-${stockInfo.color}-100 text-${stockInfo.color}-800 text-xs rounded-full mt-1`}>\n                            {stockInfo.level}\n                          </span>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Product Categories */}\n          <div className=\"bg-white rounded-lg shadow-sm border\">\n            <div className=\"p-6 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Product Categories</h3>\n            </div>\n            <div className=\"p-6\">\n              {categoryStats.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"text-gray-400 text-4xl mb-4\">ðŸ“¦</div>\n                  <h4 className=\"text-lg font-medium text-gray-900 mb-2\">No products yet</h4>\n                  <p className=\"text-gray-600 text-sm\">\n                    Add products to see category breakdown\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {categoryStats.map((stat) => (\n                    <div key={stat.category} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <span className=\"text-lg\">{stat.emoji}</span>\n                        <span className=\"font-medium text-gray-900\">{stat.category}</span>\n                      </div>\n                      <span className=\"text-sm font-semibold text-gray-600\">\n                        {stat.count} product{stat.count !== 1 ? 's' : ''}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst BusinessMessages = ({ user, profile }) => {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Customer Messages</h1>\n        <p className=\"text-gray-600\">Communicate with your customers about orders and products</p>\n      </div>\n\n      <div className=\"text-center py-12 bg-gray-50 rounded-lg\">\n        <div className=\"text-gray-400 text-6xl mb-4\">ðŸ’¬</div>\n        <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Customer Messaging Coming Soon</h3>\n        <p className=\"text-gray-600\">\n          Chat directly with customers about their orders, answer product questions, and provide customer support.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nconst BusinessAnalytics = ({ user, profile }) => {\n  const [analyticsData, setAnalyticsData] = useState({\n    totalOrders: 0,\n    totalRevenue: 0,\n    avgOrderValue: 0,\n    customerRetention: 0\n  });\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadAnalyticsData();\n  }, [user]);\n\n  const loadAnalyticsData = async () => {\n    if (!user?.id) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      // For now, we'll calculate basic analytics from product data\n      // In the future, this would include real order and customer data\n      const { data: products, error } = await productService.getProducts(user.id);\n      \n      if (error) {\n        console.error('Error loading analytics data:', error);\n        setAnalyticsData({\n          totalOrders: 0,\n          totalRevenue: 0,\n          avgOrderValue: 0,\n          customerRetention: 0\n        });\n      } else {\n        // Calculate basic metrics from products\n        const totalProducts = products.length;\n        const totalStockValue = products.reduce((sum, product) => \n          sum + (product.price * product.stock_quantity), 0\n        );\n        \n        setAnalyticsData({\n          totalOrders: 0, // Will be populated when order system is implemented\n          totalRevenue: 0, // Will be populated when order system is implemented  \n          avgOrderValue: 0, // Will be populated when order system is implemented\n          customerRetention: 0 // Will be populated when customer tracking is implemented\n        });\n      }\n    } catch (error) {\n      console.error('Error in loadAnalyticsData:', error);\n      setAnalyticsData({\n        totalOrders: 0,\n        totalRevenue: 0,\n        avgOrderValue: 0,\n        customerRetention: 0\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Business Analytics</h1>\n        <p className=\"text-gray-600\">View your business performance and sales insights</p>\n      </div>\n\n      {loading ? (\n        <div className=\"text-center py-12\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5EB47C] mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading analytics...</p>\n        </div>\n      ) : (\n        <>\n          {/* Analytics Overview */}\n          <div className=\"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-6\">\n        <div className=\"bg-white rounded-lg shadow-sm border p-4 sm:p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-xs sm:text-sm font-medium text-gray-600\">Total Orders</p>\n              <p className=\"text-xl sm:text-2xl font-bold text-gray-900\">{analyticsData.totalOrders}</p>\n            </div>\n            <div className=\"w-6 h-6 sm:w-8 sm:h-8 text-blue-600\">\n              <span className=\"text-lg sm:text-xl\">ðŸ“Š</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm border p-4 sm:p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-xs sm:text-sm font-medium text-gray-600\">Total Revenue</p>\n              <p className=\"text-xl sm:text-2xl font-bold text-gray-900\">${analyticsData.totalRevenue.toLocaleString()}</p>\n            </div>\n            <div className=\"w-6 h-6 sm:w-8 sm:h-8 text-green-600\">\n              <span className=\"text-lg sm:text-xl\">ðŸ’°</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm border p-4 sm:p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-xs sm:text-sm font-medium text-gray-600\">Avg. Order Value</p>\n              <p className=\"text-xl sm:text-2xl font-bold text-gray-900\">${analyticsData.avgOrderValue}</p>\n            </div>\n            <div className=\"w-6 h-6 sm:w-8 sm:h-8 text-purple-600\">\n              <span className=\"text-lg sm:text-xl\">ðŸ›’</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm border p-4 sm:p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-xs sm:text-sm font-medium text-gray-600\">Customer Retention</p>\n              <p className=\"text-xl sm:text-2xl font-bold text-gray-900\">{analyticsData.customerRetention}%</p>\n            </div>\n            <div className=\"w-6 h-6 sm:w-8 sm:h-8 text-yellow-600\">\n              <span className=\"text-lg sm:text-xl\">â­</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n          {/* Sales Charts */}\n          <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Sales Performance</h3>\n            <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\n              <div className=\"text-gray-400 text-4xl mb-4\">ðŸ“Š</div>\n              <h4 className=\"text-lg font-medium text-gray-900 mb-2\">Analytics Coming Soon</h4>\n              <p className=\"text-gray-600 text-sm\">\n                Detailed analytics will be available once you start receiving orders and tracking customer interactions\n              </p>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nconst BusinessProfile = ({ user, profile, onProfileUpdate }) => {\n  const [businessInfo, setBusinessInfo] = useState({\n    businessName: '',\n    yearsInBusiness: '',\n    businessType: 'Pet Supply Store',\n    location: ''\n  });\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadBusinessProfile();\n  }, [user, profile]);\n\n  const loadBusinessProfile = async () => {\n    try {\n      setLoading(true);\n      \n      // Start with profile data - use personal location as business location\n      let locationData = '';\n      let businessName = '';\n      let businessType = 'Pet Supply Store';\n      let yearsInBusiness = '';\n      \n      if (profile) {\n        console.log('ðŸ“‹ Profile data received:', profile);\n        // Use the personal location from signup as the business location\n        locationData = profile.location || '';\n        \n        // Parse business name and years from organization field\n        if (profile.organization) {\n          if (profile.organization.includes('|years:')) {\n            const parts = profile.organization.split('|years:');\n            businessName = parts[0];\n            yearsInBusiness = parts[1];\n          } else {\n            businessName = profile.organization;\n          }\n        } else {\n          businessName = profile.full_name || '';\n        }\n        \n        businessType = 'Pet Supply Store'; // Default for pet business\n        console.log('ðŸ“‹ Extracted from profile - businessName:', businessName, 'location:', locationData, 'years:', yearsInBusiness);\n      } else {\n        console.log('âš ï¸ No profile data received');\n      }\n\n      // If no location in profile, try to get it from auth user metadata\n      if (user?.id && !locationData) {\n        try {\n          const { data: userData, error: userError } = await supabase.auth.getUser();\n          if (!userError && userData?.user?.user_metadata) {\n            const metadata = userData.user.user_metadata;\n            // Reconstruct location from signup data\n            const locationParts = [\n              metadata.address,\n              metadata.city,\n              metadata.country\n            ].filter(Boolean);\n            \n            if (locationParts.length > 0) {\n              locationData = locationParts.join(', ');\n            }\n            \n            // Also get business name from metadata if not in profile\n            if (!businessName && metadata.business_name) {\n              businessName = metadata.business_name;\n            }\n          }\n        } catch (error) {\n          console.log('Could not retrieve user metadata:', error);\n        }\n      }\n\n      // Skip providers table query for now due to 406 errors\n      // We have all the data we need from the profile and auth metadata\n\n      const finalBusinessInfo = {\n        businessName: businessName,\n        yearsInBusiness: yearsInBusiness || '', // Now extracted from profile\n        businessType: businessType,\n        location: locationData\n      };\n\n      console.log('ðŸ“‹ Setting business info:', finalBusinessInfo);\n      setBusinessInfo(finalBusinessInfo);\n    } catch (error) {\n      console.error('Error loading business profile:', error);\n      // Fallback to basic profile data\n      if (profile) {\n        setBusinessInfo({\n          businessName: profile.organization || profile.full_name || '',\n          yearsInBusiness: '',\n          businessType: 'Pet Supply Store',\n          location: profile.location || ''\n        });\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSave = async () => {\n    try {\n      setLoading(true);\n      \n      if (!user?.id) {\n        alert('Error: User not found');\n        return;\n      }\n\n      console.log('ðŸ’¾ Saving business profile:', businessInfo);\n      console.log('ðŸ‘¤ User ID:', user.id);\n\n      // First, check if profile exists\n      const { data: existingProfile, error: checkError } = await supabase\n        .from('profiles')\n        .select('id, email, organization, location')\n        .eq('id', user.id)\n        .single();\n\n      if (checkError) {\n        console.error('âŒ Error checking existing profile:', checkError);\n        if (checkError.code === 'PGRST116') {\n          // Profile doesn't exist, create it\n          console.log('ðŸ“ Profile does not exist, creating new profile...');\n          \n          // Create organization data with years if provided\n          let organizationData = businessInfo.businessName;\n          if (businessInfo.yearsInBusiness) {\n            organizationData = `${businessInfo.businessName}|years:${businessInfo.yearsInBusiness}`;\n          }\n          \n          const { data: newProfile, error: insertError } = await supabase\n            .from('profiles')\n            .insert({\n              id: user.id,\n              email: user.email,\n              full_name: user.user_metadata?.full_name || '',\n              phone: user.user_metadata?.phone || '',\n              organization: organizationData,\n              location: businessInfo.location,\n              role: 'pet_business',\n              created_at: new Date().toISOString(),\n              updated_at: new Date().toISOString()\n            })\n            .select();\n\n          if (insertError) {\n            console.error('âŒ Error creating profile:', insertError);\n            alert(`Error creating profile: ${insertError.message}. Please try again.`);\n            return;\n          }\n          console.log('âœ… Profile created successfully:', newProfile);\n        } else {\n          alert(`Error checking profile: ${checkError.message}. Please try again.`);\n          return;\n        }\n      } else {\n        // Profile exists, update it\n        console.log('ðŸ“ Profile exists, updating with data:', {\n          organization: businessInfo.businessName,\n          location: businessInfo.location\n        });\n\n        // Store business info including years in business\n        // We'll append years in business to the organization field in a structured way\n        let organizationData = businessInfo.businessName;\n        if (businessInfo.yearsInBusiness) {\n          organizationData = `${businessInfo.businessName}|years:${businessInfo.yearsInBusiness}`;\n        }\n\n        const updateData = {\n          organization: organizationData, // Store business name and years together\n          location: businessInfo.location,\n          updated_at: new Date().toISOString()\n        };\n\n        console.log('ðŸ“ Storing organization data:', organizationData);\n\n        const { data: updateResult, error: profileError } = await supabase\n          .from('profiles')\n          .update(updateData)\n          .eq('id', user.id)\n          .select();\n\n        if (profileError) {\n          console.error('âŒ Error updating profile:', profileError);\n          alert(`Error saving profile: ${profileError.message}. Please try again.`);\n          return;\n        }\n\n        console.log('âœ… Profile updated successfully:', updateResult);\n      }\n\n      // Skip providers table update due to 406 errors\n      console.log('ðŸ“ Skipping providers table update - using profiles table only');\n\n      // Show success message\n      alert('âœ… Business profile saved successfully!');\n      console.log('ðŸŽ‰ Business profile saved:', businessInfo);\n      \n      // Reload the profile data from the main component to reflect changes everywhere\n      console.log('ðŸ”„ Refreshing profile data in main component...');\n      if (onProfileUpdate) {\n        await onProfileUpdate();\n      }\n      // Also reload local data\n      await loadBusinessProfile();\n      console.log('âœ… Profile data refreshed');\n    } catch (error) {\n      console.error('âŒ Error saving business profile:', error);\n      alert(`Error saving profile: ${error.message || 'Unknown error'}. Please try again.`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Business Profile</h1>\n          <p className=\"text-gray-600\">Manage your business information and store details</p>\n        </div>\n        <div className=\"text-center py-12\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-[#5EB47C] mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading business profile...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Business Profile</h1>\n        <p className=\"text-gray-600\">Manage your business information and store details</p>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n        <div className=\"space-y-6\">\n          {/* Business Info */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Business Information</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Business Name</label>\n                <input \n                  type=\"text\" \n                  value={businessInfo.businessName}\n                  onChange={(e) => setBusinessInfo({...businessInfo, businessName: e.target.value})}\n                  placeholder=\"Enter your business name\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Years in Business</label>\n                <input \n                  type=\"number\" \n                  value={businessInfo.yearsInBusiness}\n                  onChange={(e) => setBusinessInfo({...businessInfo, yearsInBusiness: e.target.value})}\n                  placeholder=\"0\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Business Type</label>\n                <select \n                  value={businessInfo.businessType}\n                  onChange={(e) => setBusinessInfo({...businessInfo, businessType: e.target.value})}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                >\n                  <option value=\"Pet Supply Store\">Pet Supply Store</option>\n                  <option value=\"Pet Food Retailer\">Pet Food Retailer</option>\n                  <option value=\"Pet Accessories Shop\">Pet Accessories Shop</option>\n                  <option value=\"Online Pet Store\">Online Pet Store</option>\n                  <option value=\"Pet Boutique\">Pet Boutique</option>\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Business Location</label>\n                <input \n                  type=\"text\" \n                  value={businessInfo.location}\n                  onChange={(e) => setBusinessInfo({...businessInfo, location: e.target.value})}\n                  placeholder=\"City, Country\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#5EB47C]\"\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  This is populated from your personal location provided during signup\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Business Status */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Store Status</h3>\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center justify-between p-3 bg-blue-50 rounded-lg\">\n                <span className=\"text-sm font-medium text-gray-900\">Dashboard Access</span>\n                <span className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\">Active</span>\n              </div>\n              <div className=\"flex items-center justify-between p-3 bg-blue-50 rounded-lg\">\n                <span className=\"text-sm font-medium text-gray-900\">Product Management</span>\n                <span className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\">Enabled</span>\n              </div>\n              <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                <span className=\"text-sm font-medium text-gray-900\">Order Management</span>\n                <span className=\"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full\">Coming Soon</span>\n              </div>\n            </div>\n          </div>\n\n          <button \n            onClick={handleSave}\n            disabled={loading}\n            className={`w-full sm:w-auto px-6 py-2 text-white rounded-lg transition-colors ${\n              loading \n                ? 'bg-gray-400 cursor-not-allowed' \n                : 'bg-[#5EB47C] hover:bg-[#4A9B63]'\n            }`}\n          >\n            {loading ? (\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                <span>Saving...</span>\n              </div>\n            ) : (\n              'Save Changes'\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst PetBusinessDashboard = () => {\n  const [user, setUser] = useState(null);\n  const [profile, setProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeSection, setActiveSection] = useState('overview');\n  const navigate = useNavigate();\n\n  // Pet Business navigation focused on products and sales\n  const businessNavigation = [\n    { \n      id: 'overview', \n      name: 'Overview',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2z\" />\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M8 5a2 2 0 012-2h4a2 2 0 012 2v4H8V5z\" />\n        </svg>\n      )\n    },\n    { \n      id: 'products', \n      name: 'Products',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\n        </svg>\n      )\n    },\n    { \n      id: 'orders', \n      name: 'Orders',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n        </svg>\n      )\n    },\n    { \n      id: 'inventory', \n      name: 'Inventory',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4\" />\n        </svg>\n      )\n    },\n    { \n      id: 'messages', \n      name: 'Messages',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n        </svg>\n      )\n    },\n    { \n      id: 'analytics', \n      name: 'Analytics',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n        </svg>\n      )\n    },\n    { \n      id: 'profile', \n      name: 'Profile',\n      icon: (\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n        </svg>\n      )\n    }\n  ];\n\n  useEffect(() => {\n    fetchUserData();\n  }, []);\n\n  const fetchUserData = async () => {\n    try {\n      // Get current user\n      const { data: { user: currentUser }, error: userError } = await supabase.auth.getUser();\n      \n      if (userError) {\n        console.error('Error getting user:', userError);\n        setError('Error loading user data');\n        setLoading(false);\n        return;\n      }\n\n      if (!currentUser) {\n        console.log('No user found, redirecting to sign in');\n        navigate('/signin');\n        return;\n      }\n\n      setUser(currentUser);\n\n      // Get user profile\n      const { data: profileData, error: profileError } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', currentUser.id)\n        .single();\n\n      if (profileError) {\n        console.error('Error getting profile:', profileError);\n        console.log('PetBusinessDashboard - No profile found, using basic user data');\n      } else {\n        setProfile(profileData);\n        console.log('âœ… PetBusinessDashboard - Profile loaded successfully');\n      }\n\n      setLoading(false);\n\n    } catch (error) {\n      console.error('Error in fetchUserData:', error);\n      setError('Error loading dashboard data');\n      setLoading(false);\n    }\n  };\n\n  // Render active section content\n  const renderActiveSection = () => {\n    switch (activeSection) {\n      case 'overview':\n        return <BusinessOverview user={user} profile={profile} />;\n      case 'products':\n        return <ProductCatalog user={user} profile={profile} />;\n      case 'orders':\n        return <OrderManagement user={user} profile={profile} />;\n      case 'inventory':\n        return <InventoryManagement user={user} profile={profile} />;\n      case 'messages':\n        return <BusinessMessages user={user} profile={profile} />;\n      case 'analytics':\n        return <BusinessAnalytics user={user} profile={profile} />;\n      case 'profile':\n        return <BusinessProfile user={user} profile={profile} onProfileUpdate={fetchUserData} />;\n      default:\n        return <BusinessOverview user={user} profile={profile} />;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#5EB47C] mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading your business dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-red-500 mb-4\">âš ï¸</div>\n          <p className=\"text-red-600 font-montserrat\">{error}</p>\n          <button \n            onClick={() => window.location.reload()} \n            className=\"mt-4 px-4 py-2 bg-[#5EB47C] text-white rounded hover:bg-[#4A9B63]\"\n          >\n            Retry\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Get display name from profile or user data\n  const displayName = profile?.full_name || \n                     (user?.user_metadata?.full_name) ||\n                     (user?.email?.split('@')[0]) ||\n                     'Business Owner';\n  \n  const firstName = displayName.split(' ')[0] || 'Owner';\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"flex flex-col lg:flex-row\">\n        {/* Mobile Header */}\n        <div className=\"lg:hidden bg-white border-b border-gray-200 px-4 py-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3 min-w-0 flex-1\">\n              <img \n                src=\"https://wagrmmbkukwblfpfxxcb.supabase.co/storage/v1/object/public/web-img/PetBusiness.svg\" \n                alt=\"Pet Business\" \n                className=\"w-8 h-8 flex-shrink-0\"\n              />\n              <div className=\"min-w-0 flex-1\">\n                <h4 className=\"text-md font-medium text-gray-900 truncate\">Welcome back, {firstName}</h4>\n                <p className=\"text-sm text-gray-600 truncate\">Pet Business Owner</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Mobile Navigation */}\n        <div className=\"lg:hidden bg-white border-b border-gray-200 px-2 py-2\">\n          <div className=\"flex overflow-x-auto space-x-1 pb-2\">\n            {businessNavigation.map((item) => (\n              <button\n                key={item.id}\n                onClick={() => setActiveSection(item.id)}\n                className={`flex-shrink-0 flex items-center px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${\n                  activeSection === item.id\n                    ? 'bg-green-100 text-[#5EB47C]'\n                    : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                }`}\n              >\n                <span className=\"mr-2\">{item.icon}</span>\n                {item.name}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Desktop Sidebar */}\n        <div className=\"hidden lg:block w-64 bg-white shadow-sm border-r border-gray-200 min-h-screen\">\n          <div className=\"p-6\">\n            <div className=\"mb-6\">\n              <div className=\"flex items-center space-x-3 mb-3\">\n                <img \n                  src=\"https://wagrmmbkukwblfpfxxcb.supabase.co/storage/v1/object/public/web-img/PetBusiness.svg\" \n                  alt=\"Pet Business\" \n                  className=\"w-10 h-10\"\n                />\n                <div className=\"min-w-0 flex-1\">\n                  <h1 className=\"text-lg font-semibold text-gray-900 truncate\">Pet Business</h1>\n                  <p className=\"text-sm text-gray-600 truncate\">{displayName}</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Navigation */}\n            <nav className=\"space-y-2\">\n              {businessNavigation.map((item) => (\n                <button\n                  key={item.id}\n                  onClick={() => setActiveSection(item.id)}\n                  className={`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${\n                    activeSection === item.id\n                      ? 'bg-green-100 text-[#5EB47C]'\n                      : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                  }`}\n                >\n                  <span className=\"mr-3\">{item.icon}</span>\n                  {item.name}\n                </button>\n              ))}\n            </nav>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 p-3 sm:p-4 lg:p-6\">\n          {renderActiveSection()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PetBusinessDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}