{"ast":null,"code":"import React from'react';import*as Sentry from'@sentry/react';import logger from'../../lib/logger';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class ErrorBoundary extends React.Component{constructor(props){super(props);this.handleRetry=()=>{this.setState({hasError:false,error:null,errorInfo:null});};this.state={hasError:false,error:null,errorInfo:null};}static getDerivedStateFromError(error){// Update state so the next render will show the fallback UI\nreturn{hasError:true};}componentDidCatch(error,errorInfo){// Log error details\nlogger.error('Error caught by boundary:',error,errorInfo);// Report to Sentry\nSentry.captureException(error,{contexts:{react:{componentStack:errorInfo.componentStack}}});// Update state with error details\nthis.setState({error,errorInfo});}render(){if(this.state.hasError){// Custom fallback UI\nif(this.props.fallback){return this.props.fallback;}// Default fallback UI\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-6 w-6 text-red-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-4 text-lg font-medium text-gray-900\",children:\"Something went wrong\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600\",children:this.props.message||'An unexpected error occurred. Our team has been notified.'}),process.env.NODE_ENV==='development'&&this.state.error&&/*#__PURE__*/_jsxs(\"details\",{className:\"mt-4 text-left\",children:[/*#__PURE__*/_jsx(\"summary\",{className:\"text-sm font-medium text-gray-700 cursor-pointer\",children:\"Error Details (Development Only)\"}),/*#__PURE__*/_jsxs(\"pre\",{className:\"mt-2 text-xs text-red-600 bg-red-50 p-2 rounded overflow-auto\",children:[this.state.error.toString(),this.state.errorInfo.componentStack]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex flex-col sm:flex-row gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:this.handleRetry,className:\"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:\"Try Again\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:\"Reload Page\"})]})]})})})});}return this.props.children;}}// Higher-order component for easier usage\nexport const withErrorBoundary=function(Component){let errorBoundaryProps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const WrappedComponent=props=>/*#__PURE__*/_jsx(ErrorBoundary,{...errorBoundaryProps,children:/*#__PURE__*/_jsx(Component,{...props})});WrappedComponent.displayName=`withErrorBoundary(${Component.displayName||Component.name})`;return WrappedComponent;};export default ErrorBoundary;","map":{"version":3,"names":["React","Sentry","logger","jsx","_jsx","jsxs","_jsxs","ErrorBoundary","Component","constructor","props","handleRetry","setState","hasError","error","errorInfo","state","getDerivedStateFromError","componentDidCatch","captureException","contexts","react","componentStack","render","fallback","className","children","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","message","process","env","NODE_ENV","toString","onClick","window","location","reload","withErrorBoundary","errorBoundaryProps","arguments","length","undefined","WrappedComponent","displayName","name"],"sources":["/workspace/src/components/common/ErrorBoundary.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport * as Sentry from '@sentry/react';\nimport logger from '../../lib/logger';\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // Log error details\n    logger.error('Error caught by boundary:', error, errorInfo);\n    \n    // Report to Sentry\n    Sentry.captureException(error, {\n      contexts: {\n        react: {\n          componentStack: errorInfo.componentStack\n        }\n      }\n    });\n\n    // Update state with error details\n    this.setState({\n      error,\n      errorInfo\n    });\n  }\n\n  handleRetry = () => {\n    this.setState({ hasError: false, error: null, errorInfo: null });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      // Custom fallback UI\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      // Default fallback UI\n      return (\n        <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n          <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n            <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n              <div className=\"text-center\">\n                <div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100\">\n                  <svg className=\"h-6 w-6 text-red-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\n                  </svg>\n                </div>\n                <h3 className=\"mt-4 text-lg font-medium text-gray-900\">\n                  Something went wrong\n                </h3>\n                <p className=\"mt-2 text-sm text-gray-600\">\n                  {this.props.message || 'An unexpected error occurred. Our team has been notified.'}\n                </p>\n                \n                {process.env.NODE_ENV === 'development' && this.state.error && (\n                  <details className=\"mt-4 text-left\">\n                    <summary className=\"text-sm font-medium text-gray-700 cursor-pointer\">\n                      Error Details (Development Only)\n                    </summary>\n                    <pre className=\"mt-2 text-xs text-red-600 bg-red-50 p-2 rounded overflow-auto\">\n                      {this.state.error.toString()}\n                      {this.state.errorInfo.componentStack}\n                    </pre>\n                  </details>\n                )}\n                \n                <div className=\"mt-6 flex flex-col sm:flex-row gap-3\">\n                  <button\n                    onClick={this.handleRetry}\n                    className=\"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                  >\n                    Try Again\n                  </button>\n                  <button\n                    onClick={() => window.location.reload()}\n                    className=\"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                  >\n                    Reload Page\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nErrorBoundary.propTypes = {\n  children: PropTypes.node.isRequired,\n  fallback: PropTypes.element,\n  message: PropTypes.string,\n};\n\n// Higher-order component for easier usage\nexport const withErrorBoundary = (Component, errorBoundaryProps = {}) => {\n  const WrappedComponent = (props) => (\n    <ErrorBoundary {...errorBoundaryProps}>\n      <Component {...props} />\n    </ErrorBoundary>\n  );\n  \n  WrappedComponent.displayName = `withErrorBoundary(${Component.displayName || Component.name})`;\n  return WrappedComponent;\n};\n\nexport default ErrorBoundary;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}