{"ast":null,"code":"import React,{useState,useRef}from'react';import healthRecordService from'../services/healthRecordService';import{HealthIcon,UIIcon}from'./MinimalIcons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditHealthRecordForm=_ref=>{let{record,onClose,onSuccess}=_ref;const[formData,setFormData]=useState({record_type:(record===null||record===void 0?void 0:record.record_type)||'checkup',title:(record===null||record===void 0?void 0:record.title)||'',description:(record===null||record===void 0?void 0:record.description)||'',vet_name:(record===null||record===void 0?void 0:record.vet_name)||'',clinic_name:(record===null||record===void 0?void 0:record.clinic_name)||'',date_performed:record!==null&&record!==void 0&&record.date_performed?record.date_performed.split('T')[0]:new Date().toISOString().split('T')[0],next_due_date:record!==null&&record!==void 0&&record.next_due_date?record.next_due_date.split('T')[0]:'',cost:(record===null||record===void 0?void 0:record.cost)||'',notes:(record===null||record===void 0?void 0:record.notes)||''});const[documents,setDocuments]=useState((record===null||record===void 0?void 0:record.documents)||[]);const[uploading,setUploading]=useState(false);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const fileInputRef=useRef(null);const recordTypes=[{value:'checkup',label:'Regular Checkup',icon:/*#__PURE__*/_jsx(HealthIcon,{type:\"check\",className:\"w-5 h-5\",color:\"currentColor\"}),textIcon:'⚕️'},{value:'vaccination',label:'Vaccination',icon:/*#__PURE__*/_jsx(HealthIcon,{type:\"vaccination\",className:\"w-5 h-5\",color:\"currentColor\"}),textIcon:'💉'},{value:'surgery',label:'Surgery',icon:/*#__PURE__*/_jsx(UIIcon,{type:\"surgery\",className:\"w-5 h-5\",color:\"currentColor\"}),textIcon:'🏥'},{value:'emergency',label:'Emergency Visit',icon:/*#__PURE__*/_jsx(HealthIcon,{type:\"emergency\",className:\"w-5 h-5\",color:\"currentColor\"}),textIcon:'🚨'},{value:'dental',label:'Dental Care',icon:/*#__PURE__*/_jsx(HealthIcon,{type:\"dental\",className:\"w-5 h-5\",color:\"currentColor\"}),textIcon:'🦷'},{value:'grooming',label:'Grooming',icon:/*#__PURE__*/_jsx(UIIcon,{type:\"scissors\",className:\"w-5 h-5\",color:\"currentColor\"}),textIcon:'✂️'},{value:'lab_work',label:'Lab Work',icon:/*#__PURE__*/_jsx(HealthIcon,{type:\"lab\",className:\"w-5 h-5\",color:\"currentColor\"}),textIcon:'🔬'},{value:'other',label:'Other',icon:/*#__PURE__*/_jsx(HealthIcon,{type:\"records\",className:\"w-5 h-5\",color:\"currentColor\"}),textIcon:'📋'}];// Dynamic field configurations based on record type\nconst getFieldConfig=recordType=>{const configs={grooming:{professionalLabel:'Groomer Name',professionalPlaceholder:'e.g., Sarah Smith',businessLabel:'Salon/Shop Name',businessPlaceholder:'e.g., Pampered Paws Grooming',titlePlaceholder:'e.g., Full Grooming Service, Nail Trim',descriptionPlaceholder:'Describe the grooming services performed...',nextDueDateLabel:'Next Grooming Due',showNextDueDate:true},checkup:{professionalLabel:'Veterinarian Name',professionalPlaceholder:'e.g., Dr. Smith',businessLabel:'Clinic/Hospital Name',businessPlaceholder:'e.g., Pet Care Clinic',titlePlaceholder:'e.g., Annual Checkup, Wellness Exam',descriptionPlaceholder:'Describe the examination findings and recommendations...',nextDueDateLabel:'Next Checkup Due',showNextDueDate:true},vaccination:{professionalLabel:'Veterinarian Name',professionalPlaceholder:'e.g., Dr. Smith',businessLabel:'Clinic/Hospital Name',businessPlaceholder:'e.g., Pet Care Clinic',titlePlaceholder:'e.g., Rabies Vaccination, DHPP Booster',descriptionPlaceholder:'Specify vaccine type, batch number, and any reactions...',nextDueDateLabel:'Next Vaccination Due',showNextDueDate:true},surgery:{professionalLabel:'Surgeon/Veterinarian Name',professionalPlaceholder:'e.g., Dr. Johnson',businessLabel:'Hospital/Clinic Name',businessPlaceholder:'e.g., Animal Surgery Center',titlePlaceholder:'e.g., Spay Surgery, Tumor Removal',descriptionPlaceholder:'Describe the surgical procedure and post-op care...',nextDueDateLabel:'Follow-up Appointment',showNextDueDate:true},emergency:{professionalLabel:'Attending Veterinarian',professionalPlaceholder:'e.g., Dr. Emergency',businessLabel:'Emergency Clinic Name',businessPlaceholder:'e.g., 24/7 Animal Emergency',titlePlaceholder:'e.g., Emergency Visit - Injury, Poisoning',descriptionPlaceholder:'Describe the emergency situation and treatment...',nextDueDateLabel:'Follow-up Required',showNextDueDate:true},dental:{professionalLabel:'Veterinarian Name',professionalPlaceholder:'e.g., Dr. Smith',businessLabel:'Clinic/Hospital Name',businessPlaceholder:'e.g., Pet Dental Care',titlePlaceholder:'e.g., Dental Cleaning, Tooth Extraction',descriptionPlaceholder:'Describe the dental procedure and findings...',nextDueDateLabel:'Next Dental Care Due',showNextDueDate:true},lab_work:{professionalLabel:'Veterinarian/Technician Name',professionalPlaceholder:'e.g., Dr. Smith',businessLabel:'Lab/Clinic Name',businessPlaceholder:'e.g., Pet Diagnostics Lab',titlePlaceholder:'e.g., Blood Work, Urinalysis, X-Ray',descriptionPlaceholder:'Describe the tests performed and results...',nextDueDateLabel:'Next Lab Work Due',showNextDueDate:false},other:{professionalLabel:'Professional Name',professionalPlaceholder:'e.g., Professional Name',businessLabel:'Business/Facility Name',businessPlaceholder:'e.g., Business Name',titlePlaceholder:'e.g., Treatment or Service Name',descriptionPlaceholder:'Describe the service or treatment...',nextDueDateLabel:'Next Appointment/Service',showNextDueDate:false}};return configs[recordType]||configs.other;};const currentConfig=getFieldConfig(formData.record_type);const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));setError('');};const handleFileUpload=async e=>{const files=Array.from(e.target.files);if(files.length===0)return;setUploading(true);setError('');try{const uploadPromises=files.map(async file=>{// Validate file type\nconst allowedTypes=['application/pdf','image/jpeg','image/png','image/jpg'];if(!allowedTypes.includes(file.type)){throw new Error(`Invalid file type: ${file.type}. Please upload PDF, JPG, or PNG files only.`);}// Validate file size (max 10MB)\nif(file.size>10*1024*1024){throw new Error(`File ${file.name} is too large. Maximum size is 10MB.`);}const result=await healthRecordService.uploadVetReport(record.pet_id,file,'health_record');if(!result.success){throw new Error(`Failed to upload ${file.name}: ${result.error}`);}return result.data;});const uploadedDocs=await Promise.all(uploadPromises);setDocuments(prev=>[...prev,...uploadedDocs]);// Clear file input\nif(fileInputRef.current){fileInputRef.current.value='';}}catch(error){console.error('Upload error:',error);setError(error.message);}finally{setUploading(false);}};const removeDocument=index=>{setDocuments(prev=>prev.filter((_,i)=>i!==index));};const handleSubmit=async e=>{e.preventDefault();// Validation\nif(!formData.title.trim()){setError('Title is required');return;}if(!formData.description.trim()){setError('Description is required');return;}setLoading(true);setError('');try{const recordData={...formData,documents:documents,updated_at:new Date().toISOString()};const result=await healthRecordService.updateHealthRecord(record.id,recordData);if(result.success){alert('Health record updated successfully!');if(onSuccess){onSuccess(result.data);}onClose();}else{setError(`Failed to update health record: ${result.error}`);}}catch(error){console.error('Error updating health record:',error);setError(`Error updating health record: ${error.message}`);}finally{setLoading(false);}};const handleCancel=()=>{if(window.confirm('Are you sure you want to cancel? Any unsaved changes will be lost.')){onClose();}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Edit Health Record\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCancel,className:\"text-gray-400 hover:text-gray-600 text-2xl\",children:\"\\xD7\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-red-50 border border-red-200 rounded-md\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-sm\",children:error})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Record Type\"}),/*#__PURE__*/_jsx(\"select\",{name:\"record_type\",value:formData.record_type,onChange:handleInputChange,className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\",required:true,children:recordTypes.map(type=>/*#__PURE__*/_jsxs(\"option\",{value:type.value,children:[type.textIcon,\" \",type.label]},type.value))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:formData.title,onChange:handleInputChange,placeholder:currentConfig.titlePlaceholder,className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description *\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:handleInputChange,rows:3,placeholder:currentConfig.descriptionPlaceholder,className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:currentConfig.professionalLabel}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"vet_name\",value:formData.vet_name,onChange:handleInputChange,placeholder:currentConfig.professionalPlaceholder,className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:currentConfig.businessLabel}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"clinic_name\",value:formData.clinic_name,onChange:handleInputChange,placeholder:currentConfig.businessPlaceholder,className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Date Performed *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"date_performed\",value:formData.date_performed,onChange:handleInputChange,className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\",required:true})]}),currentConfig.showNextDueDate&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:currentConfig.nextDueDateLabel}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"next_due_date\",value:formData.next_due_date,onChange:handleInputChange,className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Cost ($)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"cost\",value:formData.cost,onChange:handleInputChange,step:\"0.01\",min:\"0\",placeholder:\"0.00\",className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Additional Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"notes\",value:formData.notes,onChange:handleInputChange,rows:3,placeholder:\"Any additional notes or observations...\",className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Documents\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-md p-4\",children:[/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",multiple:true,accept:\".pdf,.jpg,.jpeg,.png\",onChange:handleFileUpload,className:\"hidden\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},disabled:uploading,className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-[#5EB47C] bg-green-50 hover:bg-green-100 disabled:opacity-50\",children:[/*#__PURE__*/_jsx(HealthIcon,{type:\"attachment\",className:\"w-4 h-4 mr-2\",color:\"currentColor\"}),uploading?'Uploading...':'Add Documents']}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-xs text-gray-500\",children:\"PDF, JPG, PNG files up to 10MB each\"})]})]}),documents.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-700 mb-2\",children:\"Uploaded Documents:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:documents.map((doc,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-2 bg-gray-50 rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm flex items-center\",children:[/*#__PURE__*/_jsx(HealthIcon,{type:\"document\",className:\"w-4 h-4 mr-1\",color:\"currentColor\"}),doc.name]}),doc.url&&/*#__PURE__*/_jsx(\"a\",{href:doc.url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"ml-2 text-xs text-blue-600 hover:text-blue-800\",children:\"View\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeDocument(index),className:\"text-red-600 hover:text-red-800 text-sm\",children:\"Remove\"})]},index))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-6 border-t\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancel,className:\"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300\",disabled:loading,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||uploading,className:\"px-6 py-2 bg-[#5EB47C] text-white rounded-md hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?'Updating...':'Update Health Record'})]})]})]})})});};export default EditHealthRecordForm;","map":{"version":3,"names":["React","useState","useRef","healthRecordService","HealthIcon","UIIcon","jsx","_jsx","jsxs","_jsxs","EditHealthRecordForm","_ref","record","onClose","onSuccess","formData","setFormData","record_type","title","description","vet_name","clinic_name","date_performed","split","Date","toISOString","next_due_date","cost","notes","documents","setDocuments","uploading","setUploading","loading","setLoading","error","setError","fileInputRef","recordTypes","value","label","icon","type","className","color","textIcon","getFieldConfig","recordType","configs","grooming","professionalLabel","professionalPlaceholder","businessLabel","businessPlaceholder","titlePlaceholder","descriptionPlaceholder","nextDueDateLabel","showNextDueDate","checkup","vaccination","surgery","emergency","dental","lab_work","other","currentConfig","handleInputChange","e","name","target","prev","handleFileUpload","files","Array","from","length","uploadPromises","map","file","allowedTypes","includes","Error","size","result","uploadVetReport","pet_id","success","data","uploadedDocs","Promise","all","current","console","message","removeDocument","index","filter","_","i","handleSubmit","preventDefault","trim","recordData","updated_at","updateHealthRecord","id","alert","handleCancel","window","confirm","children","onClick","onSubmit","onChange","required","placeholder","rows","step","min","ref","multiple","accept","_fileInputRef$current","click","disabled","doc","url","href","rel"],"sources":["/workspace/src/components/EditHealthRecordForm.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport healthRecordService from '../services/healthRecordService';\nimport { HealthIcon, UIIcon } from './MinimalIcons';\n\nconst EditHealthRecordForm = ({ record, onClose, onSuccess }) => {\n  const [formData, setFormData] = useState({\n    record_type: record?.record_type || 'checkup',\n    title: record?.title || '',\n    description: record?.description || '',\n    vet_name: record?.vet_name || '',\n    clinic_name: record?.clinic_name || '',\n    date_performed: record?.date_performed ? record.date_performed.split('T')[0] : new Date().toISOString().split('T')[0],\n    next_due_date: record?.next_due_date ? record.next_due_date.split('T')[0] : '',\n    cost: record?.cost || '',\n    notes: record?.notes || ''\n  });\n  \n  const [documents, setDocuments] = useState(record?.documents || []);\n  const [uploading, setUploading] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const fileInputRef = useRef(null);\n\n  const recordTypes = [\n    { value: 'checkup', label: 'Regular Checkup', icon: <HealthIcon type=\"check\" className=\"w-5 h-5\" color=\"currentColor\" />, textIcon: '⚕️' },\n    { value: 'vaccination', label: 'Vaccination', icon: <HealthIcon type=\"vaccination\" className=\"w-5 h-5\" color=\"currentColor\" />, textIcon: '💉' },\n    { value: 'surgery', label: 'Surgery', icon: <UIIcon type=\"surgery\" className=\"w-5 h-5\" color=\"currentColor\" />, textIcon: '🏥' },\n    { value: 'emergency', label: 'Emergency Visit', icon: <HealthIcon type=\"emergency\" className=\"w-5 h-5\" color=\"currentColor\" />, textIcon: '🚨' },\n    { value: 'dental', label: 'Dental Care', icon: <HealthIcon type=\"dental\" className=\"w-5 h-5\" color=\"currentColor\" />, textIcon: '🦷' },\n    { value: 'grooming', label: 'Grooming', icon: <UIIcon type=\"scissors\" className=\"w-5 h-5\" color=\"currentColor\" />, textIcon: '✂️' },\n    { value: 'lab_work', label: 'Lab Work', icon: <HealthIcon type=\"lab\" className=\"w-5 h-5\" color=\"currentColor\" />, textIcon: '🔬' },\n    { value: 'other', label: 'Other', icon: <HealthIcon type=\"records\" className=\"w-5 h-5\" color=\"currentColor\" />, textIcon: '📋' }\n  ];\n\n  // Dynamic field configurations based on record type\n  const getFieldConfig = (recordType) => {\n    const configs = {\n      grooming: {\n        professionalLabel: 'Groomer Name',\n        professionalPlaceholder: 'e.g., Sarah Smith',\n        businessLabel: 'Salon/Shop Name',\n        businessPlaceholder: 'e.g., Pampered Paws Grooming',\n        titlePlaceholder: 'e.g., Full Grooming Service, Nail Trim',\n        descriptionPlaceholder: 'Describe the grooming services performed...',\n        nextDueDateLabel: 'Next Grooming Due',\n        showNextDueDate: true\n      },\n      checkup: {\n        professionalLabel: 'Veterinarian Name',\n        professionalPlaceholder: 'e.g., Dr. Smith',\n        businessLabel: 'Clinic/Hospital Name',\n        businessPlaceholder: 'e.g., Pet Care Clinic',\n        titlePlaceholder: 'e.g., Annual Checkup, Wellness Exam',\n        descriptionPlaceholder: 'Describe the examination findings and recommendations...',\n        nextDueDateLabel: 'Next Checkup Due',\n        showNextDueDate: true\n      },\n      vaccination: {\n        professionalLabel: 'Veterinarian Name',\n        professionalPlaceholder: 'e.g., Dr. Smith',\n        businessLabel: 'Clinic/Hospital Name',\n        businessPlaceholder: 'e.g., Pet Care Clinic',\n        titlePlaceholder: 'e.g., Rabies Vaccination, DHPP Booster',\n        descriptionPlaceholder: 'Specify vaccine type, batch number, and any reactions...',\n        nextDueDateLabel: 'Next Vaccination Due',\n        showNextDueDate: true\n      },\n      surgery: {\n        professionalLabel: 'Surgeon/Veterinarian Name',\n        professionalPlaceholder: 'e.g., Dr. Johnson',\n        businessLabel: 'Hospital/Clinic Name',\n        businessPlaceholder: 'e.g., Animal Surgery Center',\n        titlePlaceholder: 'e.g., Spay Surgery, Tumor Removal',\n        descriptionPlaceholder: 'Describe the surgical procedure and post-op care...',\n        nextDueDateLabel: 'Follow-up Appointment',\n        showNextDueDate: true\n      },\n      emergency: {\n        professionalLabel: 'Attending Veterinarian',\n        professionalPlaceholder: 'e.g., Dr. Emergency',\n        businessLabel: 'Emergency Clinic Name',\n        businessPlaceholder: 'e.g., 24/7 Animal Emergency',\n        titlePlaceholder: 'e.g., Emergency Visit - Injury, Poisoning',\n        descriptionPlaceholder: 'Describe the emergency situation and treatment...',\n        nextDueDateLabel: 'Follow-up Required',\n        showNextDueDate: true\n      },\n      dental: {\n        professionalLabel: 'Veterinarian Name',\n        professionalPlaceholder: 'e.g., Dr. Smith',\n        businessLabel: 'Clinic/Hospital Name',\n        businessPlaceholder: 'e.g., Pet Dental Care',\n        titlePlaceholder: 'e.g., Dental Cleaning, Tooth Extraction',\n        descriptionPlaceholder: 'Describe the dental procedure and findings...',\n        nextDueDateLabel: 'Next Dental Care Due',\n        showNextDueDate: true\n      },\n      lab_work: {\n        professionalLabel: 'Veterinarian/Technician Name',\n        professionalPlaceholder: 'e.g., Dr. Smith',\n        businessLabel: 'Lab/Clinic Name',\n        businessPlaceholder: 'e.g., Pet Diagnostics Lab',\n        titlePlaceholder: 'e.g., Blood Work, Urinalysis, X-Ray',\n        descriptionPlaceholder: 'Describe the tests performed and results...',\n        nextDueDateLabel: 'Next Lab Work Due',\n        showNextDueDate: false\n      },\n      other: {\n        professionalLabel: 'Professional Name',\n        professionalPlaceholder: 'e.g., Professional Name',\n        businessLabel: 'Business/Facility Name',\n        businessPlaceholder: 'e.g., Business Name',\n        titlePlaceholder: 'e.g., Treatment or Service Name',\n        descriptionPlaceholder: 'Describe the service or treatment...',\n        nextDueDateLabel: 'Next Appointment/Service',\n        showNextDueDate: false\n      }\n    };\n\n    return configs[recordType] || configs.other;\n  };\n\n  const currentConfig = getFieldConfig(formData.record_type);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    setError('');\n  };\n\n  const handleFileUpload = async (e) => {\n    const files = Array.from(e.target.files);\n    if (files.length === 0) return;\n\n    setUploading(true);\n    setError('');\n\n    try {\n      const uploadPromises = files.map(async (file) => {\n        // Validate file type\n        const allowedTypes = ['application/pdf', 'image/jpeg', 'image/png', 'image/jpg'];\n        if (!allowedTypes.includes(file.type)) {\n          throw new Error(`Invalid file type: ${file.type}. Please upload PDF, JPG, or PNG files only.`);\n        }\n\n        // Validate file size (max 10MB)\n        if (file.size > 10 * 1024 * 1024) {\n          throw new Error(`File ${file.name} is too large. Maximum size is 10MB.`);\n        }\n\n        const result = await healthRecordService.uploadVetReport(record.pet_id, file, 'health_record');\n        if (!result.success) {\n          throw new Error(`Failed to upload ${file.name}: ${result.error}`);\n        }\n        return result.data;\n      });\n\n      const uploadedDocs = await Promise.all(uploadPromises);\n      setDocuments(prev => [...prev, ...uploadedDocs]);\n      \n      // Clear file input\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (error) {\n      console.error('Upload error:', error);\n      setError(error.message);\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const removeDocument = (index) => {\n    setDocuments(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Validation\n    if (!formData.title.trim()) {\n      setError('Title is required');\n      return;\n    }\n    \n    if (!formData.description.trim()) {\n      setError('Description is required');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const recordData = {\n        ...formData,\n        documents: documents,\n        updated_at: new Date().toISOString()\n      };\n\n      const result = await healthRecordService.updateHealthRecord(record.id, recordData);\n      \n      if (result.success) {\n        alert('Health record updated successfully!');\n        if (onSuccess) {\n          onSuccess(result.data);\n        }\n        onClose();\n      } else {\n        setError(`Failed to update health record: ${result.error}`);\n      }\n    } catch (error) {\n      console.error('Error updating health record:', error);\n      setError(`Error updating health record: ${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCancel = () => {\n    if (window.confirm('Are you sure you want to cancel? Any unsaved changes will be lost.')) {\n      onClose();\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-2xl font-bold text-gray-900\">Edit Health Record</h2>\n            <button\n              onClick={handleCancel}\n              className=\"text-gray-400 hover:text-gray-600 text-2xl\"\n            >\n              ×\n            </button>\n          </div>\n\n          {error && (\n            <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-md\">\n              <p className=\"text-red-600 text-sm\">{error}</p>\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Record Type */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Record Type\n              </label>\n              <select\n                name=\"record_type\"\n                value={formData.record_type}\n                onChange={handleInputChange}\n                className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"\n                required\n              >\n                {recordTypes.map(type => (\n                  <option key={type.value} value={type.value}>\n                    {type.textIcon} {type.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Title */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Title *\n              </label>\n              <input\n                type=\"text\"\n                name=\"title\"\n                value={formData.title}\n                onChange={handleInputChange}\n                placeholder={currentConfig.titlePlaceholder}\n                className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"\n                required\n              />\n            </div>\n\n            {/* Description */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Description *\n              </label>\n              <textarea\n                name=\"description\"\n                value={formData.description}\n                onChange={handleInputChange}\n                rows={3}\n                placeholder={currentConfig.descriptionPlaceholder}\n                className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"\n                required\n              />\n            </div>\n\n            {/* Vet and Clinic Info */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  {currentConfig.professionalLabel}\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"vet_name\"\n                  value={formData.vet_name}\n                  onChange={handleInputChange}\n                  placeholder={currentConfig.professionalPlaceholder}\n                  className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  {currentConfig.businessLabel}\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"clinic_name\"\n                  value={formData.clinic_name}\n                  onChange={handleInputChange}\n                  placeholder={currentConfig.businessPlaceholder}\n                  className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"\n                />\n              </div>\n            </div>\n\n            {/* Dates */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Date Performed *\n                </label>\n                <input\n                  type=\"date\"\n                  name=\"date_performed\"\n                  value={formData.date_performed}\n                  onChange={handleInputChange}\n                  className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"\n                  required\n                />\n              </div>\n              \n              {currentConfig.showNextDueDate && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    {currentConfig.nextDueDateLabel}\n                  </label>\n                  <input\n                    type=\"date\"\n                    name=\"next_due_date\"\n                    value={formData.next_due_date}\n                    onChange={handleInputChange}\n                    className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"\n                  />\n                </div>\n              )}\n            </div>\n\n            {/* Cost */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Cost ($)\n              </label>\n              <input\n                type=\"number\"\n                name=\"cost\"\n                value={formData.cost}\n                onChange={handleInputChange}\n                step=\"0.01\"\n                min=\"0\"\n                placeholder=\"0.00\"\n                className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"\n              />\n            </div>\n\n            {/* Notes */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Additional Notes\n              </label>\n              <textarea\n                name=\"notes\"\n                value={formData.notes}\n                onChange={handleInputChange}\n                rows={3}\n                placeholder=\"Any additional notes or observations...\"\n                className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent\"\n              />\n            </div>\n\n            {/* Document Upload */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Documents\n              </label>\n              <div className=\"border-2 border-dashed border-gray-300 rounded-md p-4\">\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  multiple\n                  accept=\".pdf,.jpg,.jpeg,.png\"\n                  onChange={handleFileUpload}\n                  className=\"hidden\"\n                />\n                <div className=\"text-center\">\n                  <button\n                    type=\"button\"\n                    onClick={() => fileInputRef.current?.click()}\n                    disabled={uploading}\n                    className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-[#5EB47C] bg-green-50 hover:bg-green-100 disabled:opacity-50\"\n                  >\n                    <HealthIcon type=\"attachment\" className=\"w-4 h-4 mr-2\" color=\"currentColor\" />\n                    {uploading ? 'Uploading...' : 'Add Documents'}\n                  </button>\n                  <p className=\"mt-2 text-xs text-gray-500\">\n                    PDF, JPG, PNG files up to 10MB each\n                  </p>\n                </div>\n              </div>\n\n              {/* Show existing documents */}\n              {documents.length > 0 && (\n                <div className=\"mt-3\">\n                  <p className=\"text-sm font-medium text-gray-700 mb-2\">Uploaded Documents:</p>\n                  <div className=\"space-y-2\">\n                    {documents.map((doc, index) => (\n                      <div key={index} className=\"flex items-center justify-between p-2 bg-gray-50 rounded\">\n                        <div className=\"flex items-center\">\n                          <span className=\"text-sm flex items-center\">\n                            <HealthIcon type=\"document\" className=\"w-4 h-4 mr-1\" color=\"currentColor\" />\n                            {doc.name}\n                          </span>\n                          {doc.url && (\n                            <a\n                              href={doc.url}\n                              target=\"_blank\"\n                              rel=\"noopener noreferrer\"\n                              className=\"ml-2 text-xs text-blue-600 hover:text-blue-800\"\n                            >\n                              View\n                            </a>\n                          )}\n                        </div>\n                        <button\n                          type=\"button\"\n                          onClick={() => removeDocument(index)}\n                          className=\"text-red-600 hover:text-red-800 text-sm\"\n                        >\n                          Remove\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Submit Buttons */}\n            <div className=\"flex justify-end space-x-3 pt-6 border-t\">\n              <button\n                type=\"button\"\n                onClick={handleCancel}\n                className=\"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300\"\n                disabled={loading}\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading || uploading}\n                className=\"px-6 py-2 bg-[#5EB47C] text-white rounded-md hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {loading ? 'Updating...' : 'Update Health Record'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EditHealthRecordForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}