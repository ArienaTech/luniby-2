{"ast":null,"code":"// Favorites service for managing user favorites\nimport{supabase}from'../lib/supabase';const favoritesService={// Get all favorites for a user\nasync getUserFavorites(userId){try{const{data,error}=await supabase.from('user_favorites').select('*').eq('user_id',userId);if(error){return{success:false,error:error.message,data:[]};}return{success:true,data:data||[]};}catch(error){return{success:false,error:error.message,data:[]};}},// Add a favorite\nasync addFavorite(userId,listingId,listingType){try{const{data,error}=await supabase.from('user_favorites').insert([{user_id:userId,listing_id:listingId,listing_type:listingType,created_at:new Date().toISOString()}]).select();if(error){return{success:false,error:error.message};}return{success:true,data:data===null||data===void 0?void 0:data[0]};}catch(error){return{success:false,error:error.message};}},// Remove a favorite\nasync removeFavorite(userId,listingId,listingType){try{const{error}=await supabase.from('user_favorites').delete().eq('user_id',userId).eq('listing_id',listingId).eq('listing_type',listingType);if(error){return{success:false,error:error.message};}return{success:true};}catch(error){return{success:false,error:error.message};}},// Check if an item is favorited\nasync isFavorited(userId,listingId,listingType){try{const{data,error}=await supabase.from('user_favorites').select('id').eq('user_id',userId).eq('listing_id',listingId).eq('listing_type',listingType).limit(1);if(error){return{success:false,error:error.message,isFavorited:false};}return{success:true,isFavorited:data&&data.length>0};}catch(error){return{success:false,error:error.message,isFavorited:false};}},// Get favorites count for a listing\nasync getFavoritesCount(listingId,listingType){try{const{count,error}=await supabase.from('user_favorites').select('*',{count:'exact',head:true}).eq('listing_id',listingId).eq('listing_type',listingType);if(error){return{success:false,error:error.message,count:0};}return{success:true,count:count||0};}catch(error){return{success:false,error:error.message,count:0};}}};export default favoritesService;","map":{"version":3,"names":["supabase","favoritesService","getUserFavorites","userId","data","error","from","select","eq","success","message","addFavorite","listingId","listingType","insert","user_id","listing_id","listing_type","created_at","Date","toISOString","removeFavorite","delete","isFavorited","limit","length","getFavoritesCount","count","head"],"sources":["/workspace/src/services/favoritesService.js"],"sourcesContent":["// Favorites service for managing user favorites\nimport { supabase } from '../lib/supabase';\n\nconst favoritesService = {\n  // Get all favorites for a user\n  async getUserFavorites(userId) {\n    try {\n      const { data, error } = await supabase\n        .from('user_favorites')\n        .select('*')\n        .eq('user_id', userId);\n\n      if (error) {\n        return { success: false, error: error.message, data: [] };\n      }\n\n      return { success: true, data: data || [] };\n    } catch (error) {\n      return { success: false, error: error.message, data: [] };\n    }\n  },\n\n  // Add a favorite\n  async addFavorite(userId, listingId, listingType) {\n    try {\n      const { data, error } = await supabase\n        .from('user_favorites')\n        .insert([\n          {\n            user_id: userId,\n            listing_id: listingId,\n            listing_type: listingType,\n            created_at: new Date().toISOString()\n          }\n        ])\n        .select();\n\n      if (error) {\n        return { success: false, error: error.message };\n      }\n\n      return { success: true, data: data?.[0] };\n    } catch (error) {\n      return { success: false, error: error.message };\n    }\n  },\n\n  // Remove a favorite\n  async removeFavorite(userId, listingId, listingType) {\n    try {\n      const { error } = await supabase\n        .from('user_favorites')\n        .delete()\n        .eq('user_id', userId)\n        .eq('listing_id', listingId)\n        .eq('listing_type', listingType);\n\n      if (error) {\n        return { success: false, error: error.message };\n      }\n\n      return { success: true };\n    } catch (error) {\n      return { success: false, error: error.message };\n    }\n  },\n\n  // Check if an item is favorited\n  async isFavorited(userId, listingId, listingType) {\n    try {\n      const { data, error } = await supabase\n        .from('user_favorites')\n        .select('id')\n        .eq('user_id', userId)\n        .eq('listing_id', listingId)\n        .eq('listing_type', listingType)\n        .limit(1);\n\n      if (error) {\n        return { success: false, error: error.message, isFavorited: false };\n      }\n\n      return { success: true, isFavorited: data && data.length > 0 };\n    } catch (error) {\n      return { success: false, error: error.message, isFavorited: false };\n    }\n  },\n\n  // Get favorites count for a listing\n  async getFavoritesCount(listingId, listingType) {\n    try {\n      const { count, error } = await supabase\n        .from('user_favorites')\n        .select('*', { count: 'exact', head: true })\n        .eq('listing_id', listingId)\n        .eq('listing_type', listingType);\n\n      if (error) {\n        return { success: false, error: error.message, count: 0 };\n      }\n\n      return { success: true, count: count || 0 };\n    } catch (error) {\n      return { success: false, error: error.message, count: 0 };\n    }\n  }\n};\n\nexport default favoritesService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}