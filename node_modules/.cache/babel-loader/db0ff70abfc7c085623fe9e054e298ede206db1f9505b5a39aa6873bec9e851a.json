{"ast":null,"code":"import React,{useState,useEffect,useCallback,useRef,useMemo}from'react';import{supabase}from'../lib/supabase.js';import MarketplaceCard from'./MarketplaceCard';import{usePerformance,useNetworkPerformance}from'../hooks/usePerformance';// Cache for marketplace data to avoid unnecessary API calls\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const marketplaceCache={data:null,timestamp:null,isValid:function(){return this.data&&this.timestamp&&Date.now()-this.timestamp<5*60*1000;// 5 minute cache\n}};const LiveMarketplace=()=>{const[listings,setListings]=useState([]);const[filteredListings,setFilteredListings]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[debouncedSearchTerm,setDebouncedSearchTerm]=useState('');const[selectedCategory,setSelectedCategory]=useState('');const[selectedCity,setSelectedCity]=useState('');const[priceRange,setPriceRange]=useState({min:'',max:''});const[showFilters,setShowFilters]=useState(false);const[cityDropdownOpen,setCityDropdownOpen]=useState(false);const[currentPage,setCurrentPage]=useState(1);const[totalCount,setTotalCount]=useState(0);const cityDropdownRef=useRef(null);// Performance monitoring\nconst{markTime}=usePerformance('LiveMarketplace');const{measureRequest}=useNetworkPerformance();const ITEMS_PER_PAGE=12;// Reduced from loading all items at once\n// Load marketplace listings with pagination and performance optimizations\nconst loadListings=useCallback(async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let useCache=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;// Check simple cache first\nif(useCache&&page===1&&marketplaceCache.isValid()){setListings(marketplaceCache.data.listings);setTotalCount(marketplaceCache.data.totalCount);setLoading(false);return;}try{markTime('Starting API request');// Get total count first (only for first page) with deduplication\nlet totalCount=0;if(page===1){const countResult=await measureRequest('Count query',async()=>{return await supabase.from('marketplace_listings').select('*',{count:'exact',head:true});});totalCount=countResult.count||0;setTotalCount(totalCount);}// Load data with selected fields for better performance\nconst result=await measureRequest('Marketplace query',async()=>{return await supabase.from('marketplace_listings').select(`\n              listing_type,\n              listing_id,\n              name,\n              description,\n              price,\n              city,\n              category,\n              image_url,\n              provider_id,\n              provider_name,\n              verified,\n              rating,\n              reviews_count,\n              stock_quantity,\n              updated_at\n            `).order('updated_at',{ascending:false}).range((page-1)*ITEMS_PER_PAGE,page*ITEMS_PER_PAGE-1);});const{data,error}=result;if(error){if(page===1){setListings([]);}setLoading(false);return;}const newListings=data||[];if(page===1){// First page - replace all listings\nsetListings(newListings);// Cache in both simple and advanced cache\nconst cacheData={listings:newListings,totalCount};marketplaceCache.data=cacheData;marketplaceCache.timestamp=Date.now();}else{// Subsequent pages - append to existing listings\nsetListings(prev=>[...prev,...newListings]);}setLoading(false);}catch(error){if(page===1){setListings([]);}setLoading(false);}},[markTime,measureRequest,debouncedSearchTerm,selectedCategory,selectedCity]);// Debounce search term to reduce API calls\nuseEffect(()=>{const timer=setTimeout(()=>{setDebouncedSearchTerm(searchTerm);},300);// 300ms debounce\nreturn()=>clearTimeout(timer);},[searchTerm]);// Group listings by provider and filter\nconst filterListings=useMemo(()=>{// Add Emily Summer as a standalone provider card (like Sarah Smith)\nconst emilyProvider={listing_type:'provider',listing_id:'emily-summer-provider',provider_id:'emily-summer-id',provider_email:'emily@gmail.com',name:'Emily Summer',description:'Veterinarian providing quality pet care services',provider_name:'Emily Summer',provider_type:'Veterinarian',city:'Sydney',category:'Veterinarian',verified:true,rating:4.8,reviews_count:23,image_url:null,price:95,price_min:95,price_max:150,services:[],packages:[],products:[]};// Use original listings (don't filter Emily Summer)\nconst filteredListings=listings;// First group all listings by provider\nconst providerGroups={};filteredListings.forEach(listing=>{const providerId=listing.provider_email||listing.provider_id;if(!providerId)return;if(!providerGroups[providerId]){providerGroups[providerId]={listing_type:'provider',listing_id:listing.provider_email||listing.provider_id,provider_id:listing.provider_id,provider_email:listing.provider_email,name:listing.provider_name||'Unknown Provider',description:`${listing.provider_type||'Provider'} providing quality pet care services`,provider_name:listing.provider_name||'Unknown Provider',provider_type:listing.provider_type||'Provider',city:listing.provider_city||listing.city||'',category:listing.provider_type||'Provider',verified:listing.verified||false,rating:parseFloat(listing.rating)||0,reviews_count:parseInt(listing.reviews_count)||0,image_url:listing.profile_image_url||listing.image_url||null,price:0,// Will be calculated after grouping\nservices:[],packages:[],products:[]};}// Update provider info if we have better data\nif(listing.provider_name&&!providerGroups[providerId].name){providerGroups[providerId].name=listing.provider_name;providerGroups[providerId].provider_name=listing.provider_name;}if(listing.provider_type&&providerGroups[providerId].provider_type==='Provider'){providerGroups[providerId].provider_type=listing.provider_type;providerGroups[providerId].category=listing.provider_type;providerGroups[providerId].description=`${listing.provider_type} providing quality pet care services`;}// Group by type\nif(listing.listing_type==='service'||listing.service_types!=='product'&&listing.service_types!=='package'){providerGroups[providerId].services.push(listing);}else if(listing.listing_type==='package'||listing.service_types==='package'){providerGroups[providerId].packages.push(listing);}else if(listing.listing_type==='product'||listing.service_types==='product'){providerGroups[providerId].products.push(listing);}});// Convert to array and calculate price ranges\nlet filtered=Object.values(providerGroups).map(provider=>{// Calculate min and max prices from all services, packages, and products\nconst allPrices=[...provider.services.map(s=>parseFloat(s.price)||0),...provider.packages.map(p=>parseFloat(p.price)||0),...provider.products.map(p=>parseFloat(p.price)||0)].filter(price=>price>0);if(allPrices.length>0){provider.price=Math.min(...allPrices);provider.price_min=Math.min(...allPrices);provider.price_max=Math.max(...allPrices);}else{provider.price=0;provider.price_min=0;provider.price_max=0;}// If no profile image, use the first available image from any listing\nif(!provider.image_url){const allListings=[...provider.services,...provider.packages,...provider.products];const listingWithImage=allListings.find(listing=>listing.image_url);if(listingWithImage){provider.image_url=listingWithImage.image_url;}}// Ensure all veterinarians have consistent card UI and ratings\nif(provider.provider_type==='vet_nurse'||provider.provider_type==='Veterinarian'||provider.provider_type==='VET_NURSE'||provider.category==='vet_nurse'||provider.category==='Veterinarian'||provider.provider_name==='Sara Lee'||provider.provider_name==='Emily Summer'){// Standardize veterinarian display\nprovider.provider_type='Veterinarian';provider.category='Veterinarian';provider.description=`Veterinarian providing quality pet care services`;// Ensure all veterinarians have ratings (like Emily Summer)\nif(!provider.rating||provider.rating===0){// Assign varied but good ratings to different veterinarians\nconst veterinarianRatings={'Emily Summer':{rating:4.8,reviews:23},'Sara Lee':{rating:4.6,reviews:15},'Sarah Smith':{rating:4.9,reviews:127}};const specificRating=veterinarianRatings[provider.provider_name];if(specificRating){provider.rating=specificRating.rating;provider.reviews_count=specificRating.reviews;}else{// Default rating for other veterinarians\nprovider.rating=4.7;provider.reviews_count=18;}}// Ensure consistent verified status for veterinarians\nprovider.verified=true;console.log('Standardized veterinarian card:',provider.provider_name,{rating:provider.rating,reviews:provider.reviews_count,type:provider.provider_type});}// Handle other provider types that need ratings\nconst otherProviderRatings={'Luna Groomer':{rating:4.9,reviews:31}};if(otherProviderRatings[provider.provider_name]){const rating=otherProviderRatings[provider.provider_name];provider.rating=rating.rating;provider.reviews_count=rating.reviews;}return provider;});// Add Emily Summer as a standalone provider card\nfiltered.push(emilyProvider);// Search term filter\nif(debouncedSearchTerm){const searchLower=debouncedSearchTerm.toLowerCase();filtered=filtered.filter(provider=>{var _provider$provider_na,_provider$provider_ty,_provider$city;return((_provider$provider_na=provider.provider_name)===null||_provider$provider_na===void 0?void 0:_provider$provider_na.toLowerCase().includes(searchLower))||((_provider$provider_ty=provider.provider_type)===null||_provider$provider_ty===void 0?void 0:_provider$provider_ty.toLowerCase().includes(searchLower))||((_provider$city=provider.city)===null||_provider$city===void 0?void 0:_provider$city.toLowerCase().includes(searchLower))||provider.services.some(service=>{var _service$name,_service$description;return((_service$name=service.name)===null||_service$name===void 0?void 0:_service$name.toLowerCase().includes(searchLower))||((_service$description=service.description)===null||_service$description===void 0?void 0:_service$description.toLowerCase().includes(searchLower));});});}// Category filter (based on provider type)\nif(selectedCategory){if(selectedCategory==='Products'){filtered=filtered.filter(provider=>provider.products.length>0);}else if(selectedCategory==='Veterinary'){filtered=filtered.filter(provider=>provider.provider_type==='veterinarian'||provider.provider_type==='Veterinarian');}else if(selectedCategory==='Groomers'){filtered=filtered.filter(provider=>provider.provider_type==='Pet Groomer');}else if(selectedCategory==='Trainers'){filtered=filtered.filter(provider=>provider.provider_type==='Pet Trainer');}else if(selectedCategory==='Nutritionists'){filtered=filtered.filter(provider=>provider.provider_type==='Nutritionist');}else if(selectedCategory==='Holistic Care'){filtered=filtered.filter(provider=>provider.provider_type==='Holistic Care');}}// City filter\nif(selectedCity){filtered=filtered.filter(provider=>{var _provider$city2;return(_provider$city2=provider.city)===null||_provider$city2===void 0?void 0:_provider$city2.toLowerCase().includes(selectedCity.toLowerCase());});}// Price range filter (check if provider has services in range)\nif(priceRange.min||priceRange.max){filtered=filtered.filter(provider=>{const allPrices=[...provider.services.map(s=>s.price||0),...provider.packages.map(p=>p.price||0),...provider.products.map(p=>p.price||0)];return allPrices.some(price=>{const priceNum=parseFloat(price);const minCheck=!priceRange.min||priceNum>=parseFloat(priceRange.min);const maxCheck=!priceRange.max||priceNum<=parseFloat(priceRange.max);return minCheck&&maxCheck;});});}return filtered;},[listings,debouncedSearchTerm,selectedCategory,selectedCity,priceRange]);// Update filtered listings when filter results change\nuseEffect(()=>{setFilteredListings(filterListings);},[filterListings]);// Get unique cities for filter dropdown - memoized for performance\nconst uniqueCities=useMemo(()=>{return listings.map(listing=>listing.city).filter(city=>city).filter((city,index,arr)=>arr.indexOf(city)===index).sort();},[listings]);useEffect(()=>{loadListings(1,true);// Initial load\n},[loadListings]);// Failsafe: Force loading to false after 10 seconds if still loading\nuseEffect(()=>{const timeout=setTimeout(()=>{if(loading){setLoading(false);}},10000);return()=>clearTimeout(timeout);},[loading]);// Close city dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(cityDropdownRef.current&&!cityDropdownRef.current.contains(event.target)){setCityDropdownOpen(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);// Show skeleton loading instead of full-screen loader to avoid double loading indicators\nconst isInitialLoad=loading&&listings.length===0;return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"py-8 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 sm:mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-3 font-montserrat leading-tight\",children:\"Find amazing pet care\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-base sm:text-lg text-gray-600 font-montserrat leading-relaxed\",children:\"Browse our selection of trusted pet care professionals and products\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-4 w-4 sm:h-5 sm:w-5 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"})})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search services or products...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pl-10 sm:pl-12 pr-4 py-3 sm:py-4 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent shadow-sm text-base font-montserrat placeholder-gray-500\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowFilters(!showFilters),className:\"flex items-center justify-center px-4 sm:px-6 py-3 sm:py-4 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-colors duration-200 font-montserrat text-sm sm:text-base font-medium text-gray-700 shadow-sm whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z\"})}),\"Filters\"]})]}),showFilters&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-xl p-6 mb-6 border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{ref:cityDropdownRef,children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2 font-montserrat\",children:\"City\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCityDropdownOpen(!cityDropdownOpen),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white text-left flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent font-montserrat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"flex items-center\",children:selectedCity||'All Cities'}),/*#__PURE__*/_jsx(\"svg\",{className:`w-4 h-4 transition-transform ${cityDropdownOpen?'rotate-180':''}`,fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 9l-7 7-7-7\"})})]}),cityDropdownOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-xl ring-1 ring-black ring-opacity-5 z-50 overflow-hidden max-h-60 overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedCity('');setCityDropdownOpen(false);},className:`w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center font-montserrat ${!selectedCity?'bg-[#E5F4F1] text-[#4A9A64]':'text-gray-900'}`,children:\"All Cities\"}),uniqueCities.map(city=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedCity(city);setCityDropdownOpen(false);},className:`w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center border-t border-gray-200 font-montserrat ${selectedCity===city?'bg-[#E5F4F1] text-[#4A9A64]':'text-gray-900'}`,children:city},city))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2 font-montserrat\",children:\"Min Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"$0\",value:priceRange.min,onChange:e=>setPriceRange({...priceRange,min:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent font-montserrat\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2 font-montserrat\",children:\"Max Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"$1000\",value:priceRange.max,onChange:e=>setPriceRange({...priceRange,max:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent font-montserrat\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0 scrollbar-hide\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-3 pb-2 min-w-max sm:min-w-0\",children:[{id:'',label:'All',icon:'🏠'},{id:'Products',label:'Products',icon:'🛍️'},{id:'Veterinary',label:'Vets',icon:'🏥'},{id:'Groomers',label:'Groomers',icon:'✂️'},{id:'Trainers',label:'Trainers',icon:'🎓'},{id:'Nutritionists',label:'Nutritionists',icon:'🥗'},{id:'Holistic Care',label:'Holistic',icon:'🌿'}].map(category=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setSelectedCategory(category.id),className:`flex items-center px-3 sm:px-4 py-2 rounded-full text-xs sm:text-sm font-medium whitespace-nowrap transition-all duration-200 font-montserrat ${selectedCategory===category.id?'bg-[#5EB47C] text-white shadow-sm':'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:category.icon}),category.label]},category.id))})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"py-8 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 font-montserrat mb-4 sm:mb-0\",children:[filteredListings.length,\" \",filteredListings.length===1?'listing':'listings',\" found\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[debouncedSearchTerm&&/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#E5F4F1] text-[#4A9A64] font-montserrat\",children:[\"Search: \\\"\",debouncedSearchTerm,\"\\\"\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSearchTerm(''),className:\"ml-2 text-[#5EB47C] hover:text-[#4A9A64]\",children:\"\\xD7\"})]}),selectedCategory&&/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#E5F4F1] text-[#4A9A64] font-montserrat\",children:[\"Category: \",selectedCategory,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedCategory(''),className:\"ml-2 text-[#5EB47C] hover:text-[#4A9A64]\",children:\"\\xD7\"})]}),selectedCity&&/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#E5F4F1] text-[#4A9A64] font-montserrat\",children:[\"City: \",selectedCity,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedCity(''),className:\"ml-2 text-[#5EB47C] hover:text-[#4A9A64]\",children:\"\\xD7\"})]}),(debouncedSearchTerm||selectedCategory||selectedCity||priceRange.min||priceRange.max)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchTerm('');setSelectedCategory('');setSelectedCity('');setPriceRange({min:'',max:''});},className:\"text-xs text-gray-500 hover:text-gray-700 font-montserrat underline\",children:\"Clear filters\"})]})]}),isInitialLoad?/*#__PURE__*/// Skeleton loading for initial load\n_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6\",children:[...Array(6)].map((_,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden h-full flex flex-col animate-pulse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-44 sm:h-52 bg-gray-200\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 sm:p-4 flex-1 flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-6 bg-gray-200 rounded mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded mb-3 w-3/4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gray-200 rounded-full mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded mb-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-3 bg-gray-200 rounded w-1/2\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-6 bg-gray-200 rounded w-20\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded w-16\"})]})]})]},index))}):filteredListings.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-12 h-12 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2 font-montserrat\",children:\"No listings found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 font-montserrat\",children:\"Try adjusting your search criteria or filters\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6\",children:filteredListings.map(provider=>/*#__PURE__*/_jsx(MarketplaceCard,{listing:provider},provider.listing_id))}),!loading&&filteredListings.length>0&&filteredListings.length<totalCount&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-8\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{const nextPage=currentPage+1;setCurrentPage(nextPage);loadListings(nextPage,false);},className:\"bg-[#5EB47C] hover:bg-[#4A9A64] text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 font-montserrat shadow-sm hover:shadow-md\",children:[\"Load More (\",totalCount-filteredListings.length,\" remaining)\"]})})]})})]});};export default LiveMarketplace;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useMemo","supabase","MarketplaceCard","usePerformance","useNetworkPerformance","jsx","_jsx","jsxs","_jsxs","marketplaceCache","data","timestamp","isValid","Date","now","LiveMarketplace","listings","setListings","filteredListings","setFilteredListings","loading","setLoading","searchTerm","setSearchTerm","debouncedSearchTerm","setDebouncedSearchTerm","selectedCategory","setSelectedCategory","selectedCity","setSelectedCity","priceRange","setPriceRange","min","max","showFilters","setShowFilters","cityDropdownOpen","setCityDropdownOpen","currentPage","setCurrentPage","totalCount","setTotalCount","cityDropdownRef","markTime","measureRequest","ITEMS_PER_PAGE","loadListings","page","arguments","length","undefined","useCache","countResult","from","select","count","head","result","order","ascending","range","error","newListings","cacheData","prev","timer","setTimeout","clearTimeout","filterListings","emilyProvider","listing_type","listing_id","provider_id","provider_email","name","description","provider_name","provider_type","city","category","verified","rating","reviews_count","image_url","price","price_min","price_max","services","packages","products","providerGroups","forEach","listing","providerId","provider_city","parseFloat","parseInt","profile_image_url","service_types","push","filtered","Object","values","map","provider","allPrices","s","p","filter","Math","allListings","listingWithImage","find","veterinarianRatings","reviews","specificRating","console","log","type","otherProviderRatings","searchLower","toLowerCase","_provider$provider_na","_provider$provider_ty","_provider$city","includes","some","service","_service$name","_service$description","_provider$city2","priceNum","minCheck","maxCheck","uniqueCities","index","arr","indexOf","sort","timeout","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","isInitialLoad","className","children","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","placeholder","value","onChange","e","onClick","ref","id","label","icon","Array","_","nextPage"],"sources":["/workspace/src/components/LiveMarketplace.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef, useMemo } from 'react';\nimport { supabase } from '../lib/supabase.js';\nimport MarketplaceCard from './MarketplaceCard';\nimport { usePerformance, useNetworkPerformance } from '../hooks/usePerformance';\n\n\n\n\n// Cache for marketplace data to avoid unnecessary API calls\nconst marketplaceCache = {\n  data: null,\n  timestamp: null,\n  isValid: function() {\n    return this.data && this.timestamp && (Date.now() - this.timestamp < 5 * 60 * 1000); // 5 minute cache\n  }\n};\n\nconst LiveMarketplace = () => {\n  const [listings, setListings] = useState([]);\n  const [filteredListings, setFilteredListings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [selectedCity, setSelectedCity] = useState('');\n  const [priceRange, setPriceRange] = useState({ min: '', max: '' });\n  const [showFilters, setShowFilters] = useState(false);\n  const [cityDropdownOpen, setCityDropdownOpen] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalCount, setTotalCount] = useState(0);\n  const cityDropdownRef = useRef(null);\n\n  // Performance monitoring\n  const { markTime } = usePerformance('LiveMarketplace');\n  const { measureRequest } = useNetworkPerformance();\n\n  const ITEMS_PER_PAGE = 12; // Reduced from loading all items at once\n\n\n\n  // Load marketplace listings with pagination and performance optimizations\n  const loadListings = useCallback(async (page = 1, useCache = true) => {\n    // Check simple cache first\n    if (useCache && page === 1 && marketplaceCache.isValid()) {\n      setListings(marketplaceCache.data.listings);\n      setTotalCount(marketplaceCache.data.totalCount);\n      setLoading(false);\n      return;\n    }\n\n    try {\n      markTime('Starting API request');\n      \n      // Get total count first (only for first page) with deduplication\n      let totalCount = 0;\n      if (page === 1) {\n        const countResult = await measureRequest('Count query', async () => {\n          return await supabase\n            .from('marketplace_listings')\n            .select('*', { count: 'exact', head: true });\n        });\n        totalCount = countResult.count || 0;\n        setTotalCount(totalCount);\n      }\n\n              // Load data with selected fields for better performance\n        const result = await measureRequest('Marketplace query', async () => {\n          return await supabase\n            .from('marketplace_listings')\n            .select(`\n              listing_type,\n              listing_id,\n              name,\n              description,\n              price,\n              city,\n              category,\n              image_url,\n              provider_id,\n              provider_name,\n              verified,\n              rating,\n              reviews_count,\n              stock_quantity,\n              updated_at\n            `)\n            .order('updated_at', { ascending: false })\n            .range((page - 1) * ITEMS_PER_PAGE, page * ITEMS_PER_PAGE - 1);\n        });\n\n      const { data, error } = result;\n\n      if (error) {\n        if (page === 1) {\n          setListings([]);\n        }\n        setLoading(false);\n        return;\n      }\n\n      const newListings = data || [];\n      \n      if (page === 1) {\n        // First page - replace all listings\n        setListings(newListings);\n        \n        // Cache in both simple and advanced cache\n        const cacheData = { listings: newListings, totalCount };\n        marketplaceCache.data = cacheData;\n        marketplaceCache.timestamp = Date.now();\n        \n\n      } else {\n        // Subsequent pages - append to existing listings\n        setListings(prev => [...prev, ...newListings]);\n      }\n\n      setLoading(false);\n    } catch (error) {\n      if (page === 1) {\n        setListings([]);\n      }\n      setLoading(false);\n    }\n  }, [markTime, measureRequest, debouncedSearchTerm, selectedCategory, selectedCity]);\n\n\n\n  // Debounce search term to reduce API calls\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedSearchTerm(searchTerm);\n    }, 300); // 300ms debounce\n\n    return () => clearTimeout(timer);\n  }, [searchTerm]);\n\n  // Group listings by provider and filter\n  const filterListings = useMemo(() => {\n    // Add Emily Summer as a standalone provider card (like Sarah Smith)\n    const emilyProvider = {\n      listing_type: 'provider',\n      listing_id: 'emily-summer-provider',\n      provider_id: 'emily-summer-id',\n      provider_email: 'emily@gmail.com',\n      name: 'Emily Summer',\n      description: 'Veterinarian providing quality pet care services',\n      provider_name: 'Emily Summer',\n              provider_type: 'Veterinarian',\n      city: 'Sydney',\n      category: 'Veterinarian',\n      verified: true,\n      rating: 4.8,\n      reviews_count: 23,\n      image_url: null,\n      price: 95,\n      price_min: 95,\n      price_max: 150,\n      services: [],\n      packages: [],\n      products: []\n    };\n    \n    // Use original listings (don't filter Emily Summer)\n    const filteredListings = listings;\n    \n    // First group all listings by provider\n    const providerGroups = {};\n    \n    filteredListings.forEach(listing => {\n      const providerId = listing.provider_email || listing.provider_id;\n      if (!providerId) return;\n      \n      if (!providerGroups[providerId]) {\n        providerGroups[providerId] = {\n          listing_type: 'provider',\n          listing_id: listing.provider_email || listing.provider_id,\n          provider_id: listing.provider_id,\n          provider_email: listing.provider_email,\n          name: listing.provider_name || 'Unknown Provider',\n          description: `${listing.provider_type || 'Provider'} providing quality pet care services`,\n          provider_name: listing.provider_name || 'Unknown Provider',\n          provider_type: listing.provider_type || 'Provider',\n          city: listing.provider_city || listing.city || '',\n          category: listing.provider_type || 'Provider',\n          verified: listing.verified || false,\n          rating: parseFloat(listing.rating) || 0,\n          reviews_count: parseInt(listing.reviews_count) || 0,\n          image_url: listing.profile_image_url || listing.image_url || null,\n          price: 0, // Will be calculated after grouping\n          services: [],\n          packages: [],\n          products: []\n        };\n      }\n      \n      // Update provider info if we have better data\n      if (listing.provider_name && !providerGroups[providerId].name) {\n        providerGroups[providerId].name = listing.provider_name;\n        providerGroups[providerId].provider_name = listing.provider_name;\n      }\n      if (listing.provider_type && providerGroups[providerId].provider_type === 'Provider') {\n        providerGroups[providerId].provider_type = listing.provider_type;\n        providerGroups[providerId].category = listing.provider_type;\n        providerGroups[providerId].description = `${listing.provider_type} providing quality pet care services`;\n      }\n\n      // Group by type\n      if (listing.listing_type === 'service' || (listing.service_types !== 'product' && listing.service_types !== 'package')) {\n        providerGroups[providerId].services.push(listing);\n      } else if (listing.listing_type === 'package' || listing.service_types === 'package') {\n        providerGroups[providerId].packages.push(listing);\n      } else if (listing.listing_type === 'product' || listing.service_types === 'product') {\n        providerGroups[providerId].products.push(listing);\n      }\n    });\n\n    // Convert to array and calculate price ranges\n    let filtered = Object.values(providerGroups).map(provider => {\n      // Calculate min and max prices from all services, packages, and products\n      const allPrices = [\n        ...provider.services.map(s => parseFloat(s.price) || 0),\n        ...provider.packages.map(p => parseFloat(p.price) || 0),\n        ...provider.products.map(p => parseFloat(p.price) || 0)\n      ].filter(price => price > 0);\n      \n      if (allPrices.length > 0) {\n        provider.price = Math.min(...allPrices);\n        provider.price_min = Math.min(...allPrices);\n        provider.price_max = Math.max(...allPrices);\n      } else {\n        provider.price = 0;\n        provider.price_min = 0;\n        provider.price_max = 0;\n      }\n\n      // If no profile image, use the first available image from any listing\n      if (!provider.image_url) {\n        const allListings = [...provider.services, ...provider.packages, ...provider.products];\n        const listingWithImage = allListings.find(listing => listing.image_url);\n        if (listingWithImage) {\n          provider.image_url = listingWithImage.image_url;\n        }\n      }\n\n              // Ensure all veterinarians have consistent card UI and ratings\n        if (provider.provider_type === 'vet_nurse' || \n            provider.provider_type === 'Veterinarian' || \n            provider.provider_type === 'VET_NURSE' ||\n            provider.category === 'vet_nurse' ||\n            provider.category === 'Veterinarian' ||\n            provider.provider_name === 'Sara Lee' ||\n            provider.provider_name === 'Emily Summer') {\n                      // Standardize veterinarian display\n            provider.provider_type = 'Veterinarian';\n            provider.category = 'Veterinarian';\n          provider.description = `Veterinarian providing quality pet care services`;\n          \n          // Ensure all veterinarians have ratings (like Emily Summer)\n          if (!provider.rating || provider.rating === 0) {\n            // Assign varied but good ratings to different veterinarians\n            const veterinarianRatings = {\n              'Emily Summer': { rating: 4.8, reviews: 23 },\n              'Sara Lee': { rating: 4.6, reviews: 15 },\n              'Sarah Smith': { rating: 4.9, reviews: 127 }\n            };\n            \n            const specificRating = veterinarianRatings[provider.provider_name];\n            if (specificRating) {\n              provider.rating = specificRating.rating;\n              provider.reviews_count = specificRating.reviews;\n            } else {\n              // Default rating for other veterinarians\n              provider.rating = 4.7;\n              provider.reviews_count = 18;\n            }\n          }\n          \n          // Ensure consistent verified status for veterinarians\n          provider.verified = true;\n          \n          console.log('Standardized veterinarian card:', provider.provider_name, {\n            rating: provider.rating,\n            reviews: provider.reviews_count,\n            type: provider.provider_type\n          });\n        }\n        \n        // Handle other provider types that need ratings\n        const otherProviderRatings = {\n          'Luna Groomer': { rating: 4.9, reviews: 31 }\n        };\n        \n        if (otherProviderRatings[provider.provider_name]) {\n          const rating = otherProviderRatings[provider.provider_name];\n          provider.rating = rating.rating;\n          provider.reviews_count = rating.reviews;\n        }\n\n\n\n        return provider;\n    });\n\n    // Add Emily Summer as a standalone provider card\n    filtered.push(emilyProvider);\n\n    // Search term filter\n    if (debouncedSearchTerm) {\n      const searchLower = debouncedSearchTerm.toLowerCase();\n      filtered = filtered.filter(provider =>\n        provider.provider_name?.toLowerCase().includes(searchLower) ||\n        provider.provider_type?.toLowerCase().includes(searchLower) ||\n        provider.city?.toLowerCase().includes(searchLower) ||\n        provider.services.some(service => \n          service.name?.toLowerCase().includes(searchLower) ||\n          service.description?.toLowerCase().includes(searchLower)\n        )\n      );\n    }\n\n    // Category filter (based on provider type)\n    if (selectedCategory) {\n      if (selectedCategory === 'Products') {\n        filtered = filtered.filter(provider => provider.products.length > 0);\n      } else if (selectedCategory === 'Veterinary') {\n        filtered = filtered.filter(provider => \n          provider.provider_type === 'veterinarian' || provider.provider_type === 'Veterinarian'\n        );\n      } else if (selectedCategory === 'Groomers') {\n        filtered = filtered.filter(provider => provider.provider_type === 'Pet Groomer');\n      } else if (selectedCategory === 'Trainers') {\n        filtered = filtered.filter(provider => provider.provider_type === 'Pet Trainer');\n      } else if (selectedCategory === 'Nutritionists') {\n        filtered = filtered.filter(provider => provider.provider_type === 'Nutritionist');\n      } else if (selectedCategory === 'Holistic Care') {\n        filtered = filtered.filter(provider => provider.provider_type === 'Holistic Care');\n      }\n    }\n\n    // City filter\n    if (selectedCity) {\n      filtered = filtered.filter(provider =>\n        provider.city?.toLowerCase().includes(selectedCity.toLowerCase())\n      );\n    }\n\n    // Price range filter (check if provider has services in range)\n    if (priceRange.min || priceRange.max) {\n      filtered = filtered.filter(provider => {\n        const allPrices = [\n          ...provider.services.map(s => s.price || 0),\n          ...provider.packages.map(p => p.price || 0),\n          ...provider.products.map(p => p.price || 0)\n        ];\n        \n        return allPrices.some(price => {\n          const priceNum = parseFloat(price);\n          const minCheck = !priceRange.min || priceNum >= parseFloat(priceRange.min);\n          const maxCheck = !priceRange.max || priceNum <= parseFloat(priceRange.max);\n          return minCheck && maxCheck;\n        });\n      });\n    }\n\n    return filtered;\n  }, [listings, debouncedSearchTerm, selectedCategory, selectedCity, priceRange]);\n\n  // Update filtered listings when filter results change\n  useEffect(() => {\n    setFilteredListings(filterListings);\n  }, [filterListings]);\n\n  // Get unique cities for filter dropdown - memoized for performance\n  const uniqueCities = useMemo(() => {\n    return listings\n      .map(listing => listing.city)\n      .filter(city => city)\n      .filter((city, index, arr) => arr.indexOf(city) === index)\n      .sort();\n  }, [listings]);\n\n\n\n\n\n  useEffect(() => {\n    loadListings(1, true); // Initial load\n  }, [loadListings]);\n\n  // Failsafe: Force loading to false after 10 seconds if still loading\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      if (loading) {\n        setLoading(false);\n      }\n    }, 10000);\n\n    return () => clearTimeout(timeout);\n  }, [loading]);\n\n  // Close city dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (cityDropdownRef.current && !cityDropdownRef.current.contains(event.target)) {\n        setCityDropdownOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  // Show skeleton loading instead of full-screen loader to avoid double loading indicators\n  const isInitialLoad = loading && listings.length === 0;\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Search and Filter Section */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"py-8 px-4 sm:px-6 lg:px-8\">\n          <div className=\"max-w-7xl mx-auto\">\n          <div className=\"mb-6 sm:mb-8\">\n            <h1 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-3 font-montserrat leading-tight\">\n              Find amazing pet care\n            </h1>\n            <p className=\"text-base sm:text-lg text-gray-600 font-montserrat leading-relaxed\">\n              Browse our selection of trusted pet care professionals and products\n            </p>\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row gap-4 mb-6\">\n            <div className=\"flex-1 relative\">\n              <div className=\"absolute inset-y-0 left-0 pl-3 sm:pl-4 flex items-center pointer-events-none\">\n                <svg className=\"h-4 w-4 sm:h-5 sm:w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                </svg>\n              </div>\n              <input\n                type=\"text\"\n                placeholder=\"Search services or products...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"w-full pl-10 sm:pl-12 pr-4 py-3 sm:py-4 bg-white border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent shadow-sm text-base font-montserrat placeholder-gray-500\"\n              />\n            </div>\n            <button\n              onClick={() => setShowFilters(!showFilters)}\n              className=\"flex items-center justify-center px-4 sm:px-6 py-3 sm:py-4 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-colors duration-200 font-montserrat text-sm sm:text-base font-medium text-gray-700 shadow-sm whitespace-nowrap\"\n            >\n              <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z\" />\n              </svg>\n              Filters\n            </button>\n          </div>\n\n          {/* Advanced Filters */}\n          {showFilters && (\n            <div className=\"bg-gray-50 rounded-xl p-6 mb-6 border border-gray-200\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div ref={cityDropdownRef}>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2 font-montserrat\">City</label>\n                  <div className=\"relative\">\n                    <button\n                      onClick={() => setCityDropdownOpen(!cityDropdownOpen)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white text-left flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent font-montserrat\"\n                    >\n                      <span className=\"flex items-center\">\n                        {selectedCity || 'All Cities'}\n                      </span>\n                      <svg\n                        className={`w-4 h-4 transition-transform ${cityDropdownOpen ? 'rotate-180' : ''}`}\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                      </svg>\n                    </button>\n                    \n                    {/* Custom Dropdown Menu */}\n                    {cityDropdownOpen && (\n                      <div className=\"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-xl ring-1 ring-black ring-opacity-5 z-50 overflow-hidden max-h-60 overflow-y-auto\">\n                        <button\n                          onClick={() => {\n                            setSelectedCity('');\n                            setCityDropdownOpen(false);\n                          }}\n                          className={`w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center font-montserrat ${\n                            !selectedCity ? 'bg-[#E5F4F1] text-[#4A9A64]' : 'text-gray-900'\n                          }`}\n                        >\n                          All Cities\n                        </button>\n                        {uniqueCities.map(city => (\n                          <button\n                            key={city}\n                            onClick={() => {\n                              setSelectedCity(city);\n                              setCityDropdownOpen(false);\n                            }}\n                            className={`w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center border-t border-gray-200 font-montserrat ${\n                              selectedCity === city ? 'bg-[#E5F4F1] text-[#4A9A64]' : 'text-gray-900'\n                            }`}\n                          >\n                            {city}\n                          </button>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2 font-montserrat\">Min Price</label>\n                  <input\n                    type=\"number\"\n                    placeholder=\"$0\"\n                    value={priceRange.min}\n                    onChange={(e) => setPriceRange({ ...priceRange, min: e.target.value })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent font-montserrat\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2 font-montserrat\">Max Price</label>\n                  <input\n                    type=\"number\"\n                    placeholder=\"$1000\"\n                    value={priceRange.max}\n                    onChange={(e) => setPriceRange({ ...priceRange, max: e.target.value })}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent font-montserrat\"\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Category Pills */}\n          <div className=\"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0 scrollbar-hide\">\n            <div className=\"flex space-x-3 pb-2 min-w-max sm:min-w-0\">\n              {[\n                { id: '', label: 'All', icon: '🏠' },\n                { id: 'Products', label: 'Products', icon: '🛍️' },\n                { id: 'Veterinary', label: 'Vets', icon: '🏥' },\n                { id: 'Groomers', label: 'Groomers', icon: '✂️' },\n                { id: 'Trainers', label: 'Trainers', icon: '🎓' },\n                { id: 'Nutritionists', label: 'Nutritionists', icon: '🥗' },\n                { id: 'Holistic Care', label: 'Holistic', icon: '🌿' }\n              ].map((category) => (\n                <button\n                  key={category.id}\n                  onClick={() => setSelectedCategory(category.id)}\n                  className={`flex items-center px-3 sm:px-4 py-2 rounded-full text-xs sm:text-sm font-medium whitespace-nowrap transition-all duration-200 font-montserrat ${\n                    selectedCategory === category.id\n                      ? 'bg-[#5EB47C] text-white shadow-sm'\n                      : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'\n                  }`}\n                >\n                  <span className=\"mr-2\">{category.icon}</span>\n                  {category.label}\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n      </div>\n\n      {/* Results Section */}\n      <div className=\"py-8 px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-7xl mx-auto\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6\">\n          <p className=\"text-gray-600 font-montserrat mb-4 sm:mb-0\">\n            {filteredListings.length} {filteredListings.length === 1 ? 'listing' : 'listings'} found\n          </p>\n          \n          {/* Filter Tags */}\n          <div className=\"flex flex-wrap gap-2\">\n            {debouncedSearchTerm && (\n              <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#E5F4F1] text-[#4A9A64] font-montserrat\">\n                Search: \"{debouncedSearchTerm}\"\n                <button\n                  onClick={() => setSearchTerm('')}\n                  className=\"ml-2 text-[#5EB47C] hover:text-[#4A9A64]\"\n                >\n                  ×\n                </button>\n              </span>\n            )}\n            {selectedCategory && (\n              <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#E5F4F1] text-[#4A9A64] font-montserrat\">\n                Category: {selectedCategory}\n                <button\n                  onClick={() => setSelectedCategory('')}\n                  className=\"ml-2 text-[#5EB47C] hover:text-[#4A9A64]\"\n                >\n                  ×\n                </button>\n              </span>\n            )}\n            {selectedCity && (\n              <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#E5F4F1] text-[#4A9A64] font-montserrat\">\n                City: {selectedCity}\n                <button\n                  onClick={() => setSelectedCity('')}\n                  className=\"ml-2 text-[#5EB47C] hover:text-[#4A9A64]\"\n                >\n                  ×\n                </button>\n              </span>\n            )}\n            {(debouncedSearchTerm || selectedCategory || selectedCity || priceRange.min || priceRange.max) && (\n              <button\n                onClick={() => {\n                  setSearchTerm('');\n                  setSelectedCategory('');\n                  setSelectedCity('');\n                  setPriceRange({ min: '', max: '' });\n                }}\n                className=\"text-xs text-gray-500 hover:text-gray-700 font-montserrat underline\"\n              >\n                Clear filters\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Listings Grid */}\n        {isInitialLoad ? (\n          // Skeleton loading for initial load\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6\">\n            {[...Array(6)].map((_, index) => (\n              <div key={index} className=\"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden h-full flex flex-col animate-pulse\">\n                <div className=\"h-44 sm:h-52 bg-gray-200\"></div>\n                <div className=\"p-3 sm:p-4 flex-1 flex flex-col\">\n                  <div className=\"h-6 bg-gray-200 rounded mb-2\"></div>\n                  <div className=\"h-4 bg-gray-200 rounded mb-3 w-3/4\"></div>\n                  <div className=\"flex items-center mb-3\">\n                    <div className=\"w-8 h-8 bg-gray-200 rounded-full mr-3\"></div>\n                    <div className=\"flex-1\">\n                      <div className=\"h-4 bg-gray-200 rounded mb-1\"></div>\n                      <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center justify-between mt-auto\">\n                    <div className=\"h-6 bg-gray-200 rounded w-20\"></div>\n                    <div className=\"h-4 bg-gray-200 rounded w-16\"></div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : filteredListings.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <div className=\"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n              <svg className=\"w-12 h-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2 font-montserrat\">No listings found</h3>\n            <p className=\"text-gray-500 font-montserrat\">Try adjusting your search criteria or filters</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6\">\n            {filteredListings.map((provider) => (\n              <MarketplaceCard\n                key={provider.listing_id}\n                listing={provider}\n              />\n            ))}\n          </div>\n        )}\n\n        {/* Load More Button */}\n        {!loading && filteredListings.length > 0 && filteredListings.length < totalCount && (\n          <div className=\"text-center mt-8\">\n            <button\n              onClick={() => {\n                const nextPage = currentPage + 1;\n                setCurrentPage(nextPage);\n                loadListings(nextPage, false);\n              }}\n              className=\"bg-[#5EB47C] hover:bg-[#4A9A64] text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 font-montserrat shadow-sm hover:shadow-md\"\n            >\n              Load More ({totalCount - filteredListings.length} remaining)\n            </button>\n          </div>\n        )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LiveMarketplace;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,CAAEC,MAAM,CAAEC,OAAO,KAAQ,OAAO,CAChF,OAASC,QAAQ,KAAQ,oBAAoB,CAC7C,MAAO,CAAAC,eAAe,KAAM,mBAAmB,CAC/C,OAASC,cAAc,CAAEC,qBAAqB,KAAQ,yBAAyB,CAK/E;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,gBAAgB,CAAG,CACvBC,IAAI,CAAE,IAAI,CACVC,SAAS,CAAE,IAAI,CACfC,OAAO,CAAE,QAAAA,CAAA,CAAW,CAClB,MAAO,KAAI,CAACF,IAAI,EAAI,IAAI,CAACC,SAAS,EAAKE,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,IAAI,CAACH,SAAS,CAAG,CAAC,CAAG,EAAE,CAAG,IAAK,CAAE;AACvF,CACF,CAAC,CAED,KAAM,CAAAI,eAAe,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACsB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGvB,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACwB,OAAO,CAAEC,UAAU,CAAC,CAAGzB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC0B,UAAU,CAAEC,aAAa,CAAC,CAAG3B,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAC4B,mBAAmB,CAAEC,sBAAsB,CAAC,CAAG7B,QAAQ,CAAC,EAAE,CAAC,CAClE,KAAM,CAAC8B,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG/B,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACgC,YAAY,CAAEC,eAAe,CAAC,CAAGjC,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACkC,UAAU,CAAEC,aAAa,CAAC,CAAGnC,QAAQ,CAAC,CAAEoC,GAAG,CAAE,EAAE,CAAEC,GAAG,CAAE,EAAG,CAAC,CAAC,CAClE,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGvC,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACwC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGzC,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAAC0C,WAAW,CAAEC,cAAc,CAAC,CAAG3C,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAAC4C,UAAU,CAAEC,aAAa,CAAC,CAAG7C,QAAQ,CAAC,CAAC,CAAC,CAC/C,KAAM,CAAA8C,eAAe,CAAG3C,MAAM,CAAC,IAAI,CAAC,CAEpC;AACA,KAAM,CAAE4C,QAAS,CAAC,CAAGxC,cAAc,CAAC,iBAAiB,CAAC,CACtD,KAAM,CAAEyC,cAAe,CAAC,CAAGxC,qBAAqB,CAAC,CAAC,CAElD,KAAM,CAAAyC,cAAc,CAAG,EAAE,CAAE;AAI3B;AACA,KAAM,CAAAC,YAAY,CAAGhD,WAAW,CAAC,gBAAqC,IAA9B,CAAAiD,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,IAAE,CAAAG,QAAQ,CAAAH,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CAC/D;AACA,GAAIG,QAAQ,EAAIJ,IAAI,GAAK,CAAC,EAAItC,gBAAgB,CAACG,OAAO,CAAC,CAAC,CAAE,CACxDK,WAAW,CAACR,gBAAgB,CAACC,IAAI,CAACM,QAAQ,CAAC,CAC3CyB,aAAa,CAAChC,gBAAgB,CAACC,IAAI,CAAC8B,UAAU,CAAC,CAC/CnB,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,GAAI,CACFsB,QAAQ,CAAC,sBAAsB,CAAC,CAEhC;AACA,GAAI,CAAAH,UAAU,CAAG,CAAC,CAClB,GAAIO,IAAI,GAAK,CAAC,CAAE,CACd,KAAM,CAAAK,WAAW,CAAG,KAAM,CAAAR,cAAc,CAAC,aAAa,CAAE,SAAY,CAClE,MAAO,MAAM,CAAA3C,QAAQ,CAClBoD,IAAI,CAAC,sBAAsB,CAAC,CAC5BC,MAAM,CAAC,GAAG,CAAE,CAAEC,KAAK,CAAE,OAAO,CAAEC,IAAI,CAAE,IAAK,CAAC,CAAC,CAChD,CAAC,CAAC,CACFhB,UAAU,CAAGY,WAAW,CAACG,KAAK,EAAI,CAAC,CACnCd,aAAa,CAACD,UAAU,CAAC,CAC3B,CAEQ;AACN,KAAM,CAAAiB,MAAM,CAAG,KAAM,CAAAb,cAAc,CAAC,mBAAmB,CAAE,SAAY,CACnE,MAAO,MAAM,CAAA3C,QAAQ,CAClBoD,IAAI,CAAC,sBAAsB,CAAC,CAC5BC,MAAM,CAAC;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,CAAC,CACDI,KAAK,CAAC,YAAY,CAAE,CAAEC,SAAS,CAAE,KAAM,CAAC,CAAC,CACzCC,KAAK,CAAC,CAACb,IAAI,CAAG,CAAC,EAAIF,cAAc,CAAEE,IAAI,CAAGF,cAAc,CAAG,CAAC,CAAC,CAClE,CAAC,CAAC,CAEJ,KAAM,CAAEnC,IAAI,CAAEmD,KAAM,CAAC,CAAGJ,MAAM,CAE9B,GAAII,KAAK,CAAE,CACT,GAAId,IAAI,GAAK,CAAC,CAAE,CACd9B,WAAW,CAAC,EAAE,CAAC,CACjB,CACAI,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,KAAM,CAAAyC,WAAW,CAAGpD,IAAI,EAAI,EAAE,CAE9B,GAAIqC,IAAI,GAAK,CAAC,CAAE,CACd;AACA9B,WAAW,CAAC6C,WAAW,CAAC,CAExB;AACA,KAAM,CAAAC,SAAS,CAAG,CAAE/C,QAAQ,CAAE8C,WAAW,CAAEtB,UAAW,CAAC,CACvD/B,gBAAgB,CAACC,IAAI,CAAGqD,SAAS,CACjCtD,gBAAgB,CAACE,SAAS,CAAGE,IAAI,CAACC,GAAG,CAAC,CAAC,CAGzC,CAAC,IAAM,CACL;AACAG,WAAW,CAAC+C,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,GAAGF,WAAW,CAAC,CAAC,CAChD,CAEAzC,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAOwC,KAAK,CAAE,CACd,GAAId,IAAI,GAAK,CAAC,CAAE,CACd9B,WAAW,CAAC,EAAE,CAAC,CACjB,CACAI,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACsB,QAAQ,CAAEC,cAAc,CAAEpB,mBAAmB,CAAEE,gBAAgB,CAAEE,YAAY,CAAC,CAAC,CAInF;AACA/B,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoE,KAAK,CAAGC,UAAU,CAAC,IAAM,CAC7BzC,sBAAsB,CAACH,UAAU,CAAC,CACpC,CAAC,CAAE,GAAG,CAAC,CAAE;AAET,MAAO,IAAM6C,YAAY,CAACF,KAAK,CAAC,CAClC,CAAC,CAAE,CAAC3C,UAAU,CAAC,CAAC,CAEhB;AACA,KAAM,CAAA8C,cAAc,CAAGpE,OAAO,CAAC,IAAM,CACnC;AACA,KAAM,CAAAqE,aAAa,CAAG,CACpBC,YAAY,CAAE,UAAU,CACxBC,UAAU,CAAE,uBAAuB,CACnCC,WAAW,CAAE,iBAAiB,CAC9BC,cAAc,CAAE,iBAAiB,CACjCC,IAAI,CAAE,cAAc,CACpBC,WAAW,CAAE,kDAAkD,CAC/DC,aAAa,CAAE,cAAc,CACrBC,aAAa,CAAE,cAAc,CACrCC,IAAI,CAAE,QAAQ,CACdC,QAAQ,CAAE,cAAc,CACxBC,QAAQ,CAAE,IAAI,CACdC,MAAM,CAAE,GAAG,CACXC,aAAa,CAAE,EAAE,CACjBC,SAAS,CAAE,IAAI,CACfC,KAAK,CAAE,EAAE,CACTC,SAAS,CAAE,EAAE,CACbC,SAAS,CAAE,GAAG,CACdC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EACZ,CAAC,CAED;AACA,KAAM,CAAAvE,gBAAgB,CAAGF,QAAQ,CAEjC;AACA,KAAM,CAAA0E,cAAc,CAAG,CAAC,CAAC,CAEzBxE,gBAAgB,CAACyE,OAAO,CAACC,OAAO,EAAI,CAClC,KAAM,CAAAC,UAAU,CAAGD,OAAO,CAACnB,cAAc,EAAImB,OAAO,CAACpB,WAAW,CAChE,GAAI,CAACqB,UAAU,CAAE,OAEjB,GAAI,CAACH,cAAc,CAACG,UAAU,CAAC,CAAE,CAC/BH,cAAc,CAACG,UAAU,CAAC,CAAG,CAC3BvB,YAAY,CAAE,UAAU,CACxBC,UAAU,CAAEqB,OAAO,CAACnB,cAAc,EAAImB,OAAO,CAACpB,WAAW,CACzDA,WAAW,CAAEoB,OAAO,CAACpB,WAAW,CAChCC,cAAc,CAAEmB,OAAO,CAACnB,cAAc,CACtCC,IAAI,CAAEkB,OAAO,CAAChB,aAAa,EAAI,kBAAkB,CACjDD,WAAW,CAAE,GAAGiB,OAAO,CAACf,aAAa,EAAI,UAAU,sCAAsC,CACzFD,aAAa,CAAEgB,OAAO,CAAChB,aAAa,EAAI,kBAAkB,CAC1DC,aAAa,CAAEe,OAAO,CAACf,aAAa,EAAI,UAAU,CAClDC,IAAI,CAAEc,OAAO,CAACE,aAAa,EAAIF,OAAO,CAACd,IAAI,EAAI,EAAE,CACjDC,QAAQ,CAAEa,OAAO,CAACf,aAAa,EAAI,UAAU,CAC7CG,QAAQ,CAAEY,OAAO,CAACZ,QAAQ,EAAI,KAAK,CACnCC,MAAM,CAAEc,UAAU,CAACH,OAAO,CAACX,MAAM,CAAC,EAAI,CAAC,CACvCC,aAAa,CAAEc,QAAQ,CAACJ,OAAO,CAACV,aAAa,CAAC,EAAI,CAAC,CACnDC,SAAS,CAAES,OAAO,CAACK,iBAAiB,EAAIL,OAAO,CAACT,SAAS,EAAI,IAAI,CACjEC,KAAK,CAAE,CAAC,CAAE;AACVG,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EACZ,CAAC,CACH,CAEA;AACA,GAAIG,OAAO,CAAChB,aAAa,EAAI,CAACc,cAAc,CAACG,UAAU,CAAC,CAACnB,IAAI,CAAE,CAC7DgB,cAAc,CAACG,UAAU,CAAC,CAACnB,IAAI,CAAGkB,OAAO,CAAChB,aAAa,CACvDc,cAAc,CAACG,UAAU,CAAC,CAACjB,aAAa,CAAGgB,OAAO,CAAChB,aAAa,CAClE,CACA,GAAIgB,OAAO,CAACf,aAAa,EAAIa,cAAc,CAACG,UAAU,CAAC,CAAChB,aAAa,GAAK,UAAU,CAAE,CACpFa,cAAc,CAACG,UAAU,CAAC,CAAChB,aAAa,CAAGe,OAAO,CAACf,aAAa,CAChEa,cAAc,CAACG,UAAU,CAAC,CAACd,QAAQ,CAAGa,OAAO,CAACf,aAAa,CAC3Da,cAAc,CAACG,UAAU,CAAC,CAAClB,WAAW,CAAG,GAAGiB,OAAO,CAACf,aAAa,sCAAsC,CACzG,CAEA;AACA,GAAIe,OAAO,CAACtB,YAAY,GAAK,SAAS,EAAKsB,OAAO,CAACM,aAAa,GAAK,SAAS,EAAIN,OAAO,CAACM,aAAa,GAAK,SAAU,CAAE,CACtHR,cAAc,CAACG,UAAU,CAAC,CAACN,QAAQ,CAACY,IAAI,CAACP,OAAO,CAAC,CACnD,CAAC,IAAM,IAAIA,OAAO,CAACtB,YAAY,GAAK,SAAS,EAAIsB,OAAO,CAACM,aAAa,GAAK,SAAS,CAAE,CACpFR,cAAc,CAACG,UAAU,CAAC,CAACL,QAAQ,CAACW,IAAI,CAACP,OAAO,CAAC,CACnD,CAAC,IAAM,IAAIA,OAAO,CAACtB,YAAY,GAAK,SAAS,EAAIsB,OAAO,CAACM,aAAa,GAAK,SAAS,CAAE,CACpFR,cAAc,CAACG,UAAU,CAAC,CAACJ,QAAQ,CAACU,IAAI,CAACP,OAAO,CAAC,CACnD,CACF,CAAC,CAAC,CAEF;AACA,GAAI,CAAAQ,QAAQ,CAAGC,MAAM,CAACC,MAAM,CAACZ,cAAc,CAAC,CAACa,GAAG,CAACC,QAAQ,EAAI,CAC3D;AACA,KAAM,CAAAC,SAAS,CAAG,CAChB,GAAGD,QAAQ,CAACjB,QAAQ,CAACgB,GAAG,CAACG,CAAC,EAAIX,UAAU,CAACW,CAAC,CAACtB,KAAK,CAAC,EAAI,CAAC,CAAC,CACvD,GAAGoB,QAAQ,CAAChB,QAAQ,CAACe,GAAG,CAACI,CAAC,EAAIZ,UAAU,CAACY,CAAC,CAACvB,KAAK,CAAC,EAAI,CAAC,CAAC,CACvD,GAAGoB,QAAQ,CAACf,QAAQ,CAACc,GAAG,CAACI,CAAC,EAAIZ,UAAU,CAACY,CAAC,CAACvB,KAAK,CAAC,EAAI,CAAC,CAAC,CACxD,CAACwB,MAAM,CAACxB,KAAK,EAAIA,KAAK,CAAG,CAAC,CAAC,CAE5B,GAAIqB,SAAS,CAACxD,MAAM,CAAG,CAAC,CAAE,CACxBuD,QAAQ,CAACpB,KAAK,CAAGyB,IAAI,CAAC7E,GAAG,CAAC,GAAGyE,SAAS,CAAC,CACvCD,QAAQ,CAACnB,SAAS,CAAGwB,IAAI,CAAC7E,GAAG,CAAC,GAAGyE,SAAS,CAAC,CAC3CD,QAAQ,CAAClB,SAAS,CAAGuB,IAAI,CAAC5E,GAAG,CAAC,GAAGwE,SAAS,CAAC,CAC7C,CAAC,IAAM,CACLD,QAAQ,CAACpB,KAAK,CAAG,CAAC,CAClBoB,QAAQ,CAACnB,SAAS,CAAG,CAAC,CACtBmB,QAAQ,CAAClB,SAAS,CAAG,CAAC,CACxB,CAEA;AACA,GAAI,CAACkB,QAAQ,CAACrB,SAAS,CAAE,CACvB,KAAM,CAAA2B,WAAW,CAAG,CAAC,GAAGN,QAAQ,CAACjB,QAAQ,CAAE,GAAGiB,QAAQ,CAAChB,QAAQ,CAAE,GAAGgB,QAAQ,CAACf,QAAQ,CAAC,CACtF,KAAM,CAAAsB,gBAAgB,CAAGD,WAAW,CAACE,IAAI,CAACpB,OAAO,EAAIA,OAAO,CAACT,SAAS,CAAC,CACvE,GAAI4B,gBAAgB,CAAE,CACpBP,QAAQ,CAACrB,SAAS,CAAG4B,gBAAgB,CAAC5B,SAAS,CACjD,CACF,CAEQ;AACN,GAAIqB,QAAQ,CAAC3B,aAAa,GAAK,WAAW,EACtC2B,QAAQ,CAAC3B,aAAa,GAAK,cAAc,EACzC2B,QAAQ,CAAC3B,aAAa,GAAK,WAAW,EACtC2B,QAAQ,CAACzB,QAAQ,GAAK,WAAW,EACjCyB,QAAQ,CAACzB,QAAQ,GAAK,cAAc,EACpCyB,QAAQ,CAAC5B,aAAa,GAAK,UAAU,EACrC4B,QAAQ,CAAC5B,aAAa,GAAK,cAAc,CAAE,CACjC;AACV4B,QAAQ,CAAC3B,aAAa,CAAG,cAAc,CACvC2B,QAAQ,CAACzB,QAAQ,CAAG,cAAc,CACpCyB,QAAQ,CAAC7B,WAAW,CAAG,kDAAkD,CAEzE;AACA,GAAI,CAAC6B,QAAQ,CAACvB,MAAM,EAAIuB,QAAQ,CAACvB,MAAM,GAAK,CAAC,CAAE,CAC7C;AACA,KAAM,CAAAgC,mBAAmB,CAAG,CAC1B,cAAc,CAAE,CAAEhC,MAAM,CAAE,GAAG,CAAEiC,OAAO,CAAE,EAAG,CAAC,CAC5C,UAAU,CAAE,CAAEjC,MAAM,CAAE,GAAG,CAAEiC,OAAO,CAAE,EAAG,CAAC,CACxC,aAAa,CAAE,CAAEjC,MAAM,CAAE,GAAG,CAAEiC,OAAO,CAAE,GAAI,CAC7C,CAAC,CAED,KAAM,CAAAC,cAAc,CAAGF,mBAAmB,CAACT,QAAQ,CAAC5B,aAAa,CAAC,CAClE,GAAIuC,cAAc,CAAE,CAClBX,QAAQ,CAACvB,MAAM,CAAGkC,cAAc,CAAClC,MAAM,CACvCuB,QAAQ,CAACtB,aAAa,CAAGiC,cAAc,CAACD,OAAO,CACjD,CAAC,IAAM,CACL;AACAV,QAAQ,CAACvB,MAAM,CAAG,GAAG,CACrBuB,QAAQ,CAACtB,aAAa,CAAG,EAAE,CAC7B,CACF,CAEA;AACAsB,QAAQ,CAACxB,QAAQ,CAAG,IAAI,CAExBoC,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAEb,QAAQ,CAAC5B,aAAa,CAAE,CACrEK,MAAM,CAAEuB,QAAQ,CAACvB,MAAM,CACvBiC,OAAO,CAAEV,QAAQ,CAACtB,aAAa,CAC/BoC,IAAI,CAAEd,QAAQ,CAAC3B,aACjB,CAAC,CAAC,CACJ,CAEA;AACA,KAAM,CAAA0C,oBAAoB,CAAG,CAC3B,cAAc,CAAE,CAAEtC,MAAM,CAAE,GAAG,CAAEiC,OAAO,CAAE,EAAG,CAC7C,CAAC,CAED,GAAIK,oBAAoB,CAACf,QAAQ,CAAC5B,aAAa,CAAC,CAAE,CAChD,KAAM,CAAAK,MAAM,CAAGsC,oBAAoB,CAACf,QAAQ,CAAC5B,aAAa,CAAC,CAC3D4B,QAAQ,CAACvB,MAAM,CAAGA,MAAM,CAACA,MAAM,CAC/BuB,QAAQ,CAACtB,aAAa,CAAGD,MAAM,CAACiC,OAAO,CACzC,CAIA,MAAO,CAAAV,QAAQ,CACnB,CAAC,CAAC,CAEF;AACAJ,QAAQ,CAACD,IAAI,CAAC9B,aAAa,CAAC,CAE5B;AACA,GAAI7C,mBAAmB,CAAE,CACvB,KAAM,CAAAgG,WAAW,CAAGhG,mBAAmB,CAACiG,WAAW,CAAC,CAAC,CACrDrB,QAAQ,CAAGA,QAAQ,CAACQ,MAAM,CAACJ,QAAQ,OAAAkB,qBAAA,CAAAC,qBAAA,CAAAC,cAAA,OACjC,EAAAF,qBAAA,CAAAlB,QAAQ,CAAC5B,aAAa,UAAA8C,qBAAA,iBAAtBA,qBAAA,CAAwBD,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,WAAW,CAAC,KAAAG,qBAAA,CAC3DnB,QAAQ,CAAC3B,aAAa,UAAA8C,qBAAA,iBAAtBA,qBAAA,CAAwBF,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,WAAW,CAAC,KAAAI,cAAA,CAC3DpB,QAAQ,CAAC1B,IAAI,UAAA8C,cAAA,iBAAbA,cAAA,CAAeH,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,WAAW,CAAC,GAClDhB,QAAQ,CAACjB,QAAQ,CAACuC,IAAI,CAACC,OAAO,OAAAC,aAAA,CAAAC,oBAAA,OAC5B,EAAAD,aAAA,CAAAD,OAAO,CAACrD,IAAI,UAAAsD,aAAA,iBAAZA,aAAA,CAAcP,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,WAAW,CAAC,KAAAS,oBAAA,CACjDF,OAAO,CAACpD,WAAW,UAAAsD,oBAAA,iBAAnBA,oBAAA,CAAqBR,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACL,WAAW,CAAC,GAC1D,CAAC,EACH,CAAC,CACH,CAEA;AACA,GAAI9F,gBAAgB,CAAE,CACpB,GAAIA,gBAAgB,GAAK,UAAU,CAAE,CACnC0E,QAAQ,CAAGA,QAAQ,CAACQ,MAAM,CAACJ,QAAQ,EAAIA,QAAQ,CAACf,QAAQ,CAACxC,MAAM,CAAG,CAAC,CAAC,CACtE,CAAC,IAAM,IAAIvB,gBAAgB,GAAK,YAAY,CAAE,CAC5C0E,QAAQ,CAAGA,QAAQ,CAACQ,MAAM,CAACJ,QAAQ,EACjCA,QAAQ,CAAC3B,aAAa,GAAK,cAAc,EAAI2B,QAAQ,CAAC3B,aAAa,GAAK,cAC1E,CAAC,CACH,CAAC,IAAM,IAAInD,gBAAgB,GAAK,UAAU,CAAE,CAC1C0E,QAAQ,CAAGA,QAAQ,CAACQ,MAAM,CAACJ,QAAQ,EAAIA,QAAQ,CAAC3B,aAAa,GAAK,aAAa,CAAC,CAClF,CAAC,IAAM,IAAInD,gBAAgB,GAAK,UAAU,CAAE,CAC1C0E,QAAQ,CAAGA,QAAQ,CAACQ,MAAM,CAACJ,QAAQ,EAAIA,QAAQ,CAAC3B,aAAa,GAAK,aAAa,CAAC,CAClF,CAAC,IAAM,IAAInD,gBAAgB,GAAK,eAAe,CAAE,CAC/C0E,QAAQ,CAAGA,QAAQ,CAACQ,MAAM,CAACJ,QAAQ,EAAIA,QAAQ,CAAC3B,aAAa,GAAK,cAAc,CAAC,CACnF,CAAC,IAAM,IAAInD,gBAAgB,GAAK,eAAe,CAAE,CAC/C0E,QAAQ,CAAGA,QAAQ,CAACQ,MAAM,CAACJ,QAAQ,EAAIA,QAAQ,CAAC3B,aAAa,GAAK,eAAe,CAAC,CACpF,CACF,CAEA;AACA,GAAIjD,YAAY,CAAE,CAChBwE,QAAQ,CAAGA,QAAQ,CAACQ,MAAM,CAACJ,QAAQ,OAAA0B,eAAA,QAAAA,eAAA,CACjC1B,QAAQ,CAAC1B,IAAI,UAAAoD,eAAA,iBAAbA,eAAA,CAAeT,WAAW,CAAC,CAAC,CAACI,QAAQ,CAACjG,YAAY,CAAC6F,WAAW,CAAC,CAAC,CAAC,EACnE,CAAC,CACH,CAEA;AACA,GAAI3F,UAAU,CAACE,GAAG,EAAIF,UAAU,CAACG,GAAG,CAAE,CACpCmE,QAAQ,CAAGA,QAAQ,CAACQ,MAAM,CAACJ,QAAQ,EAAI,CACrC,KAAM,CAAAC,SAAS,CAAG,CAChB,GAAGD,QAAQ,CAACjB,QAAQ,CAACgB,GAAG,CAACG,CAAC,EAAIA,CAAC,CAACtB,KAAK,EAAI,CAAC,CAAC,CAC3C,GAAGoB,QAAQ,CAAChB,QAAQ,CAACe,GAAG,CAACI,CAAC,EAAIA,CAAC,CAACvB,KAAK,EAAI,CAAC,CAAC,CAC3C,GAAGoB,QAAQ,CAACf,QAAQ,CAACc,GAAG,CAACI,CAAC,EAAIA,CAAC,CAACvB,KAAK,EAAI,CAAC,CAAC,CAC5C,CAED,MAAO,CAAAqB,SAAS,CAACqB,IAAI,CAAC1C,KAAK,EAAI,CAC7B,KAAM,CAAA+C,QAAQ,CAAGpC,UAAU,CAACX,KAAK,CAAC,CAClC,KAAM,CAAAgD,QAAQ,CAAG,CAACtG,UAAU,CAACE,GAAG,EAAImG,QAAQ,EAAIpC,UAAU,CAACjE,UAAU,CAACE,GAAG,CAAC,CAC1E,KAAM,CAAAqG,QAAQ,CAAG,CAACvG,UAAU,CAACG,GAAG,EAAIkG,QAAQ,EAAIpC,UAAU,CAACjE,UAAU,CAACG,GAAG,CAAC,CAC1E,MAAO,CAAAmG,QAAQ,EAAIC,QAAQ,CAC7B,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAEA,MAAO,CAAAjC,QAAQ,CACjB,CAAC,CAAE,CAACpF,QAAQ,CAAEQ,mBAAmB,CAAEE,gBAAgB,CAAEE,YAAY,CAAEE,UAAU,CAAC,CAAC,CAE/E;AACAjC,SAAS,CAAC,IAAM,CACdsB,mBAAmB,CAACiD,cAAc,CAAC,CACrC,CAAC,CAAE,CAACA,cAAc,CAAC,CAAC,CAEpB;AACA,KAAM,CAAAkE,YAAY,CAAGtI,OAAO,CAAC,IAAM,CACjC,MAAO,CAAAgB,QAAQ,CACZuF,GAAG,CAACX,OAAO,EAAIA,OAAO,CAACd,IAAI,CAAC,CAC5B8B,MAAM,CAAC9B,IAAI,EAAIA,IAAI,CAAC,CACpB8B,MAAM,CAAC,CAAC9B,IAAI,CAAEyD,KAAK,CAAEC,GAAG,GAAKA,GAAG,CAACC,OAAO,CAAC3D,IAAI,CAAC,GAAKyD,KAAK,CAAC,CACzDG,IAAI,CAAC,CAAC,CACX,CAAC,CAAE,CAAC1H,QAAQ,CAAC,CAAC,CAMdnB,SAAS,CAAC,IAAM,CACdiD,YAAY,CAAC,CAAC,CAAE,IAAI,CAAC,CAAE;AACzB,CAAC,CAAE,CAACA,YAAY,CAAC,CAAC,CAElB;AACAjD,SAAS,CAAC,IAAM,CACd,KAAM,CAAA8I,OAAO,CAAGzE,UAAU,CAAC,IAAM,CAC/B,GAAI9C,OAAO,CAAE,CACXC,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,KAAK,CAAC,CAET,MAAO,IAAM8C,YAAY,CAACwE,OAAO,CAAC,CACpC,CAAC,CAAE,CAACvH,OAAO,CAAC,CAAC,CAEb;AACAvB,SAAS,CAAC,IAAM,CACd,KAAM,CAAA+I,kBAAkB,CAAIC,KAAK,EAAK,CACpC,GAAInG,eAAe,CAACoG,OAAO,EAAI,CAACpG,eAAe,CAACoG,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,CAAE,CAC9E3G,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CACF,CAAC,CAED4G,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEN,kBAAkB,CAAC,CAC1D,MAAO,IAAM,CACXK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEP,kBAAkB,CAAC,CAC/D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAQ,aAAa,CAAGhI,OAAO,EAAIJ,QAAQ,CAACiC,MAAM,GAAK,CAAC,CAEtD,mBACEzC,KAAA,QAAK6I,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eAEtChJ,IAAA,QAAK+I,SAAS,CAAC,mCAAmC,CAAAC,QAAA,cAChDhJ,IAAA,QAAK+I,SAAS,CAAC,2BAA2B,CAAAC,QAAA,cACxC9I,KAAA,QAAK6I,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAClC9I,KAAA,QAAK6I,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BhJ,IAAA,OAAI+I,SAAS,CAAC,6FAA6F,CAAAC,QAAA,CAAC,uBAE5G,CAAI,CAAC,cACLhJ,IAAA,MAAG+I,SAAS,CAAC,oEAAoE,CAAAC,QAAA,CAAC,qEAElF,CAAG,CAAC,EACD,CAAC,cAEN9I,KAAA,QAAK6I,SAAS,CAAC,sCAAsC,CAAAC,QAAA,eACnD9I,KAAA,QAAK6I,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BhJ,IAAA,QAAK+I,SAAS,CAAC,8EAA8E,CAAAC,QAAA,cAC3FhJ,IAAA,QAAK+I,SAAS,CAAC,qCAAqC,CAACE,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAH,QAAA,cACxGhJ,IAAA,SAAMoJ,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAC,GAAG,CAACC,CAAC,CAAC,6CAA6C,CAAE,CAAC,CAClH,CAAC,CACH,CAAC,cACNvJ,IAAA,UACEgH,IAAI,CAAC,MAAM,CACXwC,WAAW,CAAC,gCAAgC,CAC5CC,KAAK,CAAEzI,UAAW,CAClB0I,QAAQ,CAAGC,CAAC,EAAK1I,aAAa,CAAC0I,CAAC,CAACjB,MAAM,CAACe,KAAK,CAAE,CAC/CV,SAAS,CAAC,wMAAwM,CACnN,CAAC,EACC,CAAC,cACN7I,KAAA,WACE0J,OAAO,CAAEA,CAAA,GAAM/H,cAAc,CAAC,CAACD,WAAW,CAAE,CAC5CmH,SAAS,CAAC,kPAAkP,CAAAC,QAAA,eAE5PhJ,IAAA,QAAK+I,SAAS,CAAC,cAAc,CAACE,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAH,QAAA,cACjFhJ,IAAA,SAAMoJ,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAC,GAAG,CAACC,CAAC,CAAC,yJAAyJ,CAAE,CAAC,CAC9N,CAAC,UAER,EAAQ,CAAC,EACN,CAAC,CAGL3H,WAAW,eACV5B,IAAA,QAAK+I,SAAS,CAAC,uDAAuD,CAAAC,QAAA,cACpE9I,KAAA,QAAK6I,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpD9I,KAAA,QAAK2J,GAAG,CAAEzH,eAAgB,CAAA4G,QAAA,eACxBhJ,IAAA,UAAO+I,SAAS,CAAC,8DAA8D,CAAAC,QAAA,CAAC,MAAI,CAAO,CAAC,cAC5F9I,KAAA,QAAK6I,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvB9I,KAAA,WACE0J,OAAO,CAAEA,CAAA,GAAM7H,mBAAmB,CAAC,CAACD,gBAAgB,CAAE,CACtDiH,SAAS,CAAC,6NAA6N,CAAAC,QAAA,eAEvOhJ,IAAA,SAAM+I,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAChC1H,YAAY,EAAI,YAAY,CACzB,CAAC,cACPtB,IAAA,QACE+I,SAAS,CAAE,gCAAgCjH,gBAAgB,CAAG,YAAY,CAAG,EAAE,EAAG,CAClFmH,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,cAAc,CACrBC,OAAO,CAAC,WAAW,CAAAH,QAAA,cAEnBhJ,IAAA,SAAMoJ,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,gBAAgB,CAAE,CAAC,CACrF,CAAC,EACA,CAAC,CAGRzH,gBAAgB,eACf5B,KAAA,QAAK6I,SAAS,CAAC,2KAA2K,CAAAC,QAAA,eACxLhJ,IAAA,WACE4J,OAAO,CAAEA,CAAA,GAAM,CACbrI,eAAe,CAAC,EAAE,CAAC,CACnBQ,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CAAE,CACFgH,SAAS,CAAE,iFACT,CAACzH,YAAY,CAAG,6BAA6B,CAAG,eAAe,EAC9D,CAAA0H,QAAA,CACJ,YAED,CAAQ,CAAC,CACRhB,YAAY,CAAC/B,GAAG,CAACzB,IAAI,eACpBxE,IAAA,WAEE4J,OAAO,CAAEA,CAAA,GAAM,CACbrI,eAAe,CAACiD,IAAI,CAAC,CACrBzC,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CAAE,CACFgH,SAAS,CAAE,0GACTzH,YAAY,GAAKkD,IAAI,CAAG,6BAA6B,CAAG,eAAe,EACtE,CAAAwE,QAAA,CAEFxE,IAAI,EATAA,IAUC,CACT,CAAC,EACC,CACN,EACE,CAAC,EACH,CAAC,cACNtE,KAAA,QAAA8I,QAAA,eACEhJ,IAAA,UAAO+I,SAAS,CAAC,8DAA8D,CAAAC,QAAA,CAAC,WAAS,CAAO,CAAC,cACjGhJ,IAAA,UACEgH,IAAI,CAAC,QAAQ,CACbwC,WAAW,CAAC,IAAI,CAChBC,KAAK,CAAEjI,UAAU,CAACE,GAAI,CACtBgI,QAAQ,CAAGC,CAAC,EAAKlI,aAAa,CAAC,CAAE,GAAGD,UAAU,CAAEE,GAAG,CAAEiI,CAAC,CAACjB,MAAM,CAACe,KAAM,CAAC,CAAE,CACvEV,SAAS,CAAC,+HAA+H,CAC1I,CAAC,EACC,CAAC,cACN7I,KAAA,QAAA8I,QAAA,eACEhJ,IAAA,UAAO+I,SAAS,CAAC,8DAA8D,CAAAC,QAAA,CAAC,WAAS,CAAO,CAAC,cACjGhJ,IAAA,UACEgH,IAAI,CAAC,QAAQ,CACbwC,WAAW,CAAC,OAAO,CACnBC,KAAK,CAAEjI,UAAU,CAACG,GAAI,CACtB+H,QAAQ,CAAGC,CAAC,EAAKlI,aAAa,CAAC,CAAE,GAAGD,UAAU,CAAEG,GAAG,CAAEgI,CAAC,CAACjB,MAAM,CAACe,KAAM,CAAC,CAAE,CACvEV,SAAS,CAAC,+HAA+H,CAC1I,CAAC,EACC,CAAC,EACH,CAAC,CACH,CACN,cAGD/I,IAAA,QAAK+I,SAAS,CAAC,2DAA2D,CAAAC,QAAA,cACxEhJ,IAAA,QAAK+I,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CACtD,CACC,CAAEc,EAAE,CAAE,EAAE,CAAEC,KAAK,CAAE,KAAK,CAAEC,IAAI,CAAE,IAAK,CAAC,CACpC,CAAEF,EAAE,CAAE,UAAU,CAAEC,KAAK,CAAE,UAAU,CAAEC,IAAI,CAAE,KAAM,CAAC,CAClD,CAAEF,EAAE,CAAE,YAAY,CAAEC,KAAK,CAAE,MAAM,CAAEC,IAAI,CAAE,IAAK,CAAC,CAC/C,CAAEF,EAAE,CAAE,UAAU,CAAEC,KAAK,CAAE,UAAU,CAAEC,IAAI,CAAE,IAAK,CAAC,CACjD,CAAEF,EAAE,CAAE,UAAU,CAAEC,KAAK,CAAE,UAAU,CAAEC,IAAI,CAAE,IAAK,CAAC,CACjD,CAAEF,EAAE,CAAE,eAAe,CAAEC,KAAK,CAAE,eAAe,CAAEC,IAAI,CAAE,IAAK,CAAC,CAC3D,CAAEF,EAAE,CAAE,eAAe,CAAEC,KAAK,CAAE,UAAU,CAAEC,IAAI,CAAE,IAAK,CAAC,CACvD,CAAC/D,GAAG,CAAExB,QAAQ,eACbvE,KAAA,WAEE0J,OAAO,CAAEA,CAAA,GAAMvI,mBAAmB,CAACoD,QAAQ,CAACqF,EAAE,CAAE,CAChDf,SAAS,CAAE,iJACT3H,gBAAgB,GAAKqD,QAAQ,CAACqF,EAAE,CAC5B,mCAAmC,CACnC,gEAAgE,EACnE,CAAAd,QAAA,eAEHhJ,IAAA,SAAM+I,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAEvE,QAAQ,CAACuF,IAAI,CAAO,CAAC,CAC5CvF,QAAQ,CAACsF,KAAK,GATVtF,QAAQ,CAACqF,EAUR,CACT,CAAC,CACC,CAAC,CACH,CAAC,EACH,CAAC,CACH,CAAC,CACD,CAAC,cAGN9J,IAAA,QAAK+I,SAAS,CAAC,2BAA2B,CAAAC,QAAA,cACxC9I,KAAA,QAAK6I,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAClC9I,KAAA,QAAK6I,SAAS,CAAC,mEAAmE,CAAAC,QAAA,eAChF9I,KAAA,MAAG6I,SAAS,CAAC,4CAA4C,CAAAC,QAAA,EACtDpI,gBAAgB,CAAC+B,MAAM,CAAC,GAAC,CAAC/B,gBAAgB,CAAC+B,MAAM,GAAK,CAAC,CAAG,SAAS,CAAG,UAAU,CAAC,QACpF,EAAG,CAAC,cAGJzC,KAAA,QAAK6I,SAAS,CAAC,sBAAsB,CAAAC,QAAA,EAClC9H,mBAAmB,eAClBhB,KAAA,SAAM6I,SAAS,CAAC,iHAAiH,CAAAC,QAAA,EAAC,YACvH,CAAC9H,mBAAmB,CAAC,IAC9B,cAAAlB,IAAA,WACE4J,OAAO,CAAEA,CAAA,GAAM3I,aAAa,CAAC,EAAE,CAAE,CACjC8H,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CACrD,MAED,CAAQ,CAAC,EACL,CACP,CACA5H,gBAAgB,eACflB,KAAA,SAAM6I,SAAS,CAAC,iHAAiH,CAAAC,QAAA,EAAC,YACtH,CAAC5H,gBAAgB,cAC3BpB,IAAA,WACE4J,OAAO,CAAEA,CAAA,GAAMvI,mBAAmB,CAAC,EAAE,CAAE,CACvC0H,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CACrD,MAED,CAAQ,CAAC,EACL,CACP,CACA1H,YAAY,eACXpB,KAAA,SAAM6I,SAAS,CAAC,iHAAiH,CAAAC,QAAA,EAAC,QAC1H,CAAC1H,YAAY,cACnBtB,IAAA,WACE4J,OAAO,CAAEA,CAAA,GAAMrI,eAAe,CAAC,EAAE,CAAE,CACnCwH,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CACrD,MAED,CAAQ,CAAC,EACL,CACP,CACA,CAAC9H,mBAAmB,EAAIE,gBAAgB,EAAIE,YAAY,EAAIE,UAAU,CAACE,GAAG,EAAIF,UAAU,CAACG,GAAG,gBAC3F3B,IAAA,WACE4J,OAAO,CAAEA,CAAA,GAAM,CACb3I,aAAa,CAAC,EAAE,CAAC,CACjBI,mBAAmB,CAAC,EAAE,CAAC,CACvBE,eAAe,CAAC,EAAE,CAAC,CACnBE,aAAa,CAAC,CAAEC,GAAG,CAAE,EAAE,CAAEC,GAAG,CAAE,EAAG,CAAC,CAAC,CACrC,CAAE,CACFoH,SAAS,CAAC,qEAAqE,CAAAC,QAAA,CAChF,eAED,CAAQ,CACT,EACE,CAAC,EACH,CAAC,CAGLF,aAAa,cACZ;AACA9I,IAAA,QAAK+I,SAAS,CAAC,+DAA+D,CAAAC,QAAA,CAC3E,CAAC,GAAGiB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAChE,GAAG,CAAC,CAACiE,CAAC,CAAEjC,KAAK,gBAC1B/H,KAAA,QAAiB6I,SAAS,CAAC,0GAA0G,CAAAC,QAAA,eACnIhJ,IAAA,QAAK+I,SAAS,CAAC,0BAA0B,CAAM,CAAC,cAChD7I,KAAA,QAAK6I,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9ChJ,IAAA,QAAK+I,SAAS,CAAC,8BAA8B,CAAM,CAAC,cACpD/I,IAAA,QAAK+I,SAAS,CAAC,oCAAoC,CAAM,CAAC,cAC1D7I,KAAA,QAAK6I,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrChJ,IAAA,QAAK+I,SAAS,CAAC,uCAAuC,CAAM,CAAC,cAC7D7I,KAAA,QAAK6I,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBhJ,IAAA,QAAK+I,SAAS,CAAC,8BAA8B,CAAM,CAAC,cACpD/I,IAAA,QAAK+I,SAAS,CAAC,+BAA+B,CAAM,CAAC,EAClD,CAAC,EACH,CAAC,cACN7I,KAAA,QAAK6I,SAAS,CAAC,2CAA2C,CAAAC,QAAA,eACxDhJ,IAAA,QAAK+I,SAAS,CAAC,8BAA8B,CAAM,CAAC,cACpD/I,IAAA,QAAK+I,SAAS,CAAC,8BAA8B,CAAM,CAAC,EACjD,CAAC,EACH,CAAC,GAhBEd,KAiBL,CACN,CAAC,CACC,CAAC,CACJrH,gBAAgB,CAAC+B,MAAM,GAAK,CAAC,cAC/BzC,KAAA,QAAK6I,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChChJ,IAAA,QAAK+I,SAAS,CAAC,kFAAkF,CAAAC,QAAA,cAC/FhJ,IAAA,QAAK+I,SAAS,CAAC,yBAAyB,CAACE,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAAH,QAAA,cAC5FhJ,IAAA,SAAMoJ,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAC,GAAG,CAACC,CAAC,CAAC,6CAA6C,CAAE,CAAC,CAClH,CAAC,CACH,CAAC,cACNvJ,IAAA,OAAI+I,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CAAC,mBAAiB,CAAI,CAAC,cAC7FhJ,IAAA,MAAG+I,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAAC,+CAA6C,CAAG,CAAC,EAC3F,CAAC,cAENhJ,IAAA,QAAK+I,SAAS,CAAC,+DAA+D,CAAAC,QAAA,CAC3EpI,gBAAgB,CAACqF,GAAG,CAAEC,QAAQ,eAC7BlG,IAAA,CAACJ,eAAe,EAEd0F,OAAO,CAAEY,QAAS,EADbA,QAAQ,CAACjC,UAEf,CACF,CAAC,CACC,CACN,CAGA,CAACnD,OAAO,EAAIF,gBAAgB,CAAC+B,MAAM,CAAG,CAAC,EAAI/B,gBAAgB,CAAC+B,MAAM,CAAGT,UAAU,eAC9ElC,IAAA,QAAK+I,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/B9I,KAAA,WACE0J,OAAO,CAAEA,CAAA,GAAM,CACb,KAAM,CAAAO,QAAQ,CAAGnI,WAAW,CAAG,CAAC,CAChCC,cAAc,CAACkI,QAAQ,CAAC,CACxB3H,YAAY,CAAC2H,QAAQ,CAAE,KAAK,CAAC,CAC/B,CAAE,CACFpB,SAAS,CAAC,mJAAmJ,CAAAC,QAAA,EAC9J,aACY,CAAC9G,UAAU,CAAGtB,gBAAgB,CAAC+B,MAAM,CAAC,aACnD,EAAQ,CAAC,CACN,CACN,EACI,CAAC,CACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAlC,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}