{"ast":null,"code":"// Sentry initialization and configuration\nimport*as Sentry from\"@sentry/react\";// BrowserTracing might be integrated differently in newer versions\nlet BrowserTracing;try{BrowserTracing=require(\"@sentry/tracing\").BrowserTracing;}catch(e){// BrowserTracing might be included in @sentry/react in newer versions\nconsole.log('BrowserTracing not available from @sentry/tracing, using built-in');}// Initialize Sentry with environment-specific configuration\nconst integrations=[];if(BrowserTracing){integrations.push(new BrowserTracing());}Sentry.init({dsn:process.env.REACT_APP_SENTRY_DSN,integrations,// Set tracesSampleRate based on environment\n// Production: 10% of transactions\n// Development: 100% of transactions\ntracesSampleRate:process.env.NODE_ENV==='production'?0.1:1.0,// Set environment\nenvironment:process.env.NODE_ENV||'development',// Before send hook to filter out sensitive data\nbeforeSend(event,hint){// Don't send events in development unless explicitly enabled\nif(process.env.NODE_ENV==='development'&&!process.env.REACT_APP_SENTRY_DEBUG){return null;}// Filter out sensitive information from URLs\nif(event.request&&event.request.url){event.request.url=event.request.url.replace(/([?&])(token|key|password|secret)=[^&]*/gi,'$1$2=REDACTED');}return event;},// Ignore common non-critical errors\nignoreErrors:['ResizeObserver loop limit exceeded','Non-Error promise rejection captured','Network request failed','Failed to fetch']});// Set user context helper\nexport const setSentryUser=user=>{if(user){Sentry.setUser({id:user.id,email:user.email,username:user.username||user.email});}else{Sentry.setUser(null);}};// Custom error logging helper\nexport const logError=function(error){let context=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};console.error('Error:',error,context);Sentry.captureException(error,{extra:context});};// Performance monitoring helper\nexport const startTransaction=function(name){let op=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'navigation';// Use startSpan for newer Sentry versions\nif(typeof Sentry.startSpan==='function'){return Sentry.startSpan({name,op},()=>{});}// Fallback for older versions\nif(typeof Sentry.startTransaction==='function'){return Sentry.startTransaction({name,op});}// No-op if neither is available\nreturn{finish:()=>{}};};export default Sentry;","map":{"version":3,"names":["Sentry","BrowserTracing","require","e","console","log","integrations","push","init","dsn","process","env","REACT_APP_SENTRY_DSN","tracesSampleRate","NODE_ENV","environment","beforeSend","event","hint","REACT_APP_SENTRY_DEBUG","request","url","replace","ignoreErrors","setSentryUser","user","setUser","id","email","username","logError","error","context","arguments","length","undefined","captureException","extra","startTransaction","name","op","startSpan","finish"],"sources":["/workspace/src/lib/sentry.js"],"sourcesContent":["// Sentry initialization and configuration\nimport * as Sentry from \"@sentry/react\";\n// BrowserTracing might be integrated differently in newer versions\nlet BrowserTracing;\ntry {\n  BrowserTracing = require(\"@sentry/tracing\").BrowserTracing;\n} catch (e) {\n  // BrowserTracing might be included in @sentry/react in newer versions\n  console.log('BrowserTracing not available from @sentry/tracing, using built-in');\n}\n\n// Initialize Sentry with environment-specific configuration\nconst integrations = [];\nif (BrowserTracing) {\n  integrations.push(new BrowserTracing());\n}\n\nSentry.init({\n  dsn: process.env.REACT_APP_SENTRY_DSN,\n  integrations,\n  \n  // Set tracesSampleRate based on environment\n  // Production: 10% of transactions\n  // Development: 100% of transactions\n  tracesSampleRate: process.env.NODE_ENV === 'production' ? 0.1 : 1.0,\n  \n  // Set environment\n  environment: process.env.NODE_ENV || 'development',\n  \n  // Before send hook to filter out sensitive data\n  beforeSend(event, hint) {\n    // Don't send events in development unless explicitly enabled\n    if (process.env.NODE_ENV === 'development' && !process.env.REACT_APP_SENTRY_DEBUG) {\n      return null;\n    }\n    \n    // Filter out sensitive information from URLs\n    if (event.request && event.request.url) {\n      event.request.url = event.request.url.replace(/([?&])(token|key|password|secret)=[^&]*/gi, '$1$2=REDACTED');\n    }\n    \n    return event;\n  },\n  \n  // Ignore common non-critical errors\n  ignoreErrors: [\n    'ResizeObserver loop limit exceeded',\n    'Non-Error promise rejection captured',\n    'Network request failed',\n    'Failed to fetch',\n  ],\n});\n\n// Set user context helper\nexport const setSentryUser = (user) => {\n  if (user) {\n    Sentry.setUser({\n      id: user.id,\n      email: user.email,\n      username: user.username || user.email,\n    });\n  } else {\n    Sentry.setUser(null);\n  }\n};\n\n// Custom error logging helper\nexport const logError = (error, context = {}) => {\n  console.error('Error:', error, context);\n  Sentry.captureException(error, {\n    extra: context,\n  });\n};\n\n// Performance monitoring helper\nexport const startTransaction = (name, op = 'navigation') => {\n  // Use startSpan for newer Sentry versions\n  if (typeof Sentry.startSpan === 'function') {\n    return Sentry.startSpan({\n      name,\n      op,\n    }, () => {});\n  }\n  // Fallback for older versions\n  if (typeof Sentry.startTransaction === 'function') {\n    return Sentry.startTransaction({\n      name,\n      op,\n    });\n  }\n  // No-op if neither is available\n  return { finish: () => {} };\n};\n\nexport default Sentry;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}