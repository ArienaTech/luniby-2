{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{Link,useNavigate}from'react-router-dom';import{supabase}from'../lib/supabase.js';import{getUserSafely}from'../lib/supabase-utils.js';import{useNotificationContext}from'../contexts/NotificationContext';import QualificationForm from'./QualificationForm';import ProviderAvailability from'./ProviderAvailability';import StatsOverview from'./dashboard/StatsOverview';import MarketplaceSummary from'./dashboard/MarketplaceSummary';import MarketplaceManager from'./dashboard/MarketplaceManager';import CasesSummary from'./dashboard/CasesSummary';import ErrorBoundary from'./common/ErrorBoundary';import*as Sentry from'@sentry/react';import{PROVIDER_TYPES}from'../constants/providerTypes';import{getProviderConfig,getProviderLabels,getProviderNavigation,hasFeature}from'../config/providerConfig';import CaseManager from'./vet-nurse/CaseManager';// Renamed component to handle both veterinarians and veterinarians\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const VeterinaryProviderDashboard=()=>{const{showInfo,showSuccess,showError}=useNotificationContext();// MVP Pricing Constants\nconst FREE_SERVICE_LIMIT=5;const FREE_PRODUCT_LIMIT=5;const FREE_PACKAGE_LIMIT=3;// 3 packages for free users\nconst SERVICE_COMMISSION_RATE=0.18;// 18%\nconst PRODUCT_COMMISSION_RATE=0.10;// 10%\n// Monthly Listing Fees (Individual)\nconst SERVICE_MONTHLY_FEE=1.99;// $1.99/month per additional service listing\nconst PRODUCT_MONTHLY_FEE=1.49;// $1.49/month per additional product listing\nconst PACKAGE_MONTHLY_FEE=2.49;// $2.49/month per additional package listing\n// Yearly Listing Fees (Individual - 2 months free = ~17% off)\nconst SERVICE_YEARLY_FEE=19.90;// $19.90/year per service ($1.66/month equivalent)\nconst PRODUCT_YEARLY_FEE=14.90;// $14.90/year per product ($1.24/month equivalent)\nconst PACKAGE_YEARLY_FEE=24.90;// $24.90/year per package ($2.08/month equivalent)\n// Bundle Monthly Fees (Better Value)\nconst SERVICE_3_PACK_MONTHLY=4.99;// 3 services for $4.99/month ($1.66 each)\nconst SERVICE_5_PACK_MONTHLY=7.99;// 5 services for $7.99/month ($1.60 each)\nconst PRODUCT_3_PACK_MONTHLY=3.99;// 3 products for $3.99/month ($1.33 each)\nconst PRODUCT_5_PACK_MONTHLY=5.99;// 5 products for $5.99/month ($1.20 each)\nconst PACKAGE_3_PACK_MONTHLY=6.99;// 3 packages for $6.99/month ($2.33 each)\nconst PACKAGE_5_PACK_MONTHLY=9.99;// 5 packages for $9.99/month ($2.00 each)\n// Bundle Yearly Fees (Best Value - 2 months free = ~17% off)\nconst SERVICE_3_PACK_YEARLY=49.90;// 3 services for $49.90/year ($4.16/month equivalent)\nconst SERVICE_5_PACK_YEARLY=79.90;// 5 services for $79.90/year ($6.66/month equivalent)\nconst PRODUCT_3_PACK_YEARLY=39.90;// 3 products for $39.90/year ($3.33/month equivalent)\nconst PRODUCT_5_PACK_YEARLY=59.90;// 5 products for $59.90/year ($4.99/month equivalent)\nconst PACKAGE_3_PACK_YEARLY=69.90;// 3 packages for $69.90/year ($5.83/month equivalent)\nconst PACKAGE_5_PACK_YEARLY=99.90;// 5 packages for $99.90/year ($8.33/month equivalent) // $25/month\n// Pricing helper functions\nconst getIndividualPrice=type=>{if(billingPeriod==='yearly'){return type==='service'?SERVICE_YEARLY_FEE:type==='product'?PRODUCT_YEARLY_FEE:PACKAGE_YEARLY_FEE;}return type==='service'?SERVICE_MONTHLY_FEE:type==='product'?PRODUCT_MONTHLY_FEE:PACKAGE_MONTHLY_FEE;};const get3PackPrice=type=>{if(billingPeriod==='yearly'){return type==='service'?SERVICE_3_PACK_YEARLY:type==='product'?PRODUCT_3_PACK_YEARLY:PACKAGE_3_PACK_YEARLY;}return type==='service'?SERVICE_3_PACK_MONTHLY:type==='product'?PRODUCT_3_PACK_MONTHLY:PACKAGE_3_PACK_MONTHLY;};const get5PackPrice=type=>{if(billingPeriod==='yearly'){return type==='service'?SERVICE_5_PACK_YEARLY:type==='product'?PRODUCT_5_PACK_YEARLY:PACKAGE_5_PACK_YEARLY;}return type==='service'?SERVICE_5_PACK_MONTHLY:type==='product'?PRODUCT_5_PACK_MONTHLY:PACKAGE_5_PACK_MONTHLY;};// Commission calculation functions\nconst calculateServiceCommission=price=>{return(parseFloat(price)*SERVICE_COMMISSION_RATE).toFixed(2);};const calculateProductCommission=price=>{return(parseFloat(price)*PRODUCT_COMMISSION_RATE).toFixed(2);};const getNetEarnings=function(price){let isProduct=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const commission=isProduct?calculateProductCommission(price):calculateServiceCommission(price);return(parseFloat(price)-parseFloat(commission)).toFixed(2);};// Helper function to filter only services (exclude products and packages)\nconst getServicesOnly=listings=>{return listings.filter(listing=>{// Explicitly check for service type\nreturn listing.listing_type==='service'||listing.listing_type!=='product'&&listing.listing_type!=='package'&&(listing.service_types||listing.service_type)!=='product'&&(listing.service_types||listing.service_type)!=='package';});};const[user,setUser]=useState(null);const[profile,setProfile]=useState(null);const[providerData,setProviderData]=useState(null);const[listings,setListings]=useState([]);const[bookings,setBookings]=useState([]);const[triageCases,setTriageCases]=useState([]);const[products,setProducts]=useState([]);const[qualificationSubmission,setQualificationSubmission]=useState(null);const[showQualificationForm,setShowQualificationForm]=useState(false);const[showAvailabilityModal,setShowAvailabilityModal]=useState(false);const[showCreateServiceModal,setShowCreateServiceModal]=useState(false);const[showEditServiceModal,setShowEditServiceModal]=useState(false);const[showPayPerListingModal,setShowPayPerListingModal]=useState(false);const[payPerListingType,setPayPerListingType]=useState(null);// 'service', 'product', or 'package'\nconst[billingPeriod,setBillingPeriod]=useState('monthly');// 'monthly' or 'yearly'\nconst[editingService,setEditingService]=useState(null);const[showScheduleModal,setShowScheduleModal]=useState(false);const[showMessagesModal,setShowMessagesModal]=useState(false);const[showAnalyticsModal,setShowAnalyticsModal]=useState(false);const[packages,setPackages]=useState([]);const[showPackageModal,setShowPackageModal]=useState(false);const[showAddProductModal,setShowAddProductModal]=useState(false);const[editingProduct,setEditingProduct]=useState(null);const[editingPackage,setEditingPackage]=useState(null);const[openDropdown,setOpenDropdown]=useState(null);const[activeSection,setActiveSection]=useState('overview');// Veterinarian-specific state variables\nconst[patients,setPatients]=useState([]);const[procedures,setProcedures]=useState([]);const[showPatientModal,setShowPatientModal]=useState(false);const[showProcedureModal,setShowProcedureModal]=useState(false);const[editingPatient,setEditingPatient]=useState(null);const[editingProcedure,setEditingProcedure]=useState(null);const[selectedPatient,setSelectedPatient]=useState(null);// Profile form states\nconst[profileForm,setProfileForm]=useState({fullName:'',phone:'',address:'',description:'',serviceAreas:'',maxTravelDistance:'25',yearsOfExperience:'',profilePicture:''});const[formInitialized,setFormInitialized]=useState(false);// Product form states\nconst[productForm,setProductForm]=useState({name:'',description:'',price:'',category:'Accessories',// Default to Accessories\nbrand:'',stockQuantity:'',photos:[],specifications:''});const[stats,setStats]=useState({totalListings:0,activeBookings:0,totalBookings:0,totalEarnings:0,averageRating:0,triageCasesHandled:0,clientsHelped:0});const[loading,setLoading]=useState(true);const navigate=useNavigate();// Dynamic provider labels based on provider type\n// Use centralized provider configuration\nconst getProviderLabelsLocal=providerType=>{return getProviderLabels(providerType);};// Get current provider labels\nconst providerLabels=getProviderLabelsLocal(providerData===null||providerData===void 0?void 0:providerData.provider_type);// Migration function for localStorage packages to Supabase\nconst migrateLocalPackagesToSupabase=async(userId,localPackages)=>{try{console.log('Migrating packages to Supabase...',localPackages);// Convert localStorage packages to Supabase format\nconst packagesToMigrate=localPackages.map(pkg=>({provider_id:userId,name:pkg.name,description:pkg.description,service_ids:pkg.service_ids||[],original_price:pkg.original_price||0,package_price:pkg.package_price||0,savings:pkg.savings||0,is_active:pkg.is_active!==undefined?pkg.is_active:true}));// Insert packages into Supabase\nconst{data,error}=await supabase.from('packages').insert(packagesToMigrate).select();if(error){console.error('Migration error:',error);throw error;}// Clear localStorage after successful migration\nlocalStorage.removeItem(`packages_${userId}`);// Update local state with migrated packages\nsetPackages(data||[]);showSuccess(`Successfully migrated ${localPackages.length} packages to Supabase!`,5000);console.log('Migration successful:',data);}catch(error){console.error('Failed to migrate packages:',error);showError('Failed to migrate packages to database. Using local storage for now.');}};// Experience level categorization\nconst getExperienceLevel=(years,providerType)=>{// Note: Luniby only hires veterinarians with at least 1 year experience\nif(!years||years===0)return{level:'Vet Professional',color:'blue',description:'Qualified professional'};if(providerType==='veterinarian'){if(years<=3)return{level:'Veterinarian',color:'blue',description:'Qualified veterinarian'};if(years<=7)return{level:'Experienced Veterinarian',color:'green',description:'Experienced professional'};if(years<=12)return{level:'Senior Veterinarian',color:'purple',description:'Highly experienced'};return{level:'Expert Veterinarian',color:'gold',description:'Expert level'};}else{// Veterinarian levels (minimum 1 year for Luniby hiring)\nif(years<=3)return{level:'Veterinarian',color:'blue',description:'Qualified veterinarian'};if(years<=7)return{level:'Experienced Veterinarian',color:'green',description:'Experienced professional'};if(years<=12)return{level:'Senior Veterinarian',color:'purple',description:'Highly experienced'};return{level:'Expert Veterinarian',color:'gold',description:'Expert level'};}};// Role-based service options\nconst getServiceOptions=providerType=>{const baseServices=[{value:\"Mobile Consultation\",label:\"Mobile Consultation\"},{value:\"Mobile Emergency Care\",label:\"Mobile Emergency Care\"}];if(providerType==='veterinarian'){return[...baseServices,{value:\"Clinic Consultation\",label:\"Clinic Consultation\"},{value:\"Surgery Services\",label:\"Surgery Services\"},{value:\"Diagnostic Testing\",label:\"Diagnostic Testing\"},{value:\"Preventive Care\",label:\"Preventive Care\"},{value:\"Dental Care\",label:\"Dental Care\"},{value:\"Orthopedic Care\",label:\"Orthopedic Care\"},{value:\"Laboratory Services\",label:\"Laboratory Services\"},{value:\"Telemedicine Consultation\",label:\"Telemedicine Consultation\"},{value:\"Emergency Surgery\",label:\"Emergency Surgery\"},{value:\"Specialist Referral\",label:\"Specialist Referral\"},{value:\"Prescription Management\",label:\"Prescription Management\"},{value:\"Vaccination Programs\",label:\"Vaccination Programs\"}];}return[...baseServices,{value:\"Mobile Health Check\",label:\"Mobile Health Check\"},{value:\"Mobile Vaccination\",label:\"Mobile Vaccination\"},{value:\"Mobile Nail Trimming\",label:\"Mobile Nail Trimming\"},{value:\"Mobile Grooming\",label:\"Mobile Grooming\"},{value:\"LuniTriage SOAP Review\",label:\"LuniTriage SOAP Review\"},{value:\"LuniTriage Consultation\",label:\"LuniTriage Consultation\"}];};// Dynamic navigation sections based on provider type\n// Use centralized navigation configuration\nconst getNavigationSectionsLocal=providerType=>{return getProviderNavigation(providerType);};useEffect(()=>{checkUserAndLoadData();},[]);// Reload products when navigating to marketplace section\nuseEffect(()=>{if(activeSection==='marketplace'){// Always check and reload products when entering marketplace to ensure fresh data\nconst lastReload=localStorage.getItem('lastProductsReload');const now=Date.now();// Products are now loaded from marketplace_listings in checkUserAndLoadData\n// No need for separate product loading\n}},[activeSection]);// Initialize form when profile or provider data first loads (but preserve user changes)\nuseEffect(()=>{if((profile||providerData||user)&&!formInitialized){var _user$email;// Prioritize the more complete name (providerData?.name is usually more complete)\nconst fullName=providerData!==null&&providerData!==void 0&&providerData.name&&providerData.name.trim().split(' ').length>1?providerData.name:(profile===null||profile===void 0?void 0:profile.full_name)||(providerData===null||providerData===void 0?void 0:providerData.name)||(user===null||user===void 0?void 0:(_user$email=user.email)===null||_user$email===void 0?void 0:_user$email.split('@')[0])||'User';setProfileForm(prev=>({...prev,fullName:fullName,phone:(providerData===null||providerData===void 0?void 0:providerData.phone)||'',address:(providerData===null||providerData===void 0?void 0:providerData.address)||'',description:(providerData===null||providerData===void 0?void 0:providerData.description)||'',serviceAreas:(providerData===null||providerData===void 0?void 0:providerData.service_areas)||'Auckland',maxTravelDistance:(providerData===null||providerData===void 0?void 0:providerData.max_travel_distance)||'25',profilePicture:(providerData===null||providerData===void 0?void 0:providerData.profile_picture)||(profile===null||profile===void 0?void 0:profile.avatar_url)||''}));setFormInitialized(true);}},[profile,providerData,user,formInitialized]);// Update product form when editing\nuseEffect(()=>{if(editingProduct){setProductForm({name:editingProduct.name||'',description:editingProduct.description||'',price:(editingProduct.price||0).toString(),category:editingProduct.category||'Accessories',brand:editingProduct.brand||'',stockQuantity:(editingProduct.stockQuantity||editingProduct.stock_quantity||0).toString(),photos:editingProduct.photos||[],specifications:editingProduct.specifications||''});}},[editingProduct]);// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(openDropdown&&!event.target.closest('.relative')){setOpenDropdown(null);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[openDropdown]);// Check and create products table if needed\nconst ensureProductsTable=async()=>{try{// First, try to query the products table to see if it exists\nconst{error:tableCheckError}=await supabase.from('products').select('id').limit(1);if(tableCheckError&&tableCheckError.message.includes('does not exist')){alert('Products table needs to be created. Please check the console for SQL to run in Supabase.');// Provide SQL to create the table\nconst createTableSQL=`\n-- Create products table\nCREATE TABLE products (\n  id SERIAL PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  price DECIMAL(10,2) NOT NULL,\n  category VARCHAR(100) NOT NULL,\n  subcategory VARCHAR(100),\n  brand VARCHAR(100),\n  stock_quantity INTEGER DEFAULT 0,\n  specifications TEXT,\n  image_url TEXT,\n  photos_data JSONB,\n  provider_id INTEGER REFERENCES providers(id) ON DELETE CASCADE,\n  is_active BOOLEAN DEFAULT true,\n  sku VARCHAR(100),\n  weight_kg DECIMAL(8,3),\n  dimensions VARCHAR(100),\n  age_group VARCHAR(50),\n  pet_type VARCHAR(50),\n  is_prescription BOOLEAN DEFAULT false,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Add indexes\nCREATE INDEX idx_products_provider_id ON products(provider_id);\nCREATE INDEX idx_products_category ON products(category);\nCREATE INDEX idx_products_is_active ON products(is_active);\n\n-- Enable RLS\nALTER TABLE products ENABLE ROW LEVEL SECURITY;\n\n-- Create policies\nCREATE POLICY \"Providers can manage their own products\" ON products\n  FOR ALL USING (provider_id IN (\n    SELECT id FROM providers WHERE email = auth.jwt() ->> 'email'\n  ));\n\nCREATE POLICY \"Anyone can view active products\" ON products\n  FOR SELECT USING (is_active = true);\n        `;return false;}else{// Try to get a sample record to see what columns are available\nconst{data:sampleProduct}=await supabase.from('products').select('*').limit(1);if(sampleProduct&&sampleProduct.length>0){// Products table has data, continue normally\n}else{// Try to insert a test record to see what constraints exist\nconst testCategories=['food','treats','toys','accessories','health','grooming','medication','supplements','supplies','other'];for(const category of testCategories){const{error:testError}=await supabase.from('products').insert([{name:'TEST_PRODUCT_DELETE_ME',description:'Test product',price:1.00,category:category,provider_id:1,is_active:false}]);if(!testError){// Delete the test record\nawait supabase.from('products').delete().eq('name','TEST_PRODUCT_DELETE_ME');break;}}}}return true;}catch(error){return false;}};// Product management functions\nconst handleAddProduct=async()=>{const tableExists=await ensureProductsTable();if(!tableExists){return;}if(!productForm.name||!productForm.price||!productForm.category||!productForm.stockQuantity){alert('Please fill in all required fields (name, price, category, stock quantity)');return;}// Validate price\nconst price=parseFloat(productForm.price);if(isNaN(price)||price<0){alert('Please enter a valid price');return;}// Validate stock quantity\nconst stock=parseInt(productForm.stockQuantity);if(isNaN(stock)||stock<0){alert('Please enter a valid stock quantity (0 or greater)');return;}const photoDataSize=JSON.stringify(productForm.photos).length;if(photoDataSize>2000000){alert('Photos are too large. Please use smaller images or reduce the number of photos.');return;}try{var _window$crypto,_window$crypto$random,_user$email2;const{data:{user}}=await supabase.auth.getUser();if(!user)throw new Error('User not authenticated');// Check free tier limits (15 products for free users)\nconst currentProductCount=products.length;const currentProviderData=providerData||profile||{};// Default to free tier if no subscription plan is set\nconst subscriptionPlan=currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.subscription_plan;const isFreeTier=!subscriptionPlan||subscriptionPlan==='free'||subscriptionPlan!=='premium';console.log('Product creation limit check:',{currentProductCount,FREE_PRODUCT_LIMIT,isFreeTier,editingProduct:!!editingProduct,subscription_plan:currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.subscription_plan});if(isFreeTier&&currentProductCount>=FREE_PRODUCT_LIMIT&&!editingProduct){setPayPerListingType('product');setShowPayPerListingModal(true);return;}// Use marketplace_listings instead of separate products table\nconst productData={listing_type:'product',listing_id:editingProduct?editingProduct.listing_id||editingProduct.id:((_window$crypto=window.crypto)===null||_window$crypto===void 0?void 0:(_window$crypto$random=_window$crypto.randomUUID)===null||_window$crypto$random===void 0?void 0:_window$crypto$random.call(_window$crypto))||Math.random().toString(36),name:productForm.name.trim(),description:productForm.description.trim(),price:price,category:productForm.category||'Accessories',brand:productForm.brand.trim()||null,stock_quantity:stock,service_types:'product',provider_email:user.email,provider_name:(profile===null||profile===void 0?void 0:profile.full_name)||(providerData===null||providerData===void 0?void 0:providerData.name)||((_user$email2=user.email)===null||_user$email2===void 0?void 0:_user$email2.split('@')[0]),provider_type:(profile===null||profile===void 0?void 0:profile.provider_type)||(providerData===null||providerData===void 0?void 0:providerData.provider_type)||'Vet Nurse',active:true,image_url:productForm.photos.length>0?productForm.photos[0].url:null,created_at:editingProduct?undefined:new Date().toISOString(),updated_at:new Date().toISOString()};let savedProduct;if(editingProduct){const{data,error}=await supabase.from('marketplace_listings').update(productData).eq('listing_id',editingProduct.listing_id||editingProduct.id).eq('provider_email',user.email).select().single();if(error)throw error;savedProduct=data;}else{const{data,error}=await supabase.from('marketplace_listings').insert([productData]).select().single();if(error){if(error.message.includes('check constraint')&&error.message.includes('category')){const{data:existingProducts}=await supabase.from('products').select('category').limit(50);if(existingProducts&&existingProducts.length>0){const uniqueCategories=[...new Set(existingProducts.map(p=>p.category))];alert(`Category constraint error. Allowed categories appear to be: ${uniqueCategories.join(', ')}`);}else{alert('Category constraint error. Please check the console and try a different category.');}}throw error;}savedProduct=data;}// Check if product appears in marketplace_listings view\nconst{data:marketplaceCheck}=await supabase.from('marketplace_listings').select('*').eq('listing_type','product').eq('listing_id',savedProduct.listing_id||savedProduct.id);if(!marketplaceCheck||marketplaceCheck.length===0){alert('Product saved but may not appear in public marketplace. The view might need to be updated.');}// Update local products state with the saved product\nconst newProduct={id:savedProduct.id,name:savedProduct.name,description:savedProduct.description,price:savedProduct.price,category:savedProduct.category,brand:savedProduct.brand,stockQuantity:savedProduct.stock_quantity,photos:productForm.photos,// Keep the photo objects for display\nspecifications:productForm.specifications,// Keep form data since DB doesn't store this\ncreatedAt:savedProduct.created_at,updatedAt:savedProduct.updated_at,type:'product'};let updatedProducts;if(editingProduct){updatedProducts=products.map(p=>p.id===editingProduct.id?newProduct:p);}else{updatedProducts=[...products,newProduct];}setProducts(updatedProducts);// Try to save to localStorage with error handling (for offline access)\ntry{localStorage.setItem(`products_${user.id}`,JSON.stringify(updatedProducts));}catch(storageError){// Don't throw error for localStorage issues since data is saved to database\n}// Refresh data to show updated product\ncheckUserAndLoadData();// Reset form\nsetProductForm({name:'',description:'',price:'',category:'Accessories',brand:'',stockQuantity:'',photos:[],specifications:''});setShowAddProductModal(false);setEditingProduct(null);}catch(error){// Check if it's a localStorage size issue\nif(error.name==='QuotaExceededError'||error.message.includes('quota')){alert('Error: Product photos are too large. Please use smaller images or reduce the number of photos.');}else if(error.message.includes('JSON')){alert('Error: Invalid product data. Please check your inputs and try again.');}else{alert(`Error saving product: ${error.message}. Please try again.`);}}};const handleDeleteProduct=async(productId,productName)=>{if(!window.confirm(`Are you sure you want to delete \"${productName}\"? This action cannot be undone.`)){return;}try{const{data:{user}}=await supabase.auth.getUser();if(!user)throw new Error('User not authenticated');// Delete from marketplace_listings instead of products table\nconst{error}=await supabase.from('marketplace_listings').delete().eq('listing_id',productId).eq('provider_email',user.email).eq('listing_type','product');if(error)throw error;// Update local state\nconst updatedProducts=products.filter(p=>p.id!==productId);setProducts(updatedProducts);// Update localStorage\ntry{localStorage.setItem(`products_${user.id}`,JSON.stringify(updatedProducts));}catch(storageError){// Don't throw error for localStorage issues\n}// Also remove from local listings state\nconst updatedListings=listings.filter(listing=>listing.id!==`product_${productId}`);setListings(updatedListings);}catch(error){alert(`Error deleting product: ${error.message}. Please try again.`);}};// Photo handling functions\nconst handlePhotoUpload=event=>{const files=Array.from(event.target.files);const maxFiles=4;if(productForm.photos.length+files.length>maxFiles){alert(`You can only upload up to ${maxFiles} photos`);return;}files.forEach(file=>{if(file.type.startsWith('image/')){// Check file size (10MB limit per file)\nif(file.size>10*1024*1024){alert(`File ${file.name} is too large. Please use images under 10MB.`);return;}const reader=new FileReader();reader.onload=e=>{// Create an image to compress it\nconst img=new Image();img.onload=()=>{const canvas=document.createElement('canvas');const ctx=canvas.getContext('2d');// Calculate new dimensions (max 800px width/height)\nlet{width,height}=img;const maxDimension=800;if(width>height){if(width>maxDimension){height=height*maxDimension/width;width=maxDimension;}}else{if(height>maxDimension){width=width*maxDimension/height;height=maxDimension;}}canvas.width=width;canvas.height=height;// Draw and compress\nctx.drawImage(img,0,0,width,height);const compressedDataUrl=canvas.toDataURL('image/jpeg',0.8);const newPhoto={id:Date.now()+Math.random(),file:file,url:compressedDataUrl,name:file.name};setProductForm(prev=>({...prev,photos:[...prev.photos,newPhoto]}));};img.src=e.target.result;};reader.readAsDataURL(file);}else{alert('Please select only image files');}});};const removePhoto=photoId=>{setProductForm(prev=>({...prev,photos:prev.photos.filter(photo=>photo.id!==photoId)}));};const checkUserAndLoadData=async()=>{try{var _user$email3;const user=await getUserSafely();if(!user){navigate('/signin');return;}// Set user state\nsetUser(user);// Get user profile\nconst{data:profileData,error:profileError}=await supabase.from('profiles').select('*').eq('id',user.id).single();if(!profileData){console.log('VetNurseDashboard Debug - No profile data found');navigate('/');return;}console.log('VetNurseDashboard Debug - Profile data:',profileData);console.log('VetNurseDashboard Debug - Role:',profileData.role);if(profileData.role!=='vet_nurse'&&profileData.role!=='veterinarian'){console.log('VetNurseDashboard Debug - Wrong role, redirecting to home. Expected: vet_nurse or veterinarian, Got:',profileData.role);navigate('/');return;}console.log('VetNurseDashboard Debug - Access granted for',profileData.role);setProfile(profileData);// Get provider data\nconst{data:provider,error:providerError}=await supabase.from('providers').select('*').eq('id',user.id).single();setProviderData(provider);// Populate profile form with existing data\n// Prioritize updated profile data over provider name\nconst fullName=(profileData===null||profileData===void 0?void 0:profileData.full_name)||(provider===null||provider===void 0?void 0:provider.name)||(user===null||user===void 0?void 0:(_user$email3=user.email)===null||_user$email3===void 0?void 0:_user$email3.split('@')[0])||'Unknown User';const formData={fullName:fullName,phone:(provider===null||provider===void 0?void 0:provider.phone)||'',address:(provider===null||provider===void 0?void 0:provider.address)||'',description:(provider===null||provider===void 0?void 0:provider.description)||'',serviceAreas:(provider===null||provider===void 0?void 0:provider.service_areas)||'Auckland',maxTravelDistance:(provider===null||provider===void 0?void 0:provider.max_travel_distance)||'25',yearsOfExperience:(provider===null||provider===void 0?void 0:provider.years_experience)||'',profilePicture:(provider===null||provider===void 0?void 0:provider.profile_picture)||(profileData===null||profileData===void 0?void 0:profileData.avatar_url)||''};setProfileForm(formData);// Check if qualifications have been submitted\nconst{data:qualificationData}=await supabase.from('provider_qualifications').select('*').eq('provider_id',user.id).single();setQualificationSubmission(qualificationData);// Load provider's listings from marketplace_listings (revert to working solution)\nconst{data:listingsData}=await supabase.from('marketplace_listings').select('*').eq('provider_email',profileData.email).order('created_at',{ascending:false});setListings(listingsData||[]);// Load packages from marketplace_listings (not separate packages table)\nconst packagesFromMarketplace=(listingsData||[]).filter(listing=>listing.listing_type==='package'||listing.service_types==='package'||typeof listing.service_types==='string'&&listing.service_types.toLowerCase().includes('package')).map(listing=>({id:listing.listing_id,name:listing.name,description:listing.description,service_ids:[],// Could be parsed from description or stored differently\noriginal_price:listing.price*1.2,// Assume 20% discount for display\npackage_price:listing.price,savings:listing.price*0.2,// 20% savings\nis_active:listing.active!==false,provider_id:listing.provider_id,created_at:listing.created_at,updated_at:listing.updated_at}));setPackages(packagesFromMarketplace);// Load products from marketplace_listings (not separate products table)\nconst productsFromMarketplace=(listingsData||[]).filter(listing=>listing.listing_type==='product'||listing.service_types==='product').map(listing=>({id:listing.listing_id,name:listing.name,description:listing.description,price:listing.price,category:listing.category,brand:listing.brand,stockQuantity:listing.stock_quantity,photos:listing.image_url?[{id:1,url:listing.image_url,name:'Product Image'}]:[],specifications:'',createdAt:listing.created_at,updatedAt:listing.updated_at,type:'product'}));setProducts(productsFromMarketplace);// Load bookings for this provider\nconst{data:bookingsData}=await supabase.from('consultation_bookings').select(`\n          *,\n          marketplace_listings (\n            name,\n            service_types\n          )\n        `).in('listing_id',(listingsData||[]).map(l=>l.listing_id)).order('created_at',{ascending:false}).limit(20);setBookings(bookingsData||[]);// Load triage cases (for verified providers only)\nlet triageData=[];if(provider!==null&&provider!==void 0&&provider.verified){// Filter bookings for LuniTriage services\ntriageData=(bookingsData||[]).filter(booking=>{var _booking$marketplace_;const serviceType=((_booking$marketplace_=booking.marketplace_listings)===null||_booking$marketplace_===void 0?void 0:_booking$marketplace_.service_types)||booking.consultation_type;return serviceType==='LuniTriage SOAP Review'||serviceType==='LuniTriage Consultation';});setTriageCases(triageData);}else{// No triage cases to show in demo mode\nsetTriageCases([]);}// Load patients and procedures for veterinarians\nif(profileData.role==='veterinarian'){// Load patients\nconst{data:patientsData}=await supabase.from('patients').select('*').eq('provider_id',user.id).order('created_at',{ascending:false});setPatients(patientsData||[]);// Load procedures\nconst{data:proceduresData}=await supabase.from('procedures').select('*').eq('provider_id',user.id).order('scheduled_date',{ascending:true});setProcedures(proceduresData||[]);}// Calculate stats\nconst activeBookings=(bookingsData||[]).filter(b=>b.status==='confirmed'||b.status==='pending').length;// Check if provider is published (has record in providers table)\nconst{data:publishedProvider}=await supabase.from('providers').select('id, verified').eq('id',user.id).single();// Provider record will be created when first service is submitted\n// Update provider data with published info\nif(publishedProvider&&providerData){setProviderData({...providerData,verified:publishedProvider.verified});}const averageRating=(listingsData||[]).reduce((sum,listing)=>sum+(listing.rating||0),0)/Math.max((listingsData||[]).length,1);setStats({totalListings:(listingsData||[]).length,activeBookings,totalBookings:(bookingsData||[]).length,totalEarnings:0,// This would come from a payments table\naverageRating:Math.round(averageRating*10)/10,triageCasesHandled:provider!==null&&provider!==void 0&&provider.verified?triageData.length:0,clientsHelped:(bookingsData||[]).filter(b=>b.status==='completed').length});}catch(error){Sentry.captureException(error);}finally{setLoading(false);}};const handleQualificationSubmissionComplete=useCallback(submission=>{setQualificationSubmission(submission);},[]);// Add missing click handlers for dashboard buttons\nconst handleAddNewService=()=>{// Check limits before opening modal\nconst currentProviderData=providerData||profile||{};const currentServiceCount=getServicesOnly(listings).length;const subscriptionPlan=currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.subscription_plan;const isFreeTier=!subscriptionPlan||subscriptionPlan==='free'||subscriptionPlan!=='premium';console.log('Add New Service button limit check:',{currentServiceCount,FREE_SERVICE_LIMIT,isFreeTier,subscriptionPlan});if(isFreeTier&&currentServiceCount>=FREE_SERVICE_LIMIT){setPayPerListingType('service');setShowPayPerListingModal(true);return;}// Open service creation modal\nsetShowCreateServiceModal(true);};const handleAddNewPackage=()=>{// Check limits before opening modal\nconst currentProviderData=providerData||profile||{};const currentPackageCount=packages.length;const subscriptionPlan=currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.subscription_plan;const isFreeTier=!subscriptionPlan||subscriptionPlan==='free'||subscriptionPlan!=='premium';console.log('Add New Package button limit check:',{currentPackageCount,FREE_PACKAGE_LIMIT,isFreeTier,subscriptionPlan});if(isFreeTier&&currentPackageCount>=FREE_PACKAGE_LIMIT){setPayPerListingType('package');setShowPayPerListingModal(true);return;}// Open package creation modal\nsetShowPackageModal(true);};const handleEditListing=listing=>{// Open edit modal with listing data instead of navigating\nsetEditingService(listing);setShowEditServiceModal(true);};const handleToggleListingStatus=async(listingId,currentStatus)=>{try{const{error}=await supabase.from('marketplace_listings').update({active:!currentStatus}).eq('listing_id',listingId);if(error)throw error;// Refresh listings\ncheckUserAndLoadData();showSuccess(!currentStatus?'Service activated successfully':'Service deactivated successfully',4000);}catch(error){// Error updating listing status\nshowError('Failed to update service status');}};const handleViewSchedule=()=>{// Show schedule modal instead of navigating\nsetShowScheduleModal(true);};const handleViewMessages=()=>{// Show messages modal instead of navigating\nsetShowMessagesModal(true);};const handleViewAnalytics=()=>{// Show analytics modal instead of navigating\nsetShowAnalyticsModal(true);};const handleManageAvailability=()=>{// Show availability modal instead of navigating\nsetShowAvailabilityModal(true);};// Go Live function - publishes provider profile to marketplace\nconst handleGoLive=async()=>{try{const user=await getUserSafely();if(!user){showInfo('User not authenticated','error');return;}// Check if provider record exists\nconst{data:existingProvider}=await supabase.from('providers').select('id, verified').eq('id',user.id).single();if(existingProvider){// Update existing provider to be verified/live\nconst{error:updateError}=await supabase.from('providers').update({verified:true,is_active:true}).eq('id',user.id);if(updateError)throw updateError;showSuccess('ðŸŽ‰ Your profile is now live on the marketplace! You can view it using \"View My Listing\".',5000);}else{// Create new provider record\nconst providerData=profile||{};const newProviderData={id:user.id,name:(providerData===null||providerData===void 0?void 0:providerData.full_name)||user.email,email:user.email,phone:(providerData===null||providerData===void 0?void 0:providerData.phone)||null,provider_type:(providerData===null||providerData===void 0?void 0:providerData.provider_type)||'vet_nurse',business_name:(providerData===null||providerData===void 0?void 0:providerData.business_name)||null,address:null,city:'Location TBD',country:'Australia',bio:'Professional veterinary nurse providing quality care for your pets. Experienced in various treatments and dedicated to animal welfare.',offers_services:true,offers_products:false,verified:true,// Live on marketplace\nis_active:true,featured:false,rating:0.00,reviews_count:0,profile_image_url:null,service_types:['Veterinary Nursing']};const{error:insertError}=await supabase.from('providers').insert(newProviderData);if(insertError)throw insertError;showSuccess('ðŸŽ‰ Your profile is now live on the marketplace! You can view it using \"View My Listing\".',5000);}// Update all services to be verified/active\nconst{error:servicesError}=await supabase.from('marketplace_listings').update({verified:true,active:true}).eq('provider_email',user.email);if(servicesError){// Error updating services\n}// Reload data to reflect changes\ncheckUserAndLoadData();}catch(error){// Error going live\nshowInfo('Failed to go live: '+error.message,'error');}};// Service creation handler\nconst handleCreateService=async serviceData=>{try{const user=await getUserSafely();if(!user){throw new Error('User not authenticated');}// Get provider data first\nconst currentProviderData=providerData||profile||{};// Check free tier limits (5 services for free users)\nconst currentServiceCount=getServicesOnly(listings).length;// Default to free tier if no subscription plan is set\nconst subscriptionPlan=currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.subscription_plan;const isFreeTier=!subscriptionPlan||subscriptionPlan==='free'||subscriptionPlan!=='premium';console.log('Service creation limit check:',{currentServiceCount,FREE_SERVICE_LIMIT,isFreeTier,subscriptionPlan,providerData:!!currentProviderData});if(isFreeTier&&currentServiceCount>=FREE_SERVICE_LIMIT){showError(`Free tier limit reached! You can have up to ${FREE_SERVICE_LIMIT} services. Click \"Upgrade to Premium\" to get unlimited services.`);return;}const insertData={title:serviceData.title,description:serviceData.description,service_type:serviceData.service_type,location:serviceData.location||'Location TBD',price_from:parseFloat(serviceData.price),price_to:parseFloat(serviceData.price),provider_name:(currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.full_name)||user.email,provider_type:(currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.role)||'vet_nurse',provider_email:user.email,provider_phone:(currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.phone)||'N/A',active:true,verified:false,rating:0.0,reviews_count:0};const{data,error}=await supabase.from('marketplace_listings').insert(insertData).select();// Services created successfully - ready to go live!\nif(error){throw new Error(`Database error: ${error.message} (Code: ${error.code})`);}showSuccess('Service created successfully!',4000);setShowCreateServiceModal(false);checkUserAndLoadData();// Refresh data\n}catch(error){showInfo(`Failed to create service: ${error.message}`,'error');}};// Service editing handler\nconst handleDeletePackage=async(packageId,packageName)=>{if(!window.confirm(`Are you sure you want to delete \"${packageName}\" package? This action cannot be undone.`)){return;}try{const{data:{user}}=await supabase.auth.getUser();if(!user)throw new Error('User not authenticated');// Delete from Supabase\nconst{error}=await supabase.from('packages').delete().eq('id',packageId).eq('provider_id',user.id);if(error)throw error;// Update local state\nconst updatedPackages=packages.filter(pkg=>pkg.id!==packageId);setPackages(updatedPackages);showSuccess('Package deleted successfully!',4000);}catch(error){showError(`Failed to delete package: ${error.message}`);}};const handleDeleteService=async(serviceId,serviceTitle)=>{if(!window.confirm(`Are you sure you want to delete \"${serviceTitle}\"? This action cannot be undone.`)){return;}try{const{data:{user}}=await supabase.auth.getUser();if(!user)throw new Error('User not authenticated');// Debug: Check what ID we're trying to delete\nconsole.log('Attempting to delete service with ID:',serviceId);// First, verify the service exists and belongs to the user\nconst{data:existingService,error:checkError}=await supabase.from('marketplace_listings').select('listing_id, name, provider_email').eq('listing_id',serviceId).eq('provider_email',user.email);if(checkError)throw checkError;if(!existingService||existingService.length===0){// Service not found, let's refresh the data and show current listings\nconsole.log('Service not found, refreshing data...');checkUserAndLoadData();throw new Error(`Service not found. The listing may have been already deleted or the page data is outdated. Please refresh and try again.`);}// Now delete the service\nconst{data,error}=await supabase.from('marketplace_listings').delete().eq('listing_id',serviceId).eq('provider_email',user.email)// Extra security\n.select();if(error)throw error;// Check if anything was actually deleted\nif(!data||data.length===0){throw new Error(`Service not found or you don't have permission to delete it (ID: ${serviceId})`);}// Immediately update local state\nconst updatedListings=listings.filter(listing=>listing.listing_id!==serviceId);setListings(updatedListings);// Update stats immediately\nsetStats(prevStats=>({...prevStats,totalListings:updatedListings.length}));showSuccess('Service deleted successfully!',4000);// Refresh bookings and other dependent data (but not listings since we already updated them)\ntry{const{data:bookingsData}=await supabase.from('consultation_bookings').select(`\n            *,\n            marketplace_listings (\n              name,\n              service_types\n            )\n          `).in('listing_id',updatedListings.map(l=>l.listing_id)).order('created_at',{ascending:false}).limit(20);setBookings(bookingsData||[]);}catch(bookingError){// Don't fail the whole operation if booking refresh fails\nconsole.warn('Failed to refresh bookings after service deletion:',bookingError);}}catch(error){console.error('Delete service error:',error);showError(`Failed to delete service: ${error.message}`);// If it's a \"not found\" error, refresh the data to show current state\nif(error.message.includes('not found')||error.message.includes('outdated')){setTimeout(()=>{checkUserAndLoadData();},2000);}}};const handleUpdateService=async serviceData=>{try{const updateData={title:serviceData.title,description:serviceData.description,service_type:serviceData.service_type,location:serviceData.location||'Location TBD',price_from:parseFloat(serviceData.price),price_to:parseFloat(serviceData.price),updated_at:new Date().toISOString()};const{error}=await supabase.from('marketplace_listings').update(updateData).eq('listing_id',editingService.listing_id||editingService.id);if(error){throw new Error(`Database error: ${error.message} (Code: ${error.code})`);}showSuccess('Service updated successfully!',4000);setShowEditServiceModal(false);setEditingService(null);checkUserAndLoadData();// Refresh data\n}catch(error){showInfo(`Failed to update service: ${error.message}`,'error');}};// View live listing\nconst handleViewListing=async()=>{try{const{data:{user}}=await supabase.auth.getUser();if(user){const listingUrl=`/provider/${user.id}`;window.open(listingUrl,'_blank');}else{showInfo('Please log in to view your listing','error');}}catch(error){showInfo('Unable to open your listing. Please try again.','error');}};// Service edit component\nconst ServiceEditForm=_ref=>{var _serviceData$service_,_serviceData$service_2,_serviceData$service_3;let{service,onClose}=_ref;const[serviceData,setServiceData]=useState({title:service.name||service.title||'',description:service.description||'',price_from:service.price||service.price_from||'',service_type:service.service_types||service.service_type||''});const handleSubmit=async e=>{e.preventDefault();try{const{data:{user}}=await supabase.auth.getUser();if(!user)throw new Error('User not authenticated');const{data,error}=await supabase.from('marketplace_listings').update({name:serviceData.title,description:serviceData.description,price:parseFloat(serviceData.price_from),service_types:serviceData.service_type,updated_at:new Date().toISOString()}).eq('listing_id',service.listing_id||service.id).select();if(error)throw error;showSuccess('Service updated successfully!',4000);onClose();checkUserAndLoadData();// Refresh data\n}catch(error){showInfo(`Failed to update service: ${error.message}`,'error');}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Edit Service\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600 text-2xl\",children:\"\\xD7\"})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Service Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:serviceData.title,onChange:e=>setServiceData({...serviceData,title:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., Mobile Health Check\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Service Type *\"}),/*#__PURE__*/_jsxs(\"select\",{required:true,value:serviceData.service_type,onChange:e=>setServiceData({...serviceData,service_type:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select service type\"}),getServiceOptions(providerData===null||providerData===void 0?void 0:providerData.provider_type).map(service=>/*#__PURE__*/_jsx(\"option\",{value:service.value,children:service.label},service.value))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Price *\",((_serviceData$service_=serviceData.service_type)===null||_serviceData$service_===void 0?void 0:_serviceData$service_.includes('LuniTriage'))&&/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-blue-600 ml-2\",children:\"(Fixed pricing)\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:true,min:\"0\",step:\"0.01\",value:serviceData.price_from,onChange:e=>setServiceData({...serviceData,price_from:e.target.value}),disabled:(_serviceData$service_2=serviceData.service_type)===null||_serviceData$service_2===void 0?void 0:_serviceData$service_2.includes('LuniTriage'),className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 ${(_serviceData$service_3=serviceData.service_type)!==null&&_serviceData$service_3!==void 0&&_serviceData$service_3.includes('LuniTriage')?'bg-gray-100':''}`,placeholder:\"50.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:serviceData.description,onChange:e=>setServiceData({...serviceData,description:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",rows:\"3\",placeholder:\"Describe your service...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})}),\"Update Service\"]})]})]})]})});};// Package creation component\nconst PackageForm=_ref2=>{let{isEdit=false,initialData={},onClose}=_ref2;const[packageData,setPackageData]=useState({name:initialData.name||'',description:initialData.description||'',selectedServices:initialData.service_ids||[],packagePrice:initialData.package_price||'',isActive:initialData.is_active!==undefined?initialData.is_active:true});const handleServiceToggle=serviceId=>{setPackageData(prev=>({...prev,selectedServices:prev.selectedServices.includes(serviceId)?prev.selectedServices.filter(id=>id!==serviceId):[...prev.selectedServices,serviceId]}));};const getOriginalPrice=()=>{return getServicesOnly(listings).filter(service=>packageData.selectedServices.includes(service.listing_id||service.id)).reduce((total,service)=>total+parseFloat(service.price||service.price_from||0),0);};const getSavings=()=>{const original=getOriginalPrice();const packagePrice=parseFloat(packageData.packagePrice||0);return original-packagePrice;};const handleSubmit=async e=>{e.preventDefault();if(!isEdit&&packageData.selectedServices.length<2){showInfo('Please select at least 2 services for a package','error');return;}try{var _window$crypto2,_window$crypto2$rando,_user$email4;const{data:{user}}=await supabase.auth.getUser();if(!user)throw new Error('User not authenticated');// Check free tier limits (3 packages for free users)\nconst currentPackageCount=packages.length;const currentProviderData=providerData||profile||{};// Default to free tier if no subscription plan is set\nconst subscriptionPlan=currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.subscription_plan;const isFreeTier=!subscriptionPlan||subscriptionPlan==='free'||subscriptionPlan!=='premium';console.log('Package creation limit check:',{currentPackageCount,FREE_PACKAGE_LIMIT,isFreeTier,isEdit,subscription_plan:currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.subscription_plan});// Note: For new packages, limit check is now done before opening modal (handleAddNewPackage)\n// This check is kept only for edge cases or if someone bypasses the button handler\nconst packageInfo={listing_type:'package',listing_id:isEdit?initialData.id:((_window$crypto2=window.crypto)===null||_window$crypto2===void 0?void 0:(_window$crypto2$rando=_window$crypto2.randomUUID)===null||_window$crypto2$rando===void 0?void 0:_window$crypto2$rando.call(_window$crypto2))||Math.random().toString(36),name:packageData.name,description:packageData.description,price:parseFloat(packageData.packagePrice),service_types:'package',provider_email:user.email,provider_name:(profile===null||profile===void 0?void 0:profile.full_name)||(providerData===null||providerData===void 0?void 0:providerData.name)||((_user$email4=user.email)===null||_user$email4===void 0?void 0:_user$email4.split('@')[0]),provider_type:(profile===null||profile===void 0?void 0:profile.provider_type)||(providerData===null||providerData===void 0?void 0:providerData.provider_type)||'Vet Nurse',active:packageData.isActive,verified:false,rating:0.0,reviews_count:0,created_at:isEdit?undefined:new Date().toISOString(),updated_at:new Date().toISOString()};// Save to marketplace_listings\nlet savedPackage;if(isEdit){const{data,error}=await supabase.from('marketplace_listings').update(packageInfo).eq('listing_id',initialData.id).eq('provider_email',user.email).select().single();if(error)throw error;savedPackage=data;}else{const{data,error}=await supabase.from('marketplace_listings').insert([packageInfo]).select().single();if(error)throw error;savedPackage=data;}// Refresh data to show updated packages\ncheckUserAndLoadData();showSuccess(`Package ${isEdit?'updated':'created'} successfully!`,4000);onClose();}catch(error){showInfo('Failed to save package','error');}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:isEdit?'Edit Package':'Create Package'}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600 text-2xl\",children:\"\\xD7\"})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Package Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:packageData.name,onChange:e=>setPackageData({...packageData,name:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., Wellness Package\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Package Price *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:true,min:\"0\",step:\"0.01\",value:packageData.packagePrice,onChange:e=>setPackageData({...packageData,packagePrice:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"120.00\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:packageData.description,onChange:e=>setPackageData({...packageData,description:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",rows:\"3\",placeholder:\"Describe what's included in this package...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-4\",children:\"Select Services *\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-3\",children:getServicesOnly(listings).map(service=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:`package-service-${service.listing_id||service.id}`,checked:packageData.selectedServices.includes(service.listing_id||service.id),onChange:()=>handleServiceToggle(service.listing_id||service.id),className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:`package-service-${service.listing_id||service.id}`,className:\"ml-3 flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:service.name||service.title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:service.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"font-bold text-gray-900\",children:[\"$\",service.price||service.price_from]})]},service.listing_id||service.id))})]}),packageData.selectedServices.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center mb-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:\"Package Summary\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Original Price:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",getOriginalPrice().toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Package Price:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",parseFloat(packageData.packagePrice||0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between font-bold text-green-600\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Customer Saves:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",getSavings().toFixed(2)]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"package-active\",checked:packageData.isActive,onChange:e=>setPackageData({...packageData,isActive:e.target.checked}),className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"package-active\",className:\"ml-2 text-sm text-gray-700\",children:\"Make this package available to customers\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:!isEdit&&packageData.selectedServices.length<2,className:`inline-flex items-center px-4 py-2 rounded-lg text-white text-sm font-medium ${isEdit||packageData.selectedServices.length>=2?'bg-blue-600 hover:bg-blue-700':'bg-gray-400 cursor-not-allowed'}`,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})}),isEdit?'Update Package':'Create Package']})]})]})]})});};// Quick service cards component\nconst QuickServiceCards=_ref3=>{let{onClose}=_ref3;const[selectedServices,setSelectedServices]=useState([]);const[customPrices,setCustomPrices]=useState({});// Role-based available services\nconst getAvailableServices=providerType=>{const baseServices=[{id:'consultation',title:'Mobile Consultation',description:'Professional consultation at your location',defaultPrice:providerType==='veterinarian'?120.00:75.00,category:'Mobile Consultation',icon:'ðŸ©º',preset:false},{id:'emergency',title:'Mobile Emergency Care',description:'Emergency care service at your location',defaultPrice:providerType==='veterinarian'?200.00:150.00,category:'Mobile Emergency Care',icon:'ðŸš¨',preset:false}];if(providerType==='veterinarian'){return[...baseServices,{id:'clinicConsult',title:'Clinic Consultation',description:'In-clinic veterinary consultation',defaultPrice:80.00,category:'Clinic Consultation',icon:'ðŸ¥',preset:false},{id:'surgery',title:'Surgery Services',description:'Surgical procedures and operations',defaultPrice:300.00,category:'Surgery Services',icon:'âš•ï¸',preset:false},{id:'diagnostic',title:'Diagnostic Testing',description:'Laboratory tests and diagnostic procedures',defaultPrice:150.00,category:'Diagnostic Testing',icon:'ðŸ”¬',preset:false},{id:'preventive',title:'Preventive Care',description:'Wellness exams and preventive treatments',defaultPrice:100.00,category:'Preventive Care',icon:'ðŸ›¡ï¸',preset:false}];}return[...baseServices,{id:'lunisoap',title:'LuniTriage SOAP Review',description:'Professional assessment of SOAP notes within 2 hours',defaultPrice:4.99,category:'LuniTriage SOAP Review',icon:'ðŸ“‹',preset:true},{id:'luniconsult',title:'LuniTriage Consultation',description:'15-minute consultation to assess if vet visit needed',defaultPrice:14.99,category:'LuniTriage Consultation',icon:'ðŸ’¬',preset:true},{id:'nailtrim',title:'Mobile Nail Trimming',description:'Professional nail trimming service at your location',defaultPrice:50.00,category:'Mobile Nail Trimming',icon:'âœ‚ï¸',preset:false},{id:'healthcheck',title:'Mobile Health Check',description:'Comprehensive health assessment at your home',defaultPrice:75.00,category:'Mobile Health Check',icon:'ðŸ¥',preset:false},{id:'vaccination',title:'Mobile Vaccination',description:'Vaccination service at your location',defaultPrice:60.00,category:'Mobile Vaccination',icon:'ðŸ’‰',preset:false}];};const availableServices=getAvailableServices(providerData===null||providerData===void 0?void 0:providerData.provider_type);const handleServiceToggle=service=>{if(selectedServices.find(s=>s.id===service.id)){setSelectedServices(selectedServices.filter(s=>s.id!==service.id));const newPrices={...customPrices};delete newPrices[service.id];setCustomPrices(newPrices);}else{setSelectedServices([...selectedServices,service]);setCustomPrices({...customPrices,[service.id]:service.defaultPrice});}};const handlePriceChange=(serviceId,price)=>{setCustomPrices({...customPrices,[serviceId]:parseFloat(price)||0});};const handleSubmitServices=async()=>{if(selectedServices.length===0){showInfo('Please select at least one service','error');return;}try{const{data:{user}}=await supabase.auth.getUser();if(!user)throw new Error('User not authenticated');// Check free tier limits BEFORE creating services\nconst currentProviderData=providerData||profile||{};const currentServiceCount=getServicesOnly(listings).length;const subscriptionPlan=currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.subscription_plan;const isFreeTier=!subscriptionPlan||subscriptionPlan==='free'||subscriptionPlan!=='premium';console.log('Bulk service creation limit check:',{currentServiceCount,selectedServicesCount:selectedServices.length,totalAfterCreation:currentServiceCount+selectedServices.length,FREE_SERVICE_LIMIT,isFreeTier,subscriptionPlan});if(isFreeTier&&currentServiceCount+selectedServices.length>FREE_SERVICE_LIMIT){setPayPerListingType('service');setShowPayPerListingModal(true);return;}const currentProviderDataForInsert=profile||{};// Create all selected services\nconst servicePromises=selectedServices.map(service=>{var _window$crypto3,_window$crypto3$rando;const insertData={listing_type:'service',listing_id:((_window$crypto3=window.crypto)===null||_window$crypto3===void 0?void 0:(_window$crypto3$rando=_window$crypto3.randomUUID)===null||_window$crypto3$rando===void 0?void 0:_window$crypto3$rando.call(_window$crypto3))||Math.random().toString(36),name:service.title,description:service.description,service_types:service.category,price:customPrices[service.id]||service.defaultPrice,provider_name:(currentProviderDataForInsert===null||currentProviderDataForInsert===void 0?void 0:currentProviderDataForInsert.full_name)||user.email,provider_type:(currentProviderDataForInsert===null||currentProviderDataForInsert===void 0?void 0:currentProviderDataForInsert.provider_type)||'vet_nurse',provider_email:user.email,provider_phone:(currentProviderDataForInsert===null||currentProviderDataForInsert===void 0?void 0:currentProviderDataForInsert.phone)||'N/A',active:true,verified:false,// Will be set to true when going live\nrating:0.0,reviews_count:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return supabase.from('marketplace_listings').insert(insertData).select();});const results=await Promise.all(servicePromises);const errors=results.filter(r=>r.error);if(errors.length>0){throw new Error(`Failed to create ${errors.length} services`);}showSuccess(`âœ… ${selectedServices.length} services created! Ready to go live.`,4000);onClose();checkUserAndLoadData();// Reload data\n}catch(error){showInfo('Failed to create services: '+error.message,'error');}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Add Services\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600 text-2xl\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"Select services you want to offer and set your prices\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:availableServices.map(service=>{const isSelected=selectedServices.find(s=>s.id===service.id);const currentPrice=customPrices[service.id]||service.defaultPrice;return/*#__PURE__*/_jsx(\"div\",{className:`border-2 rounded-xl p-4 cursor-pointer transition-all ${isSelected?'border-blue-500 bg-blue-50':'border-gray-200 hover:border-gray-300'}`,onClick:()=>handleServiceToggle(service),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl mr-3\",children:service.icon}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:service.title}),service.preset&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full\",children:\"LuniTriage\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-3\",children:service.description}),isSelected&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Price:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 mr-1\",children:\"$\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",value:currentPrice,onChange:e=>handlePriceChange(service.id,e.target.value),onClick:e=>e.stopPropagation(),className:`w-20 px-2 py-1 border border-gray-300 rounded text-sm ${service.preset?'bg-gray-100 cursor-not-allowed':''}`,disabled:service.preset})]}),service.preset&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"Fixed price\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${isSelected?'border-blue-500 bg-blue-500':'border-gray-300'}`,children:isSelected&&/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm\",children:\"\\u2713\"})})]})},service.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSubmitServices,disabled:selectedServices.length===0,className:`inline-flex items-center px-4 py-2 rounded-lg text-white text-sm font-medium ${selectedServices.length>0?'bg-blue-600 hover:bg-blue-700':'bg-gray-400 cursor-not-allowed'}`,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Add \",selectedServices.length,\" Service\",selectedServices.length!==1?'s':'']})]})]})]})});};const getStatusColor=status=>{switch(status){case'confirmed':return'bg-green-100 text-green-800';case'pending':return'bg-yellow-100 text-yellow-800';case'cancelled':return'bg-red-100 text-red-800';case'completed':return'bg-[#E5F4F1] text-[#4A9A64]';default:return'bg-gray-100 text-gray-800';}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 font-montserrat\",children:\"Loading vet nurse dashboard...\"})]})});}// Sidebar navigation items\nconst handleSaveProfile=async()=>{try{const{data:{user}}=await supabase.auth.getUser();if(!user){showInfo('User not authenticated','error');return;}// Update providers table (note: name/full_name and years_experience are not updated as they are verified)\n// Only update fields that are commonly available in the providers table\nconst updateData={};if(profileForm.phone)updateData.phone=profileForm.phone;if(profileForm.address)updateData.address=profileForm.address;if(profileForm.description)updateData.description=profileForm.description;// Try to update additional fields that might exist\nif(profileForm.serviceAreas)updateData.service_areas=profileForm.serviceAreas;if(profileForm.maxTravelDistance)updateData.max_travel_distance=profileForm.maxTravelDistance;if(profileForm.profilePicture)updateData.profile_picture=profileForm.profilePicture;// First check if provider record exists\nconst{data:existingProvider,error:checkError}=await supabase.from('providers').select('id').eq('id',user.id).single();if(checkError||!existingProvider){showInfo('Provider record not found. Please complete your provider registration first.','error');return;}const{error:providerError}=await supabase.from('providers').update(updateData).eq('id',user.id);if(providerError){// If the error is due to missing columns, try with just the basic fields\nif(providerError.message&&providerError.message.includes('column')){const basicUpdateData={};if(profileForm.phone)basicUpdateData.phone=profileForm.phone;if(profileForm.address)basicUpdateData.address=profileForm.address;if(profileForm.description)basicUpdateData.description=profileForm.description;const{error:basicProviderError}=await supabase.from('providers').update(basicUpdateData).eq('id',user.id);if(basicProviderError){showInfo(`Failed to update provider information: ${basicProviderError.message}`,'error');return;}}else{showInfo(`Failed to update provider information: ${providerError.message}`,'error');return;}}// Also update the profiles table for user profile data\nconst profileUpdateData={};if(profileForm.fullName)profileUpdateData.full_name=profileForm.fullName;if(profileForm.phone)profileUpdateData.phone=profileForm.phone;if(Object.keys(profileUpdateData).length>0){const{error:profileUpdateError}=await supabase.from('profiles').update(profileUpdateData).eq('id',user.id);if(profileUpdateError){showInfo(`Warning: Provider updated but profile update failed: ${profileUpdateError.message}`,'warning');}}// Small delay to ensure database writes are committed\nawait new Promise(resolve=>setTimeout(resolve,500));// Reset form initialization flag so it can be repopulated with fresh data\nsetFormInitialized(false);// Refresh data\nawait checkUserAndLoadData();showSuccess('Profile updated successfully!',4000);}catch(error){showInfo('Failed to save profile changes','error');}};const handleProfilePictureChange=async event=>{const file=event.target.files[0];if(!file)return;// Validate file type\nif(!file.type.startsWith('image/')){showInfo('Please select an image file','error');return;}// Validate file size (max 5MB)\nif(file.size>5*1024*1024){showInfo('Image must be smaller than 5MB','error');return;}try{const{data:{user}}=await supabase.auth.getUser();if(!user){showInfo('User not authenticated','error');return;}// Create a unique filename\nconst fileExt=file.name.split('.').pop();const fileName=`${user.id}-profile.${fileExt}`;// Upload to Supabase Storage\nconst{data,error}=await supabase.storage.from('profile-pictures').upload(fileName,file,{upsert:true// Replace if exists\n});if(error){// Upload error occurred\nshowInfo('Failed to upload image','error');return;}// Get the public URL\nconst{data:{publicUrl}}=supabase.storage.from('profile-pictures').getPublicUrl(fileName);// Update the form state\nsetProfileForm(prev=>({...prev,profilePicture:publicUrl}));showInfo('Profile picture uploaded successfully!','success');}catch(error){// Error uploading profile picture\nshowInfo('Failed to upload profile picture','error');}};// Get dynamic sidebar items based on provider type\nconst sidebarItems=getNavigationSectionsLocal(providerData===null||providerData===void 0?void 0:providerData.provider_type);// Render functions for each section\nconst renderOverviewSection=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:block hidden\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-gray-900\",children:[\"Welcome back, \",(profile===null||profile===void 0?void 0:profile.full_name)||'Vet Nurse']})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAvailabilityModal(true),className:\"hidden lg:flex px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors items-center text-sm sm:text-base\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Manage Schedule\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sm:hidden\",children:\"Schedule\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 text-sm font-medium\",children:\"Total Cases\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-900\",children:(triageCases===null||triageCases===void 0?void 0:triageCases.length)||0})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 text-green-600\",children:/*#__PURE__*/_jsx(\"svg\",{fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600 text-sm font-medium\",children:\"My Services\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-900\",children:stats.totalListings||0})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 text-blue-600\",children:/*#__PURE__*/_jsx(\"svg\",{fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-50 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-600 text-sm font-medium\",children:\"Service Packages\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-purple-900\",children:(packages===null||packages===void 0?void 0:packages.length)||0})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 text-purple-600\",children:/*#__PURE__*/_jsx(\"svg\",{fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-orange-50 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-orange-600 text-sm font-medium\",children:\"Total Bookings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-orange-900\",children:(bookings===null||bookings===void 0?void 0:bookings.length)||0})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 text-orange-600\",children:/*#__PURE__*/_jsx(\"svg\",{fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"})})})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(MarketplaceSummary,{listings:listings,packages:packages,products:products,setActiveSection:setActiveSection}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Upcoming Bookings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveSection('schedule'),className:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",children:\"View All \\u2192\"})]}),bookings.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[bookings.filter(booking=>new Date(booking.appointment_date)>=new Date()).sort((a,b)=>new Date(a.appointment_date)-new Date(b.appointment_date)).slice(0,3).map((booking,index)=>{var _booking$marketplace_2,_booking$marketplace_3;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:booking.pet_name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:((_booking$marketplace_2=booking.marketplace_listings)===null||_booking$marketplace_2===void 0?void 0:_booking$marketplace_2.name)||((_booking$marketplace_3=booking.marketplace_listings)===null||_booking$marketplace_3===void 0?void 0:_booking$marketplace_3.service_types)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:new Date(booking.appointment_date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:booking.appointment_time||'Time TBD'}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-xs font-medium ${booking.status==='confirmed'?'bg-green-100 text-green-800':booking.status==='pending'?'bg-yellow-100 text-yellow-800':'bg-blue-100 text-blue-800'}`,children:booking.status||'Pending'})]})]},index);}),bookings.filter(booking=>new Date(booking.appointment_date)>=new Date()).length>3&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 text-center pt-2\",children:[\"+\",bookings.filter(booking=>new Date(booking.appointment_date)>=new Date()).length-3,\" more bookings\"]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-2\",children:\"No upcoming bookings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400\",children:\"Customer bookings will appear here\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[true&&/*#__PURE__*/_jsx(CasesSummary,{triageCases:triageCases,setActiveSection:setActiveSection}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveSection('marketplace'),className:\"w-full flex items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors text-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:\"Manage Marketplace\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Services & packages\"})]})]}),((providerData===null||providerData===void 0?void 0:providerData.provider_type)==='vet_nurse'||!(providerData!==null&&providerData!==void 0&&providerData.provider_type))&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveSection('cases'),className:\"w-full flex items-center p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors text-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:\"Cases\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"All cases with triage assessment\"})]})]}),triageCases.filter(c=>c.status==='pending').length>0&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setActiveSection('cases');// Could add logic to automatically switch to pending filter\n},className:\"w-full flex items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors text-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:\"Pending Assessment\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[triageCases.filter(c=>c.status==='pending').length,\" cases need triage\"]})]})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveSection('schedule'),className:\"w-full flex items-center p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors text-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:\"View Bookings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Manage appointments\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveSection('messages'),className:\"w-full flex items-center p-3 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors text-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-orange-500 rounded-md flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:\"Open Messages\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"View client messages\"})]})]})]})]})]}),(providerData===null||providerData===void 0?void 0:providerData.provider_type)==='veterinarian'&&/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"\\uD83C\\uDFE5 Clinic Overview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Today's Appointments\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:bookings.filter(b=>new Date(b.created_at).toDateString()===new Date().toDateString()).length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Surgeries Scheduled\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:\"0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Emergency Cases\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:\"0\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"\\u2695\\uFE0F Recent Procedures\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-2\",children:\"No recent procedures\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400\",children:\"Completed surgeries and treatments will appear here\"})]})]})]})]});const renderServicesSection=()=>/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"My Services\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Manage your service offerings and create service packages\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-900\",children:\"Services\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:[getServicesOnly(listings).length,(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&`/${FREE_SERVICE_LIMIT}`]}),getServicesOnly(listings).length>0&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{// Navigate to marketplace to show services - more reliable than provider profile\nwindow.open('/marketplace','_blank');},className:\"inline-flex items-center text-gray-500 hover:text-green-600 text-xs font-medium\",title:\"View Service Listings\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"w-4 h-4 mr-1\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"}),/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"})]}),\"View Listing\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&getServicesOnly(listings).length>=FREE_SERVICE_LIMIT&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-green-600 font-medium\",children:[\"At limit - $\",SERVICE_MONTHLY_FEE,\"/month each\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddNewService,className:\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Add Service\"]})]})]}),getServicesOnly(listings).length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:getServicesOnly(listings).map(listing=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 border border-gray-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:listing.name||listing.title}),(listing.service_types||listing.service_type)==='product'&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\",children:\"Product\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:listing.description}),listing.brand&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Brand: \",listing.brand]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setOpenDropdown(openDropdown===`service-${listing.listing_id||listing.id}`?null:`service-${listing.listing_id||listing.id}`),className:\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors\",title:\"More options\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"})})}),openDropdown===`service-${listing.listing_id||listing.id}`&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border border-gray-200 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-1\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{if((listing.service_types||listing.service_type)==='product'){// For products, pass the listing data directly since it contains all product info\nconst productData={id:listing.listing_id||listing.id,name:listing.name,description:listing.description,price:listing.price,category:listing.category,brand:listing.brand,stock_quantity:listing.stock_quantity,stockQuantity:listing.stock_quantity,// For form compatibility\nphotos:listing.image_url?[{id:1,url:listing.image_url,name:'Product Image'}]:[],specifications:''};setEditingProduct(productData);setShowAddProductModal(true);}else{setEditingService(listing);setShowEditServiceModal(true);}setOpenDropdown(null);},className:\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"})}),\"Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{if((listing.service_types||listing.service_type)==='product'){const productId=(listing.listing_id||listing.id).replace('product_','');handleDeleteProduct(productId,listing.name||listing.title);}else{handleDeleteService(listing.listing_id||listing.id,listing.name||listing.title);}setOpenDropdown(null);},className:\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})}),\"Delete\"]})]})})]})]}),(listing.service_types||listing.service_type)==='product'&&listing.photos&&listing.photos.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:listing.photos[0].url,alt:listing.name||listing.title,className:\"w-full h-24 object-cover rounded-lg\"}),listing.photos.length>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-full\",children:[\"+\",listing.photos.length-1,\" more\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:(listing.service_types||listing.service_type)==='product'?listing.category:listing.service_types||listing.service_type}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900\",children:[\"$\",listing.price||listing.price_from]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"You earn: $\",getNetEarnings(listing.price||listing.price_from,(listing.service_types||listing.service_type)==='product')]}),(listing.service_types||listing.service_type)==='product'&&/*#__PURE__*/_jsx(\"p\",{className:`text-xs ${(listing.stockQuantity||0)>0?'text-green-600':'text-red-600'}`,children:(listing.stockQuantity||0)>0?`${listing.stockQuantity||0} in stock`:'Out of stock'})]})]})]},listing.listing_id||listing.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83C\\uDFE5\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No services yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Create your first service to start accepting bookings.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pt-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-900\",children:\"Packages\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:[packages.length,(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&`/${FREE_PACKAGE_LIMIT}`]})]}),(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&packages.length>=FREE_PACKAGE_LIMIT?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-green-600 font-medium\",children:[\"At limit - $\",PACKAGE_MONTHLY_FEE,\"/month each\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddNewPackage,className:\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Create Package\"]})]}):/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddNewPackage,className:\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Add Package\"]})]}),packages.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:packages.map(pkg=>{var _pkg$service_ids,_pkg$original_price,_pkg$package_price,_pkg$savings;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:pkg.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:pkg.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-xs font-medium ${pkg.is_active?'bg-green-100 text-green-800':'bg-gray-100 text-gray-800'}`,children:pkg.is_active?'Active':'Inactive'}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setOpenDropdown(openDropdown===`package-${pkg.id}`?null:`package-${pkg.id}`),className:\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors\",title:\"More options\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"})})}),openDropdown===`package-${pkg.id}`&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-0 mt-2 w-36 bg-white rounded-lg shadow-lg border border-gray-200 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-1\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setEditingPackage(pkg);setShowPackageModal(true);setOpenDropdown(null);},className:\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"})}),\"Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:async()=>{try{const{data:{user}}=await supabase.auth.getUser();if(!user)return;// Update in Supabase\nconst{error}=await supabase.from('packages').update({is_active:!pkg.is_active}).eq('id',pkg.id).eq('provider_id',user.id);if(error)throw error;// Update local state\nconst updatedPackages=packages.map(p=>p.id===pkg.id?{...p,is_active:!p.is_active}:p);setPackages(updatedPackages);setOpenDropdown(null);}catch(error){console.error('Error updating package status:',error);}},className:\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:pkg.is_active?\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21\":\"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"})}),pkg.is_active?'Deactivate':'Activate']}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{handleDeletePackage(pkg.id,pkg.name);setOpenDropdown(null);},className:\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})}),\"Delete\"]})]})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Services included:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:((_pkg$service_ids=pkg.service_ids)===null||_pkg$service_ids===void 0?void 0:_pkg$service_ids.length)||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Original price:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"line-through text-gray-500\",children:[\"$\",(_pkg$original_price=pkg.original_price)===null||_pkg$original_price===void 0?void 0:_pkg$original_price.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Package price:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-green-600\",children:[\"$\",(_pkg$package_price=pkg.package_price)===null||_pkg$package_price===void 0?void 0:_pkg$package_price.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600\",children:\"Customer saves:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-green-600\",children:[\"$\",(_pkg$savings=pkg.savings)===null||_pkg$savings===void 0?void 0:_pkg$savings.toFixed(2)]})]})]})]},pkg.id);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDCE6\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No packages created yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Create service packages to offer customers better deals and increase your booking value.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pt-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-900\",children:\"Products\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:[products.length,(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&`/${FREE_PRODUCT_LIMIT}`]})]}),(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&products.length>=FREE_PRODUCT_LIMIT?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-green-600 font-medium\",children:[\"At limit - $\",PRODUCT_MONTHLY_FEE,\"/month each\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setPayPerListingType('product');setShowPayPerListingModal(true);},className:\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Add More Products\"]})]}):/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddProductModal(true),className:\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Add Product\"]})]}),products.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:products.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 mb-1\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:product.brand}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 line-clamp-2\",children:product.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative ml-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setOpenDropdown(openDropdown===`product-${product.id}`?null:`product-${product.id}`),className:\"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"})})}),openDropdown===`product-${product.id}`&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingProduct(product);setShowAddProductModal(true);setOpenDropdown(null);},className:\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg\",children:\"Edit Product\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{handleDeleteProduct(product.id,product.name);setOpenDropdown(null);},className:\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-b-lg\",children:\"Delete Product\"})]})]})]}),product.photos&&product.photos.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"img\",{src:product.photos[0].url,alt:product.name,className:\"w-full h-32 object-cover rounded-lg\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-bold text-gray-900\",children:[\"$\",product.price]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"Stock: \",product.stockQuantity]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\",children:product.category})]})]},product.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDECD\\uFE0F\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No products created yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Add veterinary products and supplies to sell to pet parents.\"})]})]})]})]})});const renderProductsSection=()=>/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"My Products\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Sell veterinary products and supplies to pet parents\"}),(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&products.length>=FREE_PRODUCT_LIMIT&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mt-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-green-600 font-medium\",children:[\"At limit - $\",PRODUCT_MONTHLY_FEE,\"/month each\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddProduct,className:\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Add Product\"]})]})]}),(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&products.length<FREE_PRODUCT_LIMIT&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddProductModal(true),className:\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Add Product\"]}),(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)&&(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)!=='free'&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddProductModal(true),className:\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Add Product\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:products.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:products.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 mb-1\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:product.brand}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 line-clamp-2\",children:product.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative ml-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setOpenDropdown(openDropdown===`product-${product.id}`?null:`product-${product.id}`),className:\"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"})})}),openDropdown===`product-${product.id}`&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border border-gray-200 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-1\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setEditingProduct(product);setShowAddProductModal(true);setOpenDropdown(null);},className:\"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"})}),\"Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleDeleteProduct(product.id,product.name),className:\"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})}),\"Delete\"]})]})})]})]}),product.photos&&product.photos.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.photos[0].url,alt:product.name,className:\"w-full h-32 object-cover rounded-lg\"}),product.photos.length>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-full\",children:[\"+\",product.photos.length-1,\" more\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Category:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium capitalize\",children:product.category})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Stock:\"}),/*#__PURE__*/_jsxs(\"span\",{className:`font-medium ${(product.stockQuantity||0)>10?'text-green-600':(product.stockQuantity||0)>0?'text-orange-600':'text-red-600'}`,children:[product.stockQuantity||0,\" units\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Price:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-bold text-green-600\",children:[\"$\",product.price]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-xs font-medium ${(product.stockQuantity||0)>0?'bg-green-100 text-green-800':'bg-red-100 text-red-800'}`,children:(product.stockQuantity||0)>0?'In Stock':'Out of Stock'})})]},product.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1.5,d:\"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No products added yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Start selling veterinary products and supplies to provide additional value to your clients.\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddProductModal(true),className:\"inline-flex items-center bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Add Your First Product\"]})]})})]})});// New case management section for vets\nconst renderCasesSection=function(){let filter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'all';return/*#__PURE__*/_jsx(CaseManager,{nurseId:user===null||user===void 0?void 0:user.id,initialFilter:filter});};const renderScheduleSection=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:\"Bookings & Availability\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:\"Available Today\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Block Time\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-md font-medium text-gray-900 mb-4\",children:[\"Today - \",new Date().toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-4xl mb-4\",children:\"\\uD83D\\uDCC5\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No appointments today\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Today's appointments will appear here once they're scheduled\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-green-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:\"Available for bookings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600\",children:\"Open time slot\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:\"4:00 PM - 5:00 PM\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-green-600\",children:\"Available\"})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-900\",children:\"This Week\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-7 gap-2\",children:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'].map((day,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs font-medium text-gray-500 mb-2\",children:day}),/*#__PURE__*/_jsx(\"div\",{className:`w-full h-16 rounded-lg border-2 border-dashed flex items-center justify-center text-xs ${index===2?'border-blue-300 bg-blue-50 text-blue-600':index===4?'border-yellow-300 bg-yellow-50 text-yellow-600':'border-gray-300 bg-gray-50 text-gray-500'}`,children:index===2?'3 appts':index===4?'2 appts':'Available'})]},day))})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-900\",children:\"Quick Actions\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors text-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:\"Set Availability\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Update your working hours\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors text-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:\"Block Time\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Reserve time slots\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors text-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:\"View All Bookings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"See upcoming appointments\"})]})]})]})})]})]});const renderMessagesSection=()=>/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:\"Messages\"}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\",children:\"1 unread\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-6xl mb-4\",children:\"\\uD83D\\uDCAC\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No messages yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Patient messages and communications will appear here\"})]})})]})});const renderAnalyticsSection=()=>{// Calculate financial metrics\nconst calculateRevenue=()=>{const completedBookings=bookings.filter(b=>b.status==='completed');const serviceRevenue=completedBookings.reduce((total,booking)=>{const listing=listings.find(l=>l.id===booking.listing_id);if(listing){const price=parseFloat(listing.price_from||listing.price||0);const netEarnings=parseFloat(getNetEarnings(price,listing.service_type==='product'));return total+netEarnings;}return total;},0);// Estimate product revenue (since we don't have actual sales data)\nconst productRevenue=products.length*25;// Estimated average monthly revenue per product\n// Package revenue estimation\nconst packageRevenue=packages.filter(p=>p.is_active).reduce((total,pkg)=>{return total+pkg.package_price*2;// Estimated 2 sales per month per package\n},0);return{total:serviceRevenue+productRevenue+packageRevenue,services:serviceRevenue,products:productRevenue,packages:packageRevenue};};const revenue=calculateRevenue();const thisMonthBookings=bookings.filter(b=>{const bookingDate=new Date(b.created_at);const now=new Date();return bookingDate.getMonth()===now.getMonth()&&bookingDate.getFullYear()===now.getFullYear();});return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:\"Financial Analytics\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Track your earnings from services, products, and packages. All figures show net earnings after platform fees.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 text-sm font-medium\",children:\"Total Earnings\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-green-900\",children:[\"$\",revenue.total.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 text-green-600\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDCB5\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600 text-sm font-medium\",children:\"Service Revenue\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-blue-900\",children:[\"$\",revenue.services.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 text-blue-600\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDEE0\\uFE0F\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-50 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-600 text-sm font-medium\",children:\"Product Sales\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-purple-900\",children:[\"$\",revenue.products.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 text-purple-600\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDCE6\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-orange-50 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-orange-600 text-sm font-medium\",children:\"Package Revenue\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-orange-900\",children:[\"$\",revenue.packages.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 text-orange-600\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDCCB\"})})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Revenue Breakdown\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-blue-500 rounded-full mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Services\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold text-gray-900\",children:[\"$\",revenue.services.toFixed(2)]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-32 bg-gray-200 rounded-full h-2 mt-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-500 h-2 rounded-full\",style:{width:`${revenue.total>0?revenue.services/revenue.total*100:0}%`}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-purple-500 rounded-full mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Products\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold text-gray-900\",children:[\"$\",revenue.products.toFixed(2)]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-32 bg-gray-200 rounded-full h-2 mt-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-500 h-2 rounded-full\",style:{width:`${revenue.total>0?revenue.products/revenue.total*100:0}%`}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-orange-500 rounded-full mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Packages\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold text-gray-900\",children:[\"$\",revenue.packages.toFixed(2)]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-32 bg-gray-200 rounded-full h-2 mt-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-orange-500 h-2 rounded-full\",style:{width:`${revenue.total>0?revenue.packages/revenue.total*100:0}%`}})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Performance Metrics\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Booking Success Rate\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold text-green-600\",children:[bookings.length>0?Math.round(bookings.filter(b=>b.status==='completed').length/bookings.length*100):0,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Average Service Price\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold text-gray-900\",children:[\"$\",listings.length>0?(listings.reduce((sum,l)=>sum+parseFloat(l.price_from||0),0)/listings.length).toFixed(2):'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"This Month Bookings\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold text-blue-600\",children:thisMonthBookings.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Active Listings\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold text-gray-900\",children:listings.filter(l=>l.active).length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Customer Rating\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold text-yellow-600\",children:stats.averageRating>0?`${stats.averageRating} â­`:'No ratings yet'})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Recent Transactions\"}),bookings.filter(b=>b.status==='completed').length>0?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Service\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Customer\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Earnings\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:bookings.filter(b=>b.status==='completed').slice(0,5).map(booking=>{const listing=listings.find(l=>l.id===booking.listing_id);const price=listing?parseFloat(listing.price_from||listing.price||0):0;const earnings=listing?getNetEarnings(price,listing.service_type==='product'):'0.00';return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:booking.consultation_type||'Service'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:booking.customer_name||'Customer'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:new Date(booking.created_at).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600\",children:[\"$\",earnings]})]},booking.id);})})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl mb-4 block\",children:\"\\uD83D\\uDCB8\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No completed transactions yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Once you complete services, your earnings will appear here.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-green-50 border border-blue-200 rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-3\",children:\"Tips to Increase Earnings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-500 mt-1\",children:\"\\uD83D\\uDCC8\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-gray-900\",children:\"Create Package Deals\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Bundle services together for higher-value bookings\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-500 mt-1\",children:\"\\u2B50\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-gray-900\",children:\"Maintain High Ratings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Better ratings lead to more bookings and higher prices\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-purple-500 mt-1\",children:\"\\uD83D\\uDECD\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-gray-900\",children:\"Add Products\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Sell veterinary products for additional passive income\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-orange-500 mt-1\",children:\"\\uD83D\\uDCC5\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-gray-900\",children:\"Update Availability\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"More availability means more booking opportunities\"})]})]})]})]})]});};const renderProfileSection=()=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:\"Profile Information\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Manage your public profile and contact details\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 flex items-center justify-between p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-16 h-16 rounded-full overflow-hidden bg-gray-200\",children:[profileForm.profilePicture?/*#__PURE__*/_jsx(\"img\",{src:profileForm.profilePicture,alt:\"Profile\",className:\"w-full h-full object-cover\",onError:e=>{e.target.style.display='none';e.target.nextSibling.style.display='flex';}}):null,/*#__PURE__*/_jsx(\"div\",{className:`w-full h-full flex items-center justify-center text-gray-400 ${profileForm.profilePicture?'hidden':'flex'}`,style:{display:profileForm.profilePicture?'none':'flex'},children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:\"\\uD83D\\uDC64\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:profileForm.fullName||'Your Name'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Profile Picture \\u2022 Verified User\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setOpenDropdown(openDropdown==='profile-pic'?null:'profile-pic'),className:\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\u22EE\"})}),openDropdown==='profile-pic'&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-1\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{document.getElementById('profile-picture-input').click();setOpenDropdown(null);},className:\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-3\",children:\"\\uD83D\\uDCF7\"}),\"Upload Photo\"]}),profileForm.profilePicture&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setProfileForm(prev=>({...prev,profilePicture:''}));setOpenDropdown(null);},className:\"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-3\",children:\"\\uD83D\\uDDD1\\uFE0F\"}),\"Remove Photo\"]})]})})]}),/*#__PURE__*/_jsx(\"input\",{id:\"profile-picture-input\",type:\"file\",accept:\"image/*\",onChange:handleProfilePictureChange,className:\"hidden\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:profileForm.fullName||'',readOnly:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed\",placeholder:\"Verified name cannot be changed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Name is locked after verification for security\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:(profile===null||profile===void 0?void 0:profile.email)||(user===null||user===void 0?void 0:user.email)||'',readOnly:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600\",placeholder:\"Email address\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Email cannot be changed\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:profileForm.phone,onChange:e=>setProfileForm(prev=>({...prev,phone:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500\",placeholder:\"+64279293666\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:profileForm.address,onChange:e=>setProfileForm(prev=>({...prev,address:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500\",placeholder:\"2 Heller Road\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"About/Bio\"}),/*#__PURE__*/_jsx(\"textarea\",{value:profileForm.description,onChange:e=>setProfileForm(prev=>({...prev,description:e.target.value})),rows:4,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Tell customers about yourself and your services...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 pt-4 border-t border-gray-200 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Changes will be reflected across your marketplace listing\"})}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSaveProfile,className:\"inline-flex items-center bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\"})}),\"Save Changes\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Business Information\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Your professional credentials and status\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-gray-50 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:providerLabels.businessType}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Vet Nurse Business Type\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\uD83E\\uDE7A\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-green-50 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-green-700\",children:\"Verified\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Status\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"w-3 h-3 bg-green-400 rounded-full\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-blue-50 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900\",children:[(providerData===null||providerData===void 0?void 0:providerData.years_experience)||profileForm.yearsOfExperience||'Not specified',((providerData===null||providerData===void 0?void 0:providerData.years_experience)||profileForm.yearsOfExperience)&&' years']}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Experience\"}),((providerData===null||providerData===void 0?void 0:providerData.years_experience)||profileForm.yearsOfExperience)&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:(()=>{const years=(providerData===null||providerData===void 0?void 0:providerData.years_experience)||profileForm.yearsOfExperience;const experienceLevel=getExperienceLevel(years,providerData===null||providerData===void 0?void 0:providerData.provider_type);const colorClasses={gray:'bg-gray-100 text-gray-800',blue:'bg-blue-100 text-blue-800',green:'bg-green-100 text-green-800',purple:'bg-purple-100 text-purple-800',gold:'bg-yellow-100 text-yellow-800'};return/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${colorClasses[experienceLevel.color]}`,children:experienceLevel.level});})()})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\u2B50\"})]})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Service Areas\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Define where you provide services\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Cities/Areas You Serve\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:profileForm.serviceAreas,onChange:e=>setProfileForm(prev=>({...prev,serviceAreas:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Auckland, Hamilton, Tauranga\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Separate multiple areas with commas\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Travel Distance\"}),/*#__PURE__*/_jsxs(\"select\",{value:profileForm.maxTravelDistance,onChange:e=>setProfileForm(prev=>({...prev,maxTravelDistance:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"10\",children:\"10 km\"}),/*#__PURE__*/_jsx(\"option\",{value:\"25\",children:\"25 km\"}),/*#__PURE__*/_jsx(\"option\",{value:\"50\",children:\"50 km\"}),/*#__PURE__*/_jsx(\"option\",{value:\"100\",children:\"100 km\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Maximum distance you'll travel\"})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Account Settings\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900\",children:\"Email Notifications\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Receive booking and message notifications\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"relative inline-flex items-center cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"sr-only peer\",defaultChecked:true}),/*#__PURE__*/_jsx(\"div\",{className:\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900\",children:\"SMS Notifications\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Receive urgent notifications via SMS\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"relative inline-flex items-center cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"sr-only peer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900\",children:\"Marketing Emails\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Receive tips and platform updates\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"relative inline-flex items-center cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"sr-only peer\",defaultChecked:true}),/*#__PURE__*/_jsx(\"div\",{className:\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"})]})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-l-4 border-red-400\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-red-600\",children:\"Account Management\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900\",children:\"Temporarily Disable Account\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Hide your profile from customers temporarily\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"inline-flex items-center bg-yellow-600 text-white px-3 py-2 rounded-lg hover:bg-yellow-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-1.5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728\"})}),\"Disable\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900\",children:\"Delete Account\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Permanently delete your account and all data\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"inline-flex items-center bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-1.5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})}),\"Delete\"]})]})]})})]})]});};const renderMarketplaceSection=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 mb-2\",children:\"Marketplace\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:providerData!==null&&providerData!==void 0&&providerData.verified?\"Your profile is live and accepting bookings\":listings.length>0?\"Ready to publish your services to the marketplace\":\"Create services to get started on the marketplace\"})]})})}),renderServicesSection()]});// Veterinarian-specific render functions\nconst renderPatientsSection=()=>/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:\"Patient Management\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowPatientModal(true),className:\"inline-flex items-center bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Add Patient\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:patients.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:patients.map(patient=>/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 mb-1\",children:patient.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:[patient.breed,\" \\u2022 \",patient.species]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mb-2\",children:[patient.age,\" years \\u2022 \",patient.weight,\" kg\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"Owner: \",patient.owner_name]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative ml-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setOpenDropdown(openDropdown===`patient-${patient.id}`?null:`patient-${patient.id}`),className:\"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"})})}),openDropdown===`patient-${patient.id}`&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingPatient(patient);setShowPatientModal(true);setOpenDropdown(null);},className:\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg\",children:\"Edit Patient\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{handleDeletePatient(patient.id,patient.name);setOpenDropdown(null);},className:\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-b-lg\",children:\"Delete Patient\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Phone:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:patient.owner_phone})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:patient.owner_email})]}),patient.medical_history&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 p-2 bg-gray-50 rounded text-xs text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Medical History:\"}),\" \",patient.medical_history]})]})]},patient.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDC15\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No patients added yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Start managing your patients by adding their information and medical records.\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowPatientModal(true),className:\"inline-flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Add Your First Patient\"]})]})})]})});const renderProceduresSection=()=>/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:\"Procedure Management\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowProcedureModal(true),className:\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Schedule Procedure\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:procedures.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:procedures.map(procedure=>/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 mb-1\",children:procedure.procedure_type}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:new Date(procedure.scheduled_date).toLocaleDateString('en-US',{weekday:'long',year:'numeric',month:'long',day:'numeric'})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mb-2\",children:[\"Duration: \",procedure.estimated_duration,\" minutes\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"Status: \",procedure.status]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative ml-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setOpenDropdown(openDropdown===`procedure-${procedure.id}`?null:`procedure-${procedure.id}`),className:\"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"})})}),openDropdown===`procedure-${procedure.id}`&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingProcedure(procedure);setShowProcedureModal(true);setOpenDropdown(null);},className:\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg\",children:\"Edit Procedure\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{handleDeleteProcedure(procedure.id,procedure.procedure_type);setOpenDropdown(null);},className:\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-b-lg\",children:\"Delete Procedure\"})]})]})]}),procedure.notes&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 p-2 bg-gray-50 rounded text-xs text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Notes:\"}),\" \",procedure.notes]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-xs font-medium ${procedure.status==='scheduled'?'bg-blue-100 text-blue-800':procedure.status==='completed'?'bg-green-100 text-green-800':procedure.status==='cancelled'?'bg-red-100 text-red-800':'bg-gray-100 text-gray-800'}`,children:procedure.status.charAt(0).toUpperCase()+procedure.status.slice(1)})})]},procedure.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83C\\uDFE5\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No procedures scheduled yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Schedule medical procedures, surgeries, and diagnostic tests for your patients.\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowProcedureModal(true),className:\"inline-flex items-center bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),\"Schedule Your First Procedure\"]})]})})]})});// Veterinarian-specific functions\nconst handleAddPatient=async patientData=>{try{const{data:{user}}=await supabase.auth.getUser();if(!user)throw new Error('User not authenticated');const newPatient={provider_id:user.id,name:patientData.name,species:patientData.species,breed:patientData.breed,age:patientData.age,weight:patientData.weight,owner_name:patientData.ownerName,owner_phone:patientData.ownerPhone,owner_email:patientData.ownerEmail,medical_history:patientData.medicalHistory||'',created_at:new Date().toISOString(),updated_at:new Date().toISOString()};const{data,error}=await supabase.from('patients').insert([newPatient]).select();if(error)throw error;setPatients(prev=>[...prev,data[0]]);showSuccess('Patient added successfully!',4000);setShowPatientModal(false);}catch(error){showError(`Failed to add patient: ${error.message}`);}};const handleAddProcedure=async procedureData=>{try{const{data:{user}}=await supabase.auth.getUser();if(!user)throw new Error('User not authenticated');const newProcedure={provider_id:user.id,patient_id:procedureData.patientId,procedure_type:procedureData.procedureType,scheduled_date:procedureData.scheduledDate,estimated_duration:procedureData.estimatedDuration,notes:procedureData.notes||'',status:'scheduled',created_at:new Date().toISOString(),updated_at:new Date().toISOString()};const{data,error}=await supabase.from('procedures').insert([newProcedure]).select();if(error)throw error;setProcedures(prev=>[...prev,data[0]]);showSuccess('Procedure scheduled successfully!',4000);setShowProcedureModal(false);}catch(error){showError(`Failed to schedule procedure: ${error.message}`);}};const handleDeletePatient=async(patientId,patientName)=>{if(!window.confirm(`Are you sure you want to delete patient \"${patientName}\"? This action cannot be undone.`)){return;}try{const{error}=await supabase.from('patients').delete().eq('id',patientId);if(error)throw error;setPatients(prev=>prev.filter(p=>p.id!==patientId));showSuccess('Patient deleted successfully!',4000);}catch(error){showError(`Failed to delete patient: ${error.message}`);}};const handleDeleteProcedure=async(procedureId,procedureType)=>{if(!window.confirm(`Are you sure you want to delete procedure \"${procedureType}\"? This action cannot be undone.`)){return;}try{const{error}=await supabase.from('procedures').delete().eq('id',procedureId);if(error)throw error;setProcedures(prev=>prev.filter(p=>p.id!==procedureId));showSuccess('Procedure deleted successfully!',4000);}catch(error){showError(`Failed to delete procedure: ${error.message}`);}};const renderActiveSection=()=>{switch(activeSection){case'overview':return renderOverviewSection();case'marketplace':return renderMarketplaceSection();case'services':return renderServicesSection();case'packages':return renderServicesSection();// Packages are now part of services\ncase'cases':return renderCasesSection();// All cases with LuniTriage severity assessment\ncase'patients':return renderPatientsSection();case'procedures':return renderProceduresSection();case'schedule':return renderScheduleSection();case'messages':return renderMessagesSection();case'analytics':return renderAnalyticsSection();case'profile':return renderProfileSection();default:return renderOverviewSection();}};return/*#__PURE__*/_jsx(ErrorBoundary,{message:\"There was an error loading your dashboard. Please try refreshing the page.\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:hidden bg-white border-b border-gray-200 px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h4\",{className:\"text-md font-medium text-gray-900\",children:[\"Welcome back, \",(profile===null||profile===void 0?void 0:profile.full_name)||'Vet Nurse']})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAvailabilityModal(true),className:\"px-3 py-1.5 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm\",children:\"Schedule\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:hidden bg-white border-b border-gray-200 px-2 py-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex overflow-x-auto space-x-1 pb-2\",children:sidebarItems.map(section=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveSection(section.id),className:`flex-shrink-0 flex items-center px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${activeSection===section.id?'bg-green-100 text-green-700':'text-gray-600 hover:text-gray-900 hover:bg-gray-50'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-1.5\",children:section.icon}),section.name]},section.id))})}),/*#__PURE__*/_jsx(\"div\",{className:\"hidden lg:block w-64 bg-white shadow-sm border-r border-gray-200 min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://wagrmmbkukwblfpfxxcb.supabase.co/storage/v1/object/public/web-img/vet-nurse%20(1).svg\",alt:\"Vet Nurse\",className:\"w-10 h-10\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-semibold text-gray-900 truncate\",children:\"Vet Nurse\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 truncate\",children:profile===null||profile===void 0?void 0:profile.full_name})]})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"space-y-2\",children:sidebarItems.map(section=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveSection(section.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${activeSection===section.id?'bg-green-100 text-green-700':'text-gray-600 hover:text-gray-900 hover:bg-gray-50'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-3\",children:section.icon}),section.name]},section.id))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 p-3 sm:p-4 lg:p-6\",children:renderActiveSection()})]}),showQualificationForm&&/*#__PURE__*/_jsx(QualificationForm,{providerData:providerData,onClose:()=>setShowQualificationForm(false),onSubmissionComplete:handleQualificationSubmissionComplete}),showAvailabilityModal&&/*#__PURE__*/_jsx(ProviderAvailability,{providerId:profile===null||profile===void 0?void 0:profile.id,onClose:()=>setShowAvailabilityModal(false)}),showCreateServiceModal&&/*#__PURE__*/_jsx(QuickServiceCards,{onClose:()=>setShowCreateServiceModal(false)}),showPackageModal&&/*#__PURE__*/_jsx(PackageForm,{isEdit:!!editingPackage,initialData:editingPackage||{},onClose:()=>{setShowPackageModal(false);setEditingPackage(null);}}),showEditServiceModal&&editingService&&/*#__PURE__*/_jsx(ServiceEditForm,{service:editingService,onClose:()=>{setShowEditServiceModal(false);setEditingService(null);}}),showScheduleModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Today's Bookings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowScheduleModal(false),className:\"text-gray-400 hover:text-gray-600\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-blue-900\",children:\"\\uD83D\\uDCC5 Today's Appointments\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-700 mt-1\",children:new Date().toLocaleDateString('en-AU',{weekday:'long',year:'numeric',month:'long',day:'numeric'})})]}),bookings.filter(booking=>new Date(booking.preferred_date).toDateString()===new Date().toDateString()).length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:bookings.filter(booking=>new Date(booking.preferred_date).toDateString()===new Date().toDateString()).map(booking=>/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:booking.preferred_time}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[booking.customer_name,\" - \",booking.pet_name,\" (\",booking.pet_species,\")\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:booking.consultation_type})]}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(booking.status)}`,children:booking.status})]})},booking.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDCC5\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No appointments today\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Your schedule is clear for today.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end pt-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowScheduleModal(false),className:\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700\",children:\"Close\"})})]})]})}),showMessagesModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Messages\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowMessagesModal(false),className:\"text-gray-400 hover:text-gray-600\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-purple-900\",children:\"\\uD83D\\uDCAC Recent Messages\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-700 mt-1\",children:\"Communicate with pet owners about their bookings and consultations.\"})]}),bookings.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:bookings.slice(0,5).map(booking=>/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:booking.customer_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Pet: \",booking.pet_name,\" (\",booking.pet_species,\")\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"Booking: \",new Date(booking.preferred_date).toLocaleDateString(),\" at \",booking.preferred_time]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-[#5EB47C] hover:text-[#4A9A64] text-sm font-medium\",children:\"Message\"})]})},booking.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:\"\\uD83D\\uDCAC\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No messages yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Messages from pet owners will appear here.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end pt-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowMessagesModal(false),className:\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700\",children:\"Close\"})})]})]})}),showAnalyticsModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Analytics Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAnalyticsModal(false),className:\"text-gray-400 hover:text-gray-600\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-green-900\",children:\"\\uD83D\\uDCCA Performance Overview\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-700 mt-1\",children:\"Track your service performance and client satisfaction.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-500\",children:\"Total Bookings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:bookings.length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"All time\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-500\",children:\"Completed Services\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:bookings.filter(b=>b.status==='completed').length}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Success rate: \",bookings.length>0?Math.round(bookings.filter(b=>b.status==='completed').length/bookings.length*100):0,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-500\",children:\"Active Services\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:listings.filter(l=>l.active).length}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Out of \",listings.length,\" total\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-500\",children:\"Avg. Rating\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.averageRating>0?`${stats.averageRating} â­`:'N/A'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Based on reviews\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-3\",children:\"Recent Activity\"}),bookings.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:bookings.slice(0,5).map(booking=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:booking.customer_name}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500 text-sm ml-2\",children:[\"booked \",booking.consultation_type]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:new Date(booking.created_at).toLocaleDateString()})]},booking.id))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-4\",children:\"No recent activity\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end pt-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAnalyticsModal(false),className:\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700\",children:\"Close\"})})]})]})}),showAddProductModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:editingProduct?'Edit Product':'Add Product'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAddProductModal(false);setEditingProduct(null);setProductForm({name:'',description:'',price:'',category:'Accessories',brand:'',stockQuantity:'',photos:[],specifications:''});},className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleAddProduct();},className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Product Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:productForm.name,onChange:e=>setProductForm({...productForm,name:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"e.g., Premium Dog Food\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Brand\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:productForm.brand,onChange:e=>setProductForm({...productForm,brand:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"e.g., Royal Canin\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:productForm.description,onChange:e=>setProductForm({...productForm,description:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",rows:\"3\",placeholder:\"Describe the product, its benefits, and usage instructions...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Price ($) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",value:productForm.price,onChange:e=>setProductForm({...productForm,price:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"0.00\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Category *\"}),/*#__PURE__*/_jsxs(\"select\",{value:productForm.category,onChange:e=>setProductForm({...productForm,category:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Accessories\",children:\"Accessories\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Supplements\",children:\"Supplements\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Stock Quantity *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:productForm.stockQuantity,onChange:e=>setProductForm({...productForm,stockQuantity:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"0\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Product Photos (up to 4)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"photo-upload\",multiple:true,accept:\"image/*\",onChange:handlePhotoUpload,className:\"hidden\",disabled:productForm.photos.length>=4}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"photo-upload\",className:`cursor-pointer ${productForm.photos.length>=4?'cursor-not-allowed opacity-50':''}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-8 w-8 text-gray-400\",stroke:\"currentColor\",fill:\"none\",viewBox:\"0 0 48 48\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-blue-600 hover:text-blue-500\",children:\"Click to upload photos\"}),/*#__PURE__*/_jsx(\"span\",{children:\" or drag and drop\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"PNG, JPG, GIF up to 10MB each\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[productForm.photos.length,\"/4 photos uploaded\"]})]})})]}),productForm.photos.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3\",children:productForm.photos.map((photo,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"img\",{src:photo.url,alt:`Product view ${index+1}`,className:\"w-full h-20 object-cover rounded-lg border border-gray-200\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removePhoto(photo.id),className:\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity\",children:\"\\xD7\"}),index===0&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-1 left-1 bg-blue-500 text-white text-xs px-1 py-0.5 rounded\",children:\"Main\"})]},photo.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Specifications\"}),/*#__PURE__*/_jsx(\"textarea\",{value:productForm.specifications,onChange:e=>setProductForm({...productForm,specifications:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",rows:\"3\",placeholder:\"Size, weight, ingredients, dosage instructions, etc...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowAddProductModal(false);setEditingProduct(null);setProductForm({name:'',description:'',price:'',category:'Accessories',brand:'',stockQuantity:'',photos:[],specifications:''});},className:\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\",children:editingProduct?'Update Product':'Add Product'})]})]})]})}),showPayPerListingModal&&payPerListingType&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl max-w-md w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:[\"Add More \",payPerListingType==='service'?'Services':payPerListingType==='product'?'Products':'Packages']}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPayPerListingModal(false),className:\"text-gray-400 hover:text-gray-600 text-2xl\",children:\"\\xD7\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:[\"Expand Your \",payPerListingType==='service'?'Services':payPerListingType==='product'?'Products':'Packages']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 text-sm\",children:[\"You have \",payPerListingType==='service'?`${getServicesOnly(listings).length}/${FREE_SERVICE_LIMIT} services`:payPerListingType==='product'?`${products.length}/${FREE_PRODUCT_LIMIT} products`:`${packages.length}/${FREE_PACKAGE_LIMIT} packages`,\". Add more to grow your business!\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-100 p-1 rounded-lg flex\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setBillingPeriod('monthly'),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${billingPeriod==='monthly'?'bg-white text-gray-900 shadow-sm':'text-gray-600 hover:text-gray-900'}`,children:\"Monthly\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setBillingPeriod('yearly'),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${billingPeriod==='yearly'?'bg-white text-gray-900 shadow-sm':'text-gray-600 hover:text-gray-900'}`,children:[\"Yearly\",/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 text-xs text-green-600 font-semibold\",children:\"SAVE 17%\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// TODO: Implement payment processing\nshowSuccess(`Payment integration coming soon! Contact support to add ${billingPeriod} billing for 1 ${payPerListingType} listing.`,5000);setShowPayPerListingModal(false);},className:\"w-full border border-gray-200 rounded-lg p-4 hover:border-green-300 hover:bg-gray-50 transition-colors text-left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900\",children:[\"1 \",payPerListingType==='service'?'Service':payPerListingType==='product'?'Product':'Package']})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-gray-900\",children:[\"$\",getIndividualPrice(payPerListingType)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"$\",billingPeriod==='yearly'?(getIndividualPrice(payPerListingType)/12).toFixed(2)+'/month':getIndividualPrice(payPerListingType)+'/month',billingPeriod==='yearly'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 ml-1\",children:\"(billed yearly)\"})]})]})]})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{// TODO: Implement payment processing\nshowSuccess(`Payment integration coming soon! Contact support to add ${billingPeriod} billing for 3 ${payPerListingType} listings.`,5000);setShowPayPerListingModal(false);},className:\"w-full border-2 border-green-200 rounded-lg p-4 bg-green-50 hover:bg-green-100 transition-colors text-left relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-2 left-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"bg-green-500 text-white px-2 py-1 rounded text-xs font-medium\",children:\"POPULAR\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900\",children:[\"3 \",payPerListingType==='service'?'Services':payPerListingType==='product'?'Products':'Packages']}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-700\",children:\"Save money\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-green-600\",children:[\"$\",get3PackPrice(payPerListingType)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-green-600\",children:[\"$\",billingPeriod==='yearly'?(get3PackPrice(payPerListingType)/12/3).toFixed(2)+'/month each':(get3PackPrice(payPerListingType)/3).toFixed(2)+'/month each',billingPeriod==='yearly'&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-1\",children:\"(billed yearly)\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{// TODO: Implement payment processing\nshowSuccess(`Payment integration coming soon! Contact support to add ${billingPeriod} billing for 5 ${payPerListingType} listings.`,5000);setShowPayPerListingModal(false);},className:\"w-full border-2 border-blue-200 rounded-lg p-4 bg-blue-50 hover:bg-blue-100 transition-colors text-left relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-2 left-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"bg-blue-500 text-white px-2 py-1 rounded text-xs font-medium\",children:\"BEST VALUE\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900\",children:[\"5 \",payPerListingType==='service'?'Services':payPerListingType==='product'?'Products':'Packages']}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-700\",children:\"Best value\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-blue-600\",children:[\"$\",get5PackPrice(payPerListingType)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-600\",children:[\"$\",billingPeriod==='yearly'?(get5PackPrice(payPerListingType)/12/5).toFixed(2)+'/month each':(get5PackPrice(payPerListingType)/5).toFixed(2)+'/month each',billingPeriod==='yearly'&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-1\",children:\"(billed yearly)\"})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-3\",children:\"What you get:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"space-y-2 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-green-500 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})}),\"Active \",payPerListingType==='service'?'service listing':payPerListingType==='product'?'product listing':'service package listing',billingPeriod==='yearly'?'s':'',\" while subscribed\"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-green-500 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})}),\"Full marketplace visibility\"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-green-500 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})}),\"Same commission rates (\",payPerListingType==='service'?SERVICE_COMMISSION_RATE*100:PRODUCT_COMMISSION_RATE*100,\"%)\"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-green-500 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})}),billingPeriod==='yearly'?'Save 17% with yearly billing':'Flexible monthly billing']}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-green-500 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})}),\"Cancel anytime\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPayPerListingModal(false),className:\"text-gray-500 hover:text-gray-700 transition-colors text-sm underline\",children:\"Maybe Later\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 text-center mt-4\",children:[\"Secure payment processing \\u2022 \",billingPeriod==='yearly'?'Yearly billing (save 17%)':'Monthly billing',\" \\u2022 Cancel anytime\"]})]})]})}),showPatientModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:editingPatient?'Edit Patient':'Add New Patient'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPatientModal(false),className:\"text-gray-400 hover:text-gray-600 text-2xl\",children:\"\\xD7\"})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();const formData=new FormData(e.target);const patientData={name:formData.get('name'),species:formData.get('species'),breed:formData.get('breed'),age:formData.get('age'),weight:formData.get('weight'),ownerName:formData.get('ownerName'),ownerPhone:formData.get('ownerPhone'),ownerEmail:formData.get('ownerEmail'),medicalHistory:formData.get('medicalHistory')};handleAddPatient(patientData);},className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Pet Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",required:true,defaultValue:(editingPatient===null||editingPatient===void 0?void 0:editingPatient.name)||'',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., Max\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Species *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"species\",required:true,defaultValue:(editingPatient===null||editingPatient===void 0?void 0:editingPatient.species)||'',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select species\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Dog\",children:\"Dog\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Cat\",children:\"Cat\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Bird\",children:\"Bird\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Rabbit\",children:\"Rabbit\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Horse\",children:\"Horse\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Breed\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"breed\",defaultValue:(editingPatient===null||editingPatient===void 0?void 0:editingPatient.breed)||'',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., Golden Retriever\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Age (years)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"age\",min:\"0\",step:\"0.1\",defaultValue:(editingPatient===null||editingPatient===void 0?void 0:editingPatient.age)||'',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., 3\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Weight (kg)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"weight\",min:\"0\",step:\"0.1\",defaultValue:(editingPatient===null||editingPatient===void 0?void 0:editingPatient.weight)||'',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., 25.5\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Owner Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"ownerName\",required:true,defaultValue:(editingPatient===null||editingPatient===void 0?void 0:editingPatient.owner_name)||'',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., John Smith\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Owner Phone *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"ownerPhone\",required:true,defaultValue:(editingPatient===null||editingPatient===void 0?void 0:editingPatient.owner_phone)||'',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., +1 234 567 8900\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Owner Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"ownerEmail\",defaultValue:(editingPatient===null||editingPatient===void 0?void 0:editingPatient.owner_email)||'',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., john@example.com\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Medical History\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"medicalHistory\",rows:\"3\",defaultValue:(editingPatient===null||editingPatient===void 0?void 0:editingPatient.medical_history)||'',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"Any relevant medical history, allergies, or special needs...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPatientModal(false),className:\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:editingPatient?'Update Patient':'Add Patient'})]})]})]})}),showProcedureModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:editingProcedure?'Edit Procedure':'Schedule New Procedure'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowProcedureModal(false),className:\"text-gray-400 hover:text-gray-600 text-2xl\",children:\"\\xD7\"})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();const formData=new FormData(e.target);const procedureData={patientId:formData.get('patientId'),procedureType:formData.get('procedureType'),scheduledDate:formData.get('scheduledDate'),estimatedDuration:formData.get('estimatedDuration'),notes:formData.get('notes')};handleAddProcedure(procedureData);},className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Patient *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"patientId\",required:true,defaultValue:(editingProcedure===null||editingProcedure===void 0?void 0:editingProcedure.patient_id)||'',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select patient\"}),patients.map(patient=>/*#__PURE__*/_jsxs(\"option\",{value:patient.id,children:[patient.name,\" (\",patient.species,\")\"]},patient.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Procedure Type *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"procedureType\",required:true,defaultValue:(editingProcedure===null||editingProcedure===void 0?void 0:editingProcedure.procedure_type)||'',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select procedure type\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Consultation\",children:\"Consultation\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Vaccination\",children:\"Vaccination\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Surgery\",children:\"Surgery\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Dental Cleaning\",children:\"Dental Cleaning\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Blood Test\",children:\"Blood Test\"}),/*#__PURE__*/_jsx(\"option\",{value:\"X-Ray\",children:\"X-Ray\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Ultrasound\",children:\"Ultrasound\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Emergency Care\",children:\"Emergency Care\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Scheduled Date *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",name:\"scheduledDate\",required:true,defaultValue:editingProcedure!==null&&editingProcedure!==void 0&&editingProcedure.scheduled_date?editingProcedure.scheduled_date.slice(0,16):'',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Estimated Duration (minutes)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"estimatedDuration\",min:\"15\",step:\"15\",defaultValue:(editingProcedure===null||editingProcedure===void 0?void 0:editingProcedure.estimated_duration)||'60',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., 60\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"notes\",rows:\"3\",defaultValue:(editingProcedure===null||editingProcedure===void 0?void 0:editingProcedure.notes)||'',className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"Any special instructions, preparation requirements, or additional notes...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowProcedureModal(false),className:\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\",children:editingProcedure?'Update Procedure':'Schedule Procedure'})]})]})]})})]})});};export default VeterinaryProviderDashboard;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Link","useNavigate","supabase","getUserSafely","useNotificationContext","QualificationForm","ProviderAvailability","StatsOverview","MarketplaceSummary","MarketplaceManager","CasesSummary","ErrorBoundary","Sentry","PROVIDER_TYPES","getProviderConfig","getProviderLabels","getProviderNavigation","hasFeature","CaseManager","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","VeterinaryProviderDashboard","showInfo","showSuccess","showError","FREE_SERVICE_LIMIT","FREE_PRODUCT_LIMIT","FREE_PACKAGE_LIMIT","SERVICE_COMMISSION_RATE","PRODUCT_COMMISSION_RATE","SERVICE_MONTHLY_FEE","PRODUCT_MONTHLY_FEE","PACKAGE_MONTHLY_FEE","SERVICE_YEARLY_FEE","PRODUCT_YEARLY_FEE","PACKAGE_YEARLY_FEE","SERVICE_3_PACK_MONTHLY","SERVICE_5_PACK_MONTHLY","PRODUCT_3_PACK_MONTHLY","PRODUCT_5_PACK_MONTHLY","PACKAGE_3_PACK_MONTHLY","PACKAGE_5_PACK_MONTHLY","SERVICE_3_PACK_YEARLY","SERVICE_5_PACK_YEARLY","PRODUCT_3_PACK_YEARLY","PRODUCT_5_PACK_YEARLY","PACKAGE_3_PACK_YEARLY","PACKAGE_5_PACK_YEARLY","getIndividualPrice","type","billingPeriod","get3PackPrice","get5PackPrice","calculateServiceCommission","price","parseFloat","toFixed","calculateProductCommission","getNetEarnings","isProduct","arguments","length","undefined","commission","getServicesOnly","listings","filter","listing","listing_type","service_types","service_type","user","setUser","profile","setProfile","providerData","setProviderData","setListings","bookings","setBookings","triageCases","setTriageCases","products","setProducts","qualificationSubmission","setQualificationSubmission","showQualificationForm","setShowQualificationForm","showAvailabilityModal","setShowAvailabilityModal","showCreateServiceModal","setShowCreateServiceModal","showEditServiceModal","setShowEditServiceModal","showPayPerListingModal","setShowPayPerListingModal","payPerListingType","setPayPerListingType","setBillingPeriod","editingService","setEditingService","showScheduleModal","setShowScheduleModal","showMessagesModal","setShowMessagesModal","showAnalyticsModal","setShowAnalyticsModal","packages","setPackages","showPackageModal","setShowPackageModal","showAddProductModal","setShowAddProductModal","editingProduct","setEditingProduct","editingPackage","setEditingPackage","openDropdown","setOpenDropdown","activeSection","setActiveSection","patients","setPatients","procedures","setProcedures","showPatientModal","setShowPatientModal","showProcedureModal","setShowProcedureModal","editingPatient","setEditingPatient","editingProcedure","setEditingProcedure","selectedPatient","setSelectedPatient","profileForm","setProfileForm","fullName","phone","address","description","serviceAreas","maxTravelDistance","yearsOfExperience","profilePicture","formInitialized","setFormInitialized","productForm","setProductForm","name","category","brand","stockQuantity","photos","specifications","stats","setStats","totalListings","activeBookings","totalBookings","totalEarnings","averageRating","triageCasesHandled","clientsHelped","loading","setLoading","navigate","getProviderLabelsLocal","providerType","providerLabels","provider_type","migrateLocalPackagesToSupabase","userId","localPackages","console","log","packagesToMigrate","map","pkg","provider_id","service_ids","original_price","package_price","savings","is_active","data","error","from","insert","select","localStorage","removeItem","getExperienceLevel","years","level","color","getServiceOptions","baseServices","value","label","getNavigationSectionsLocal","checkUserAndLoadData","lastReload","getItem","now","Date","_user$email","trim","split","full_name","email","prev","service_areas","max_travel_distance","profile_picture","avatar_url","toString","stock_quantity","handleClickOutside","event","target","closest","document","addEventListener","removeEventListener","ensureProductsTable","tableCheckError","limit","message","includes","alert","createTableSQL","sampleProduct","testCategories","testError","delete","eq","handleAddProduct","tableExists","isNaN","stock","parseInt","photoDataSize","JSON","stringify","_window$crypto","_window$crypto$random","_user$email2","auth","getUser","Error","currentProductCount","currentProviderData","subscriptionPlan","subscription_plan","isFreeTier","productData","listing_id","id","window","crypto","randomUUID","call","Math","random","provider_email","provider_name","active","image_url","url","created_at","toISOString","updated_at","savedProduct","update","single","existingProducts","uniqueCategories","Set","p","join","marketplaceCheck","newProduct","createdAt","updatedAt","updatedProducts","setItem","storageError","handleDeleteProduct","productId","productName","confirm","updatedListings","handlePhotoUpload","files","Array","maxFiles","forEach","file","startsWith","size","reader","FileReader","onload","e","img","Image","canvas","createElement","ctx","getContext","width","height","maxDimension","drawImage","compressedDataUrl","toDataURL","newPhoto","src","result","readAsDataURL","removePhoto","photoId","photo","_user$email3","profileData","profileError","role","provider","providerError","formData","years_experience","qualificationData","listingsData","order","ascending","packagesFromMarketplace","toLowerCase","productsFromMarketplace","bookingsData","in","l","triageData","verified","booking","_booking$marketplace_","serviceType","marketplace_listings","consultation_type","patientsData","proceduresData","b","status","publishedProvider","reduce","sum","rating","max","round","captureException","handleQualificationSubmissionComplete","submission","handleAddNewService","currentServiceCount","handleAddNewPackage","currentPackageCount","handleEditListing","handleToggleListingStatus","listingId","currentStatus","handleViewSchedule","handleViewMessages","handleViewAnalytics","handleManageAvailability","handleGoLive","existingProvider","updateError","newProviderData","business_name","city","country","bio","offers_services","offers_products","featured","reviews_count","profile_image_url","insertError","servicesError","handleCreateService","serviceData","insertData","title","location","price_from","price_to","provider_phone","code","handleDeletePackage","packageId","packageName","updatedPackages","handleDeleteService","serviceId","serviceTitle","existingService","checkError","prevStats","bookingError","warn","setTimeout","handleUpdateService","updateData","handleViewListing","listingUrl","open","ServiceEditForm","_ref","_serviceData$service_","_serviceData$service_2","_serviceData$service_3","service","onClose","setServiceData","handleSubmit","preventDefault","className","children","onClick","onSubmit","required","onChange","placeholder","min","step","disabled","rows","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","PackageForm","_ref2","isEdit","initialData","packageData","setPackageData","selectedServices","packagePrice","isActive","handleServiceToggle","getOriginalPrice","total","getSavings","original","_window$crypto2","_window$crypto2$rando","_user$email4","packageInfo","savedPackage","checked","htmlFor","QuickServiceCards","_ref3","setSelectedServices","customPrices","setCustomPrices","getAvailableServices","defaultPrice","icon","preset","availableServices","find","s","newPrices","handlePriceChange","handleSubmitServices","selectedServicesCount","totalAfterCreation","currentProviderDataForInsert","servicePromises","_window$crypto3","_window$crypto3$rando","results","Promise","all","errors","r","isSelected","currentPrice","stopPropagation","getStatusColor","handleSaveProfile","basicUpdateData","basicProviderError","profileUpdateData","Object","keys","profileUpdateError","resolve","handleProfilePictureChange","fileExt","pop","fileName","storage","upload","upsert","publicUrl","getPublicUrl","sidebarItems","renderOverviewSection","appointment_date","sort","a","slice","index","_booking$marketplace_2","_booking$marketplace_3","pet_name","toLocaleDateString","appointment_time","c","toDateString","renderServicesSection","replace","alt","_pkg$service_ids","_pkg$original_price","_pkg$package_price","_pkg$savings","product","renderProductsSection","renderCasesSection","nurseId","initialFilter","renderScheduleSection","weekday","month","day","renderMessagesSection","renderAnalyticsSection","calculateRevenue","completedBookings","serviceRevenue","netEarnings","productRevenue","packageRevenue","services","revenue","thisMonthBookings","bookingDate","getMonth","getFullYear","style","earnings","customer_name","renderProfileSection","onError","display","nextSibling","getElementById","click","accept","readOnly","businessType","experienceLevel","colorClasses","gray","blue","green","purple","gold","defaultChecked","renderMarketplaceSection","renderPatientsSection","patient","breed","species","age","weight","owner_name","handleDeletePatient","owner_phone","owner_email","medical_history","renderProceduresSection","procedure","procedure_type","scheduled_date","year","estimated_duration","handleDeleteProcedure","notes","charAt","toUpperCase","handleAddPatient","patientData","newPatient","ownerName","ownerPhone","ownerEmail","medicalHistory","handleAddProcedure","procedureData","newProcedure","patient_id","patientId","procedureType","scheduledDate","estimatedDuration","patientName","procedureId","renderActiveSection","section","onSubmissionComplete","providerId","preferred_date","preferred_time","pet_species","multiple","FormData","get","defaultValue"],"sources":["/workspace/src/components/VetNurseDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { supabase } from '../lib/supabase.js';\nimport { getUserSafely } from '../lib/supabase-utils.js';\nimport { useNotificationContext } from '../contexts/NotificationContext';\nimport QualificationForm from './QualificationForm';\nimport ProviderAvailability from './ProviderAvailability';\nimport StatsOverview from './dashboard/StatsOverview';\nimport MarketplaceSummary from './dashboard/MarketplaceSummary';\nimport MarketplaceManager from './dashboard/MarketplaceManager';\nimport CasesSummary from './dashboard/CasesSummary';\nimport ErrorBoundary from './common/ErrorBoundary';\nimport * as Sentry from '@sentry/react';\nimport { PROVIDER_TYPES } from '../constants/providerTypes';\nimport { getProviderConfig, getProviderLabels, getProviderNavigation, hasFeature } from '../config/providerConfig';\nimport CaseManager from './vet-nurse/CaseManager';\n\n// Renamed component to handle both veterinarians and veterinarians\nconst VeterinaryProviderDashboard = () => {\n  const { showInfo, showSuccess, showError } = useNotificationContext();\n  \n  // MVP Pricing Constants\n  const FREE_SERVICE_LIMIT = 5;\n  const FREE_PRODUCT_LIMIT = 5;\n  const FREE_PACKAGE_LIMIT = 3; // 3 packages for free users\n  const SERVICE_COMMISSION_RATE = 0.18; // 18%\n  const PRODUCT_COMMISSION_RATE = 0.10; // 10%\n  \n  // Monthly Listing Fees (Individual)\n  const SERVICE_MONTHLY_FEE = 1.99; // $1.99/month per additional service listing\n  const PRODUCT_MONTHLY_FEE = 1.49; // $1.49/month per additional product listing\n  const PACKAGE_MONTHLY_FEE = 2.49; // $2.49/month per additional package listing\n  \n  // Yearly Listing Fees (Individual - 2 months free = ~17% off)\n  const SERVICE_YEARLY_FEE = 19.90; // $19.90/year per service ($1.66/month equivalent)\n  const PRODUCT_YEARLY_FEE = 14.90; // $14.90/year per product ($1.24/month equivalent)\n  const PACKAGE_YEARLY_FEE = 24.90; // $24.90/year per package ($2.08/month equivalent)\n  \n  // Bundle Monthly Fees (Better Value)\n  const SERVICE_3_PACK_MONTHLY = 4.99;   // 3 services for $4.99/month ($1.66 each)\n  const SERVICE_5_PACK_MONTHLY = 7.99;   // 5 services for $7.99/month ($1.60 each)\n  const PRODUCT_3_PACK_MONTHLY = 3.99;   // 3 products for $3.99/month ($1.33 each)\n  const PRODUCT_5_PACK_MONTHLY = 5.99;   // 5 products for $5.99/month ($1.20 each)\n  const PACKAGE_3_PACK_MONTHLY = 6.99;   // 3 packages for $6.99/month ($2.33 each)\n  const PACKAGE_5_PACK_MONTHLY = 9.99;   // 5 packages for $9.99/month ($2.00 each)\n  \n  // Bundle Yearly Fees (Best Value - 2 months free = ~17% off)\n  const SERVICE_3_PACK_YEARLY = 49.90;   // 3 services for $49.90/year ($4.16/month equivalent)\n  const SERVICE_5_PACK_YEARLY = 79.90;   // 5 services for $79.90/year ($6.66/month equivalent)\n  const PRODUCT_3_PACK_YEARLY = 39.90;   // 3 products for $39.90/year ($3.33/month equivalent)\n  const PRODUCT_5_PACK_YEARLY = 59.90;   // 5 products for $59.90/year ($4.99/month equivalent)\n  const PACKAGE_3_PACK_YEARLY = 69.90;   // 3 packages for $69.90/year ($5.83/month equivalent)\n  const PACKAGE_5_PACK_YEARLY = 99.90;   // 5 packages for $99.90/year ($8.33/month equivalent) // $25/month\n\n  // Pricing helper functions\n  const getIndividualPrice = (type) => {\n    if (billingPeriod === 'yearly') {\n      return type === 'service' ? SERVICE_YEARLY_FEE : \n             type === 'product' ? PRODUCT_YEARLY_FEE : \n             PACKAGE_YEARLY_FEE;\n    }\n    return type === 'service' ? SERVICE_MONTHLY_FEE : \n           type === 'product' ? PRODUCT_MONTHLY_FEE : \n           PACKAGE_MONTHLY_FEE;\n  };\n\n  const get3PackPrice = (type) => {\n    if (billingPeriod === 'yearly') {\n      return type === 'service' ? SERVICE_3_PACK_YEARLY : \n             type === 'product' ? PRODUCT_3_PACK_YEARLY : \n             PACKAGE_3_PACK_YEARLY;\n    }\n    return type === 'service' ? SERVICE_3_PACK_MONTHLY : \n           type === 'product' ? PRODUCT_3_PACK_MONTHLY : \n           PACKAGE_3_PACK_MONTHLY;\n  };\n\n  const get5PackPrice = (type) => {\n    if (billingPeriod === 'yearly') {\n      return type === 'service' ? SERVICE_5_PACK_YEARLY : \n             type === 'product' ? PRODUCT_5_PACK_YEARLY : \n             PACKAGE_5_PACK_YEARLY;\n    }\n    return type === 'service' ? SERVICE_5_PACK_MONTHLY : \n           type === 'product' ? PRODUCT_5_PACK_MONTHLY : \n           PACKAGE_5_PACK_MONTHLY;\n  };\n\n  // Commission calculation functions\n  const calculateServiceCommission = (price) => {\n    return (parseFloat(price) * SERVICE_COMMISSION_RATE).toFixed(2);\n  };\n\n  const calculateProductCommission = (price) => {\n    return (parseFloat(price) * PRODUCT_COMMISSION_RATE).toFixed(2);\n  };\n\n  const getNetEarnings = (price, isProduct = false) => {\n    const commission = isProduct ? calculateProductCommission(price) : calculateServiceCommission(price);\n    return (parseFloat(price) - parseFloat(commission)).toFixed(2);\n  };\n\n  // Helper function to filter only services (exclude products and packages)\n  const getServicesOnly = (listings) => {\n    return listings.filter(listing => {\n      // Explicitly check for service type\n      return listing.listing_type === 'service' || \n             (listing.listing_type !== 'product' && \n              listing.listing_type !== 'package' && \n              (listing.service_types || listing.service_type) !== 'product' && \n              (listing.service_types || listing.service_type) !== 'package');\n    });\n  };\n\n  const [user, setUser] = useState(null);\n  const [profile, setProfile] = useState(null);\n  const [providerData, setProviderData] = useState(null);\n  const [listings, setListings] = useState([]);\n  const [bookings, setBookings] = useState([]);\n  const [triageCases, setTriageCases] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [qualificationSubmission, setQualificationSubmission] = useState(null);\n  const [showQualificationForm, setShowQualificationForm] = useState(false);\n  const [showAvailabilityModal, setShowAvailabilityModal] = useState(false);\n  const [showCreateServiceModal, setShowCreateServiceModal] = useState(false);\n  const [showEditServiceModal, setShowEditServiceModal] = useState(false);\n\n  const [showPayPerListingModal, setShowPayPerListingModal] = useState(false);\n  const [payPerListingType, setPayPerListingType] = useState(null); // 'service', 'product', or 'package'\n  const [billingPeriod, setBillingPeriod] = useState('monthly'); // 'monthly' or 'yearly'\n  const [editingService, setEditingService] = useState(null);\n  const [showScheduleModal, setShowScheduleModal] = useState(false);\n  const [showMessagesModal, setShowMessagesModal] = useState(false);\n  const [showAnalyticsModal, setShowAnalyticsModal] = useState(false);\n  const [packages, setPackages] = useState([]);\n  const [showPackageModal, setShowPackageModal] = useState(false);\n  const [showAddProductModal, setShowAddProductModal] = useState(false);\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [editingPackage, setEditingPackage] = useState(null);\n  const [openDropdown, setOpenDropdown] = useState(null);\n  const [activeSection, setActiveSection] = useState('overview');\n  \n  // Veterinarian-specific state variables\n  const [patients, setPatients] = useState([]);\n  const [procedures, setProcedures] = useState([]);\n  const [showPatientModal, setShowPatientModal] = useState(false);\n  const [showProcedureModal, setShowProcedureModal] = useState(false);\n  const [editingPatient, setEditingPatient] = useState(null);\n  const [editingProcedure, setEditingProcedure] = useState(null);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  \n  // Profile form states\n  const [profileForm, setProfileForm] = useState({\n    fullName: '',\n    phone: '',\n    address: '',\n    description: '',\n    serviceAreas: '',\n    maxTravelDistance: '25',\n    yearsOfExperience: '',\n    profilePicture: ''\n  });\n  const [formInitialized, setFormInitialized] = useState(false);\n\n  // Product form states\n  const [productForm, setProductForm] = useState({\n    name: '',\n    description: '',\n    price: '',\n    category: 'Accessories', // Default to Accessories\n    brand: '',\n    stockQuantity: '',\n    photos: [],\n    specifications: ''\n  });\n\n  const [stats, setStats] = useState({\n    totalListings: 0,\n    activeBookings: 0,\n    totalBookings: 0,\n    totalEarnings: 0,\n    averageRating: 0,\n    triageCasesHandled: 0,\n    clientsHelped: 0\n  });\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  // Dynamic provider labels based on provider type\n  // Use centralized provider configuration\n  const getProviderLabelsLocal = (providerType) => {\n    return getProviderLabels(providerType);\n  };\n\n  // Get current provider labels\n  const providerLabels = getProviderLabelsLocal(providerData?.provider_type);\n\n  // Migration function for localStorage packages to Supabase\n  const migrateLocalPackagesToSupabase = async (userId, localPackages) => {\n    try {\n      console.log('Migrating packages to Supabase...', localPackages);\n      \n      // Convert localStorage packages to Supabase format\n      const packagesToMigrate = localPackages.map(pkg => ({\n        provider_id: userId,\n        name: pkg.name,\n        description: pkg.description,\n        service_ids: pkg.service_ids || [],\n        original_price: pkg.original_price || 0,\n        package_price: pkg.package_price || 0,\n        savings: pkg.savings || 0,\n        is_active: pkg.is_active !== undefined ? pkg.is_active : true\n      }));\n\n      // Insert packages into Supabase\n      const { data, error } = await supabase\n        .from('packages')\n        .insert(packagesToMigrate)\n        .select();\n\n      if (error) {\n        console.error('Migration error:', error);\n        throw error;\n      }\n\n      // Clear localStorage after successful migration\n      localStorage.removeItem(`packages_${userId}`);\n      \n      // Update local state with migrated packages\n      setPackages(data || []);\n      \n      showSuccess(`Successfully migrated ${localPackages.length} packages to Supabase!`, 5000);\n      console.log('Migration successful:', data);\n      \n    } catch (error) {\n      console.error('Failed to migrate packages:', error);\n      showError('Failed to migrate packages to database. Using local storage for now.');\n    }\n  };\n\n  // Experience level categorization\n  const getExperienceLevel = (years, providerType) => {\n    // Note: Luniby only hires veterinarians with at least 1 year experience\n    if (!years || years === 0) return { level: 'Vet Professional', color: 'blue', description: 'Qualified professional' };\n    \n    if (providerType === 'veterinarian') {\n      if (years <= 3) return { level: 'Veterinarian', color: 'blue', description: 'Qualified veterinarian' };\n      if (years <= 7) return { level: 'Experienced Veterinarian', color: 'green', description: 'Experienced professional' };\n      if (years <= 12) return { level: 'Senior Veterinarian', color: 'purple', description: 'Highly experienced' };\n      return { level: 'Expert Veterinarian', color: 'gold', description: 'Expert level' };\n    } else {\n      // Veterinarian levels (minimum 1 year for Luniby hiring)\n      if (years <= 3) return { level: 'Veterinarian', color: 'blue', description: 'Qualified veterinarian' };\n      if (years <= 7) return { level: 'Experienced Veterinarian', color: 'green', description: 'Experienced professional' };\n      if (years <= 12) return { level: 'Senior Veterinarian', color: 'purple', description: 'Highly experienced' };\n      return { level: 'Expert Veterinarian', color: 'gold', description: 'Expert level' };\n    }\n  };\n\n  // Role-based service options\n  const getServiceOptions = (providerType) => {\n    const baseServices = [\n      { value: \"Mobile Consultation\", label: \"Mobile Consultation\" },\n      { value: \"Mobile Emergency Care\", label: \"Mobile Emergency Care\" }\n    ];\n    \n    if (providerType === 'veterinarian') {\n      return [\n        ...baseServices,\n        { value: \"Clinic Consultation\", label: \"Clinic Consultation\" },\n        { value: \"Surgery Services\", label: \"Surgery Services\" },\n        { value: \"Diagnostic Testing\", label: \"Diagnostic Testing\" },\n        { value: \"Preventive Care\", label: \"Preventive Care\" },\n        { value: \"Dental Care\", label: \"Dental Care\" },\n        { value: \"Orthopedic Care\", label: \"Orthopedic Care\" },\n        { value: \"Laboratory Services\", label: \"Laboratory Services\" },\n        { value: \"Telemedicine Consultation\", label: \"Telemedicine Consultation\" },\n        { value: \"Emergency Surgery\", label: \"Emergency Surgery\" },\n        { value: \"Specialist Referral\", label: \"Specialist Referral\" },\n        { value: \"Prescription Management\", label: \"Prescription Management\" },\n        { value: \"Vaccination Programs\", label: \"Vaccination Programs\" }\n      ];\n    }\n    \n    return [\n      ...baseServices,\n      { value: \"Mobile Health Check\", label: \"Mobile Health Check\" },\n      { value: \"Mobile Vaccination\", label: \"Mobile Vaccination\" },\n      { value: \"Mobile Nail Trimming\", label: \"Mobile Nail Trimming\" },\n      { value: \"Mobile Grooming\", label: \"Mobile Grooming\" },\n      { value: \"LuniTriage SOAP Review\", label: \"LuniTriage SOAP Review\" },\n      { value: \"LuniTriage Consultation\", label: \"LuniTriage Consultation\" }\n    ];\n    };\n\n  // Dynamic navigation sections based on provider type\n  // Use centralized navigation configuration\n  const getNavigationSectionsLocal = (providerType) => {\n    return getProviderNavigation(providerType);\n  };\n\n  useEffect(() => {\n    checkUserAndLoadData();\n  }, []);\n\n  // Reload products when navigating to marketplace section\n  useEffect(() => {\n    if (activeSection === 'marketplace') {\n      // Always check and reload products when entering marketplace to ensure fresh data\n      const lastReload = localStorage.getItem('lastProductsReload');\n      const now = Date.now();\n      \n      // Products are now loaded from marketplace_listings in checkUserAndLoadData\n      // No need for separate product loading\n    }\n  }, [activeSection]);\n\n  // Initialize form when profile or provider data first loads (but preserve user changes)\n  useEffect(() => {\n    if ((profile || providerData || user) && !formInitialized) {\n      // Prioritize the more complete name (providerData?.name is usually more complete)\n      const fullName = (providerData?.name && providerData.name.trim().split(' ').length > 1) \n        ? providerData.name \n        : (profile?.full_name || providerData?.name || user?.email?.split('@')[0] || 'User');\n\n      setProfileForm(prev => ({\n        ...prev,\n        fullName: fullName,\n        phone: providerData?.phone || '',\n        address: providerData?.address || '',\n        description: providerData?.description || '',\n        serviceAreas: providerData?.service_areas || 'Auckland',\n        maxTravelDistance: providerData?.max_travel_distance || '25',\n        profilePicture: providerData?.profile_picture || profile?.avatar_url || ''\n      }));\n      setFormInitialized(true);\n    }\n  }, [profile, providerData, user, formInitialized]);\n\n  // Update product form when editing\n  useEffect(() => {\n    if (editingProduct) {\n      setProductForm({\n        name: editingProduct.name || '',\n        description: editingProduct.description || '',\n        price: (editingProduct.price || 0).toString(),\n        category: editingProduct.category || 'Accessories',\n        brand: editingProduct.brand || '',\n        stockQuantity: (editingProduct.stockQuantity || editingProduct.stock_quantity || 0).toString(),\n        photos: editingProduct.photos || [],\n        specifications: editingProduct.specifications || ''\n      });\n    }\n  }, [editingProduct]);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (openDropdown && !event.target.closest('.relative')) {\n        setOpenDropdown(null);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [openDropdown]);\n\n  // Check and create products table if needed\n  const ensureProductsTable = async () => {\n    try {\n      // First, try to query the products table to see if it exists\n      const { error: tableCheckError } = await supabase\n        .from('products')\n        .select('id')\n        .limit(1);\n\n      if (tableCheckError && tableCheckError.message.includes('does not exist')) {\n        alert('Products table needs to be created. Please check the console for SQL to run in Supabase.');\n        \n        // Provide SQL to create the table\n        const createTableSQL = `\n-- Create products table\nCREATE TABLE products (\n  id SERIAL PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  price DECIMAL(10,2) NOT NULL,\n  category VARCHAR(100) NOT NULL,\n  subcategory VARCHAR(100),\n  brand VARCHAR(100),\n  stock_quantity INTEGER DEFAULT 0,\n  specifications TEXT,\n  image_url TEXT,\n  photos_data JSONB,\n  provider_id INTEGER REFERENCES providers(id) ON DELETE CASCADE,\n  is_active BOOLEAN DEFAULT true,\n  sku VARCHAR(100),\n  weight_kg DECIMAL(8,3),\n  dimensions VARCHAR(100),\n  age_group VARCHAR(50),\n  pet_type VARCHAR(50),\n  is_prescription BOOLEAN DEFAULT false,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Add indexes\nCREATE INDEX idx_products_provider_id ON products(provider_id);\nCREATE INDEX idx_products_category ON products(category);\nCREATE INDEX idx_products_is_active ON products(is_active);\n\n-- Enable RLS\nALTER TABLE products ENABLE ROW LEVEL SECURITY;\n\n-- Create policies\nCREATE POLICY \"Providers can manage their own products\" ON products\n  FOR ALL USING (provider_id IN (\n    SELECT id FROM providers WHERE email = auth.jwt() ->> 'email'\n  ));\n\nCREATE POLICY \"Anyone can view active products\" ON products\n  FOR SELECT USING (is_active = true);\n        `;\n        \n        return false;\n      } else {\n        \n        // Try to get a sample record to see what columns are available\n        const { data: sampleProduct } = await supabase\n          .from('products')\n          .select('*')\n          .limit(1);\n        \n        if (sampleProduct && sampleProduct.length > 0) {\n          // Products table has data, continue normally\n        } else {\n          // Try to insert a test record to see what constraints exist\n          const testCategories = ['food', 'treats', 'toys', 'accessories', 'health', 'grooming', 'medication', 'supplements', 'supplies', 'other'];\n          for (const category of testCategories) {\n            const { error: testError } = await supabase\n              .from('products')\n              .insert([{\n                name: 'TEST_PRODUCT_DELETE_ME',\n                description: 'Test product',\n                price: 1.00,\n                category: category,\n                provider_id: 1,\n                is_active: false\n              }]);\n            \n            if (!testError) {\n              // Delete the test record\n              await supabase\n                .from('products')\n                .delete()\n                .eq('name', 'TEST_PRODUCT_DELETE_ME');\n              break;\n            }\n          }\n        }\n      }\n      \n      return true;\n    } catch (error) {\n      return false;\n    }\n  };\n\n  // Product management functions\n  const handleAddProduct = async () => {\n    const tableExists = await ensureProductsTable();\n    if (!tableExists) {\n      return;\n    }\n\n    if (!productForm.name || !productForm.price || !productForm.category || !productForm.stockQuantity) {\n      alert('Please fill in all required fields (name, price, category, stock quantity)');\n      return;\n    }\n\n    // Validate price\n    const price = parseFloat(productForm.price);\n    if (isNaN(price) || price < 0) {\n      alert('Please enter a valid price');\n      return;\n    }\n\n    // Validate stock quantity\n    const stock = parseInt(productForm.stockQuantity);\n    if (isNaN(stock) || stock < 0) {\n      alert('Please enter a valid stock quantity (0 or greater)');\n      return;\n    }\n\n    const photoDataSize = JSON.stringify(productForm.photos).length;\n    if (photoDataSize > 2000000) {\n      alert('Photos are too large. Please use smaller images or reduce the number of photos.');\n      return;\n    }\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n\n      // Check free tier limits (15 products for free users)\n      const currentProductCount = products.length;\n      const currentProviderData = providerData || profile || {};\n      // Default to free tier if no subscription plan is set\n      const subscriptionPlan = currentProviderData?.subscription_plan;\n      const isFreeTier = !subscriptionPlan || subscriptionPlan === 'free' || subscriptionPlan !== 'premium';\n\n      console.log('Product creation limit check:', {\n        currentProductCount,\n        FREE_PRODUCT_LIMIT,\n        isFreeTier,\n        editingProduct: !!editingProduct,\n        subscription_plan: currentProviderData?.subscription_plan\n      });\n\n      if (isFreeTier && currentProductCount >= FREE_PRODUCT_LIMIT && !editingProduct) {\n        setPayPerListingType('product');\n        setShowPayPerListingModal(true);\n        return;\n      }\n\n      // Use marketplace_listings instead of separate products table\n      const productData = {\n        listing_type: 'product',\n        listing_id: editingProduct ? (editingProduct.listing_id || editingProduct.id) : window.crypto?.randomUUID?.() || Math.random().toString(36),\n        name: productForm.name.trim(),\n        description: productForm.description.trim(),\n        price: price,\n        category: productForm.category || 'Accessories',\n        brand: productForm.brand.trim() || null,\n        stock_quantity: stock,\n        service_types: 'product',\n        provider_email: user.email,\n        provider_name: profile?.full_name || providerData?.name || user.email?.split('@')[0],\n        provider_type: profile?.provider_type || providerData?.provider_type || 'Vet Nurse',\n        active: true,\n        image_url: productForm.photos.length > 0 ? productForm.photos[0].url : null,\n        created_at: editingProduct ? undefined : new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      };\n\n      let savedProduct;\n      if (editingProduct) {\n        const { data, error } = await supabase\n          .from('marketplace_listings')\n          .update(productData)\n          .eq('listing_id', editingProduct.listing_id || editingProduct.id)\n          .eq('provider_email', user.email)\n          .select()\n          .single();\n\n        if (error) throw error;\n        savedProduct = data;\n      } else {\n        const { data, error } = await supabase\n          .from('marketplace_listings')\n          .insert([productData])\n          .select()\n          .single();\n\n        if (error) {\n          if (error.message.includes('check constraint') && error.message.includes('category')) {\n            const { data: existingProducts } = await supabase\n              .from('products')\n              .select('category')\n              .limit(50);\n            \n            if (existingProducts && existingProducts.length > 0) {\n              const uniqueCategories = [...new Set(existingProducts.map(p => p.category))];\n              alert(`Category constraint error. Allowed categories appear to be: ${uniqueCategories.join(', ')}`);\n            } else {\n              alert('Category constraint error. Please check the console and try a different category.');\n            }\n          }\n          throw error;\n        }\n        savedProduct = data;\n      }\n\n      // Check if product appears in marketplace_listings view\n      const { data: marketplaceCheck } = await supabase\n        .from('marketplace_listings')\n        .select('*')\n        .eq('listing_type', 'product')\n        .eq('listing_id', savedProduct.listing_id || savedProduct.id);\n\n      if (!marketplaceCheck || marketplaceCheck.length === 0) {\n        alert('Product saved but may not appear in public marketplace. The view might need to be updated.');\n      }\n\n      // Update local products state with the saved product\n      const newProduct = {\n        id: savedProduct.id,\n        name: savedProduct.name,\n        description: savedProduct.description,\n        price: savedProduct.price,\n        category: savedProduct.category,\n        brand: savedProduct.brand,\n        stockQuantity: savedProduct.stock_quantity,\n        photos: productForm.photos, // Keep the photo objects for display\n        specifications: productForm.specifications, // Keep form data since DB doesn't store this\n        createdAt: savedProduct.created_at,\n        updatedAt: savedProduct.updated_at,\n        type: 'product'\n      };\n\n      let updatedProducts;\n      if (editingProduct) {\n        updatedProducts = products.map(p => p.id === editingProduct.id ? newProduct : p);\n      } else {\n        updatedProducts = [...products, newProduct];\n      }\n\n      setProducts(updatedProducts);\n      \n      // Try to save to localStorage with error handling (for offline access)\n      try {\n        localStorage.setItem(`products_${user.id}`, JSON.stringify(updatedProducts));\n      } catch (storageError) {\n        // Don't throw error for localStorage issues since data is saved to database\n      }\n\n      // Refresh data to show updated product\n      checkUserAndLoadData();\n\n      // Reset form\n      setProductForm({\n        name: '',\n        description: '',\n        price: '',\n        category: 'Accessories',\n        brand: '',\n        stockQuantity: '',\n        photos: [],\n        specifications: ''\n      });\n      setShowAddProductModal(false);\n      setEditingProduct(null);\n\n    } catch (error) {\n      // Check if it's a localStorage size issue\n      if (error.name === 'QuotaExceededError' || error.message.includes('quota')) {\n        alert('Error: Product photos are too large. Please use smaller images or reduce the number of photos.');\n      } else if (error.message.includes('JSON')) {\n        alert('Error: Invalid product data. Please check your inputs and try again.');\n      } else {\n        alert(`Error saving product: ${error.message}. Please try again.`);\n      }\n    }\n  };\n\n  const handleDeleteProduct = async (productId, productName) => {\n    if (!window.confirm(`Are you sure you want to delete \"${productName}\"? This action cannot be undone.`)) {\n      return;\n    }\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n\n      // Delete from marketplace_listings instead of products table\n      const { error } = await supabase\n        .from('marketplace_listings')\n        .delete()\n        .eq('listing_id', productId)\n        .eq('provider_email', user.email)\n        .eq('listing_type', 'product');\n\n      if (error) throw error;\n\n      // Update local state\n      const updatedProducts = products.filter(p => p.id !== productId);\n      setProducts(updatedProducts);\n      \n      // Update localStorage\n      try {\n        localStorage.setItem(`products_${user.id}`, JSON.stringify(updatedProducts));\n      } catch (storageError) {\n        // Don't throw error for localStorage issues\n      }\n\n      // Also remove from local listings state\n      const updatedListings = listings.filter(listing => listing.id !== `product_${productId}`);\n      setListings(updatedListings);\n\n    } catch (error) {\n      alert(`Error deleting product: ${error.message}. Please try again.`);\n    }\n  };\n\n  // Photo handling functions\n  const handlePhotoUpload = (event) => {\n    const files = Array.from(event.target.files);\n    const maxFiles = 4;\n    \n    if (productForm.photos.length + files.length > maxFiles) {\n      alert(`You can only upload up to ${maxFiles} photos`);\n      return;\n    }\n\n    files.forEach(file => {\n      if (file.type.startsWith('image/')) {\n        // Check file size (10MB limit per file)\n        if (file.size > 10 * 1024 * 1024) {\n          alert(`File ${file.name} is too large. Please use images under 10MB.`);\n          return;\n        }\n\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          // Create an image to compress it\n          const img = new Image();\n          img.onload = () => {\n            const canvas = document.createElement('canvas');\n            const ctx = canvas.getContext('2d');\n            \n            // Calculate new dimensions (max 800px width/height)\n            let { width, height } = img;\n            const maxDimension = 800;\n            \n            if (width > height) {\n              if (width > maxDimension) {\n                height = (height * maxDimension) / width;\n                width = maxDimension;\n              }\n            } else {\n              if (height > maxDimension) {\n                width = (width * maxDimension) / height;\n                height = maxDimension;\n              }\n            }\n            \n            canvas.width = width;\n            canvas.height = height;\n            \n            // Draw and compress\n            ctx.drawImage(img, 0, 0, width, height);\n            const compressedDataUrl = canvas.toDataURL('image/jpeg', 0.8);\n            \n            const newPhoto = {\n              id: Date.now() + Math.random(),\n              file: file,\n              url: compressedDataUrl,\n              name: file.name\n            };\n            \n            setProductForm(prev => ({\n              ...prev,\n              photos: [...prev.photos, newPhoto]\n            }));\n          };\n          img.src = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      } else {\n        alert('Please select only image files');\n      }\n    });\n  };\n\n  const removePhoto = (photoId) => {\n    setProductForm(prev => ({\n      ...prev,\n      photos: prev.photos.filter(photo => photo.id !== photoId)\n    }));\n  };\n\n\n\n  const checkUserAndLoadData = async () => {\n    try {\n      const user = await getUserSafely();\n      if (!user) {\n        navigate('/signin');\n        return;\n      }\n\n      // Set user state\n      setUser(user);\n\n      // Get user profile\n      const { data: profileData, error: profileError } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', user.id)\n        .single();\n\n\n\n      if (!profileData) {\n        console.log('VetNurseDashboard Debug - No profile data found');\n        navigate('/');\n        return;\n      }\n      \n      console.log('VetNurseDashboard Debug - Profile data:', profileData);\n      console.log('VetNurseDashboard Debug - Role:', profileData.role);\n      \n      if (profileData.role !== 'vet_nurse' && profileData.role !== 'veterinarian') {\n        console.log('VetNurseDashboard Debug - Wrong role, redirecting to home. Expected: vet_nurse or veterinarian, Got:', profileData.role);\n        navigate('/');\n        return;\n      }\n      \n      console.log('VetNurseDashboard Debug - Access granted for', profileData.role);\n\n      setProfile(profileData);\n\n      // Get provider data\n      const { data: provider, error: providerError } = await supabase\n        .from('providers')\n        .select('*')\n        .eq('id', user.id)\n        .single();\n\n\n\n      setProviderData(provider);\n\n      // Populate profile form with existing data\n      \n      // Prioritize updated profile data over provider name\n      const fullName = profileData?.full_name || provider?.name || user?.email?.split('@')[0] || 'Unknown User';\n      \n      const formData = {\n        fullName: fullName,\n        phone: provider?.phone || '',\n        address: provider?.address || '',\n        description: provider?.description || '',\n        serviceAreas: provider?.service_areas || 'Auckland',\n        maxTravelDistance: provider?.max_travel_distance || '25',\n        yearsOfExperience: provider?.years_experience || '',\n        profilePicture: provider?.profile_picture || profileData?.avatar_url || ''\n              };\n        \n        setProfileForm(formData);\n\n      // Check if qualifications have been submitted\n      const { data: qualificationData } = await supabase\n        .from('provider_qualifications')\n        .select('*')\n        .eq('provider_id', user.id)\n        .single();\n\n      setQualificationSubmission(qualificationData);\n\n      // Load provider's listings from marketplace_listings (revert to working solution)\n      const { data: listingsData } = await supabase\n        .from('marketplace_listings')\n        .select('*')\n        .eq('provider_email', profileData.email)\n        .order('created_at', { ascending: false });\n\n      setListings(listingsData || []);\n\n      // Load packages from marketplace_listings (not separate packages table)\n      const packagesFromMarketplace = (listingsData || []).filter(listing => \n        listing.listing_type === 'package' || \n        listing.service_types === 'package' ||\n        (typeof listing.service_types === 'string' && listing.service_types.toLowerCase().includes('package'))\n      ).map(listing => ({\n        id: listing.listing_id,\n        name: listing.name,\n        description: listing.description,\n        service_ids: [], // Could be parsed from description or stored differently\n        original_price: listing.price * 1.2, // Assume 20% discount for display\n        package_price: listing.price,\n        savings: listing.price * 0.2, // 20% savings\n        is_active: listing.active !== false,\n        provider_id: listing.provider_id,\n        created_at: listing.created_at,\n        updated_at: listing.updated_at\n      }));\n      \n      setPackages(packagesFromMarketplace);\n\n      // Load products from marketplace_listings (not separate products table)\n      const productsFromMarketplace = (listingsData || []).filter(listing => \n        listing.listing_type === 'product' || listing.service_types === 'product'\n      ).map(listing => ({\n        id: listing.listing_id,\n        name: listing.name,\n        description: listing.description,\n        price: listing.price,\n        category: listing.category,\n        brand: listing.brand,\n        stockQuantity: listing.stock_quantity,\n        photos: listing.image_url ? [{ id: 1, url: listing.image_url, name: 'Product Image' }] : [],\n        specifications: '',\n        createdAt: listing.created_at,\n        updatedAt: listing.updated_at,\n        type: 'product'\n      }));\n      \n      setProducts(productsFromMarketplace);\n\n      // Load bookings for this provider\n      const { data: bookingsData } = await supabase\n        .from('consultation_bookings')\n        .select(`\n          *,\n          marketplace_listings (\n            name,\n            service_types\n          )\n        `)\n        .in('listing_id', (listingsData || []).map(l => l.listing_id))\n        .order('created_at', { ascending: false })\n        .limit(20);\n\n      setBookings(bookingsData || []);\n\n      // Load triage cases (for verified providers only)\n      let triageData = [];\n      if (provider?.verified) {\n        // Filter bookings for LuniTriage services\n        triageData = (bookingsData || []).filter(booking => {\n          const serviceType = booking.marketplace_listings?.service_types || booking.consultation_type;\n          return serviceType === 'LuniTriage SOAP Review' || serviceType === 'LuniTriage Consultation';\n        });\n        setTriageCases(triageData);\n      } else {\n        // No triage cases to show in demo mode\n        setTriageCases([]);\n      }\n\n      // Load patients and procedures for veterinarians\n      if (profileData.role === 'veterinarian') {\n        // Load patients\n        const { data: patientsData } = await supabase\n          .from('patients')\n          .select('*')\n          .eq('provider_id', user.id)\n          .order('created_at', { ascending: false });\n\n        setPatients(patientsData || []);\n\n        // Load procedures\n        const { data: proceduresData } = await supabase\n          .from('procedures')\n          .select('*')\n          .eq('provider_id', user.id)\n          .order('scheduled_date', { ascending: true });\n\n        setProcedures(proceduresData || []);\n      }\n\n      // Calculate stats\n      const activeBookings = (bookingsData || []).filter(b => \n        b.status === 'confirmed' || b.status === 'pending'\n      ).length;\n\n      // Check if provider is published (has record in providers table)\n      const { data: publishedProvider } = await supabase\n        .from('providers')\n        .select('id, verified')\n        .eq('id', user.id)\n        .single();\n\n      // Provider record will be created when first service is submitted\n\n      // Update provider data with published info\n      if (publishedProvider && providerData) {\n        setProviderData({\n          ...providerData,\n          verified: publishedProvider.verified\n        });\n      }\n\n      const averageRating = (listingsData || []).reduce((sum, listing) => \n        sum + (listing.rating || 0), 0\n      ) / Math.max((listingsData || []).length, 1);\n\n      setStats({\n        totalListings: (listingsData || []).length,\n        activeBookings,\n        totalBookings: (bookingsData || []).length,\n        totalEarnings: 0, // This would come from a payments table\n        averageRating: Math.round(averageRating * 10) / 10,\n        triageCasesHandled: provider?.verified ? triageData.length : 0,\n        clientsHelped: (bookingsData || []).filter(b => b.status === 'completed').length\n      });\n\n    } catch (error) {\n      Sentry.captureException(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n    const handleQualificationSubmissionComplete = useCallback((submission) => {\n    setQualificationSubmission(submission);\n  }, []);\n\n  // Add missing click handlers for dashboard buttons\n  const handleAddNewService = () => {\n    // Check limits before opening modal\n    const currentProviderData = providerData || profile || {};\n    const currentServiceCount = getServicesOnly(listings).length;\n    const subscriptionPlan = currentProviderData?.subscription_plan;\n    const isFreeTier = !subscriptionPlan || subscriptionPlan === 'free' || subscriptionPlan !== 'premium';\n    \n    console.log('Add New Service button limit check:', {\n      currentServiceCount,\n      FREE_SERVICE_LIMIT,\n      isFreeTier,\n      subscriptionPlan\n    });\n    \n    if (isFreeTier && currentServiceCount >= FREE_SERVICE_LIMIT) {\n      setPayPerListingType('service');\n      setShowPayPerListingModal(true);\n      return;\n    }\n    \n    // Open service creation modal\n    setShowCreateServiceModal(true);\n  };\n\n  const handleAddNewPackage = () => {\n    // Check limits before opening modal\n    const currentProviderData = providerData || profile || {};\n    const currentPackageCount = packages.length;\n    const subscriptionPlan = currentProviderData?.subscription_plan;\n    const isFreeTier = !subscriptionPlan || subscriptionPlan === 'free' || subscriptionPlan !== 'premium';\n    \n    console.log('Add New Package button limit check:', {\n      currentPackageCount,\n      FREE_PACKAGE_LIMIT,\n      isFreeTier,\n      subscriptionPlan\n    });\n    \n    if (isFreeTier && currentPackageCount >= FREE_PACKAGE_LIMIT) {\n      setPayPerListingType('package');\n      setShowPayPerListingModal(true);\n      return;\n    }\n    \n    // Open package creation modal\n    setShowPackageModal(true);\n  };\n\n  const handleEditListing = (listing) => {\n    // Open edit modal with listing data instead of navigating\n    setEditingService(listing);\n    setShowEditServiceModal(true);\n  };\n\n  const handleToggleListingStatus = async (listingId, currentStatus) => {\n    try {\n      const { error } = await supabase\n        .from('marketplace_listings')\n        .update({ active: !currentStatus })\n        .eq('listing_id', listingId);\n\n      if (error) throw error;\n\n      // Refresh listings\n      checkUserAndLoadData();\n      showSuccess(!currentStatus ? 'Service activated successfully' : 'Service deactivated successfully', 4000);\n    } catch (error) {\n      // Error updating listing status\n              showError('Failed to update service status');\n    }\n  };\n\n  const handleViewSchedule = () => {\n    // Show schedule modal instead of navigating\n    setShowScheduleModal(true);\n  };\n\n  const handleViewMessages = () => {\n    // Show messages modal instead of navigating\n    setShowMessagesModal(true);\n  };\n\n  const handleViewAnalytics = () => {\n    // Show analytics modal instead of navigating\n    setShowAnalyticsModal(true);\n  };\n\n  const handleManageAvailability = () => {\n    // Show availability modal instead of navigating\n    setShowAvailabilityModal(true);\n  };\n\n  // Go Live function - publishes provider profile to marketplace\n  const handleGoLive = async () => {\n    try {\n      const user = await getUserSafely();\n      if (!user) {\n        showInfo('User not authenticated', 'error');\n        return;\n      }\n\n      // Check if provider record exists\n      const { data: existingProvider } = await supabase\n        .from('providers')\n        .select('id, verified')\n        .eq('id', user.id)\n        .single();\n\n      if (existingProvider) {\n        // Update existing provider to be verified/live\n        const { error: updateError } = await supabase\n          .from('providers')\n          .update({ verified: true, is_active: true })\n          .eq('id', user.id);\n\n        if (updateError) throw updateError;\n        \n        showSuccess('ðŸŽ‰ Your profile is now live on the marketplace! You can view it using \"View My Listing\".', 5000);\n      } else {\n        // Create new provider record\n        const providerData = profile || {};\n        const newProviderData = {\n          id: user.id,\n          name: providerData?.full_name || user.email,\n          email: user.email,\n          phone: providerData?.phone || null,\n          provider_type: providerData?.provider_type || 'vet_nurse',\n          business_name: providerData?.business_name || null,\n          address: null,\n          city: 'Location TBD',\n          country: 'Australia',\n          bio: 'Professional veterinary nurse providing quality care for your pets. Experienced in various treatments and dedicated to animal welfare.',\n          offers_services: true,\n          offers_products: false,\n          verified: true, // Live on marketplace\n          is_active: true,\n          featured: false,\n          rating: 0.00,\n          reviews_count: 0,\n          profile_image_url: null,\n          service_types: ['Veterinary Nursing']\n        };\n\n        const { error: insertError } = await supabase.from('providers').insert(newProviderData);\n        if (insertError) throw insertError;\n\n        showSuccess('ðŸŽ‰ Your profile is now live on the marketplace! You can view it using \"View My Listing\".', 5000);\n      }\n\n      // Update all services to be verified/active\n      const { error: servicesError } = await supabase\n        .from('marketplace_listings')\n        .update({ verified: true, active: true })\n        .eq('provider_email', user.email);\n\n      if (servicesError) {\n        // Error updating services\n      }\n\n      // Reload data to reflect changes\n      checkUserAndLoadData();\n      \n    } catch (error) {\n      // Error going live\n      showInfo('Failed to go live: ' + error.message, 'error');\n    }\n  };\n\n  // Service creation handler\n  const handleCreateService = async (serviceData) => {\n    try {\n      \n      const user = await getUserSafely();\n      if (!user) {\n        throw new Error('User not authenticated');\n      }\n\n      // Get provider data first\n      const currentProviderData = providerData || profile || {};\n      \n      // Check free tier limits (5 services for free users)\n      const currentServiceCount = getServicesOnly(listings).length;\n      // Default to free tier if no subscription plan is set\n      const subscriptionPlan = currentProviderData?.subscription_plan;\n      const isFreeTier = !subscriptionPlan || subscriptionPlan === 'free' || subscriptionPlan !== 'premium';\n\n              console.log('Service creation limit check:', {\n          currentServiceCount,\n          FREE_SERVICE_LIMIT,\n          isFreeTier,\n          subscriptionPlan,\n          providerData: !!currentProviderData\n        });\n\n              if (isFreeTier && currentServiceCount >= FREE_SERVICE_LIMIT) {\n          showError(`Free tier limit reached! You can have up to ${FREE_SERVICE_LIMIT} services. Click \"Upgrade to Premium\" to get unlimited services.`);\n          return;\n        }\n      \n              const insertData = {\n        title: serviceData.title,\n        description: serviceData.description,\n        service_type: serviceData.service_type,\n        location: serviceData.location || 'Location TBD',\n        price_from: parseFloat(serviceData.price),\n        price_to: parseFloat(serviceData.price),\n        provider_name: currentProviderData?.full_name || user.email,\n        provider_type: currentProviderData?.role || 'vet_nurse',\n        provider_email: user.email,\n        provider_phone: currentProviderData?.phone || 'N/A',\n        active: true,\n        verified: false,\n        rating: 0.0,\n        reviews_count: 0\n      };\n\n\n\n      const { data, error } = await supabase\n        .from('marketplace_listings')\n        .insert(insertData)\n        .select();\n        \n      // Services created successfully - ready to go live!\n\n      if (error) {\n        throw new Error(`Database error: ${error.message} (Code: ${error.code})`);\n      }\n      showSuccess('Service created successfully!', 4000);\n      setShowCreateServiceModal(false);\n      checkUserAndLoadData(); // Refresh data\n    } catch (error) {\n      showInfo(`Failed to create service: ${error.message}`, 'error');\n    }\n  };\n\n  // Service editing handler\n  const handleDeletePackage = async (packageId, packageName) => {\n    if (!window.confirm(`Are you sure you want to delete \"${packageName}\" package? This action cannot be undone.`)) {\n      return;\n    }\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n\n      // Delete from Supabase\n      const { error } = await supabase\n        .from('packages')\n        .delete()\n        .eq('id', packageId)\n        .eq('provider_id', user.id);\n\n      if (error) throw error;\n\n      // Update local state\n      const updatedPackages = packages.filter(pkg => pkg.id !== packageId);\n      setPackages(updatedPackages);\n\n      showSuccess('Package deleted successfully!', 4000);\n      \n    } catch (error) {\n              showError(`Failed to delete package: ${error.message}`);\n    }\n  };\n\n  const handleDeleteService = async (serviceId, serviceTitle) => {\n    if (!window.confirm(`Are you sure you want to delete \"${serviceTitle}\"? This action cannot be undone.`)) {\n      return;\n    }\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n\n      // Debug: Check what ID we're trying to delete\n      console.log('Attempting to delete service with ID:', serviceId);\n      \n      // First, verify the service exists and belongs to the user\n      const { data: existingService, error: checkError } = await supabase\n        .from('marketplace_listings')\n        .select('listing_id, name, provider_email')\n        .eq('listing_id', serviceId)\n        .eq('provider_email', user.email);\n\n      if (checkError) throw checkError;\n\n      if (!existingService || existingService.length === 0) {\n        // Service not found, let's refresh the data and show current listings\n        console.log('Service not found, refreshing data...');\n        checkUserAndLoadData();\n        throw new Error(`Service not found. The listing may have been already deleted or the page data is outdated. Please refresh and try again.`);\n      }\n\n      // Now delete the service\n      const { data, error } = await supabase\n        .from('marketplace_listings')\n        .delete()\n        .eq('listing_id', serviceId)\n        .eq('provider_email', user.email)  // Extra security\n        .select();\n\n      if (error) throw error;\n\n      // Check if anything was actually deleted\n      if (!data || data.length === 0) {\n        throw new Error(`Service not found or you don't have permission to delete it (ID: ${serviceId})`);\n      }\n\n      // Immediately update local state\n      const updatedListings = listings.filter(listing => listing.listing_id !== serviceId);\n      setListings(updatedListings);\n\n      // Update stats immediately\n      setStats(prevStats => ({\n        ...prevStats,\n        totalListings: updatedListings.length\n      }));\n\n      showSuccess('Service deleted successfully!', 4000);\n      \n      // Refresh bookings and other dependent data (but not listings since we already updated them)\n      try {\n        const { data: bookingsData } = await supabase\n          .from('consultation_bookings')\n          .select(`\n            *,\n            marketplace_listings (\n              name,\n              service_types\n            )\n          `)\n                                             .in('listing_id', updatedListings.map(l => l.listing_id))\n          .order('created_at', { ascending: false })\n          .limit(20);\n\n        setBookings(bookingsData || []);\n      } catch (bookingError) {\n        // Don't fail the whole operation if booking refresh fails\n        console.warn('Failed to refresh bookings after service deletion:', bookingError);\n      }\n      \n    } catch (error) {\n      console.error('Delete service error:', error);\n      showError(`Failed to delete service: ${error.message}`);\n      \n      // If it's a \"not found\" error, refresh the data to show current state\n      if (error.message.includes('not found') || error.message.includes('outdated')) {\n        setTimeout(() => {\n          checkUserAndLoadData();\n        }, 2000);\n      }\n    }\n  };\n\n  const handleUpdateService = async (serviceData) => {\n    try {\n      \n      const updateData = {\n        title: serviceData.title,\n        description: serviceData.description,\n        service_type: serviceData.service_type,\n        location: serviceData.location || 'Location TBD',\n        price_from: parseFloat(serviceData.price),\n        price_to: parseFloat(serviceData.price),\n        updated_at: new Date().toISOString()\n      };\n      \n\n      \n      const { error } = await supabase\n        .from('marketplace_listings')\n        .update(updateData)\n        .eq('listing_id', editingService.listing_id || editingService.id);\n\n      if (error) {\n        throw new Error(`Database error: ${error.message} (Code: ${error.code})`);\n      }\n      showSuccess('Service updated successfully!', 4000);\n      setShowEditServiceModal(false);\n      setEditingService(null);\n      checkUserAndLoadData(); // Refresh data\n    } catch (error) {\n      showInfo(`Failed to update service: ${error.message}`, 'error');\n    }\n  };\n\n  \n\n\n\n  // View live listing\n  const handleViewListing = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (user) {\n        const listingUrl = `/provider/${user.id}`;\n        window.open(listingUrl, '_blank');\n      } else {\n        showInfo('Please log in to view your listing', 'error');\n      }\n    } catch (error) {\n      showInfo('Unable to open your listing. Please try again.', 'error');\n    }\n  };\n\n\n\n  // Service edit component\n  const ServiceEditForm = ({ service, onClose }) => {\n    const [serviceData, setServiceData] = useState({\n      title: service.name || service.title || '',\n      description: service.description || '',\n      price_from: service.price || service.price_from || '',\n      service_type: service.service_types || service.service_type || ''\n    });\n\n    const handleSubmit = async (e) => {\n      e.preventDefault();\n      \n      try {\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) throw new Error('User not authenticated');\n\n\n\n        const { data, error } = await supabase\n          .from('marketplace_listings')\n          .update({\n            name: serviceData.title,\n            description: serviceData.description,\n            price: parseFloat(serviceData.price_from),\n            service_types: serviceData.service_type,\n            updated_at: new Date().toISOString()\n          })\n          .eq('listing_id', service.listing_id || service.id)\n          .select();\n\n        if (error) throw error;\n\n\n        showSuccess('Service updated successfully!', 4000);\n        onClose();\n        checkUserAndLoadData(); // Refresh data\n        \n              } catch (error) {\n          showInfo(`Failed to update service: ${error.message}`, 'error');\n        }\n    };\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n        <div className=\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-2xl font-bold text-gray-900\">Edit Service</h2>\n              <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 text-2xl\">Ã—</button>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Service Title *</label>\n              <input\n                type=\"text\"\n                required\n                value={serviceData.title}\n                onChange={(e) => setServiceData({...serviceData, title: e.target.value})}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"e.g., Mobile Health Check\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Service Type *</label>\n              <select\n                required\n                value={serviceData.service_type}\n                onChange={(e) => setServiceData({...serviceData, service_type: e.target.value})}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              >\n                <option value=\"\">Select service type</option>\n                {getServiceOptions(providerData?.provider_type).map((service) => (\n                  <option key={service.value} value={service.value}>\n                    {service.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Price *\n                {serviceData.service_type?.includes('LuniTriage') && (\n                  <span className=\"text-sm text-blue-600 ml-2\">(Fixed pricing)</span>\n                )}\n              </label>\n              <input\n                type=\"number\"\n                required\n                min=\"0\"\n                step=\"0.01\"\n                value={serviceData.price_from}\n                onChange={(e) => setServiceData({...serviceData, price_from: e.target.value})}\n                disabled={serviceData.service_type?.includes('LuniTriage')}\n                className={`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 ${\n                  serviceData.service_type?.includes('LuniTriage') ? 'bg-gray-100' : ''\n                }`}\n                placeholder=\"50.00\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n              <textarea\n                value={serviceData.description}\n                onChange={(e) => setServiceData({...serviceData, description: e.target.value})}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows=\"3\"\n                placeholder=\"Describe your service...\"\n              />\n            </div>\n\n            <div className=\"flex justify-end space-x-3 pt-6 border-t border-gray-200\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium\"\n              >\n                <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                </svg>\n                Update Service\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n\n  // Package creation component\n  const PackageForm = ({ isEdit = false, initialData = {}, onClose }) => {\n    const [packageData, setPackageData] = useState({\n      name: initialData.name || '',\n      description: initialData.description || '',\n      selectedServices: initialData.service_ids || [],\n      packagePrice: initialData.package_price || '',\n      isActive: initialData.is_active !== undefined ? initialData.is_active : true\n    });\n\n    const handleServiceToggle = (serviceId) => {\n      setPackageData(prev => ({\n        ...prev,\n        selectedServices: prev.selectedServices.includes(serviceId)\n          ? prev.selectedServices.filter(id => id !== serviceId)\n          : [...prev.selectedServices, serviceId]\n      }));\n    };\n\n    const getOriginalPrice = () => {\n      return getServicesOnly(listings)\n        .filter(service => packageData.selectedServices.includes(service.listing_id || service.id))\n        .reduce((total, service) => total + parseFloat(service.price || service.price_from || 0), 0);\n    };\n\n    const getSavings = () => {\n      const original = getOriginalPrice();\n      const packagePrice = parseFloat(packageData.packagePrice || 0);\n      return original - packagePrice;\n    };\n\n    const handleSubmit = async (e) => {\n      e.preventDefault();\n      \n      if (!isEdit && packageData.selectedServices.length < 2) {\n        showInfo('Please select at least 2 services for a package', 'error');\n        return;\n      }\n\n      try {\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) throw new Error('User not authenticated');\n\n        // Check free tier limits (3 packages for free users)\n        const currentPackageCount = packages.length;\n        const currentProviderData = providerData || profile || {};\n        // Default to free tier if no subscription plan is set\n        const subscriptionPlan = currentProviderData?.subscription_plan;\n        const isFreeTier = !subscriptionPlan || subscriptionPlan === 'free' || subscriptionPlan !== 'premium';\n\n        console.log('Package creation limit check:', {\n          currentPackageCount,\n          FREE_PACKAGE_LIMIT,\n          isFreeTier,\n          isEdit,\n          subscription_plan: currentProviderData?.subscription_plan\n        });\n\n        // Note: For new packages, limit check is now done before opening modal (handleAddNewPackage)\n        // This check is kept only for edge cases or if someone bypasses the button handler\n\n        const packageInfo = {\n          listing_type: 'package',\n          listing_id: isEdit ? initialData.id : window.crypto?.randomUUID?.() || Math.random().toString(36),\n          name: packageData.name,\n          description: packageData.description,\n          price: parseFloat(packageData.packagePrice),\n          service_types: 'package',\n          provider_email: user.email,\n          provider_name: profile?.full_name || providerData?.name || user.email?.split('@')[0],\n          provider_type: profile?.provider_type || providerData?.provider_type || 'Vet Nurse',\n          active: packageData.isActive,\n          verified: false,\n          rating: 0.0,\n          reviews_count: 0,\n          created_at: isEdit ? undefined : new Date().toISOString(),\n          updated_at: new Date().toISOString()\n        };\n\n        // Save to marketplace_listings\n        let savedPackage;\n        if (isEdit) {\n          const { data, error } = await supabase\n            .from('marketplace_listings')\n            .update(packageInfo)\n            .eq('listing_id', initialData.id)\n            .eq('provider_email', user.email)\n            .select()\n            .single();\n\n          if (error) throw error;\n          savedPackage = data;\n        } else {\n          const { data, error } = await supabase\n            .from('marketplace_listings')\n            .insert([packageInfo])\n            .select()\n            .single();\n\n          if (error) throw error;\n          savedPackage = data;\n        }\n\n        // Refresh data to show updated packages\n        checkUserAndLoadData();\n\n        showSuccess(`Package ${isEdit ? 'updated' : 'created'} successfully!`, 4000);\n        onClose();\n        \n      } catch (error) {\n        showInfo('Failed to save package', 'error');\n      }\n    };\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n        <div className=\"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-2xl font-bold text-gray-900\">\n                {isEdit ? 'Edit Package' : 'Create Package'}\n              </h2>\n              <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 text-2xl\">Ã—</button>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Package Name *</label>\n                <input\n                  type=\"text\"\n                  required\n                  value={packageData.name}\n                  onChange={(e) => setPackageData({...packageData, name: e.target.value})}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"e.g., Wellness Package\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Package Price *</label>\n                <input\n                  type=\"number\"\n                  required\n                  min=\"0\"\n                  step=\"0.01\"\n                  value={packageData.packagePrice}\n                  onChange={(e) => setPackageData({...packageData, packagePrice: e.target.value})}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"120.00\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n              <textarea\n                value={packageData.description}\n                onChange={(e) => setPackageData({...packageData, description: e.target.value})}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows=\"3\"\n                placeholder=\"Describe what's included in this package...\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-4\">Select Services *</label>\n              <div className=\"grid grid-cols-1 gap-3\">\n                {getServicesOnly(listings).map((service) => (\n                  <div key={service.listing_id || service.id} className=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50\">\n                    <div className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        id={`package-service-${service.listing_id || service.id}`}\n                        checked={packageData.selectedServices.includes(service.listing_id || service.id)}\n                        onChange={() => handleServiceToggle(service.listing_id || service.id)}\n                        className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                      />\n                      <label htmlFor={`package-service-${service.listing_id || service.id}`} className=\"ml-3 flex-1\">\n                        <div className=\"font-medium text-gray-900\">{service.name || service.title}</div>\n                        <div className=\"text-sm text-gray-500\">{service.description}</div>\n                      </label>\n                    </div>\n                    <div className=\"font-bold text-gray-900\">${service.price || service.price_from}</div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {packageData.selectedServices.length > 0 && (\n              <div className=\"bg-blue-50 rounded-lg p-4\">\n                <div className=\"flex justify-between items-center mb-2\">\n                  <span className=\"font-medium text-gray-900\">Package Summary</span>\n                </div>\n                <div className=\"space-y-1 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span>Original Price:</span>\n                    <span>${getOriginalPrice().toFixed(2)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Package Price:</span>\n                    <span>${parseFloat(packageData.packagePrice || 0).toFixed(2)}</span>\n                  </div>\n                  <div className=\"flex justify-between font-bold text-green-600\">\n                    <span>Customer Saves:</span>\n                    <span>${getSavings().toFixed(2)}</span>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                id=\"package-active\"\n                checked={packageData.isActive}\n                onChange={(e) => setPackageData({...packageData, isActive: e.target.checked})}\n                className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n              />\n              <label htmlFor=\"package-active\" className=\"ml-2 text-sm text-gray-700\">\n                Make this package available to customers\n              </label>\n            </div>\n\n            <div className=\"flex justify-end space-x-3 pt-6 border-t border-gray-200\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={!isEdit && packageData.selectedServices.length < 2}\n                                  className={`inline-flex items-center px-4 py-2 rounded-lg text-white text-sm font-medium ${\n                    (isEdit || packageData.selectedServices.length >= 2)\n                      ? 'bg-blue-600 hover:bg-blue-700'\n                      : 'bg-gray-400 cursor-not-allowed'\n                  }`}\n              >\n                <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                </svg>\n                {isEdit ? 'Update Package' : 'Create Package'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n\n  // Quick service cards component\n  const QuickServiceCards = ({ onClose }) => {\n    const [selectedServices, setSelectedServices] = useState([]);\n    const [customPrices, setCustomPrices] = useState({});\n\n    // Role-based available services\n    const getAvailableServices = (providerType) => {\n      const baseServices = [\n        {\n          id: 'consultation',\n          title: 'Mobile Consultation',\n          description: 'Professional consultation at your location',\n          defaultPrice: providerType === 'veterinarian' ? 120.00 : 75.00,\n          category: 'Mobile Consultation',\n          icon: 'ðŸ©º',\n          preset: false\n        },\n        {\n          id: 'emergency',\n          title: 'Mobile Emergency Care',\n          description: 'Emergency care service at your location',\n          defaultPrice: providerType === 'veterinarian' ? 200.00 : 150.00,\n          category: 'Mobile Emergency Care',\n          icon: 'ðŸš¨',\n          preset: false\n        }\n      ];\n\n      if (providerType === 'veterinarian') {\n        return [\n          ...baseServices,\n          {\n            id: 'clinicConsult',\n            title: 'Clinic Consultation',\n            description: 'In-clinic veterinary consultation',\n            defaultPrice: 80.00,\n            category: 'Clinic Consultation',\n            icon: 'ðŸ¥',\n            preset: false\n          },\n          {\n            id: 'surgery',\n            title: 'Surgery Services',\n            description: 'Surgical procedures and operations',\n            defaultPrice: 300.00,\n            category: 'Surgery Services',\n            icon: 'âš•ï¸',\n            preset: false\n          },\n          {\n            id: 'diagnostic',\n            title: 'Diagnostic Testing',\n            description: 'Laboratory tests and diagnostic procedures',\n            defaultPrice: 150.00,\n            category: 'Diagnostic Testing',\n            icon: 'ðŸ”¬',\n            preset: false\n          },\n          {\n            id: 'preventive',\n            title: 'Preventive Care',\n            description: 'Wellness exams and preventive treatments',\n            defaultPrice: 100.00,\n            category: 'Preventive Care',\n            icon: 'ðŸ›¡ï¸',\n            preset: false\n          }\n        ];\n      }\n\n      return [\n        ...baseServices,\n        {\n          id: 'lunisoap',\n          title: 'LuniTriage SOAP Review',\n          description: 'Professional assessment of SOAP notes within 2 hours',\n          defaultPrice: 4.99,\n          category: 'LuniTriage SOAP Review',\n          icon: 'ðŸ“‹',\n          preset: true\n        },\n        {\n          id: 'luniconsult', \n          title: 'LuniTriage Consultation',\n          description: '15-minute consultation to assess if vet visit needed',\n          defaultPrice: 14.99,\n          category: 'LuniTriage Consultation', \n          icon: 'ðŸ’¬',\n          preset: true\n        },\n        {\n          id: 'nailtrim',\n          title: 'Mobile Nail Trimming',\n          description: 'Professional nail trimming service at your location',\n          defaultPrice: 50.00,\n          category: 'Mobile Nail Trimming',\n          icon: 'âœ‚ï¸',\n          preset: false\n        },\n        {\n          id: 'healthcheck',\n          title: 'Mobile Health Check',\n          description: 'Comprehensive health assessment at your home',\n          defaultPrice: 75.00,\n          category: 'Mobile Health Check',\n          icon: 'ðŸ¥',\n          preset: false\n        },\n        {\n          id: 'vaccination',\n          title: 'Mobile Vaccination',\n          description: 'Vaccination service at your location',\n          defaultPrice: 60.00,\n          category: 'Mobile Vaccination',\n          icon: 'ðŸ’‰',\n          preset: false\n        }\n      ];\n    };\n\n    const availableServices = getAvailableServices(providerData?.provider_type);\n\n    const handleServiceToggle = (service) => {\n      if (selectedServices.find(s => s.id === service.id)) {\n        setSelectedServices(selectedServices.filter(s => s.id !== service.id));\n        const newPrices = { ...customPrices };\n        delete newPrices[service.id];\n        setCustomPrices(newPrices);\n      } else {\n        setSelectedServices([...selectedServices, service]);\n        setCustomPrices({\n          ...customPrices,\n          [service.id]: service.defaultPrice\n        });\n      }\n    };\n\n    const handlePriceChange = (serviceId, price) => {\n      setCustomPrices({\n        ...customPrices,\n        [serviceId]: parseFloat(price) || 0\n      });\n    };\n\n    const handleSubmitServices = async () => {\n      if (selectedServices.length === 0) {\n        showInfo('Please select at least one service', 'error');\n        return;\n      }\n\n      try {\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) throw new Error('User not authenticated');\n\n        // Check free tier limits BEFORE creating services\n        const currentProviderData = providerData || profile || {};\n        const currentServiceCount = getServicesOnly(listings).length;\n        const subscriptionPlan = currentProviderData?.subscription_plan;\n        const isFreeTier = !subscriptionPlan || subscriptionPlan === 'free' || subscriptionPlan !== 'premium';\n        \n        console.log('Bulk service creation limit check:', {\n          currentServiceCount,\n          selectedServicesCount: selectedServices.length,\n          totalAfterCreation: currentServiceCount + selectedServices.length,\n          FREE_SERVICE_LIMIT,\n          isFreeTier,\n          subscriptionPlan\n        });\n\n        if (isFreeTier && (currentServiceCount + selectedServices.length) > FREE_SERVICE_LIMIT) {\n          setPayPerListingType('service');\n          setShowPayPerListingModal(true);\n          return;\n        }\n\n        const currentProviderDataForInsert = profile || {};\n        \n        // Create all selected services\n        const servicePromises = selectedServices.map(service => {\n          const insertData = {\n            listing_type: 'service',\n            listing_id: window.crypto?.randomUUID?.() || Math.random().toString(36),\n            name: service.title,\n            description: service.description,\n            service_types: service.category,\n            price: customPrices[service.id] || service.defaultPrice,\n            provider_name: currentProviderDataForInsert?.full_name || user.email,\n            provider_type: currentProviderDataForInsert?.provider_type || 'vet_nurse',\n            provider_email: user.email,\n            provider_phone: currentProviderDataForInsert?.phone || 'N/A',\n            active: true,\n            verified: false, // Will be set to true when going live\n            rating: 0.0,\n            reviews_count: 0,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n          };\n\n          return supabase.from('marketplace_listings').insert(insertData).select();\n        });\n\n        const results = await Promise.all(servicePromises);\n        const errors = results.filter(r => r.error);\n        \n        if (errors.length > 0) {\n          throw new Error(`Failed to create ${errors.length} services`);\n        }\n\n        showSuccess(`âœ… ${selectedServices.length} services created! Ready to go live.`, 4000);\n        onClose();\n        checkUserAndLoadData(); // Reload data\n        \n      } catch (error) {\n        showInfo('Failed to create services: ' + error.message, 'error');\n      }\n    };\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n        <div className=\"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-2xl font-bold text-gray-900\">Add Services</h2>\n              <button\n                onClick={onClose}\n                className=\"text-gray-400 hover:text-gray-600 text-2xl\"\n              >\n                Ã—\n              </button>\n            </div>\n            <p className=\"text-gray-600 mt-2\">Select services you want to offer and set your prices</p>\n          </div>\n\n          <div className=\"p-6\">\n            <div className=\"grid md:grid-cols-2 gap-4\">\n              {availableServices.map(service => {\n                const isSelected = selectedServices.find(s => s.id === service.id);\n                const currentPrice = customPrices[service.id] || service.defaultPrice;\n                \n                return (\n                  <div \n                    key={service.id}\n                    className={`border-2 rounded-xl p-4 cursor-pointer transition-all ${\n                      isSelected \n                        ? 'border-blue-500 bg-blue-50' \n                        : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                    onClick={() => handleServiceToggle(service)}\n                  >\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center mb-2\">\n                          <span className=\"text-2xl mr-3\">{service.icon}</span>\n                          <h3 className=\"font-semibold text-gray-900\">{service.title}</h3>\n                          {service.preset && (\n                            <span className=\"ml-2 bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full\">\n                              LuniTriage\n                            </span>\n                          )}\n                        </div>\n                        <p className=\"text-sm text-gray-600 mb-3\">{service.description}</p>\n                        \n                        {isSelected && (\n                          <div className=\"flex items-center space-x-2\">\n                            <label className=\"text-sm font-medium text-gray-700\">Price:</label>\n                            <div className=\"flex items-center\">\n                              <span className=\"text-gray-500 mr-1\">$</span>\n                              <input\n                                type=\"number\"\n                                step=\"0.01\"\n                                min=\"0\"\n                                value={currentPrice}\n                                onChange={(e) => handlePriceChange(service.id, e.target.value)}\n                                onClick={(e) => e.stopPropagation()}\n                                className={`w-20 px-2 py-1 border border-gray-300 rounded text-sm ${\n                                  service.preset ? 'bg-gray-100 cursor-not-allowed' : ''\n                                }`}\n                                disabled={service.preset}\n                              />\n                            </div>\n                            {service.preset && (\n                              <span className=\"text-xs text-gray-500\">Fixed price</span>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                      \n                      <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${\n                        isSelected \n                          ? 'border-blue-500 bg-blue-500' \n                          : 'border-gray-300'\n                      }`}>\n                        {isSelected && <span className=\"text-white text-sm\">âœ“</span>}\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n\n            <div className=\"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200\">\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmitServices}\n                disabled={selectedServices.length === 0}\n                className={`inline-flex items-center px-4 py-2 rounded-lg text-white text-sm font-medium ${\n                  selectedServices.length > 0\n                    ? 'bg-blue-600 hover:bg-blue-700'\n                    : 'bg-gray-400 cursor-not-allowed'\n                }`}\n              >\n                <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                </svg>\n                Add {selectedServices.length} Service{selectedServices.length !== 1 ? 's' : ''}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'confirmed': return 'bg-green-100 text-green-800';\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\n      case 'cancelled': return 'bg-red-100 text-red-800';\n      case 'completed': return 'bg-[#E5F4F1] text-[#4A9A64]';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  \n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600 font-montserrat\">Loading vet nurse dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Sidebar navigation items\n  const handleSaveProfile = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        showInfo('User not authenticated', 'error');\n        return;\n      }\n\n      // Update providers table (note: name/full_name and years_experience are not updated as they are verified)\n      // Only update fields that are commonly available in the providers table\n      const updateData = {};\n      \n      if (profileForm.phone) updateData.phone = profileForm.phone;\n      if (profileForm.address) updateData.address = profileForm.address;\n      if (profileForm.description) updateData.description = profileForm.description;\n      \n      // Try to update additional fields that might exist\n      if (profileForm.serviceAreas) updateData.service_areas = profileForm.serviceAreas;\n      if (profileForm.maxTravelDistance) updateData.max_travel_distance = profileForm.maxTravelDistance;\n      if (profileForm.profilePicture) updateData.profile_picture = profileForm.profilePicture;\n      \n      // First check if provider record exists\n      const { data: existingProvider, error: checkError } = await supabase\n        .from('providers')\n        .select('id')\n        .eq('id', user.id)\n        .single();\n        \n      if (checkError || !existingProvider) {\n        showInfo('Provider record not found. Please complete your provider registration first.', 'error');\n        return;\n      }\n      \n      const { error: providerError } = await supabase\n        .from('providers')\n        .update(updateData)\n        .eq('id', user.id);\n\n      if (providerError) {\n        // If the error is due to missing columns, try with just the basic fields\n        if (providerError.message && providerError.message.includes('column')) {\n          const basicUpdateData = {};\n          if (profileForm.phone) basicUpdateData.phone = profileForm.phone;\n          if (profileForm.address) basicUpdateData.address = profileForm.address;\n          if (profileForm.description) basicUpdateData.description = profileForm.description;\n          \n          const { error: basicProviderError } = await supabase\n            .from('providers')\n            .update(basicUpdateData)\n            .eq('id', user.id);\n            \n          if (basicProviderError) {\n            showInfo(`Failed to update provider information: ${basicProviderError.message}`, 'error');\n            return;\n          }\n        } else {\n          showInfo(`Failed to update provider information: ${providerError.message}`, 'error');\n          return;\n        }\n      }\n\n      // Also update the profiles table for user profile data\n      const profileUpdateData = {};\n      if (profileForm.fullName) profileUpdateData.full_name = profileForm.fullName;\n      if (profileForm.phone) profileUpdateData.phone = profileForm.phone;\n      \n      if (Object.keys(profileUpdateData).length > 0) {\n        const { error: profileUpdateError } = await supabase\n          .from('profiles')\n          .update(profileUpdateData)\n          .eq('id', user.id);\n          \n        if (profileUpdateError) {\n          showInfo(`Warning: Provider updated but profile update failed: ${profileUpdateError.message}`, 'warning');\n        }\n      }\n\n      // Small delay to ensure database writes are committed\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      // Reset form initialization flag so it can be repopulated with fresh data\n      setFormInitialized(false);\n      \n      // Refresh data\n      await checkUserAndLoadData();\n      \n      showSuccess('Profile updated successfully!', 4000);\n\n    } catch (error) {\n      showInfo('Failed to save profile changes', 'error');\n    }\n  };\n\n  const handleProfilePictureChange = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      showInfo('Please select an image file', 'error');\n      return;\n    }\n\n    // Validate file size (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      showInfo('Image must be smaller than 5MB', 'error');\n      return;\n    }\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        showInfo('User not authenticated', 'error');\n        return;\n      }\n\n      // Create a unique filename\n      const fileExt = file.name.split('.').pop();\n      const fileName = `${user.id}-profile.${fileExt}`;\n\n      // Upload to Supabase Storage\n      const { data, error } = await supabase.storage\n        .from('profile-pictures')\n        .upload(fileName, file, {\n          upsert: true // Replace if exists\n        });\n\n      if (error) {\n        // Upload error occurred\n        showInfo('Failed to upload image', 'error');\n        return;\n      }\n\n      // Get the public URL\n      const { data: { publicUrl } } = supabase.storage\n        .from('profile-pictures')\n        .getPublicUrl(fileName);\n\n      // Update the form state\n      setProfileForm(prev => ({ ...prev, profilePicture: publicUrl }));\n      \n      showInfo('Profile picture uploaded successfully!', 'success');\n\n    } catch (error) {\n      // Error uploading profile picture\n      showInfo('Failed to upload profile picture', 'error');\n    }\n  };\n\n  // Get dynamic sidebar items based on provider type\n  const sidebarItems = getNavigationSectionsLocal(providerData?.provider_type);\n\n\n\n  // Render functions for each section\n  const renderOverviewSection = () => (\n    <div className=\"space-y-6\">\n      {/* Header with quick actions */}\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"lg:block hidden\">\n            <p className=\"text-xl font-bold text-gray-900\">Welcome back, {profile?.full_name || 'Vet Nurse'}</p>\n          </div>\n          <button\n            onClick={() => setShowAvailabilityModal(true)}\n            className=\"hidden lg:flex px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors items-center text-sm sm:text-base\"\n          >\n            <span className=\"hidden sm:inline\">Manage Schedule</span>\n            <span className=\"sm:hidden\">Schedule</span>\n          </button>\n        </div>\n\n        {/* Quick Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div className=\"bg-green-50 p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-green-600 text-sm font-medium\">Total Cases</p>\n                <p className=\"text-2xl font-bold text-green-900\">{triageCases?.length || 0}</p>\n              </div>\n              <div className=\"w-8 h-8 text-green-600\">\n                <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-blue-50 p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-blue-600 text-sm font-medium\">My Services</p>\n                <p className=\"text-2xl font-bold text-blue-900\">{stats.totalListings || 0}</p>\n              </div>\n              <div className=\"w-8 h-8 text-blue-600\">\n                <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\" />\n                </svg>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-purple-50 p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-purple-600 text-sm font-medium\">Service Packages</p>\n                <p className=\"text-2xl font-bold text-purple-900\">{packages?.length || 0}</p>\n              </div>\n              <div className=\"w-8 h-8 text-purple-600\">\n                <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\n                </svg>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-orange-50 p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-orange-600 text-sm font-medium\">Total Bookings</p>\n                <p className=\"text-2xl font-bold text-orange-900\">{bookings?.length || 0}</p>\n              </div>\n              <div className=\"w-8 h-8 text-orange-600\">\n                <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                </svg>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* First Row - 2 containers */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Marketplace Summary */}\n        <MarketplaceSummary \n          listings={listings}\n          packages={packages}\n          products={products}\n          setActiveSection={setActiveSection}\n        />\n\n        {/* Upcoming Bookings Summary */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900\">Upcoming Bookings</h3>\n            <button \n              onClick={() => setActiveSection('schedule')} \n              className=\"text-blue-600 hover:text-blue-800 text-sm font-medium\"\n            >\n              View All â†’\n            </button>\n          </div>\n              {bookings.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {bookings\n                    .filter(booking => new Date(booking.appointment_date) >= new Date())\n                    .sort((a, b) => new Date(a.appointment_date) - new Date(b.appointment_date))\n                    .slice(0, 3)\n                    .map((booking, index) => (\n                    <div key={index} className=\"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">{booking.pet_name}</p>\n                        <p className=\"text-sm text-gray-600\">\n                          {booking.marketplace_listings?.name || booking.marketplace_listings?.service_types}\n                        </p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-sm font-medium text-gray-900\">\n                          {new Date(booking.appointment_date).toLocaleDateString()}\n                        </p>\n                        <p className=\"text-xs text-gray-500\">\n                          {booking.appointment_time || 'Time TBD'}\n                        </p>\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                          booking.status === 'confirmed' ? 'bg-green-100 text-green-800' :\n                          booking.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                          'bg-blue-100 text-blue-800'\n                        }`}>\n                          {booking.status || 'Pending'}\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                  {bookings.filter(booking => new Date(booking.appointment_date) >= new Date()).length > 3 && (\n                    <p className=\"text-sm text-gray-500 text-center pt-2\">\n                      +{bookings.filter(booking => new Date(booking.appointment_date) >= new Date()).length - 3} more bookings\n                    </p>\n                  )}\n                </div>\n              ) : (\n                <div className=\"text-center py-4\">\n                  <p className=\"text-gray-500 mb-2\">No upcoming bookings</p>\n                  <p className=\"text-sm text-gray-400\">\n                    Customer bookings will appear here\n                  </p>\n                </div>\n              )}\n        </div>\n      </div>\n\n      {/* Second Row - 2 containers */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Cases Summary */}\n        {true && (\n          <CasesSummary \n            triageCases={triageCases}\n            setActiveSection={setActiveSection}\n          />\n        )}\n\n        {/* Quick Actions */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h3>\n        <div className=\"space-y-3\">\n          <button \n            onClick={() => setActiveSection('marketplace')} \n            className=\"w-full flex items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors text-left\"\n          >\n                  <div className=\"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center mr-3\">\n                    <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <div className=\"font-medium text-gray-900\">Manage Marketplace</div>\n                    <div className=\"text-sm text-gray-600\">Services & packages</div>\n                  </div>\n                </button>\n                \n                {/* Cases & Triage Quick Actions - For Vets and existing providers */}\n                {(providerData?.provider_type === 'vet_nurse' || !providerData?.provider_type) && (\n                <>\n                <button \n                  onClick={() => setActiveSection('cases')} \n                  className=\"w-full flex items-center p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors text-left\"\n                >\n                  <div className=\"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center mr-3\">\n                    <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <div className=\"font-medium text-gray-900\">Cases</div>\n                    <div className=\"text-sm text-gray-600\">All cases with triage assessment</div>\n                  </div>\n                </button>\n\n                                 {/* Pending Assessment Quick Access */}\n                 {triageCases.filter(c => c.status === 'pending').length > 0 && (\n                 <button \n                   onClick={() => {\n                     setActiveSection('cases');\n                     // Could add logic to automatically switch to pending filter\n                   }} \n                   className=\"w-full flex items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors text-left\"\n                 >\n                   <div className=\"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center mr-3\">\n                     <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                       <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                     </svg>\n                   </div>\n                   <div>\n                     <div className=\"font-medium text-gray-900\">Pending Assessment</div>\n                     <div className=\"text-sm text-gray-600\">{triageCases.filter(c => c.status === 'pending').length} cases need triage</div>\n                   </div>\n                 </button>\n                 )}\n                </>\n                )}\n                \n                <button \n                  onClick={() => setActiveSection('schedule')} \n                  className=\"w-full flex items-center p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors text-left\"\n                >\n                  <div className=\"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center mr-3\">\n                    <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <div className=\"font-medium text-gray-900\">View Bookings</div>\n                    <div className=\"text-sm text-gray-600\">Manage appointments</div>\n                  </div>\n                </button>\n\n                <button \n                  onClick={() => setActiveSection('messages')} \n                  className=\"w-full flex items-center p-3 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors text-left\"\n                >\n                  <div className=\"w-8 h-8 bg-orange-500 rounded-md flex items-center justify-center mr-3\">\n                    <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <div className=\"font-medium text-gray-900\">Open Messages</div>\n                    <div className=\"text-sm text-gray-600\">View client messages</div>\n                  </div>\n                </button>\n              </div>\n        </div>\n      </div>\n\n      {/* Veterinarian-specific sections */}\n      {providerData?.provider_type === 'veterinarian' && (\n        <React.Fragment>\n          {/* Clinic Overview */}\n          <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">ðŸ¥ Clinic Overview</h3>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-gray-600\">Today's Appointments</span>\n                  <span className=\"font-medium text-gray-900\">{bookings.filter(b => new Date(b.created_at).toDateString() === new Date().toDateString()).length}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-gray-600\">Surgeries Scheduled</span>\n                  <span className=\"font-medium text-gray-900\">0</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-gray-600\">Emergency Cases</span>\n                  <span className=\"font-medium text-gray-900\">0</span>\n                </div>\n              </div>\n          </div>\n\n          {/* Recent Procedures */}\n          <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">âš•ï¸ Recent Procedures</h3>\n            <div className=\"text-center py-4\">\n                <p className=\"text-gray-500 mb-2\">No recent procedures</p>\n                <p className=\"text-sm text-gray-400\">\n                  Completed surgeries and treatments will appear here\n                </p>\n              </div>\n          </div>\n        </React.Fragment>\n      )}\n    </div>\n  );\n\n  const renderServicesSection = () => (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n      <div className=\"px-6 py-4 border-b border-gray-200\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h3 className=\"text-lg font-medium text-gray-900\">My Services</h3>\n            <p className=\"text-sm text-gray-600 mt-1\">Manage your service offerings and create service packages</p>\n\n          </div>\n\n        </div>\n      </div>\n      \n      <div className=\"p-6\">\n        {/* Services Section */}\n        <div className=\"mb-8\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <h4 className=\"text-md font-medium text-gray-900\">Services</h4>\n              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                {getServicesOnly(listings).length}\n                {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n                  `/${FREE_SERVICE_LIMIT}`\n                }\n              </span>\n              {getServicesOnly(listings).length > 0 && (\n                <button\n                  onClick={() => {\n                    // Navigate to marketplace to show services - more reliable than provider profile\n                    window.open('/marketplace', '_blank');\n                  }}\n                  className=\"inline-flex items-center text-gray-500 hover:text-green-600 text-xs font-medium\"\n                  title=\"View Service Listings\"\n                >\n                  <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                  </svg>\n                  View Listing\n                </button>\n              )}\n            </div>\n            <div className=\"flex items-center gap-2\">\n              {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n                getServicesOnly(listings).length >= FREE_SERVICE_LIMIT && (\n                <span className=\"text-xs text-green-600 font-medium\">\n                  At limit - ${SERVICE_MONTHLY_FEE}/month each\n                </span>\n              )}\n              <button \n                onClick={handleAddNewService} \n                className=\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\"\n              >\n                <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                </svg>\n                Add Service\n              </button>\n            </div>\n          </div>\n                     {getServicesOnly(listings).length > 0 ? (\n             <div className=\"space-y-6\">\n               {getServicesOnly(listings).map((listing) => (\n                                  <div key={listing.listing_id || listing.id} className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                 <div className=\"flex justify-between items-start mb-3\">\n                   <div className=\"flex-1\">\n                     <div className=\"flex items-center gap-2 mb-1\">\n                       <h3 className=\"font-semibold text-gray-900\">{listing.name || listing.title}</h3>\n                        {(listing.service_types || listing.service_type) === 'product' && (\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n                            Product\n                          </span>\n                        )}\n                      </div>\n                      <p className=\"text-sm text-gray-600\">{listing.description}</p>\n                      {listing.brand && (\n                        <p className=\"text-xs text-gray-500 mt-1\">Brand: {listing.brand}</p>\n                      )}\n                    </div>\n                    <div className=\"relative\">\n                      <button \n                        onClick={() => setOpenDropdown(openDropdown === `service-${listing.listing_id || listing.id}` ? null : `service-${listing.listing_id || listing.id}`)}\n                        className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors\"\n                        title=\"More options\"\n                      >\n                        <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"/>\n                        </svg>\n                      </button>\n                      \n                      {openDropdown === `service-${listing.listing_id || listing.id}` && (\n                        <div className=\"absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\n                          <div className=\"py-1\">\n                            <button\n                              onClick={() => {\n                                if ((listing.service_types || listing.service_type) === 'product') {\n                                  // For products, pass the listing data directly since it contains all product info\n                                  const productData = {\n                                    id: listing.listing_id || listing.id,\n                                    name: listing.name,\n                                    description: listing.description,\n                                    price: listing.price,\n                                    category: listing.category,\n                                    brand: listing.brand,\n                                    stock_quantity: listing.stock_quantity,\n                                    stockQuantity: listing.stock_quantity, // For form compatibility\n                                    photos: listing.image_url ? [{ id: 1, url: listing.image_url, name: 'Product Image' }] : [],\n                                    specifications: ''\n                                  };\n                                  setEditingProduct(productData);\n                                  setShowAddProductModal(true);\n                                } else {\n                                  setEditingService(listing);\n                                  setShowEditServiceModal(true);\n                                }\n                                setOpenDropdown(null);\n                              }}\n                              className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                            >\n                              <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                              </svg>\n                              Edit\n                            </button>\n                            <button\n                              onClick={() => {\n                                if ((listing.service_types || listing.service_type) === 'product') {\n                                  const productId = (listing.listing_id || listing.id).replace('product_', '');\n                                  handleDeleteProduct(productId, listing.name || listing.title);\n                                } else {\n                                  handleDeleteService(listing.listing_id || listing.id, listing.name || listing.title);\n                                }\n                                setOpenDropdown(null);\n                              }}\n                              className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                            >\n                              <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                              </svg>\n                              Delete\n                            </button>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {/* Display photos for products */}\n                  {(listing.service_types || listing.service_type) === 'product' && listing.photos && listing.photos.length > 0 && (\n                    <div className=\"mb-3\">\n                      <div className=\"relative\">\n                        <img \n                          src={listing.photos[0].url} \n                          alt={listing.name || listing.title} \n                          className=\"w-full h-24 object-cover rounded-lg\" \n                        />\n                        {listing.photos.length > 1 && (\n                          <div className=\"absolute top-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-full\">\n                            +{listing.photos.length - 1} more\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                  \n                  <div className=\"flex justify-between items-center\">\n                    <p className=\"text-sm text-gray-600\">{(listing.service_types || listing.service_type) === 'product' ? listing.category : (listing.service_types || listing.service_type)}</p>\n                    <div className=\"text-right\">\n                      <p className=\"text-sm font-medium text-gray-900\">${listing.price || listing.price_from}</p>\n                      <p className=\"text-xs text-gray-500\">\n                        You earn: ${getNetEarnings(listing.price || listing.price_from, (listing.service_types || listing.service_type) === 'product')}\n                      </p>\n                      {(listing.service_types || listing.service_type) === 'product' && (\n                        <p className={`text-xs ${(listing.stockQuantity || 0) > 0 ? 'text-green-600' : 'text-red-600'}`}>\n                          {(listing.stockQuantity || 0) > 0 ? `${listing.stockQuantity || 0} in stock` : 'Out of stock'}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-8\">\n              <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <span className=\"text-2xl\">ðŸ¥</span>\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No services yet</h3>\n              <p className=\"text-gray-600 mb-4\">\n                Create your first service to start accepting bookings.\n              </p>\n            </div>\n          )}\n        </div>\n\n               {/* Packages Section */}\n         <div className=\"border-t border-gray-200 pt-8\">\n           <div className=\"flex items-center justify-between mb-4\">\n             <div className=\"flex items-center gap-2\">\n               <h4 className=\"text-md font-medium text-gray-900\">Packages</h4>\n               <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                 {packages.length}\n                 {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n                   `/${FREE_PACKAGE_LIMIT}`\n                 }\n               </span>\n             </div>\n             {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n               packages.length >= FREE_PACKAGE_LIMIT ? (\n               <div className=\"flex items-center gap-2\">\n                 <span className=\"text-xs text-green-600 font-medium\">\n                   At limit - ${PACKAGE_MONTHLY_FEE}/month each\n                 </span>\n                 <button onClick={handleAddNewPackage} className=\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\">\n                   <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                     <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                   </svg>\n                   Create Package\n                 </button>\n               </div>\n             ) : (\n                             <button \n                onClick={handleAddNewPackage} \n                className=\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\"\n              >\n                 <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                   <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                 </svg>\n                 Add Package\n               </button>\n             )}\n           </div>\n           {packages.length > 0 ? (\n             <div className=\"space-y-6\">\n               {packages.map((pkg) => (\n              <div key={pkg.id} className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                    <div className=\"flex justify-between items-start mb-4\">\n                      <div>\n                        <h3 className=\"font-semibold text-gray-900\">{pkg.name}</h3>\n                        <p className=\"text-sm text-gray-600 mt-1\">{pkg.description}</p>\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                          pkg.is_active ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n                        }`}>\n                          {pkg.is_active ? 'Active' : 'Inactive'}\n                        </span>\n                        <div className=\"relative\">\n                          <button \n                            onClick={() => setOpenDropdown(openDropdown === `package-${pkg.id}` ? null : `package-${pkg.id}`)}\n                            className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors\"\n                            title=\"More options\"\n                          >\n                            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"/>\n                            </svg>\n                          </button>\n                          \n                          {openDropdown === `package-${pkg.id}` && (\n                            <div className=\"absolute right-0 mt-2 w-36 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\n                              <div className=\"py-1\">\n                                <button\n                                  onClick={() => {\n                                    setEditingPackage(pkg);\n                                    setShowPackageModal(true);\n                                    setOpenDropdown(null);\n                                  }}\n                                  className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                                >\n                                  <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                                  </svg>\n                                  Edit\n                                </button>\n                                <button\n                                  onClick={async () => {\n                                    try {\n                                      const { data: { user } } = await supabase.auth.getUser();\n                                      if (!user) return;\n\n                                      // Update in Supabase\n                                      const { error } = await supabase\n                                        .from('packages')\n                                        .update({ is_active: !pkg.is_active })\n                                        .eq('id', pkg.id)\n                                        .eq('provider_id', user.id);\n\n                                      if (error) throw error;\n\n                                      // Update local state\n                                      const updatedPackages = packages.map(p => \n                                        p.id === pkg.id ? { ...p, is_active: !p.is_active } : p\n                                      );\n                                      setPackages(updatedPackages);\n                                      setOpenDropdown(null);\n                                    } catch (error) {\n                                      console.error('Error updating package status:', error);\n                                    }\n                                  }}\n                                  className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                                >\n                                  <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d={pkg.is_active ? \"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21\" : \"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"} />\n                                  </svg>\n                                  {pkg.is_active ? 'Deactivate' : 'Activate'}\n                                </button>\n                                <button\n                                  onClick={() => {\n                                    handleDeletePackage(pkg.id, pkg.name);\n                                    setOpenDropdown(null);\n                                  }}\n                                  className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                                >\n                                  <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                                  </svg>\n                                  Delete\n                                </button>\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"space-y-2 mb-4\">\n                      <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-gray-600\">Services included:</span>\n                        <span className=\"font-medium\">{pkg.service_ids?.length || 0}</span>\n                      </div>\n                      <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-gray-600\">Original price:</span>\n                        <span className=\"line-through text-gray-500\">${pkg.original_price?.toFixed(2)}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"font-medium\">Package price:</span>\n                        <span className=\"font-bold text-green-600\">${pkg.package_price?.toFixed(2)}</span>\n                      </div>\n                      <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-green-600\">Customer saves:</span>\n                        <span className=\"font-medium text-green-600\">${pkg.savings?.toFixed(2)}</span>\n                      </div>\n                    </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-8\">\n              <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n                <span className=\"text-2xl\">ðŸ“¦</span>\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No packages created yet</h3>\n              <p className=\"text-gray-600 mb-4\">\n                Create service packages to offer customers better deals and increase your booking value.\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Products Section */}\n        <div className=\"border-t border-gray-200 pt-8\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <h4 className=\"text-md font-medium text-gray-900\">Products</h4>\n              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                {products.length}\n                {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n                  `/${FREE_PRODUCT_LIMIT}`\n                }\n              </span>\n            </div>\n            {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n              products.length >= FREE_PRODUCT_LIMIT ? (\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-xs text-green-600 font-medium\">\n                  At limit - ${PRODUCT_MONTHLY_FEE}/month each\n                </span>\n                <button onClick={() => { setPayPerListingType('product'); setShowPayPerListingModal(true); }} className=\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\">\n                  <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                  </svg>\n                  Add More Products\n                </button>\n              </div>\n            ) : (\n              <button \n                onClick={() => setShowAddProductModal(true)} \n                className=\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\"\n              >\n                <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                </svg>\n                Add Product\n              </button>\n            )}\n          </div>\n          \n          {products.length > 0 ? (\n            <div className=\"space-y-6\">\n              {products.map((product) => (\n                <div key={product.id} className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\">\n                  <div className=\"flex justify-between items-start mb-3\">\n                    <div className=\"flex-1\">\n                      <h4 className=\"font-semibold text-gray-900 mb-1\">{product.name}</h4>\n                      <p className=\"text-sm text-gray-600 mb-2\">{product.brand}</p>\n                      <p className=\"text-xs text-gray-500 line-clamp-2\">{product.description}</p>\n                    </div>\n                    <div className=\"relative ml-2\">\n                      <button \n                        onClick={() => setOpenDropdown(openDropdown === `product-${product.id}` ? null : `product-${product.id}`)}\n                        className=\"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded transition-colors\"\n                      >\n                        <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"/>\n                        </svg>\n                      </button>\n                      {openDropdown === `product-${product.id}` && (\n                        <div className=\"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10\">\n                          <button\n                            onClick={() => {\n                              setEditingProduct(product);\n                              setShowAddProductModal(true);\n                              setOpenDropdown(null);\n                            }}\n                            className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg\"\n                          >\n                            Edit Product\n                          </button>\n                          <button\n                            onClick={() => {\n                              handleDeleteProduct(product.id, product.name);\n                              setOpenDropdown(null);\n                            }}\n                            className=\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-b-lg\"\n                          >\n                            Delete Product\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {product.photos && product.photos.length > 0 && (\n                    <div className=\"mb-3\">\n                      <img \n                        src={product.photos[0].url} \n                        alt={product.name}\n                        className=\"w-full h-32 object-cover rounded-lg\"\n                      />\n                    </div>\n                  )}\n\n                  <div className=\"flex justify-between items-center\">\n                    <div>\n                      <p className=\"text-lg font-bold text-gray-900\">${product.price}</p>\n                      <p className=\"text-xs text-gray-500\">Stock: {product.stockQuantity}</p>\n                    </div>\n                    <span className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\">\n                      {product.category}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-8\">\n              <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n                <span className=\"text-2xl\">ðŸ›ï¸</span>\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No products created yet</h3>\n              <p className=\"text-gray-600 mb-4\">\n                Add veterinary products and supplies to sell to pet parents.\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n      </div>\n    </div>\n  );\n\n\n\n  const renderProductsSection = () => (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n      <div className=\"px-6 py-4 border-b border-gray-200\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h3 className=\"text-lg font-medium text-gray-900\">My Products</h3>\n            <p className=\"text-sm text-gray-600 mt-1\">Sell veterinary products and supplies to pet parents</p>\n            {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n              products.length >= FREE_PRODUCT_LIMIT && (\n              <div className=\"flex items-center gap-2 mt-2\">\n                <span className=\"text-xs text-green-600 font-medium\">\n                  At limit - ${PRODUCT_MONTHLY_FEE}/month each\n                </span>\n                <button onClick={handleAddProduct} className=\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\">\n                  <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                  </svg>\n                  Add Product\n                </button>\n              </div>\n            )}\n          </div>\n          {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n            products.length < FREE_PRODUCT_LIMIT && (\n            <button \n              onClick={() => setShowAddProductModal(true)} \n              className=\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\"\n            >\n              <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n              </svg>\n              Add Product\n            </button>\n          )}\n          {providerData?.subscription_plan && providerData?.subscription_plan !== 'free' && (\n            <button \n              onClick={() => setShowAddProductModal(true)} \n              className=\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\"\n            >\n              <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n              </svg>\n              Add Product\n            </button>\n          )}\n        </div>\n      </div>\n      \n      <div className=\"p-6\">\n\n      {products.length > 0 ? (\n        <div className=\"space-y-6\">\n          {products.map((product) => (\n            <div key={product.id} className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\">\n              <div className=\"flex justify-between items-start mb-3\">\n                <div className=\"flex-1\">\n                  <h4 className=\"font-semibold text-gray-900 mb-1\">{product.name}</h4>\n                  <p className=\"text-sm text-gray-600 mb-2\">{product.brand}</p>\n                  <p className=\"text-xs text-gray-500 line-clamp-2\">{product.description}</p>\n                </div>\n                <div className=\"relative ml-2\">\n                  <button \n                    onClick={() => setOpenDropdown(openDropdown === `product-${product.id}` ? null : `product-${product.id}`)}\n                    className=\"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded transition-colors\"\n                  >\n                    <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"/>\n                    </svg>\n                  </button>\n                  \n                  {openDropdown === `product-${product.id}` && (\n                    <div className=\"absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\n                      <div className=\"py-1\">\n                        <button\n                          onClick={() => {\n                            setEditingProduct(product);\n                            setShowAddProductModal(true);\n                            setOpenDropdown(null);\n                          }}\n                          className=\"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                        >\n                          <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                          </svg>\n                          Edit\n                        </button>\n                        <button\n                          onClick={() => handleDeleteProduct(product.id, product.name)}\n                          className=\"flex items-center w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                        >\n                          <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                          </svg>\n                          Delete\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n                             {product.photos && product.photos.length > 0 && (\n                 <div className=\"mb-3\">\n                   <div className=\"relative\">\n                     <img \n                       src={product.photos[0].url} \n                       alt={product.name} \n                       className=\"w-full h-32 object-cover rounded-lg\" \n                     />\n                     {product.photos.length > 1 && (\n                       <div className=\"absolute top-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-full\">\n                         +{product.photos.length - 1} more\n                       </div>\n                     )}\n                   </div>\n                 </div>\n               )}\n\n                              <div className=\"space-y-2 mb-3\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-600\">Category:</span>\n                    <span className=\"font-medium capitalize\">{product.category}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-600\">Stock:</span>\n                    <span className={`font-medium ${(product.stockQuantity || 0) > 10 ? 'text-green-600' : (product.stockQuantity || 0) > 0 ? 'text-orange-600' : 'text-red-600'}`}>\n                      {product.stockQuantity || 0} units\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"font-medium\">Price:</span>\n                    <span className=\"font-bold text-green-600\">${product.price}</span>\n                  </div>\n                </div>\n\n                              <div className=\"flex items-center justify-between\">\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                    (product.stockQuantity || 0) > 0 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                  }`}>\n                    {(product.stockQuantity || 0) > 0 ? 'In Stock' : 'Out of Stock'}\n                  </span>\n                </div>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <div className=\"text-center py-8\">\n          <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n            <svg className=\"w-8 h-8 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z\" />\n            </svg>\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No products added yet</h3>\n          <p className=\"text-gray-600 mb-4\">\n            Start selling veterinary products and supplies to provide additional value to your clients.\n          </p>\n          <button \n            onClick={() => setShowAddProductModal(true)} \n            className=\"inline-flex items-center bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\"\n          >\n            <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n            </svg>\n            Add Your First Product\n          </button>\n        </div>\n      )}\n      </div>\n      </div>\n    </div>\n  );\n\n\n\n      // New case management section for vets\n  const renderCasesSection = (filter = 'all') => (\n    <CaseManager nurseId={user?.id} initialFilter={filter} />\n  );\n\n  const renderScheduleSection = () => (\n    <div className=\"space-y-6\">\n      {/* Schedule Header */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <div className=\"flex justify-between items-center\">\n            <h3 className=\"text-xl font-bold text-gray-900\">Bookings & Availability</h3>\n            <div className=\"flex items-center space-x-3\">\n              <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                Available Today\n              </span>\n              <button className=\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\">\n                <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                </svg>\n                Block Time\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Today's Schedule */}\n        <div className=\"p-6\">\n          <h4 className=\"text-md font-medium text-gray-900 mb-4\">Today - {new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}</h4>\n          \n          <div className=\"space-y-3\">\n            <div className=\"text-center py-8\">\n              <div className=\"text-gray-400 text-4xl mb-4\">ðŸ“…</div>\n              <h4 className=\"text-lg font-medium text-gray-900 mb-2\">No appointments today</h4>\n              <p className=\"text-gray-600 text-sm\">\n                Today's appointments will appear here once they're scheduled\n              </p>\n            </div>\n\n            {/* Available time slot */}\n            <div className=\"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center\">\n                  <svg className=\"w-5 h-5 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium text-gray-900\">Available for bookings</p>\n                  <p className=\"text-xs text-gray-600\">Open time slot</p>\n                </div>\n              </div>\n              <div className=\"text-right\">\n                <p className=\"text-sm font-medium text-gray-900\">4:00 PM - 5:00 PM</p>\n                <p className=\"text-xs text-green-600\">Available</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Weekly Overview */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h4 className=\"text-md font-medium text-gray-900\">This Week</h4>\n        </div>\n        <div className=\"p-6\">\n          <div className=\"grid grid-cols-7 gap-2\">\n            {['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'].map((day, index) => (\n              <div key={day} className=\"text-center\">\n                <div className=\"text-xs font-medium text-gray-500 mb-2\">{day}</div>\n                <div className={`w-full h-16 rounded-lg border-2 border-dashed flex items-center justify-center text-xs ${\n                  index === 2 ? 'border-blue-300 bg-blue-50 text-blue-600' : \n                  index === 4 ? 'border-yellow-300 bg-yellow-50 text-yellow-600' : \n                  'border-gray-300 bg-gray-50 text-gray-500'\n                }`}>\n                  {index === 2 ? '3 appts' : index === 4 ? '2 appts' : 'Available'}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h4 className=\"text-md font-medium text-gray-900\">Quick Actions</h4>\n        </div>\n        <div className=\"p-6\">\n          <div className=\"space-y-4\">\n            <button className=\"flex items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors text-left\">\n              <div className=\"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center mr-3\">\n                <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                </svg>\n              </div>\n              <div>\n                <div className=\"font-medium text-gray-900\">Set Availability</div>\n                <div className=\"text-sm text-gray-600\">Update your working hours</div>\n              </div>\n            </button>\n\n            <button className=\"flex items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors text-left\">\n              <div className=\"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center mr-3\">\n                <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                </svg>\n              </div>\n              <div>\n                <div className=\"font-medium text-gray-900\">Block Time</div>\n                <div className=\"text-sm text-gray-600\">Reserve time slots</div>\n              </div>\n            </button>\n\n            <button className=\"flex items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors text-left\">\n              <div className=\"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center mr-3\">\n                <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                </svg>\n              </div>\n              <div>\n                <div className=\"font-medium text-gray-900\">View All Bookings</div>\n                <div className=\"text-sm text-gray-600\">See upcoming appointments</div>\n              </div>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderMessagesSection = () => (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        {/* Messages Header */}\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <div className=\"flex justify-between items-center\">\n            <h3 className=\"text-xl font-bold text-gray-900\">Messages</h3>\n            <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n              1 unread\n            </span>\n          </div>\n        </div>\n\n        {/* Messages List */}\n        <div className=\"p-6\">\n          <div className=\"text-center py-12\">\n            <div className=\"text-gray-400 text-6xl mb-4\">ðŸ’¬</div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No messages yet</h3>\n            <p className=\"text-gray-600\">\n              Patient messages and communications will appear here\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderAnalyticsSection = () => {\n    // Calculate financial metrics\n    const calculateRevenue = () => {\n      const completedBookings = bookings.filter(b => b.status === 'completed');\n      const serviceRevenue = completedBookings.reduce((total, booking) => {\n        const listing = listings.find(l => l.id === booking.listing_id);\n        if (listing) {\n          const price = parseFloat(listing.price_from || listing.price || 0);\n          const netEarnings = parseFloat(getNetEarnings(price, listing.service_type === 'product'));\n          return total + netEarnings;\n        }\n        return total;\n      }, 0);\n\n      // Estimate product revenue (since we don't have actual sales data)\n      const productRevenue = products.length * 25; // Estimated average monthly revenue per product\n\n      // Package revenue estimation\n      const packageRevenue = packages.filter(p => p.is_active).reduce((total, pkg) => {\n        return total + (pkg.package_price * 2); // Estimated 2 sales per month per package\n      }, 0);\n\n      return {\n        total: serviceRevenue + productRevenue + packageRevenue,\n        services: serviceRevenue,\n        products: productRevenue,\n        packages: packageRevenue\n      };\n    };\n\n    const revenue = calculateRevenue();\n    const thisMonthBookings = bookings.filter(b => {\n      const bookingDate = new Date(b.created_at);\n      const now = new Date();\n      return bookingDate.getMonth() === now.getMonth() && bookingDate.getFullYear() === now.getFullYear();\n    });\n\n    return (\n      <div className=\"space-y-6\">\n        {/* Financial Analytics - Main Container */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n          <div className=\"mb-6\">\n            <h3 className=\"text-xl font-bold text-gray-900\">Financial Analytics</h3>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Track your earnings from services, products, and packages. All figures show net earnings after platform fees.\n            </p>\n          </div>\n\n          {/* Revenue Stats Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div className=\"bg-green-50 p-4 rounded-lg\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-green-600 text-sm font-medium\">Total Earnings</p>\n                  <p className=\"text-2xl font-bold text-green-900\">${revenue.total.toFixed(2)}</p>\n                </div>\n                <div className=\"w-8 h-8 text-green-600\">\n                  <span className=\"text-2xl\">ðŸ’µ</span>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"bg-blue-50 p-4 rounded-lg\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-blue-600 text-sm font-medium\">Service Revenue</p>\n                  <p className=\"text-2xl font-bold text-blue-900\">${revenue.services.toFixed(2)}</p>\n                </div>\n                <div className=\"w-8 h-8 text-blue-600\">\n                  <span className=\"text-2xl\">ðŸ› ï¸</span>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"bg-purple-50 p-4 rounded-lg\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-purple-600 text-sm font-medium\">Product Sales</p>\n                  <p className=\"text-2xl font-bold text-purple-900\">${revenue.products.toFixed(2)}</p>\n                </div>\n                <div className=\"w-8 h-8 text-purple-600\">\n                  <span className=\"text-2xl\">ðŸ“¦</span>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"bg-orange-50 p-4 rounded-lg\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-orange-600 text-sm font-medium\">Package Revenue</p>\n                  <p className=\"text-2xl font-bold text-orange-900\">${revenue.packages.toFixed(2)}</p>\n                </div>\n                <div className=\"w-8 h-8 text-orange-600\">\n                  <span className=\"text-2xl\">ðŸ“‹</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Revenue Breakdown and Performance Metrics - 2 Column Layout */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Revenue Breakdown */}\n          <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n            <h4 className=\"text-lg font-medium text-gray-900 mb-4\">Revenue Breakdown</h4>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-4 h-4 bg-blue-500 rounded-full mr-3\"></div>\n                  <span className=\"text-sm font-medium text-gray-700\">Services</span>\n                </div>\n                <div className=\"text-right\">\n                  <span className=\"text-sm font-bold text-gray-900\">${revenue.services.toFixed(2)}</span>\n                  <div className=\"w-32 bg-gray-200 rounded-full h-2 mt-1\">\n                    <div \n                      className=\"bg-blue-500 h-2 rounded-full\" \n                      style={{ width: `${revenue.total > 0 ? (revenue.services / revenue.total) * 100 : 0}%` }}\n                    ></div>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-4 h-4 bg-purple-500 rounded-full mr-3\"></div>\n                  <span className=\"text-sm font-medium text-gray-700\">Products</span>\n                </div>\n                <div className=\"text-right\">\n                  <span className=\"text-sm font-bold text-gray-900\">${revenue.products.toFixed(2)}</span>\n                  <div className=\"w-32 bg-gray-200 rounded-full h-2 mt-1\">\n                    <div \n                      className=\"bg-purple-500 h-2 rounded-full\" \n                      style={{ width: `${revenue.total > 0 ? (revenue.products / revenue.total) * 100 : 0}%` }}\n                    ></div>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-4 h-4 bg-orange-500 rounded-full mr-3\"></div>\n                  <span className=\"text-sm font-medium text-gray-700\">Packages</span>\n                </div>\n                <div className=\"text-right\">\n                  <span className=\"text-sm font-bold text-gray-900\">${revenue.packages.toFixed(2)}</span>\n                  <div className=\"w-32 bg-gray-200 rounded-full h-2 mt-1\">\n                    <div \n                      className=\"bg-orange-500 h-2 rounded-full\" \n                      style={{ width: `${revenue.total > 0 ? (revenue.packages / revenue.total) * 100 : 0}%` }}\n                    ></div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Performance Metrics */}\n          <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n            <h4 className=\"text-lg font-medium text-gray-900 mb-4\">Performance Metrics</h4>\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-gray-600\">Booking Success Rate</span>\n                <span className=\"text-sm font-bold text-green-600\">\n                  {bookings.length > 0 ? Math.round((bookings.filter(b => b.status === 'completed').length / bookings.length) * 100) : 0}%\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-gray-600\">Average Service Price</span>\n                <span className=\"text-sm font-bold text-gray-900\">\n                  ${listings.length > 0 ? (listings.reduce((sum, l) => sum + parseFloat(l.price_from || 0), 0) / listings.length).toFixed(2) : '0.00'}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-gray-600\">This Month Bookings</span>\n                <span className=\"text-sm font-bold text-blue-600\">{thisMonthBookings.length}</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-gray-600\">Active Listings</span>\n                <span className=\"text-sm font-bold text-gray-900\">{listings.filter(l => l.active).length}</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-gray-600\">Customer Rating</span>\n                <span className=\"text-sm font-bold text-yellow-600\">\n                  {stats.averageRating > 0 ? `${stats.averageRating} â­` : 'No ratings yet'}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Recent Transactions */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n          <h4 className=\"text-lg font-medium text-gray-900 mb-4\">Recent Transactions</h4>\n          {bookings.filter(b => b.status === 'completed').length > 0 ? (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Service</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Customer</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Earnings</th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {bookings.filter(b => b.status === 'completed').slice(0, 5).map((booking) => {\n                    const listing = listings.find(l => l.id === booking.listing_id);\n                    const price = listing ? parseFloat(listing.price_from || listing.price || 0) : 0;\n                    const earnings = listing ? getNetEarnings(price, listing.service_type === 'product') : '0.00';\n                    \n                    return (\n                      <tr key={booking.id}>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                          {booking.consultation_type || 'Service'}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                          {booking.customer_name || 'Customer'}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                          {new Date(booking.created_at).toLocaleDateString()}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600\">\n                          ${earnings}\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"text-center py-8\">\n              <span className=\"text-4xl mb-4 block\">ðŸ’¸</span>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No completed transactions yet</h3>\n              <p className=\"text-gray-500\">\n                Once you complete services, your earnings will appear here.\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Earning Tips */}\n        <div className=\"bg-gradient-to-r from-blue-50 to-green-50 border border-blue-200 rounded-lg p-6\">\n          <h4 className=\"text-lg font-medium text-gray-900 mb-3\">Tips to Increase Earnings</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"flex items-start space-x-3\">\n              <span className=\"text-blue-500 mt-1\">ðŸ“ˆ</span>\n              <div>\n                <h5 className=\"font-medium text-gray-900\">Create Package Deals</h5>\n                <p className=\"text-sm text-gray-600\">Bundle services together for higher-value bookings</p>\n              </div>\n            </div>\n            <div className=\"flex items-start space-x-3\">\n              <span className=\"text-green-500 mt-1\">â­</span>\n              <div>\n                <h5 className=\"font-medium text-gray-900\">Maintain High Ratings</h5>\n                <p className=\"text-sm text-gray-600\">Better ratings lead to more bookings and higher prices</p>\n              </div>\n            </div>\n            <div className=\"flex items-start space-x-3\">\n              <span className=\"text-purple-500 mt-1\">ðŸ›ï¸</span>\n              <div>\n                <h5 className=\"font-medium text-gray-900\">Add Products</h5>\n                <p className=\"text-sm text-gray-600\">Sell veterinary products for additional passive income</p>\n              </div>\n            </div>\n            <div className=\"flex items-start space-x-3\">\n              <span className=\"text-orange-500 mt-1\">ðŸ“…</span>\n              <div>\n                <h5 className=\"font-medium text-gray-900\">Update Availability</h5>\n                <p className=\"text-sm text-gray-600\">More availability means more booking opportunities</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const renderProfileSection = () => {\n    return (\n      <div className=\"space-y-6\">\n        {/* Profile Information */}\n        <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h3 className=\"text-xl font-bold text-gray-900\">Profile Information</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Manage your public profile and contact details</p>\n        </div>\n        <div className=\"p-6\">\n          {/* Profile Picture Section */}\n          <div className=\"mb-6 flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"relative\">\n                <div className=\"w-16 h-16 rounded-full overflow-hidden bg-gray-200\">\n                  {profileForm.profilePicture ? (\n                    <img \n                      src={profileForm.profilePicture} \n                      alt=\"Profile\" \n                      className=\"w-full h-full object-cover\"\n                      onError={(e) => {\n                        e.target.style.display = 'none';\n                        e.target.nextSibling.style.display = 'flex';\n                      }}\n                    />\n                  ) : null}\n                  <div \n                    className={`w-full h-full flex items-center justify-center text-gray-400 ${profileForm.profilePicture ? 'hidden' : 'flex'}`}\n                    style={{ display: profileForm.profilePicture ? 'none' : 'flex' }}\n                  >\n                    <span className=\"text-xl\">ðŸ‘¤</span>\n                  </div>\n                </div>\n              </div>\n                             <div>\n                 <h4 className=\"font-medium text-gray-900\">{profileForm.fullName || 'Your Name'}</h4>\n                 <p className=\"text-sm text-gray-600\">Profile Picture â€¢ Verified User</p>\n               </div>\n            </div>\n            <div className=\"relative\">\n              <button \n                onClick={() => setOpenDropdown(openDropdown === 'profile-pic' ? null : 'profile-pic')}\n                className=\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full\"\n              >\n                <span className=\"text-lg\">â‹®</span>\n              </button>\n              {openDropdown === 'profile-pic' && (\n                <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200\">\n                  <div className=\"py-1\">\n                    <button \n                      onClick={() => {\n                        document.getElementById('profile-picture-input').click();\n                        setOpenDropdown(null);\n                      }}\n                      className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                    >\n                      <span className=\"mr-3\">ðŸ“·</span>\n                      Upload Photo\n                    </button>\n                    {profileForm.profilePicture && (\n                      <button \n                        onClick={() => {\n                          setProfileForm(prev => ({ ...prev, profilePicture: '' }));\n                          setOpenDropdown(null);\n                        }}\n                        className=\"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100\"\n                      >\n                        <span className=\"mr-3\">ðŸ—‘ï¸</span>\n                        Remove Photo\n                      </button>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n            <input \n              id=\"profile-picture-input\"\n              type=\"file\" \n              accept=\"image/*\"\n              onChange={handleProfilePictureChange}\n              className=\"hidden\"\n            />\n          </div>\n\n          <div className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Full Name</label>\n              <input \n                type=\"text\" \n                value={profileForm.fullName || ''} \n                readOnly\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed\"\n                placeholder=\"Verified name cannot be changed\"\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">Name is locked after verification for security</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Email</label>\n              <input \n                type=\"email\" \n                value={profile?.email || user?.email || ''} \n                readOnly\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600\"\n                placeholder=\"Email address\"\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">Email cannot be changed</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Phone Number</label>\n              <input \n                type=\"tel\" \n                value={profileForm.phone} \n                onChange={(e) => setProfileForm(prev => ({ ...prev, phone: e.target.value }))}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"+64279293666\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Address</label>\n              <input \n                type=\"text\" \n                value={profileForm.address} \n                onChange={(e) => setProfileForm(prev => ({ ...prev, address: e.target.value }))}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"2 Heller Road\"\n              />\n            </div>\n          </div>\n          <div className=\"mt-6\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">About/Bio</label>\n            <textarea \n              value={profileForm.description} \n              onChange={(e) => setProfileForm(prev => ({ ...prev, description: e.target.value }))}\n              rows={4}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"Tell customers about yourself and your services...\"\n            />\n          </div>\n\n                      <div className=\"mt-6 pt-4 border-t border-gray-200 flex justify-between items-center\">\n                              <div>\n                  <p className=\"text-sm text-gray-600\">Changes will be reflected across your marketplace listing</p>\n              </div>\n              <button \n                onClick={handleSaveProfile}\n                className=\"inline-flex items-center bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\"\n              >\n                <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\" />\n                </svg>\n                Save Changes\n              </button>\n            </div>\n        </div>\n      </div>\n\n      {/* Business Information */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h3 className=\"text-lg font-medium text-gray-900\">Business Information</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Your professional credentials and status</p>\n        </div>\n        <div className=\"p-6\">\n          <div className=\"space-y-4\">\n            <div className=\"p-4 bg-gray-50 rounded-lg\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-gray-900\">{providerLabels.businessType}</p>\n                                      <p className=\"text-xs text-gray-500\">Vet Nurse Business Type</p>\n                </div>\n                <span className=\"text-lg\">ðŸ©º</span>\n              </div>\n            </div>\n            <div className=\"p-4 bg-green-50 rounded-lg\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-green-700\">Verified</p>\n                  <p className=\"text-xs text-gray-500\">Status</p>\n                </div>\n                <span className=\"w-3 h-3 bg-green-400 rounded-full\"></span>\n              </div>\n            </div>\n            <div className=\"p-4 bg-blue-50 rounded-lg\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-gray-900\">\n                    {providerData?.years_experience || profileForm.yearsOfExperience || 'Not specified'} \n                    {(providerData?.years_experience || profileForm.yearsOfExperience) && ' years'}\n                  </p>\n                  <p className=\"text-xs text-gray-500\">Experience</p>\n                  {/* Experience Level Badge */}\n                  {(providerData?.years_experience || profileForm.yearsOfExperience) && (\n                    <div className=\"mt-1\">\n                      {(() => {\n                        const years = providerData?.years_experience || profileForm.yearsOfExperience;\n                        const experienceLevel = getExperienceLevel(years, providerData?.provider_type);\n                        const colorClasses = {\n                          gray: 'bg-gray-100 text-gray-800',\n                          blue: 'bg-blue-100 text-blue-800', \n                          green: 'bg-green-100 text-green-800',\n                          purple: 'bg-purple-100 text-purple-800',\n                          gold: 'bg-yellow-100 text-yellow-800'\n                        };\n                        return (\n                          <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${colorClasses[experienceLevel.color]}`}>\n                            {experienceLevel.level}\n                          </span>\n                        );\n                      })()}\n                    </div>\n                  )}\n                </div>\n                <span className=\"text-lg\">â­</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Service Areas */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h3 className=\"text-lg font-medium text-gray-900\">Service Areas</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">Define where you provide services</p>\n        </div>\n        <div className=\"p-6\">\n          <div className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Cities/Areas You Serve</label>\n              <input \n                type=\"text\" \n                value={profileForm.serviceAreas} \n                onChange={(e) => setProfileForm(prev => ({ ...prev, serviceAreas: e.target.value }))}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"Auckland, Hamilton, Tauranga\"\n              />\n              <p className=\"text-xs text-gray-500 mt-1\">Separate multiple areas with commas</p>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Travel Distance</label>\n              <select \n                value={profileForm.maxTravelDistance} \n                onChange={(e) => setProfileForm(prev => ({ ...prev, maxTravelDistance: e.target.value }))}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500\"\n              >\n                <option value=\"10\">10 km</option>\n                <option value=\"25\">25 km</option>\n                <option value=\"50\">50 km</option>\n                <option value=\"100\">100 km</option>\n              </select>\n              <p className=\"text-xs text-gray-500 mt-1\">Maximum distance you'll travel</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Account Settings */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h3 className=\"text-lg font-medium text-gray-900\">Account Settings</h3>\n        </div>\n        <div className=\"p-6\">\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h4 className=\"text-sm font-medium text-gray-900\">Email Notifications</h4>\n                <p className=\"text-sm text-gray-600\">Receive booking and message notifications</p>\n              </div>\n              <label className=\"relative inline-flex items-center cursor-pointer\">\n                <input type=\"checkbox\" className=\"sr-only peer\" defaultChecked />\n                <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n              </label>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h4 className=\"text-sm font-medium text-gray-900\">SMS Notifications</h4>\n                <p className=\"text-sm text-gray-600\">Receive urgent notifications via SMS</p>\n              </div>\n              <label className=\"relative inline-flex items-center cursor-pointer\">\n                <input type=\"checkbox\" className=\"sr-only peer\" />\n                <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n              </label>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h4 className=\"text-sm font-medium text-gray-900\">Marketing Emails</h4>\n                <p className=\"text-sm text-gray-600\">Receive tips and platform updates</p>\n              </div>\n              <label className=\"relative inline-flex items-center cursor-pointer\">\n                <input type=\"checkbox\" className=\"sr-only peer\" defaultChecked />\n                <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Danger Zone */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-l-4 border-red-400\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h3 className=\"text-lg font-medium text-red-600\">Account Management</h3>\n        </div>\n        <div className=\"p-6\">\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h4 className=\"text-sm font-medium text-gray-900\">Temporarily Disable Account</h4>\n                <p className=\"text-sm text-gray-600\">Hide your profile from customers temporarily</p>\n              </div>\n              <button className=\"inline-flex items-center bg-yellow-600 text-white px-3 py-2 rounded-lg hover:bg-yellow-700 text-sm font-medium\">\n                <svg className=\"w-4 h-4 mr-1.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728\" />\n                </svg>\n                Disable\n              </button>\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h4 className=\"text-sm font-medium text-gray-900\">Delete Account</h4>\n                <p className=\"text-sm text-gray-600\">Permanently delete your account and all data</p>\n              </div>\n              <button className=\"inline-flex items-center bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 text-sm font-medium\">\n                <svg className=\"w-4 h-4 mr-1.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                </svg>\n                Delete\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    );\n  };\n\n  const renderMarketplaceSection = () => (\n    <div className=\"space-y-6\">\n      {/* Marketplace Status */}\n              <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Marketplace</h3>\n            <p className=\"text-gray-600 text-sm\">\n              {providerData?.verified \n                ? \"Your profile is live and accepting bookings\" \n                : listings.length > 0 \n                  ? \"Ready to publish your services to the marketplace\"\n                  : \"Create services to get started on the marketplace\"\n              }\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Marketplace Content - Services and Packages */}\n      {renderServicesSection()}\n\n    </div>\n  );\n\n  // Veterinarian-specific render functions\n  const renderPatientsSection = () => (\n    <div className=\"space-y-6\">\n      {/* Patients Header */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <div className=\"flex justify-between items-center\">\n            <h3 className=\"text-xl font-bold text-gray-900\">Patient Management</h3>\n            <button \n              onClick={() => setShowPatientModal(true)} \n              className=\"inline-flex items-center bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 text-sm font-medium\"\n            >\n              <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n              </svg>\n              Add Patient\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {patients.length > 0 ? (\n            <div className=\"space-y-6\">\n              {patients.map((patient) => (\n                <div key={patient.id} className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\">\n                  <div className=\"flex justify-between items-start mb-3\">\n                    <div className=\"flex-1\">\n                      <h4 className=\"font-semibold text-gray-900 mb-1\">{patient.name}</h4>\n                      <p className=\"text-sm text-gray-600 mb-2\">{patient.breed} â€¢ {patient.species}</p>\n                      <p className=\"text-xs text-gray-500 mb-2\">{patient.age} years â€¢ {patient.weight} kg</p>\n                      <p className=\"text-xs text-gray-500\">Owner: {patient.owner_name}</p>\n                    </div>\n                    <div className=\"relative ml-2\">\n                      <button \n                        onClick={() => setOpenDropdown(openDropdown === `patient-${patient.id}` ? null : `patient-${patient.id}`)}\n                        className=\"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded transition-colors\"\n                      >\n                        <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"/>\n                        </svg>\n                      </button>\n                      {openDropdown === `patient-${patient.id}` && (\n                        <div className=\"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10\">\n                          <button\n                            onClick={() => {\n                              setEditingPatient(patient);\n                              setShowPatientModal(true);\n                              setOpenDropdown(null);\n                            }}\n                            className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg\"\n                          >\n                            Edit Patient\n                          </button>\n                          <button\n                            onClick={() => {\n                              handleDeletePatient(patient.id, patient.name);\n                              setOpenDropdown(null);\n                            }}\n                            className=\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-b-lg\"\n                          >\n                            Delete Patient\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">Phone:</span>\n                      <span className=\"font-medium\">{patient.owner_phone}</span>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">Email:</span>\n                      <span className=\"font-medium\">{patient.owner_email}</span>\n                    </div>\n                    {patient.medical_history && (\n                      <div className=\"mt-3 p-2 bg-gray-50 rounded text-xs text-gray-600\">\n                        <strong>Medical History:</strong> {patient.medical_history}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-8\">\n              <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n                <span className=\"text-2xl\">ðŸ•</span>\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No patients added yet</h3>\n              <p className=\"text-gray-600 mb-4\">\n                Start managing your patients by adding their information and medical records.\n              </p>\n              <button \n                onClick={() => setShowPatientModal(true)} \n                className=\"inline-flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm font-medium\"\n              >\n                <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                </svg>\n                Add Your First Patient\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderProceduresSection = () => (\n    <div className=\"space-y-6\">\n      {/* Procedures Header */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <div className=\"flex justify-between items-center\">\n            <h3 className=\"text-xl font-bold text-gray-900\">Procedure Management</h3>\n            <button \n              onClick={() => setShowProcedureModal(true)} \n              className=\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\"\n            >\n              <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                </svg>\n              Schedule Procedure\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {procedures.length > 0 ? (\n            <div className=\"space-y-6\">\n              {procedures.map((procedure) => (\n                <div key={procedure.id} className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\">\n                  <div className=\"flex justify-between items-start mb-3\">\n                    <div className=\"flex-1\">\n                      <h4 className=\"font-semibold text-gray-900 mb-1\">{procedure.procedure_type}</h4>\n                      <p className=\"text-sm text-gray-600 mb-2\">\n                        {new Date(procedure.scheduled_date).toLocaleDateString('en-US', { \n                          weekday: 'long', \n                          year: 'numeric', \n                          month: 'long', \n                          day: 'numeric' \n                        })}\n                      </p>\n                      <p className=\"text-xs text-gray-500 mb-2\">Duration: {procedure.estimated_duration} minutes</p>\n                      <p className=\"text-xs text-gray-500\">Status: {procedure.status}</p>\n                    </div>\n                    <div className=\"relative ml-2\">\n                      <button \n                        onClick={() => setOpenDropdown(openDropdown === `procedure-${procedure.id}` ? null : `procedure-${procedure.id}`)}\n                        className=\"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded transition-colors\"\n                      >\n                        <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"/>\n                        </svg>\n                      </button>\n                      {openDropdown === `procedure-${procedure.id}` && (\n                        <div className=\"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10\">\n                          <button\n                            onClick={() => {\n                              setEditingProcedure(procedure);\n                              setShowProcedureModal(true);\n                              setOpenDropdown(null);\n                            }}\n                            className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg\"\n                          >\n                            Edit Procedure\n                          </button>\n                          <button\n                            onClick={() => {\n                              handleDeleteProcedure(procedure.id, procedure.procedure_type);\n                              setOpenDropdown(null);\n                            }}\n                            className=\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-b-lg\"\n                          >\n                            Delete Procedure\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {procedure.notes && (\n                    <div className=\"mt-3 p-2 bg-gray-50 rounded text-xs text-gray-600\">\n                      <strong>Notes:</strong> {procedure.notes}\n                    </div>\n                  )}\n\n                  <div className=\"mt-3 flex items-center justify-between\">\n                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                      procedure.status === 'scheduled' ? 'bg-blue-100 text-blue-800' :\n                      procedure.status === 'completed' ? 'bg-green-100 text-green-800' :\n                      procedure.status === 'cancelled' ? 'bg-red-100 text-red-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {procedure.status.charAt(0).toUpperCase() + procedure.status.slice(1)}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-8\">\n              <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n                <span className=\"text-2xl\">ðŸ¥</span>\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No procedures scheduled yet</h3>\n              <p className=\"text-gray-600 mb-4\">\n                Schedule medical procedures, surgeries, and diagnostic tests for your patients.\n              </p>\n              <button \n                onClick={() => setShowProcedureModal(true)} \n                className=\"inline-flex items-center bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\"\n              >\n                <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                </svg>\n                Schedule Your First Procedure\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n\n  // Veterinarian-specific functions\n  const handleAddPatient = async (patientData) => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n\n      const newPatient = {\n        provider_id: user.id,\n        name: patientData.name,\n        species: patientData.species,\n        breed: patientData.breed,\n        age: patientData.age,\n        weight: patientData.weight,\n        owner_name: patientData.ownerName,\n        owner_phone: patientData.ownerPhone,\n        owner_email: patientData.ownerEmail,\n        medical_history: patientData.medicalHistory || '',\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      };\n\n      const { data, error } = await supabase\n        .from('patients')\n        .insert([newPatient])\n        .select();\n\n      if (error) throw error;\n\n      setPatients(prev => [...prev, data[0]]);\n      showSuccess('Patient added successfully!', 4000);\n      setShowPatientModal(false);\n      \n    } catch (error) {\n      showError(`Failed to add patient: ${error.message}`);\n    }\n  };\n\n  const handleAddProcedure = async (procedureData) => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n\n      const newProcedure = {\n        provider_id: user.id,\n        patient_id: procedureData.patientId,\n        procedure_type: procedureData.procedureType,\n        scheduled_date: procedureData.scheduledDate,\n        estimated_duration: procedureData.estimatedDuration,\n        notes: procedureData.notes || '',\n        status: 'scheduled',\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      };\n\n      const { data, error } = await supabase\n        .from('procedures')\n        .insert([newProcedure])\n        .select();\n\n      if (error) throw error;\n\n      setProcedures(prev => [...prev, data[0]]);\n      showSuccess('Procedure scheduled successfully!', 4000);\n      setShowProcedureModal(false);\n      \n    } catch (error) {\n      showError(`Failed to schedule procedure: ${error.message}`);\n    }\n  };\n\n  const handleDeletePatient = async (patientId, patientName) => {\n    if (!window.confirm(`Are you sure you want to delete patient \"${patientName}\"? This action cannot be undone.`)) {\n      return;\n    }\n\n    try {\n      const { error } = await supabase\n        .from('patients')\n        .delete()\n        .eq('id', patientId);\n\n      if (error) throw error;\n\n      setPatients(prev => prev.filter(p => p.id !== patientId));\n      showSuccess('Patient deleted successfully!', 4000);\n      \n    } catch (error) {\n      showError(`Failed to delete patient: ${error.message}`);\n    }\n  };\n\n  const handleDeleteProcedure = async (procedureId, procedureType) => {\n    if (!window.confirm(`Are you sure you want to delete procedure \"${procedureType}\"? This action cannot be undone.`)) {\n      return;\n    }\n\n    try {\n      const { error } = await supabase\n        .from('procedures')\n        .delete()\n        .eq('id', procedureId);\n\n      if (error) throw error;\n\n      setProcedures(prev => prev.filter(p => p.id !== procedureId));\n      showSuccess('Procedure deleted successfully!', 4000);\n      \n    } catch (error) {\n      showError(`Failed to delete procedure: ${error.message}`);\n    }\n  };\n\n  const renderActiveSection = () => {\n    switch(activeSection) {\n      case 'overview':\n        return renderOverviewSection();\n      case 'marketplace':\n        return renderMarketplaceSection();\n      case 'services':\n        return renderServicesSection();\n      case 'packages':\n        return renderServicesSection(); // Packages are now part of services\n      case 'cases':\n        return renderCasesSection(); // All cases with LuniTriage severity assessment\n      case 'patients':\n        return renderPatientsSection();\n      case 'procedures':\n        return renderProceduresSection();\n      case 'schedule':\n        return renderScheduleSection();\n      case 'messages':\n        return renderMessagesSection();\n      case 'analytics':\n        return renderAnalyticsSection();\n      case 'profile':\n        return renderProfileSection();\n      default:\n        return renderOverviewSection();\n    }\n  };\n\n  return (\n    <ErrorBoundary message=\"There was an error loading your dashboard. Please try refreshing the page.\">\n      <div className=\"min-h-screen bg-gray-50\">\n        <div className=\"flex flex-col lg:flex-row\">\n          {/* Mobile Header */}\n          <div className=\"lg:hidden bg-white border-b border-gray-200 px-4 py-3\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h4 className=\"text-md font-medium text-gray-900\">Welcome back, {profile?.full_name || 'Vet Nurse'}</h4>\n              </div>\n              <button\n                onClick={() => setShowAvailabilityModal(true)}\n                className=\"px-3 py-1.5 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm\"\n              >\n                Schedule\n              </button>\n            </div>\n          </div>\n\n          {/* Mobile Navigation */}\n          <div className=\"lg:hidden bg-white border-b border-gray-200 px-2 py-2\">\n            <div className=\"flex overflow-x-auto space-x-1 pb-2\">\n              {sidebarItems.map((section) => (\n                <button\n                  key={section.id}\n                  onClick={() => setActiveSection(section.id)}\n                  className={`flex-shrink-0 flex items-center px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${\n                    activeSection === section.id\n                      ? 'bg-green-100 text-green-700'\n                      : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                  }`}\n                >\n                  <span className=\"mr-1.5\">{section.icon}</span>\n                  {section.name}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Desktop Sidebar */}\n          <div className=\"hidden lg:block w-64 bg-white shadow-sm border-r border-gray-200 min-h-screen\">\n            <div className=\"p-6\">\n              <div className=\"mb-6\">\n                <div className=\"flex items-center space-x-3 mb-3\">\n                  <img \n                    src=\"https://wagrmmbkukwblfpfxxcb.supabase.co/storage/v1/object/public/web-img/vet-nurse%20(1).svg\" \n                    alt=\"Vet Nurse\" \n                    className=\"w-10 h-10\"\n                  />\n                  <div className=\"min-w-0 flex-1\">\n                    <h1 className=\"text-lg font-semibold text-gray-900 truncate\">Vet Nurse</h1>\n                    <p className=\"text-sm text-gray-600 truncate\">{profile?.full_name}</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Navigation */}\n              <nav className=\"space-y-2\">\n                {sidebarItems.map((section) => (\n                  <button\n                    key={section.id}\n                    onClick={() => setActiveSection(section.id)}\n                    className={`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${\n                      activeSection === section.id\n                        ? 'bg-green-100 text-green-700'\n                        : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                    }`}\n                  >\n                    <span className=\"mr-3\">{section.icon}</span>\n                    {section.name}\n                  </button>\n                ))}\n              </nav>\n            </div>\n          </div>\n\n          {/* Main Content */}\n          <div className=\"flex-1 p-3 sm:p-4 lg:p-6\">\n            {renderActiveSection()}\n          </div>\n        </div>\n\n        {/* Modals */}\n        {/* Qualification Submission Modal */}\n        {showQualificationForm && (\n        <QualificationForm\n          providerData={providerData}\n          onClose={() => setShowQualificationForm(false)}\n          onSubmissionComplete={handleQualificationSubmissionComplete}\n        />\n      )}\n\n      {/* Availability Modal */}\n      {showAvailabilityModal && (\n        <ProviderAvailability\n          providerId={profile?.id}\n          onClose={() => setShowAvailabilityModal(false)}\n        />\n      )}\n\n              {/* Create Service Modal */}\n        {showCreateServiceModal && (\n          <QuickServiceCards\n            onClose={() => setShowCreateServiceModal(false)}\n          />\n        )}\n\n        {/* Package Modal */}\n        {showPackageModal && (\n          <PackageForm\n            isEdit={!!editingPackage}\n            initialData={editingPackage || {}}\n            onClose={() => {\n              setShowPackageModal(false);\n              setEditingPackage(null);\n            }}\n          />\n        )}\n\n        {/* Service Edit Modal */}\n        {showEditServiceModal && editingService && (\n          <ServiceEditForm\n            service={editingService}\n            onClose={() => {\n              setShowEditServiceModal(false);\n              setEditingService(null);\n            }}\n          />\n        )}\n\n      \n\n      {/* Schedule Modal */}\n      {showScheduleModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h2 className=\"text-2xl font-bold\">Today's Bookings</h2>\n              <button\n                onClick={() => setShowScheduleModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                âœ•\n              </button>\n            </div>\n            \n            <div className=\"space-y-4\">\n              <div className=\"bg-blue-50 p-4 rounded-lg\">\n                <h3 className=\"font-medium text-blue-900\">ðŸ“… Today's Appointments</h3>\n                <p className=\"text-sm text-blue-700 mt-1\">\n                  {new Date().toLocaleDateString('en-AU', { \n                    weekday: 'long', \n                    year: 'numeric', \n                    month: 'long', \n                    day: 'numeric' \n                  })}\n                </p>\n              </div>\n\n              {bookings.filter(booking => \n                new Date(booking.preferred_date).toDateString() === new Date().toDateString()\n              ).length > 0 ? (\n                <div className=\"space-y-3\">\n                  {bookings.filter(booking => \n                    new Date(booking.preferred_date).toDateString() === new Date().toDateString()\n                  ).map((booking) => (\n                    <div key={booking.id} className=\"border border-gray-200 rounded-lg p-4\">\n                      <div className=\"flex justify-between items-start\">\n                        <div>\n                          <h4 className=\"font-medium text-gray-900\">{booking.preferred_time}</h4>\n                          <p className=\"text-sm text-gray-600\">\n                            {booking.customer_name} - {booking.pet_name} ({booking.pet_species})\n                          </p>\n                          <p className=\"text-xs text-gray-500\">{booking.consultation_type}</p>\n                        </div>\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(booking.status)}`}>\n                          {booking.status}\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <span className=\"text-2xl\">ðŸ“…</span>\n                  </div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No appointments today</h3>\n                  <p className=\"text-gray-600\">Your schedule is clear for today.</p>\n                </div>\n              )}\n\n              <div className=\"flex justify-end pt-4\">\n                <button\n                  onClick={() => setShowScheduleModal(false)}\n                  className=\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700\"\n                >\n                  Close\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n        {/* Messages Modal */}\n        {showMessagesModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-2xl font-bold\">Messages</h2>\n                <button\n                  onClick={() => setShowMessagesModal(false)}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  âœ•\n                </button>\n              </div>\n              \n              <div className=\"space-y-4\">\n                <div className=\"bg-purple-50 p-4 rounded-lg\">\n                  <h3 className=\"font-medium text-purple-900\">ðŸ’¬ Recent Messages</h3>\n                  <p className=\"text-sm text-purple-700 mt-1\">\n                    Communicate with pet owners about their bookings and consultations.\n                  </p>\n                </div>\n\n                {bookings.length > 0 ? (\n                  <div className=\"space-y-3\">\n                    {bookings.slice(0, 5).map((booking) => (\n                      <div key={booking.id} className=\"border border-gray-200 rounded-lg p-4\">\n                        <div className=\"flex justify-between items-start\">\n                          <div>\n                            <h4 className=\"font-medium text-gray-900\">{booking.customer_name}</h4>\n                            <p className=\"text-sm text-gray-600\">\n                              Pet: {booking.pet_name} ({booking.pet_species})\n                            </p>\n                            <p className=\"text-xs text-gray-500\">\n                              Booking: {new Date(booking.preferred_date).toLocaleDateString()} at {booking.preferred_time}\n                            </p>\n                          </div>\n                          <button className=\"text-[#5EB47C] hover:text-[#4A9A64] text-sm font-medium\">\n                            Message\n                          </button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"text-center py-8\">\n                    <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                      <span className=\"text-2xl\">ðŸ’¬</span>\n                    </div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No messages yet</h3>\n                    <p className=\"text-gray-600\">Messages from pet owners will appear here.</p>\n                  </div>\n                )}\n\n                <div className=\"flex justify-end pt-4\">\n                  <button\n                    onClick={() => setShowMessagesModal(false)}\n                    className=\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700\"\n                  >\n                    Close\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Analytics Modal */}\n        {showAnalyticsModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-2xl font-bold\">Analytics Dashboard</h2>\n                <button\n                  onClick={() => setShowAnalyticsModal(false)}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  âœ•\n                </button>\n              </div>\n              \n              <div className=\"space-y-6\">\n                <div className=\"bg-green-50 p-4 rounded-lg\">\n                  <h3 className=\"font-medium text-green-900\">ðŸ“Š Performance Overview</h3>\n                  <p className=\"text-sm text-green-700 mt-1\">\n                    Track your service performance and client satisfaction.\n                  </p>\n                </div>\n\n                {/* Analytics Stats Grid */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                  <div className=\"bg-white border border-gray-200 p-4 rounded-lg\">\n                    <h4 className=\"text-sm font-medium text-gray-500\">Total Bookings</h4>\n                    <p className=\"text-2xl font-bold text-gray-900\">{bookings.length}</p>\n                    <p className=\"text-xs text-gray-500 mt-1\">All time</p>\n                  </div>\n                  \n                  <div className=\"bg-white border border-gray-200 p-4 rounded-lg\">\n                    <h4 className=\"text-sm font-medium text-gray-500\">Completed Services</h4>\n                    <p className=\"text-2xl font-bold text-gray-900\">\n                      {bookings.filter(b => b.status === 'completed').length}\n                    </p>\n                    <p className=\"text-xs text-gray-500 mt-1\">Success rate: {\n                      bookings.length > 0 ? \n                      Math.round((bookings.filter(b => b.status === 'completed').length / bookings.length) * 100) : 0\n                    }%</p>\n                  </div>\n                  \n                  <div className=\"bg-white border border-gray-200 p-4 rounded-lg\">\n                    <h4 className=\"text-sm font-medium text-gray-500\">Active Services</h4>\n                    <p className=\"text-2xl font-bold text-gray-900\">\n                      {listings.filter(l => l.active).length}\n                    </p>\n                    <p className=\"text-xs text-gray-500 mt-1\">Out of {listings.length} total</p>\n                  </div>\n                  \n                  <div className=\"bg-white border border-gray-200 p-4 rounded-lg\">\n                    <h4 className=\"text-sm font-medium text-gray-500\">Avg. Rating</h4>\n                    <p className=\"text-2xl font-bold text-gray-900\">\n                      {stats.averageRating > 0 ? `${stats.averageRating} â­` : 'N/A'}\n                    </p>\n                    <p className=\"text-xs text-gray-500 mt-1\">Based on reviews</p>\n                  </div>\n                </div>\n\n                {/* Recent Activity */}\n                <div>\n                  <h4 className=\"text-lg font-medium text-gray-900 mb-3\">Recent Activity</h4>\n                  {bookings.length > 0 ? (\n                    <div className=\"space-y-2\">\n                      {bookings.slice(0, 5).map((booking) => (\n                        <div key={booking.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                          <div>\n                            <span className=\"font-medium\">{booking.customer_name}</span>\n                            <span className=\"text-gray-500 text-sm ml-2\">\n                              booked {booking.consultation_type}\n                            </span>\n                          </div>\n                          <span className=\"text-xs text-gray-500\">\n                            {new Date(booking.created_at).toLocaleDateString()}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"text-gray-500 text-center py-4\">No recent activity</p>\n                  )}\n                </div>\n\n                <div className=\"flex justify-end pt-4\">\n                  <button\n                    onClick={() => setShowAnalyticsModal(false)}\n                    className=\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700\"\n                  >\n                    Close\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Add Product Modal */}\n        {showAddProductModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-2xl font-bold\">\n                  {editingProduct ? 'Edit Product' : 'Add Product'}\n                </h2>\n                <button\n                  onClick={() => {\n                    setShowAddProductModal(false);\n                    setEditingProduct(null);\n                    setProductForm({\n                      name: '',\n                      description: '',\n                      price: '',\n                      category: 'Accessories',\n                      brand: '',\n                      stockQuantity: '',\n                      photos: [],\n                      specifications: ''\n                    });\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              \n              <form onSubmit={(e) => { e.preventDefault(); handleAddProduct(); }} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Product Name *\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={productForm.name}\n                      onChange={(e) => setProductForm({...productForm, name: e.target.value})}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      placeholder=\"e.g., Premium Dog Food\"\n                      required\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Brand\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={productForm.brand}\n                      onChange={(e) => setProductForm({...productForm, brand: e.target.value})}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      placeholder=\"e.g., Royal Canin\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Description\n                  </label>\n                  <textarea\n                    value={productForm.description}\n                    onChange={(e) => setProductForm({...productForm, description: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    rows=\"3\"\n                    placeholder=\"Describe the product, its benefits, and usage instructions...\"\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Price ($) *\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      value={productForm.price}\n                      onChange={(e) => setProductForm({...productForm, price: e.target.value})}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      placeholder=\"0.00\"\n                      required\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Category *\n                    </label>\n                    <select\n                      value={productForm.category}\n                      onChange={(e) => setProductForm({...productForm, category: e.target.value})}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      required\n                    >\n                      <option value=\"Accessories\">Accessories</option>\n                      <option value=\"Supplements\">Supplements</option>\n                    </select>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Stock Quantity *\n                    </label>\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      value={productForm.stockQuantity}\n                      onChange={(e) => setProductForm({...productForm, stockQuantity: e.target.value})}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      placeholder=\"0\"\n                      required\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Product Photos (up to 4)\n                  </label>\n                  \n                  {/* Photo Upload Area */}\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors\">\n                    <input\n                      type=\"file\"\n                      id=\"photo-upload\"\n                      multiple\n                      accept=\"image/*\"\n                      onChange={handlePhotoUpload}\n                      className=\"hidden\"\n                      disabled={productForm.photos.length >= 4}\n                    />\n                    <label \n                      htmlFor=\"photo-upload\" \n                      className={`cursor-pointer ${productForm.photos.length >= 4 ? 'cursor-not-allowed opacity-50' : ''}`}\n                    >\n                      <div className=\"space-y-2\">\n                        <svg className=\"mx-auto h-8 w-8 text-gray-400\" stroke=\"currentColor\" fill=\"none\" viewBox=\"0 0 48 48\">\n                          <path d=\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                        </svg>\n                        <div className=\"text-sm text-gray-600\">\n                          <span className=\"font-medium text-blue-600 hover:text-blue-500\">\n                            Click to upload photos\n                          </span>\n                          <span> or drag and drop</span>\n                        </div>\n                        <p className=\"text-xs text-gray-500\">PNG, JPG, GIF up to 10MB each</p>\n                        <p className=\"text-xs text-gray-500\">\n                          {productForm.photos.length}/4 photos uploaded\n                        </p>\n                      </div>\n                    </label>\n                  </div>\n\n                  {/* Photo Preview Grid */}\n                  {productForm.photos.length > 0 && (\n                    <div className=\"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3\">\n                      {productForm.photos.map((photo, index) => (\n                        <div key={photo.id} className=\"relative group\">\n                          <img\n                            src={photo.url}\n                            alt={`Product view ${index + 1}`}\n                            className=\"w-full h-20 object-cover rounded-lg border border-gray-200\"\n                          />\n                          <button\n                            type=\"button\"\n                            onClick={() => removePhoto(photo.id)}\n                            className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity\"\n                          >\n                            Ã—\n                          </button>\n                          {index === 0 && (\n                            <div className=\"absolute bottom-1 left-1 bg-blue-500 text-white text-xs px-1 py-0.5 rounded\">\n                              Main\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Specifications\n                  </label>\n                  <textarea\n                    value={productForm.specifications}\n                    onChange={(e) => setProductForm({...productForm, specifications: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    rows=\"3\"\n                    placeholder=\"Size, weight, ingredients, dosage instructions, etc...\"\n                  />\n                </div>\n\n                <div className=\"flex justify-end space-x-3 pt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setShowAddProductModal(false);\n                      setEditingProduct(null);\n                                             setProductForm({\n                         name: '',\n                         description: '',\n                         price: '',\n                         category: 'Accessories',\n                         brand: '',\n                         stockQuantity: '',\n                         photos: [],\n                         specifications: ''\n                       });\n                    }}\n                    className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n                  >\n                    {editingProduct ? 'Update Product' : 'Add Product'}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n\n\n\n\n\n\n\n        {/* Pay-Per-Listing Modal */}\n        {showPayPerListingModal && payPerListingType && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl max-w-md w-full\">\n              <div className=\"p-6 border-b border-gray-200\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-xl font-bold text-gray-900\">\n                    Add More {payPerListingType === 'service' ? 'Services' : payPerListingType === 'product' ? 'Products' : 'Packages'}\n                  </h2>\n                  <button \n                    onClick={() => setShowPayPerListingModal(false)} \n                    className=\"text-gray-400 hover:text-gray-600 text-2xl\"\n                  >\n                    Ã—\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"p-6\">\n                <div className=\"text-center mb-6\">\n\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                    Expand Your {payPerListingType === 'service' ? 'Services' : payPerListingType === 'product' ? 'Products' : 'Packages'}\n                  </h3>\n                  <p className=\"text-gray-600 text-sm\">\n                    You have {payPerListingType === 'service' ? \n                      `${getServicesOnly(listings).length}/${FREE_SERVICE_LIMIT} services` :\n                      payPerListingType === 'product' ? \n                      `${products.length}/${FREE_PRODUCT_LIMIT} products` :\n                      `${packages.length}/${FREE_PACKAGE_LIMIT} packages`\n                    }. Add more to grow your business!\n                  </p>\n                </div>\n\n                {/* Billing Period Toggle */}\n                <div className=\"flex items-center justify-center mb-6\">\n                  <div className=\"bg-gray-100 p-1 rounded-lg flex\">\n                    <button\n                      onClick={() => setBillingPeriod('monthly')}\n                      className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n                        billingPeriod === 'monthly'\n                          ? 'bg-white text-gray-900 shadow-sm'\n                          : 'text-gray-600 hover:text-gray-900'\n                      }`}\n                    >\n                      Monthly\n                    </button>\n                    <button\n                      onClick={() => setBillingPeriod('yearly')}\n                      className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n                        billingPeriod === 'yearly'\n                          ? 'bg-white text-gray-900 shadow-sm'\n                          : 'text-gray-600 hover:text-gray-900'\n                      }`}\n                    >\n                      Yearly\n                      <span className=\"ml-1 text-xs text-green-600 font-semibold\">SAVE 17%</span>\n                    </button>\n                  </div>\n                </div>\n\n                {/* Pricing Options */}\n                <div className=\"space-y-3 mb-6\">\n                                    {/* Individual Option */}\n                  <button \n                    onClick={() => {\n                      // TODO: Implement payment processing\n                      showSuccess(`Payment integration coming soon! Contact support to add ${billingPeriod} billing for 1 ${payPerListingType} listing.`, 5000);\n                      setShowPayPerListingModal(false);\n                    }}\n                    className=\"w-full border border-gray-200 rounded-lg p-4 hover:border-green-300 hover:bg-gray-50 transition-colors text-left\"\n                  >\n                    <div className=\"flex justify-between items-center\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">\n                          1 {payPerListingType === 'service' ? 'Service' : payPerListingType === 'product' ? 'Product' : 'Package'}\n                        </p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-xl font-bold text-gray-900\">\n                           ${getIndividualPrice(payPerListingType)}\n                         </p>\n                         <p className=\"text-xs text-gray-500\">\n                           ${billingPeriod === 'yearly' ? (getIndividualPrice(payPerListingType) / 12).toFixed(2) + '/month' : getIndividualPrice(payPerListingType) + '/month'}\n                           {billingPeriod === 'yearly' && <span className=\"text-green-600 ml-1\">(billed yearly)</span>}\n                         </p>\n                      </div>\n                    </div>\n                  </button>\n\n                                    {/* 3-Pack Option */}\n                  <button \n                    onClick={() => {\n                      // TODO: Implement payment processing\n                      showSuccess(`Payment integration coming soon! Contact support to add ${billingPeriod} billing for 3 ${payPerListingType} listings.`, 5000);\n                      setShowPayPerListingModal(false);\n                    }}\n                    className=\"w-full border-2 border-green-200 rounded-lg p-4 bg-green-50 hover:bg-green-100 transition-colors text-left relative\"\n                  >\n                    <div className=\"absolute -top-2 left-4\">\n                      <span className=\"bg-green-500 text-white px-2 py-1 rounded text-xs font-medium\">\n                        POPULAR\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">\n                          3 {payPerListingType === 'service' ? 'Services' : payPerListingType === 'product' ? 'Products' : 'Packages'}\n                        </p>\n                        <p className=\"text-sm text-green-700\">Save money</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-xl font-bold text-green-600\">\n                           ${get3PackPrice(payPerListingType)}\n                        </p>\n                        <p className=\"text-xs text-green-600\">\n                           ${billingPeriod === 'yearly' ? (get3PackPrice(payPerListingType) / 12 / 3).toFixed(2) + '/month each' : (get3PackPrice(payPerListingType) / 3).toFixed(2) + '/month each'}\n                           {billingPeriod === 'yearly' && <span className=\"ml-1\">(billed yearly)</span>}\n                        </p>\n                      </div>\n                    </div>\n                  </button>\n\n                                    {/* 5-Pack Option */}\n                  <button \n                    onClick={() => {\n                      // TODO: Implement payment processing\n                      showSuccess(`Payment integration coming soon! Contact support to add ${billingPeriod} billing for 5 ${payPerListingType} listings.`, 5000);\n                      setShowPayPerListingModal(false);\n                    }}\n                    className=\"w-full border-2 border-blue-200 rounded-lg p-4 bg-blue-50 hover:bg-blue-100 transition-colors text-left relative\"\n                  >\n                    <div className=\"absolute -top-2 left-4\">\n                      <span className=\"bg-blue-500 text-white px-2 py-1 rounded text-xs font-medium\">\n                        BEST VALUE\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">\n                          5 {payPerListingType === 'service' ? 'Services' : payPerListingType === 'product' ? 'Products' : 'Packages'}\n                        </p>\n                        <p className=\"text-sm text-blue-700\">Best value</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-xl font-bold text-blue-600\">\n                           ${get5PackPrice(payPerListingType)}\n                        </p>\n                        <p className=\"text-xs text-blue-600\">\n                           ${billingPeriod === 'yearly' ? (get5PackPrice(payPerListingType) / 12 / 5).toFixed(2) + '/month each' : (get5PackPrice(payPerListingType) / 5).toFixed(2) + '/month each'}\n                           {billingPeriod === 'yearly' && <span className=\"ml-1\">(billed yearly)</span>}\n                        </p>\n                      </div>\n                    </div>\n                  </button>\n                </div>\n\n                <div className=\"mb-6\">\n                  <h4 className=\"font-medium text-gray-900 mb-3\">What you get:</h4>\n                  <ul className=\"space-y-2 text-sm text-gray-600\">\n                    <li className=\"flex items-center\">\n                      <svg className=\"w-4 h-4 text-green-500 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                      </svg>\n                      Active {payPerListingType === 'service' ? 'service listing' : payPerListingType === 'product' ? 'product listing' : 'service package listing'}{billingPeriod === 'yearly' ? 's' : ''} while subscribed\n                    </li>\n                    <li className=\"flex items-center\">\n                      <svg className=\"w-4 h-4 text-green-500 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                      </svg>\n                      Full marketplace visibility\n                    </li>\n                    <li className=\"flex items-center\">\n                      <svg className=\"w-4 h-4 text-green-500 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                      </svg>\n                      Same commission rates ({payPerListingType === 'service' ? SERVICE_COMMISSION_RATE * 100 : PRODUCT_COMMISSION_RATE * 100}%)\n                    </li>\n                    <li className=\"flex items-center\">\n                      <svg className=\"w-4 h-4 text-green-500 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                      </svg>\n                      {billingPeriod === 'yearly' ? 'Save 17% with yearly billing' : 'Flexible monthly billing'}\n                    </li>\n                    <li className=\"flex items-center\">\n                      <svg className=\"w-4 h-4 text-green-500 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                      </svg>\n                      Cancel anytime\n                    </li>\n                  </ul>\n                </div>\n\n                {/* Cancel Button */}\n                <div className=\"text-center\">\n                  <button\n                    onClick={() => setShowPayPerListingModal(false)}\n                    className=\"text-gray-500 hover:text-gray-700 transition-colors text-sm underline\"\n                  >\n                    Maybe Later\n                  </button>\n                </div>\n\n                                  <p className=\"text-xs text-gray-500 text-center mt-4\">\n                    Secure payment processing â€¢ {billingPeriod === 'yearly' ? 'Yearly billing (save 17%)' : 'Monthly billing'} â€¢ Cancel anytime\n                  </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Patient Modal */}\n        {showPatientModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n              <div className=\"p-6 border-b border-gray-200\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold text-gray-900\">\n                    {editingPatient ? 'Edit Patient' : 'Add New Patient'}\n                  </h2>\n                  <button onClick={() => setShowPatientModal(false)} className=\"text-gray-400 hover:text-gray-600 text-2xl\">Ã—</button>\n                </div>\n              </div>\n\n              <form onSubmit={(e) => {\n                e.preventDefault();\n                const formData = new FormData(e.target);\n                const patientData = {\n                  name: formData.get('name'),\n                  species: formData.get('species'),\n                  breed: formData.get('breed'),\n                  age: formData.get('age'),\n                  weight: formData.get('weight'),\n                  ownerName: formData.get('ownerName'),\n                  ownerPhone: formData.get('ownerPhone'),\n                  ownerEmail: formData.get('ownerEmail'),\n                  medicalHistory: formData.get('medicalHistory')\n                };\n                handleAddPatient(patientData);\n              }} className=\"p-6 space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Pet Name *</label>\n                    <input\n                      type=\"text\"\n                      name=\"name\"\n                      required\n                      defaultValue={editingPatient?.name || ''}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"e.g., Max\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Species *</label>\n                    <select\n                      name=\"species\"\n                      required\n                      defaultValue={editingPatient?.species || ''}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    >\n                      <option value=\"\">Select species</option>\n                      <option value=\"Dog\">Dog</option>\n                      <option value=\"Cat\">Cat</option>\n                      <option value=\"Bird\">Bird</option>\n                      <option value=\"Rabbit\">Rabbit</option>\n                      <option value=\"Horse\">Horse</option>\n                      <option value=\"Other\">Other</option>\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Breed</label>\n                    <input\n                      type=\"text\"\n                      name=\"breed\"\n                      defaultValue={editingPatient?.breed || ''}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"e.g., Golden Retriever\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Age (years)</label>\n                    <input\n                      type=\"number\"\n                      name=\"age\"\n                      min=\"0\"\n                      step=\"0.1\"\n                      defaultValue={editingPatient?.age || ''}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"e.g., 3\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Weight (kg)</label>\n                    <input\n                      type=\"number\"\n                      name=\"weight\"\n                      min=\"0\"\n                      step=\"0.1\"\n                      defaultValue={editingPatient?.weight || ''}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"e.g., 25.5\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Owner Name *</label>\n                    <input\n                      type=\"text\"\n                      name=\"ownerName\"\n                      required\n                      defaultValue={editingPatient?.owner_name || ''}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"e.g., John Smith\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Owner Phone *</label>\n                    <input\n                      type=\"tel\"\n                      name=\"ownerPhone\"\n                      required\n                      defaultValue={editingPatient?.owner_phone || ''}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"e.g., +1 234 567 8900\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Owner Email</label>\n                    <input\n                      type=\"email\"\n                      name=\"ownerEmail\"\n                      defaultValue={editingPatient?.owner_email || ''}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"e.g., john@example.com\"\n                    />\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Medical History</label>\n                  <textarea\n                    name=\"medicalHistory\"\n                    rows=\"3\"\n                    defaultValue={editingPatient?.medical_history || ''}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"Any relevant medical history, allergies, or special needs...\"\n                  />\n                </div>\n\n                <div className=\"flex justify-end space-x-3 pt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPatientModal(false)}\n                    className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                  >\n                    {editingPatient ? 'Update Patient' : 'Add Patient'}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n\n        {/* Procedure Modal */}\n        {showProcedureModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n              <div className=\"p-6 border-b border-gray-200\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-2xl font-bold text-gray-900\">\n                    {editingProcedure ? 'Edit Procedure' : 'Schedule New Procedure'}\n                  </h2>\n                  <button onClick={() => setShowProcedureModal(false)} className=\"text-gray-400 hover:text-gray-600 text-2xl\">Ã—</button>\n                </div>\n              </div>\n\n              <form onSubmit={(e) => {\n                e.preventDefault();\n                const formData = new FormData(e.target);\n                const procedureData = {\n                  patientId: formData.get('patientId'),\n                  procedureType: formData.get('procedureType'),\n                  scheduledDate: formData.get('scheduledDate'),\n                  estimatedDuration: formData.get('estimatedDuration'),\n                  notes: formData.get('notes')\n                };\n                handleAddProcedure(procedureData);\n              }} className=\"p-6 space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Patient *</label>\n                    <select\n                      name=\"patientId\"\n                      required\n                      defaultValue={editingProcedure?.patient_id || ''}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    >\n                      <option value=\"\">Select patient</option>\n                      {patients.map(patient => (\n                        <option key={patient.id} value={patient.id}>\n                          {patient.name} ({patient.species})\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Procedure Type *</label>\n                    <select\n                      name=\"procedureType\"\n                      required\n                      defaultValue={editingProcedure?.procedure_type || ''}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    >\n                      <option value=\"\">Select procedure type</option>\n                      <option value=\"Consultation\">Consultation</option>\n                      <option value=\"Vaccination\">Vaccination</option>\n                      <option value=\"Surgery\">Surgery</option>\n                      <option value=\"Dental Cleaning\">Dental Cleaning</option>\n                      <option value=\"Blood Test\">Blood Test</option>\n                      <option value=\"X-Ray\">X-Ray</option>\n                      <option value=\"Ultrasound\">Ultrasound</option>\n                      <option value=\"Emergency Care\">Emergency Care</option>\n                      <option value=\"Other\">Other</option>\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Scheduled Date *</label>\n                    <input\n                      type=\"datetime-local\"\n                      name=\"scheduledDate\"\n                      required\n                      defaultValue={editingProcedure?.scheduled_date ? editingProcedure.scheduled_date.slice(0, 16) : ''}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Estimated Duration (minutes)</label>\n                    <input\n                      type=\"number\"\n                      name=\"estimatedDuration\"\n                      min=\"15\"\n                      step=\"15\"\n                      defaultValue={editingProcedure?.estimated_duration || '60'}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"e.g., 60\"\n                    />\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Notes</label>\n                  <textarea\n                    name=\"notes\"\n                    rows=\"3\"\n                    defaultValue={editingProcedure?.notes || ''}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"Any special instructions, preparation requirements, or additional notes...\"\n                  />\n                </div>\n\n                <div className=\"flex justify-end space-x-3 pt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowProcedureModal(false)}\n                    className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n                  >\n                    {editingProcedure ? 'Update Procedure' : 'Schedule Procedure'}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n                )}\n      </div>\n    </ErrorBoundary>\n  );\n };\n \n export default VeterinaryProviderDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}