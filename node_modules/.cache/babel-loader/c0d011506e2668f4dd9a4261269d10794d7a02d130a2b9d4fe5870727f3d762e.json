{"ast":null,"code":"// Sentry initialization and configuration\nimport*as Sentry from\"@sentry/react\";import{BrowserTracing}from\"@sentry/tracing\";// Initialize Sentry with environment-specific configuration\nSentry.init({dsn:process.env.REACT_APP_SENTRY_DSN,integrations:[new BrowserTracing()],// Set tracesSampleRate based on environment\n// Production: 10% of transactions\n// Development: 100% of transactions\ntracesSampleRate:process.env.NODE_ENV==='production'?0.1:1.0,// Set environment\nenvironment:process.env.NODE_ENV||'development',// Before send hook to filter out sensitive data\nbeforeSend(event,hint){// Don't send events in development unless explicitly enabled\nif(process.env.NODE_ENV==='development'&&!process.env.REACT_APP_SENTRY_DEBUG){return null;}// Filter out sensitive information from URLs\nif(event.request&&event.request.url){event.request.url=event.request.url.replace(/([?&])(token|key|password|secret)=[^&]*/gi,'$1$2=REDACTED');}return event;},// Ignore common non-critical errors\nignoreErrors:['ResizeObserver loop limit exceeded','Non-Error promise rejection captured','Network request failed','Failed to fetch']});// Set user context helper\nexport const setSentryUser=user=>{if(user){Sentry.setUser({id:user.id,email:user.email,username:user.username||user.email});}else{Sentry.setUser(null);}};// Custom error logging helper\nexport const logError=function(error){let context=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};console.error('Error:',error,context);Sentry.captureException(error,{extra:context});};// Performance monitoring helper\nexport const startTransaction=function(name){let op=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'navigation';// Use startSpan for newer Sentry versions\nif(typeof Sentry.startSpan==='function'){return Sentry.startSpan({name,op},()=>{});}// Fallback for older versions\nif(typeof Sentry.startTransaction==='function'){return Sentry.startTransaction({name,op});}// No-op if neither is available\nreturn{finish:()=>{}};};export default Sentry;","map":{"version":3,"names":["Sentry","BrowserTracing","init","dsn","process","env","REACT_APP_SENTRY_DSN","integrations","tracesSampleRate","NODE_ENV","environment","beforeSend","event","hint","REACT_APP_SENTRY_DEBUG","request","url","replace","ignoreErrors","setSentryUser","user","setUser","id","email","username","logError","error","context","arguments","length","undefined","console","captureException","extra","startTransaction","name","op","startSpan","finish"],"sources":["/workspace/src/lib/sentry.js"],"sourcesContent":["// Sentry initialization and configuration\nimport * as Sentry from \"@sentry/react\";\nimport { BrowserTracing } from \"@sentry/tracing\";\n\n// Initialize Sentry with environment-specific configuration\nSentry.init({\n  dsn: process.env.REACT_APP_SENTRY_DSN,\n  integrations: [\n    new BrowserTracing(),\n  ],\n  \n  // Set tracesSampleRate based on environment\n  // Production: 10% of transactions\n  // Development: 100% of transactions\n  tracesSampleRate: process.env.NODE_ENV === 'production' ? 0.1 : 1.0,\n  \n  // Set environment\n  environment: process.env.NODE_ENV || 'development',\n  \n  // Before send hook to filter out sensitive data\n  beforeSend(event, hint) {\n    // Don't send events in development unless explicitly enabled\n    if (process.env.NODE_ENV === 'development' && !process.env.REACT_APP_SENTRY_DEBUG) {\n      return null;\n    }\n    \n    // Filter out sensitive information from URLs\n    if (event.request && event.request.url) {\n      event.request.url = event.request.url.replace(/([?&])(token|key|password|secret)=[^&]*/gi, '$1$2=REDACTED');\n    }\n    \n    return event;\n  },\n  \n  // Ignore common non-critical errors\n  ignoreErrors: [\n    'ResizeObserver loop limit exceeded',\n    'Non-Error promise rejection captured',\n    'Network request failed',\n    'Failed to fetch',\n  ],\n});\n\n// Set user context helper\nexport const setSentryUser = (user) => {\n  if (user) {\n    Sentry.setUser({\n      id: user.id,\n      email: user.email,\n      username: user.username || user.email,\n    });\n  } else {\n    Sentry.setUser(null);\n  }\n};\n\n// Custom error logging helper\nexport const logError = (error, context = {}) => {\n  console.error('Error:', error, context);\n  Sentry.captureException(error, {\n    extra: context,\n  });\n};\n\n// Performance monitoring helper\nexport const startTransaction = (name, op = 'navigation') => {\n  // Use startSpan for newer Sentry versions\n  if (typeof Sentry.startSpan === 'function') {\n    return Sentry.startSpan({\n      name,\n      op,\n    }, () => {});\n  }\n  // Fallback for older versions\n  if (typeof Sentry.startTransaction === 'function') {\n    return Sentry.startTransaction({\n      name,\n      op,\n    });\n  }\n  // No-op if neither is available\n  return { finish: () => {} };\n};\n\nexport default Sentry;\n"],"mappings":"AAAA;AACA,MAAO,GAAK,CAAAA,MAAM,KAAM,eAAe,CACvC,OAASC,cAAc,KAAQ,iBAAiB,CAEhD;AACAD,MAAM,CAACE,IAAI,CAAC,CACVC,GAAG,CAAEC,OAAO,CAACC,GAAG,CAACC,oBAAoB,CACrCC,YAAY,CAAE,CACZ,GAAI,CAAAN,cAAc,CAAC,CAAC,CACrB,CAED;AACA;AACA;AACAO,gBAAgB,CAAEJ,OAAO,CAACC,GAAG,CAACI,QAAQ,GAAK,YAAY,CAAG,GAAG,CAAG,GAAG,CAEnE;AACAC,WAAW,CAAEN,OAAO,CAACC,GAAG,CAACI,QAAQ,EAAI,aAAa,CAElD;AACAE,UAAUA,CAACC,KAAK,CAAEC,IAAI,CAAE,CACtB;AACA,GAAIT,OAAO,CAACC,GAAG,CAACI,QAAQ,GAAK,aAAa,EAAI,CAACL,OAAO,CAACC,GAAG,CAACS,sBAAsB,CAAE,CACjF,MAAO,KAAI,CACb,CAEA;AACA,GAAIF,KAAK,CAACG,OAAO,EAAIH,KAAK,CAACG,OAAO,CAACC,GAAG,CAAE,CACtCJ,KAAK,CAACG,OAAO,CAACC,GAAG,CAAGJ,KAAK,CAACG,OAAO,CAACC,GAAG,CAACC,OAAO,CAAC,2CAA2C,CAAE,eAAe,CAAC,CAC7G,CAEA,MAAO,CAAAL,KAAK,CACd,CAAC,CAED;AACAM,YAAY,CAAE,CACZ,oCAAoC,CACpC,sCAAsC,CACtC,wBAAwB,CACxB,iBAAiB,CAErB,CAAC,CAAC,CAEF;AACA,MAAO,MAAM,CAAAC,aAAa,CAAIC,IAAI,EAAK,CACrC,GAAIA,IAAI,CAAE,CACRpB,MAAM,CAACqB,OAAO,CAAC,CACbC,EAAE,CAAEF,IAAI,CAACE,EAAE,CACXC,KAAK,CAAEH,IAAI,CAACG,KAAK,CACjBC,QAAQ,CAAEJ,IAAI,CAACI,QAAQ,EAAIJ,IAAI,CAACG,KAClC,CAAC,CAAC,CACJ,CAAC,IAAM,CACLvB,MAAM,CAACqB,OAAO,CAAC,IAAI,CAAC,CACtB,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAI,QAAQ,CAAG,QAAAA,CAACC,KAAK,CAAmB,IAAjB,CAAAC,OAAO,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CAC1CG,OAAO,CAACL,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAAEC,OAAO,CAAC,CACvC3B,MAAM,CAACgC,gBAAgB,CAACN,KAAK,CAAE,CAC7BO,KAAK,CAAEN,OACT,CAAC,CAAC,CACJ,CAAC,CAED;AACA,MAAO,MAAM,CAAAO,gBAAgB,CAAG,QAAAA,CAACC,IAAI,CAAwB,IAAtB,CAAAC,EAAE,CAAAR,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,YAAY,CACtD;AACA,GAAI,MAAO,CAAA5B,MAAM,CAACqC,SAAS,GAAK,UAAU,CAAE,CAC1C,MAAO,CAAArC,MAAM,CAACqC,SAAS,CAAC,CACtBF,IAAI,CACJC,EACF,CAAC,CAAE,IAAM,CAAC,CAAC,CAAC,CACd,CACA;AACA,GAAI,MAAO,CAAApC,MAAM,CAACkC,gBAAgB,GAAK,UAAU,CAAE,CACjD,MAAO,CAAAlC,MAAM,CAACkC,gBAAgB,CAAC,CAC7BC,IAAI,CACJC,EACF,CAAC,CAAC,CACJ,CACA;AACA,MAAO,CAAEE,MAAM,CAAEA,CAAA,GAAM,CAAC,CAAE,CAAC,CAC7B,CAAC,CAED,cAAe,CAAAtC,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}