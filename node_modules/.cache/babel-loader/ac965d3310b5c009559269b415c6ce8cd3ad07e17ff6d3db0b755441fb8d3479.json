{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useNavigate}from'react-router-dom';import{supabase}from'../lib/supabase.js';import{getUserSafely}from'../lib/supabase-utils.js';import{useNotificationContext}from'../contexts/NotificationContext';import ProviderAvailability from'./ProviderAvailability';import StatsOverview from'./dashboard/StatsOverview';import MarketplaceSummary from'./dashboard/MarketplaceSummary';import MarketplaceManager from'./dashboard/MarketplaceManager';import CasesSummary from'./dashboard/CasesSummary';import ErrorBoundary from'./common/ErrorBoundary';import*as Sentry from'@sentry/react';import{PROVIDER_TYPES}from'../constants/providerTypes';import{getProviderConfig,getProviderLabels,getProviderNavigation}from'../config/providerConfig';import{UIIcon}from'./MinimalIcons';import{PRICING_LIMITS,COMMISSION_RATES,MONTHLY_FEES,getIndividualPrice,get3PackPrice,get5PackPrice,calculateServiceCommission,calculateProductCommission,getNetEarnings}from'../constants/pricingConstants';// Veterinarian Dashboard - Designed specifically for veterinarians\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VetDashboard=()=>{const{showInfo,showSuccess,showError}=useNotificationContext();const navigate=useNavigate();// State management\nconst[user,setUser]=useState(null);const[profile,setProfile]=useState(null);const[providerData,setProviderData]=useState(null);const[listings,setListings]=useState([]);const[patients,setPatients]=useState([]);const[appointments,setAppointments]=useState([]);const[diagnoses,setDiagnoses]=useState([]);const[prescriptions,setPrescriptions]=useState([]);const[triageCases,setTriageCases]=useState([]);const[stats,setStats]=useState({});const[loading,setLoading]=useState(true);const[activeSection,setActiveSection]=useState('overview');const[showAvailabilityModal,setShowAvailabilityModal]=useState(false);// Marketplace functionality state variables\nconst[products,setProducts]=useState([]);const[packages,setPackages]=useState([]);const[openDropdown,setOpenDropdown]=useState(null);const[showAddProductModal,setShowAddProductModal]=useState(false);const[showEditServiceModal,setShowEditServiceModal]=useState(false);const[showPackageModal,setShowPackageModal]=useState(false);const[editingService,setEditingService]=useState(null);const[editingProduct,setEditingProduct]=useState(null);const[editingPackage,setEditingPackage]=useState(null);const[showPayPerListingModal,setShowPayPerListingModal]=useState(false);const[payPerListingType,setPayPerListingType]=useState('service');const[billingPeriod,setBillingPeriod]=useState('monthly');// 'monthly' or 'yearly'\nconst[showCreateServiceModal,setShowCreateServiceModal]=useState(false);const[showScheduleModal,setShowScheduleModal]=useState(false);const[showMessagesModal,setShowMessagesModal]=useState(false);const[showAnalyticsModal,setShowAnalyticsModal]=useState(false);// MVP Pricing Constants\nconst FREE_SERVICE_LIMIT=5;const FREE_PRODUCT_LIMIT=5;const FREE_PACKAGE_LIMIT=3;// 3 packages for free users\nconst SERVICE_COMMISSION_RATE=0.18;// 18%\nconst PRODUCT_COMMISSION_RATE=0.10;// 10%\n// Monthly Listing Fees (Individual)\nconst SERVICE_MONTHLY_FEE=1.99;// $1.99/month per additional service listing\nconst PRODUCT_MONTHLY_FEE=1.49;// $1.49/month per additional product listing\nconst PACKAGE_MONTHLY_FEE=2.49;// $2.49/month per additional package listing\n// Yearly Listing Fees (Individual - 2 months free = ~17% off)\nconst SERVICE_YEARLY_FEE=19.90;// $19.90/year per service ($1.66/month equivalent)\nconst PRODUCT_YEARLY_FEE=14.90;// $14.90/year per product ($1.24/month equivalent)\nconst PACKAGE_YEARLY_FEE=24.90;// $24.90/year per package ($2.08/month equivalent)\n// Bundle Monthly Fees (Better Value)\nconst SERVICE_3_PACK_MONTHLY=4.99;// 3 services for $4.99/month ($1.66 each)\nconst SERVICE_5_PACK_MONTHLY=7.99;// 5 services for $7.99/month ($1.60 each)\nconst PRODUCT_3_PACK_MONTHLY=3.99;// 3 products for $3.99/month ($1.33 each)\nconst PRODUCT_5_PACK_MONTHLY=5.99;// 5 products for $5.99/month ($1.20 each)\nconst PACKAGE_3_PACK_MONTHLY=6.99;// 3 packages for $6.99/month ($2.33 each)\nconst PACKAGE_5_PACK_MONTHLY=9.99;// 5 packages for $9.99/month ($2.00 each)\n// Bundle Yearly Fees (Best Value - 2 months free = ~17% off)\nconst SERVICE_3_PACK_YEARLY=49.90;// 3 services for $49.90/year ($4.16/month equivalent)\nconst SERVICE_5_PACK_YEARLY=79.90;// 5 services for $79.90/year ($6.66/month equivalent)\nconst PRODUCT_3_PACK_YEARLY=39.90;// 3 products for $39.90/year ($3.33/month equivalent)\nconst PRODUCT_5_PACK_YEARLY=59.90;// 5 products for $59.90/year ($4.99/month equivalent)\nconst PACKAGE_3_PACK_YEARLY=69.90;// 3 packages for $69.90/year ($5.83/month equivalent)\nconst PACKAGE_5_PACK_YEARLY=99.90;// 5 packages for $99.90/year ($8.33/month equivalent)\n// Product form states\nconst[productForm,setProductForm]=useState({name:'',description:'',price:'',category:'Accessories',// Default to Accessories\nbrand:'',stockQuantity:'',photos:[],specifications:''});// Profile form states\nconst[profileForm,setProfileForm]=useState({fullName:'',phone:'',address:'',description:'',serviceAreas:'',maxTravelDistance:'25',yearsOfExperience:'',profilePicture:''});const[formInitialized,setFormInitialized]=useState(false);// Veterinarian-specific configuration\nconst providerType=PROVIDER_TYPES.VETERINARIAN;const providerConfig=getProviderConfig(providerType);const providerLabels=getProviderLabels(providerType);// Pricing helper functions\nconst getIndividualPrice=type=>{if(billingPeriod==='yearly'){return type==='service'?SERVICE_YEARLY_FEE:type==='product'?PRODUCT_YEARLY_FEE:PACKAGE_YEARLY_FEE;}return type==='service'?SERVICE_MONTHLY_FEE:type==='product'?PRODUCT_MONTHLY_FEE:PACKAGE_MONTHLY_FEE;};const get3PackPrice=type=>{if(billingPeriod==='yearly'){return type==='service'?SERVICE_3_PACK_YEARLY:type==='product'?PRODUCT_3_PACK_YEARLY:PACKAGE_3_PACK_YEARLY;}return type==='service'?SERVICE_3_PACK_MONTHLY:type==='product'?PRODUCT_3_PACK_MONTHLY:PACKAGE_3_PACK_MONTHLY;};const get5PackPrice=type=>{if(billingPeriod==='yearly'){return type==='service'?SERVICE_5_PACK_YEARLY:type==='product'?PRODUCT_5_PACK_YEARLY:PACKAGE_5_PACK_YEARLY;}return type==='service'?SERVICE_5_PACK_MONTHLY:type==='product'?PRODUCT_5_PACK_MONTHLY:PACKAGE_5_PACK_MONTHLY;};// Commission calculation functions\nconst calculateServiceCommission=price=>{return(parseFloat(price)*SERVICE_COMMISSION_RATE).toFixed(2);};const calculateProductCommission=price=>{return(parseFloat(price)*PRODUCT_COMMISSION_RATE).toFixed(2);};const getNetEarnings=function(price){let isProduct=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const commission=isProduct?calculateProductCommission(price):calculateServiceCommission(price);return(parseFloat(price)-parseFloat(commission)).toFixed(2);};// Helper function to filter only services (exclude products and packages)\nconst getServicesOnly=listings=>{return listings.filter(listing=>{// Explicitly check for service type\nreturn listing.listing_type==='service'||listing.listing_type!=='product'&&listing.listing_type!=='package'&&(listing.service_types||listing.service_type)!=='product'&&(listing.service_types||listing.service_type)!=='package';});};// Helper functions for marketplace\nconst handleAddNewService=()=>{const currentServiceCount=getServicesOnly(listings).length;const isFreeTier=!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free';if(isFreeTier&&currentServiceCount>=FREE_SERVICE_LIMIT){setPayPerListingType('service');setShowPayPerListingModal(true);return;}setShowCreateServiceModal(true);};const handleAddProductModal=()=>{const currentProductCount=products.length;const isFreeTier=!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free';if(isFreeTier&&currentProductCount>=FREE_PRODUCT_LIMIT){setPayPerListingType('product');setShowPayPerListingModal(true);return;}setShowAddProductModal(true);};const handleAddNewPackage=()=>{const isFreeTier=!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free';if(isFreeTier&&packages.length>=FREE_PACKAGE_LIMIT){setPayPerListingType('package');setShowPayPerListingModal(true);return;}setShowPackageModal(true);};const handleDeleteService=async(serviceId,serviceName)=>{if(!window.confirm(`Are you sure you want to delete \"${serviceName}\"?`))return;try{const{data:{user}}=await supabase.auth.getUser();if(!user)throw new Error('User not authenticated');const{error}=await supabase.from('marketplace_listings').delete().eq('listing_id',serviceId).eq('provider_email',user.email);if(error)throw error;const updatedListings=listings.filter(listing=>listing.listing_id!==serviceId);setListings(updatedListings);showSuccess('Service deleted successfully');}catch(error){console.error('Error deleting service:',error);showError(`Error deleting service: ${error.message}`);}};// Alias for marketplace section compatibility\nconst handleDeleteListing=handleDeleteService;const handleDeleteProduct=async(productId,productName)=>{if(!window.confirm(`Are you sure you want to delete \"${productName}\"?`))return;try{const{data:{user}}=await supabase.auth.getUser();if(!user)throw new Error('User not authenticated');const{error}=await supabase.from('marketplace_listings').delete().eq('listing_id',productId).eq('provider_email',user.email).eq('listing_type','product');if(error)throw error;const updatedProducts=products.filter(p=>p.id!==productId);setProducts(updatedProducts);showSuccess('Product deleted successfully');}catch(error){console.error('Error deleting product:',error);showError(`Error deleting product: ${error.message}`);}};const handleDeletePackage=async(packageId,packageName)=>{if(!window.confirm(`Are you sure you want to delete \"${packageName}\"?`))return;try{const{data:{user}}=await supabase.auth.getUser();if(!user)throw new Error('User not authenticated');const{error}=await supabase.from('packages').delete().eq('id',packageId).eq('provider_id',user.id);if(error)throw error;const updatedPackages=packages.filter(p=>p.id!==packageId);setPackages(updatedPackages);showSuccess('Package deleted successfully');}catch(error){console.error('Error deleting package:',error);showError(`Error deleting package: ${error.message}`);}};// Product management functions\nconst handleAddProduct=async()=>{if(!productForm.name||!productForm.price||!productForm.category||!productForm.stockQuantity){showError('Please fill in all required fields (name, price, category, stock quantity)');return;}// Validate price\nconst price=parseFloat(productForm.price);if(isNaN(price)||price<0){showError('Please enter a valid price');return;}// Validate stock quantity\nconst stock=parseInt(productForm.stockQuantity);if(isNaN(stock)||stock<0){showError('Please enter a valid stock quantity (0 or greater)');return;}const photoDataSize=JSON.stringify(productForm.photos).length;if(photoDataSize>2000000){showError('Photos are too large. Please use smaller images or reduce the number of photos.');return;}try{var _window$crypto,_window$crypto$random,_user$email;const{data:{user}}=await supabase.auth.getUser();if(!user)throw new Error('User not authenticated');// Check free tier limits (5 products for free users)\nconst currentProductCount=products.length;const currentProviderData=providerData||profile||{};// Default to free tier if no subscription plan is set\nconst subscriptionPlan=currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.subscription_plan;const isFreeTier=!subscriptionPlan||subscriptionPlan==='free'||subscriptionPlan!=='premium';if(isFreeTier&&currentProductCount>=FREE_PRODUCT_LIMIT&&!editingProduct){setPayPerListingType('product');setShowPayPerListingModal(true);return;}// Use marketplace_listings instead of separate products table\nconst productData={listing_type:'product',listing_id:editingProduct?editingProduct.listing_id||editingProduct.id:((_window$crypto=window.crypto)===null||_window$crypto===void 0?void 0:(_window$crypto$random=_window$crypto.randomUUID)===null||_window$crypto$random===void 0?void 0:_window$crypto$random.call(_window$crypto))||Math.random().toString(36),name:productForm.name.trim(),description:productForm.description.trim(),price:price,category:productForm.category||'Accessories',brand:productForm.brand.trim()||null,stock_quantity:stock,service_types:'product',provider_email:user.email,provider_name:(profile===null||profile===void 0?void 0:profile.full_name)||(providerData===null||providerData===void 0?void 0:providerData.name)||((_user$email=user.email)===null||_user$email===void 0?void 0:_user$email.split('@')[0]),provider_type:(profile===null||profile===void 0?void 0:profile.provider_type)||(providerData===null||providerData===void 0?void 0:providerData.provider_type)||'veterinarian',active:true,image_url:productForm.photos.length>0?productForm.photos[0].url:null,created_at:editingProduct?undefined:new Date().toISOString(),updated_at:new Date().toISOString()};let savedProduct;if(editingProduct){const{data,error}=await supabase.from('marketplace_listings').update(productData).eq('listing_id',editingProduct.listing_id||editingProduct.id).eq('provider_email',user.email).select().single();if(error)throw error;savedProduct=data;}else{const{data,error}=await supabase.from('marketplace_listings').insert([productData]).select().single();if(error)throw error;savedProduct=data;}// Update local products state with the saved product\nconst newProduct={id:savedProduct.listing_id,name:savedProduct.name,description:savedProduct.description,price:savedProduct.price,category:savedProduct.category,brand:savedProduct.brand,stockQuantity:savedProduct.stock_quantity,photos:productForm.photos,// Keep the photo objects for display\nspecifications:productForm.specifications,// Keep form data since DB doesn't store this\ncreatedAt:savedProduct.created_at,updatedAt:savedProduct.updated_at,type:'product'};let updatedProducts;if(editingProduct){updatedProducts=products.map(p=>p.id===editingProduct.id?newProduct:p);}else{updatedProducts=[...products,newProduct];}setProducts(updatedProducts);// Refresh data to show updated product\nawait Promise.all([loadListings(user.id),loadProducts(user.id)]);// Reset form\nsetProductForm({name:'',description:'',price:'',category:'Accessories',brand:'',stockQuantity:'',photos:[],specifications:''});setShowAddProductModal(false);setEditingProduct(null);showSuccess(`Product ${editingProduct?'updated':'created'} successfully!`);}catch(error){console.error('Error saving product:',error);if(error.name==='QuotaExceededError'||error.message.includes('quota')){showError('Error: Product photos are too large. Please use smaller images or reduce the number of photos.');}else if(error.message.includes('JSON')){showError('Error: Invalid product data. Please check your inputs and try again.');}else{showError(`Error saving product: ${error.message}. Please try again.`);}}};// Photo handling functions\nconst handlePhotoUpload=event=>{const files=Array.from(event.target.files);const maxFiles=4;if(productForm.photos.length+files.length>maxFiles){showError(`You can only upload up to ${maxFiles} photos`);return;}files.forEach(file=>{if(file.type.startsWith('image/')){// Check file size (10MB limit per file)\nif(file.size>10*1024*1024){showError(`File ${file.name} is too large. Please use images under 10MB.`);return;}const reader=new FileReader();reader.onload=e=>{// Create an image to compress it\nconst img=new Image();img.onload=()=>{const canvas=document.createElement('canvas');const ctx=canvas.getContext('2d');// Calculate new dimensions (max 800px width/height)\nlet{width,height}=img;const maxDimension=800;if(width>height){if(width>maxDimension){height=height*maxDimension/width;width=maxDimension;}}else{if(height>maxDimension){width=width*maxDimension/height;height=maxDimension;}}canvas.width=width;canvas.height=height;// Draw and compress\nctx.drawImage(img,0,0,width,height);const compressedDataUrl=canvas.toDataURL('image/jpeg',0.8);const newPhoto={id:Date.now()+Math.random(),file:file,url:compressedDataUrl,name:file.name};setProductForm(prev=>({...prev,photos:[...prev.photos,newPhoto]}));};img.src=e.target.result;};reader.readAsDataURL(file);}else{showError('Please select only image files');}});};const removePhoto=photoId=>{setProductForm(prev=>({...prev,photos:prev.photos.filter(photo=>photo.id!==photoId)}));};useEffect(()=>{initializeDashboard();},[]);// Initialize form when profile or provider data first loads (but preserve user changes)\nuseEffect(()=>{if((profile||providerData||user)&&!formInitialized){var _user$email2;// Prioritize the more complete name (providerData?.name is usually more complete)\nconst fullName=providerData!==null&&providerData!==void 0&&providerData.name&&providerData.name.trim().split(' ').length>1?providerData.name:(profile===null||profile===void 0?void 0:profile.full_name)||(providerData===null||providerData===void 0?void 0:providerData.name)||(user===null||user===void 0?void 0:(_user$email2=user.email)===null||_user$email2===void 0?void 0:_user$email2.split('@')[0])||'User';setProfileForm(prev=>({...prev,fullName:fullName,phone:(providerData===null||providerData===void 0?void 0:providerData.phone)||'',address:(providerData===null||providerData===void 0?void 0:providerData.address)||'',description:(providerData===null||providerData===void 0?void 0:providerData.description)||'',serviceAreas:(providerData===null||providerData===void 0?void 0:providerData.service_areas)||'Auckland',maxTravelDistance:(providerData===null||providerData===void 0?void 0:providerData.max_travel_distance)||'25',profilePicture:(providerData===null||providerData===void 0?void 0:providerData.profile_picture)||(profile===null||profile===void 0?void 0:profile.avatar_url)||''}));setFormInitialized(true);}},[profile,providerData,user,formInitialized]);// Update product form when editing\nuseEffect(()=>{if(editingProduct){setProductForm({name:editingProduct.name||'',description:editingProduct.description||'',price:(editingProduct.price||0).toString(),category:editingProduct.category||'Accessories',brand:editingProduct.brand||'',stockQuantity:(editingProduct.stockQuantity||editingProduct.stock_quantity||0).toString(),photos:editingProduct.photos||[],specifications:editingProduct.specifications||''});}},[editingProduct]);// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(openDropdown&&!event.target.closest('.relative')){setOpenDropdown(null);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[openDropdown]);const initializeDashboard=async()=>{try{setLoading(true);// Get current user\nconst currentUser=await getUserSafely();if(!currentUser){console.log('VetDashboard: No user found, redirecting to home');navigate('/');return;}setUser(currentUser);console.log('VetDashboard: User found:',currentUser.email);// Get profile data\nconst{data:profileData,error:profileError}=await supabase.from('profiles').select('role, full_name, phone, location, organization').eq('id',currentUser.id).single();if(profileError||!profileData){console.log('VetDashboard: No profile data found');navigate('/');return;}console.log('VetDashboard: Profile data:',profileData);// Strict role validation - only veterinarians allowed\nif(profileData.role!=='veterinarian'){console.log('VetDashboard: Access denied. Expected: veterinarian, Got:',profileData.role);navigate('/');return;}console.log('VetDashboard: Access granted for veterinarian');setProfile(profileData);// Load all dashboard data\nawait Promise.all([loadProviderData(currentUser.id),loadPatients(currentUser.id),loadAppointments(currentUser.id),loadDiagnoses(currentUser.id),loadPrescriptions(currentUser.id),loadTriageCases(currentUser.id),loadListings(currentUser.id),loadProducts(currentUser.id),loadPackages(currentUser.id)]);// Calculate stats\ncalculateDashboardStats();}catch(error){console.error('VetDashboard: Error in initialization:',error);Sentry.captureException(error);showError('Failed to load dashboard data. Please refresh the page.');}finally{setLoading(false);}};const loadProviderData=async userId=>{try{const{data,error}=await supabase.from('providers').select('*').eq('user_id',userId).single();if(data){setProviderData(data);}else{// Create default provider profile for veterinarian\nconst defaultProvider={id:userId,user_id:userId,provider_type:'veterinarian',full_name:(profile===null||profile===void 0?void 0:profile.full_name)||(user===null||user===void 0?void 0:user.email),email:user===null||user===void 0?void 0:user.email,phone:(profile===null||profile===void 0?void 0:profile.phone)||null,bio:'Professional veterinarian providing comprehensive medical care for animals.',specializations:['General Practice'],years_experience:0,verified:false,is_active:true};setProviderData(defaultProvider);}}catch(error){console.error('Error loading provider data:',error);}};const loadPatients=async userId=>{try{// Get patients only from consultation bookings and appointments\nconst{data,error}=await supabase.from('consultation_bookings').select(`\n          pet_profiles (\n            id,\n            name,\n            species,\n            age,\n            created_at\n          )\n        `).eq('provider_id',userId).not('pet_profiles','is',null);if(error)throw error;// Extract unique patients from bookings\nconst uniquePatients=[];const patientIds=new Set();data===null||data===void 0?void 0:data.forEach(booking=>{if(booking.pet_profiles&&!patientIds.has(booking.pet_profiles.id)){patientIds.add(booking.pet_profiles.id);uniquePatients.push(booking.pet_profiles);}});setPatients(uniquePatients||[]);}catch(error){console.error('Error loading patients:',error);// Fallback to empty array\nsetPatients([]);}};const loadAppointments=async userId=>{try{const{data,error}=await supabase.from('bookings').select('*, pet_profiles(name, species), profiles(full_name)').eq('provider_id',userId).order('scheduled_date',{ascending:true});if(error)throw error;setAppointments(data||[]);}catch(error){console.error('Error loading appointments:',error);}};const loadDiagnoses=async userId=>{try{const{data,error}=await supabase.from('medical_records').select('*, pet_profiles(name, species)').eq('veterinarian_id',userId).eq('record_type','diagnosis').order('created_at',{ascending:false});if(error)throw error;setDiagnoses(data||[]);}catch(error){console.error('Error loading diagnoses:',error);}};const loadPrescriptions=async userId=>{try{const{data,error}=await supabase.from('medical_records').select('*, pet_profiles(name, species)').eq('veterinarian_id',userId).eq('record_type','prescription').order('created_at',{ascending:false});if(error)throw error;setPrescriptions(data||[]);}catch(error){console.error('Error loading prescriptions:',error);}};const loadTriageCases=async userId=>{try{const{data,error}=await supabase.from('triage_cases').select('*, pet_profiles(name, species)').eq('assigned_vet_id',userId).order('priority',{ascending:false});if(error)throw error;setTriageCases(data||[]);}catch(error){console.error('Error loading triage cases:',error);}};const loadListings=async userId=>{try{const{data:{user}}=await supabase.auth.getUser();if(!user)return;const{data,error}=await supabase.from('marketplace_listings').select('*').eq('provider_email',user.email).order('created_at',{ascending:false});if(error)throw error;setListings(data||[]);}catch(error){console.error('Error loading listings:',error);}};const loadProducts=async userId=>{try{const{data:{user}}=await supabase.auth.getUser();if(!user)return;const{data,error}=await supabase.from('marketplace_listings').select('*').eq('provider_email',user.email).eq('listing_type','product').order('created_at',{ascending:false});if(error)throw error;const productsFromMarketplace=(data||[]).map(listing=>({id:listing.listing_id,name:listing.name,description:listing.description,price:listing.price,category:listing.category,brand:listing.brand,stockQuantity:listing.stock_quantity,photos:listing.image_url?[{id:1,url:listing.image_url,name:'Product Image'}]:[],specifications:''}));setProducts(productsFromMarketplace);}catch(error){console.error('Error loading products:',error);}};const loadPackages=async userId=>{try{const{data,error}=await supabase.from('packages').select('*').eq('provider_id',userId).order('created_at',{ascending:false});if(error)throw error;setPackages(data||[]);}catch(error){console.error('Error loading packages:',error);}};const calculateDashboardStats=()=>{const totalPatients=patients.length;const todayAppointments=appointments.filter(apt=>{const today=new Date().toDateString();return new Date(apt.scheduled_date).toDateString()===today;}).length;const urgentCases=triageCases.filter(case_=>case_.priority==='urgent').length;const activePrescriptions=prescriptions.filter(rx=>rx.status==='active').length;setStats({totalPatients,todayAppointments,urgentCases,activePrescriptions,totalDiagnoses:diagnoses.length,totalListings:listings.length});};// Veterinarian-specific navigation sections\nconst navigationSections=[{id:'overview',name:'Overview',icon:/*#__PURE__*/_jsx(UIIcon,{type:\"overview\",className:\"w-5 h-5\"})},{id:'patients',name:'Patients',icon:/*#__PURE__*/_jsx(UIIcon,{type:\"patients\",className:\"w-5 h-5\"})},{id:'appointments',name:'Bookings',icon:/*#__PURE__*/_jsx(UIIcon,{type:\"appointments\",className:\"w-5 h-5\"})},{id:'diagnoses',name:'Diagnoses',icon:/*#__PURE__*/_jsx(UIIcon,{type:\"procedures\",className:\"w-5 h-5\"})},{id:'prescriptions',name:'Prescriptions',icon:/*#__PURE__*/_jsx(UIIcon,{type:\"prescriptions\",className:\"w-5 h-5\"})},{id:'triage',name:'Triage Cases',icon:/*#__PURE__*/_jsx(UIIcon,{type:\"triageCases\",className:\"w-5 h-5\"})},{id:'marketplace',name:'Marketplace',icon:/*#__PURE__*/_jsx(UIIcon,{type:\"marketplace\",className:\"w-5 h-5\"})},{id:'analytics',name:'Analytics',icon:/*#__PURE__*/_jsx(UIIcon,{type:\"analytics\",className:\"w-5 h-5\"})},{id:'profile',name:'Profile',icon:/*#__PURE__*/_jsx(UIIcon,{type:\"profile\",className:\"w-5 h-5\"})}];// Render functions for each section\nconst renderOverviewSection=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:block hidden\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-gray-900\",children:[\"Welcome back, Dr. \",(profile===null||profile===void 0?void 0:profile.full_name)||'Veterinarian']})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAvailabilityModal(true),className:\"hidden lg:flex px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors items-center text-sm sm:text-base\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Manage Schedule\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sm:hidden\",children:\"Schedule\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 text-sm font-medium\",children:\"Today's Appointments\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-900\",children:stats.todayAppointments||0})]}),/*#__PURE__*/_jsx(UIIcon,{type:\"appointments\",className:\"w-8 h-8 text-green-600\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600 text-sm font-medium\",children:\"Total Patients\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-900\",children:stats.totalPatients||0})]}),/*#__PURE__*/_jsx(UIIcon,{type:\"patients\",className:\"w-8 h-8 text-blue-600\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-sm font-medium\",children:\"Urgent Cases\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-red-900\",children:stats.urgentCases||0})]}),/*#__PURE__*/_jsx(UIIcon,{type:\"urgentCases\",className:\"w-8 h-8 text-red-600\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-50 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-600 text-sm font-medium\",children:\"Active Prescriptions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-purple-900\",children:stats.activePrescriptions||0})]}),/*#__PURE__*/_jsx(UIIcon,{type:\"prescriptions\",className:\"w-8 h-8 text-purple-600\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(MarketplaceSummary,{listings:listings,packages:packages,products:products,setActiveSection:setActiveSection}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Urgent Cases\"}),triageCases.filter(case_=>case_.priority==='urgent').length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No urgent cases at the moment\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:triageCases.filter(case_=>case_.priority==='urgent').slice(0,3).map(case_=>{var _case_$pet_profiles;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-red-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:(_case_$pet_profiles=case_.pet_profiles)===null||_case_$pet_profiles===void 0?void 0:_case_$pet_profiles.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:case_.chief_complaint})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveSection('triage'),className:\"text-red-600 hover:text-red-800 text-sm font-medium\",children:\"Review \\u2192\"})]},case_.id);})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Today's Booking\"}),appointments.filter(apt=>{const today=new Date().toDateString();return new Date(apt.scheduled_date).toDateString()===today;}).length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No appointments scheduled for today\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:appointments.filter(apt=>{const today=new Date().toDateString();return new Date(apt.scheduled_date).toDateString()===today;}).slice(0,3).map(appointment=>{var _appointment$pet_prof;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-green-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:(_appointment$pet_prof=appointment.pet_profiles)===null||_appointment$pet_prof===void 0?void 0:_appointment$pet_prof.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:new Date(appointment.scheduled_date).toLocaleTimeString()})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveSection('appointments'),className:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",children:\"View \\u2192\"})]},appointment.id);})})]})})]});const renderPatientsSection=()=>/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-6\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"My Patients\"})}),patients.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(UIIcon,{type:\"patients\",className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"No patients from marketplace bookings yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-1\",children:\"Patients will appear here when pet owners book your services\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:patients.map(patient=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:patient.name}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:patient.species})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mb-3\",children:[\"Age: \",patient.age||'Unknown']}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full text-sm bg-green-50 text-green-700 py-2 rounded hover:bg-green-100\",children:\"View Records\"})]},patient.id))})]})});const renderAppointmentsSection=()=>/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-6\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Marketplace Bookings\"})}),appointments.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(UIIcon,{type:\"appointments\",className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"No marketplace bookings yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-1\",children:\"Pet owners can book your services through the Luniby marketplace\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:appointments.map(appointment=>{var _appointment$pet_prof2,_appointment$profiles;return/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:(_appointment$pet_prof2=appointment.pet_profiles)===null||_appointment$pet_prof2===void 0?void 0:_appointment$pet_prof2.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Owner: \",(_appointment$profiles=appointment.profiles)===null||_appointment$profiles===void 0?void 0:_appointment$profiles.full_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[new Date(appointment.scheduled_date).toLocaleDateString(),\" at \",new Date(appointment.scheduled_date).toLocaleTimeString()]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 text-xs rounded-full ${appointment.status==='confirmed'?'bg-green-100 text-green-800':appointment.status==='pending'?'bg-yellow-100 text-yellow-800':'bg-gray-100 text-gray-800'}`,children:appointment.status})})]})},appointment.id);})})]})});const renderDiagnosesSection=()=>/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-6\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Diagnosis & Treatment Plans\"})}),diagnoses.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(UIIcon,{type:\"diagnosis\",className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"No diagnoses recorded yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-1\",children:\"Create diagnoses during marketplace consultations\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:diagnoses.map(diagnosis=>{var _diagnosis$pet_profil;return/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:(_diagnosis$pet_profil=diagnosis.pet_profiles)===null||_diagnosis$pet_profil===void 0?void 0:_diagnosis$pet_profil.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:diagnosis.diagnosis||diagnosis.notes}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-2\",children:new Date(diagnosis.created_at).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-green-600 hover:text-green-800 text-sm font-medium\",children:\"Edit \\u2192\"})]})},diagnosis.id);})})]})});const renderPrescriptionsSection=()=>/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-6\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Prescription Management\"})}),prescriptions.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(UIIcon,{type:\"prescriptions\",className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"No prescriptions issued yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-1\",children:\"Issue prescriptions during marketplace consultations\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:prescriptions.map(prescription=>{var _prescription$pet_pro;return/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:(_prescription$pet_pro=prescription.pet_profiles)===null||_prescription$pet_pro===void 0?void 0:_prescription$pet_pro.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:prescription.medication||prescription.notes}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-2\",children:[\"Prescribed: \",new Date(prescription.created_at).toLocaleDateString()]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 text-xs rounded-full ${prescription.status==='active'?'bg-green-100 text-green-800':prescription.status==='completed'?'bg-gray-100 text-gray-800':'bg-yellow-100 text-yellow-800'}`,children:prescription.status||'active'})})]})},prescription.id);})})]})});const renderTriageSection=()=>/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-6\",children:\"Triage Cases\"}),triageCases.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(UIIcon,{type:\"triageCases\",className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"No triage cases assigned\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:triageCases.map(case_=>{var _case_$pet_profiles2;return/*#__PURE__*/_jsx(\"div\",{className:`border rounded-lg p-4 ${case_.priority==='urgent'?'border-red-200 bg-red-50':case_.priority==='high'?'border-yellow-200 bg-yellow-50':'border-gray-200'}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:(_case_$pet_profiles2=case_.pet_profiles)===null||_case_$pet_profiles2===void 0?void 0:_case_$pet_profiles2.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:case_.chief_complaint}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mt-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:`px-2 py-1 text-xs rounded-full ${case_.priority==='urgent'?'bg-red-100 text-red-800':case_.priority==='high'?'bg-yellow-100 text-yellow-800':'bg-gray-100 text-gray-800'}`,children:[case_.priority,\" priority\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:new Date(case_.created_at).toLocaleDateString()})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-green-600 hover:text-green-800 text-sm font-medium\",children:\"Review Case \\u2192\"})]})},case_.id);})})]})});const renderMarketplaceSection=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 mb-2\",children:\"Marketplace\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:providerData!==null&&providerData!==void 0&&providerData.verified?\"Your profile is live and accepting bookings from customers\":listings.length>0?\"Ready to publish your services to the marketplace\":\"Create services to get started on the marketplace\"})]}),!(providerData!==null&&providerData!==void 0&&providerData.verified)&&listings.length>0&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleGoLive,className:\"px-4 sm:px-6 py-2 sm:py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 text-sm sm:text-base\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"rocket\",className:\"w-4 h-4 sm:w-5 sm:h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Go Live on Marketplace\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sm:hidden\",children:\"Go Live\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center\",children:/*#__PURE__*/_jsx(\"div\",{})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-900\",children:\"Services\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:[getServicesOnly(listings).length,(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&`/${FREE_SERVICE_LIMIT}`]}),getServicesOnly(listings).length>0&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{window.open('/marketplace','_blank');},className:\"inline-flex items-center text-gray-500 hover:text-green-600 text-xs font-medium\",title:\"View Service Listings\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"search\",className:\"w-4 h-4 mr-1\"}),\"View Listing\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&getServicesOnly(listings).length>=FREE_SERVICE_LIMIT&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-green-600 font-medium\",children:[\"At limit - $\",SERVICE_MONTHLY_FEE,\"/month each\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddNewService,className:\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"plus\",className:\"w-4 h-4 mr-2\"}),\"Add Service\"]})]})]}),getServicesOnly(listings).length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:getServicesOnly(listings).map(listing=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 border border-gray-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2 mb-1\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:listing.name||listing.title})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:listing.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setOpenDropdown(openDropdown===`service-${listing.listing_id||listing.id}`?null:`service-${listing.listing_id||listing.id}`),className:\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors\",title:\"More options\",children:/*#__PURE__*/_jsx(UIIcon,{type:\"menu\",className:\"w-4 h-4\"})}),openDropdown===`service-${listing.listing_id||listing.id}`&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border border-gray-200 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingService(listing);setShowEditServiceModal(true);setOpenDropdown(null);},className:\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{handleDeleteService(listing.listing_id||listing.id,listing.name||listing.title);setOpenDropdown(null);},className:\"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50\",children:\"Delete\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Price:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-green-600\",children:[\"$\",listing.price]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Commission:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[\"$\",calculateServiceCommission(listing.price)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"You earn:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-gray-900\",children:[\"$\",getNetEarnings(listing.price)]})]}),listing.active!==undefined&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${listing.active?'bg-green-100 text-green-800':'bg-yellow-100 text-yellow-800'}`,children:listing.active?'Active':'Inactive'})})]})]},listing.listing_id||listing.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(UIIcon,{type:\"listings\",className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No services added yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Create your first veterinary service to start earning on the marketplace.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pt-8 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-900\",children:\"Products\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:[products.length,(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&`/${FREE_PRODUCT_LIMIT}`]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&products.length>=FREE_PRODUCT_LIMIT&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-green-600 font-medium\",children:[\"At limit - $\",PRODUCT_MONTHLY_FEE,\"/month each\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddProductModal,className:\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"plus\",className:\"w-4 h-4 mr-2\"}),\"Add Product\"]})]})]}),products.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:products.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 border border-gray-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-start mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:product.category}),product.brand&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Brand: \",product.brand]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Price:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-blue-600\",children:[\"$\",product.price]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Commission:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[\"$\",calculateProductCommission(product.price)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"You earn:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-gray-900\",children:[\"$\",getNetEarnings(product.price,true)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Stock:\"}),/*#__PURE__*/_jsx(\"span\",{className:`text-xs font-medium ${(product.stockQuantity||0)>0?'text-green-600':'text-red-600'}`,children:(product.stockQuantity||0)>0?`${product.stockQuantity} in stock`:'Out of stock'})]})]})]},product.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(UIIcon,{type:\"products\",className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No products added yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Add veterinary products to sell alongside your services.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pt-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-900\",children:\"Packages\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:[packages.length,(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&`/${FREE_PACKAGE_LIMIT}`]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[(!(providerData!==null&&providerData!==void 0&&providerData.subscription_plan)||(providerData===null||providerData===void 0?void 0:providerData.subscription_plan)==='free')&&packages.length>=FREE_PACKAGE_LIMIT&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-purple-600 font-medium\",children:[\"At limit - $\",PACKAGE_MONTHLY_FEE,\"/month each\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddNewPackage,className:\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"plus\",className:\"w-4 h-4 mr-2\"}),\"Add Package\"]})]})]}),packages.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:packages.map(pkg=>{var _pkg$service_ids,_pkg$package_price;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 border border-gray-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-start mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:pkg.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[((_pkg$service_ids=pkg.service_ids)===null||_pkg$service_ids===void 0?void 0:_pkg$service_ids.length)||0,\" services included\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Package Price:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-purple-600\",children:[\"$\",(_pkg$package_price=pkg.package_price)===null||_pkg$package_price===void 0?void 0:_pkg$package_price.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${pkg.is_active?'bg-green-100 text-green-800':'bg-gray-100 text-gray-800'}`,children:pkg.is_active?'Active':'Inactive'})]})]})]},pkg.id);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(UIIcon,{type:\"package\",className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No packages created yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Bundle services together to offer better value to customers.\"})]})]})]})]})]});// Go Live function - publishes provider profile to marketplace\nconst handleGoLive=async()=>{try{const currentUser=await getUserSafely();if(!currentUser){showError('User not authenticated');return;}// Check if provider record exists\nconst{data:existingProvider}=await supabase.from('providers').select('id, verified').eq('id',currentUser.id).single();if(existingProvider){// Update existing provider to be verified/live\nconst{error:updateError}=await supabase.from('providers').update({verified:true,is_active:true}).eq('id',currentUser.id);if(updateError)throw updateError;showSuccess(' Your profile is now live on the marketplace! You can view it using \"View My Listing\".');}else{// Create new provider record\nconst providerProfile=profile||{};const newProviderData={id:currentUser.id,name:(providerProfile===null||providerProfile===void 0?void 0:providerProfile.full_name)||currentUser.email,email:currentUser.email,phone:(providerProfile===null||providerProfile===void 0?void 0:providerProfile.phone)||null,provider_type:'veterinarian',business_name:(providerProfile===null||providerProfile===void 0?void 0:providerProfile.business_name)||null,address:null,city:'Location TBD',country:'Australia',bio:'Professional veterinarian providing comprehensive medical care for animals.',offers_services:true,offers_products:false,verified:true,// Live on marketplace\nis_active:true,featured:false,rating:0.00,reviews_count:0,profile_image_url:null,service_types:['Veterinary Services']};const{error:insertError}=await supabase.from('providers').insert(newProviderData);if(insertError)throw insertError;showSuccess(' Your profile is now live on the marketplace! You can view it using \"View My Listing\".');}// Update all services to be verified/active\nconst{error:servicesError}=await supabase.from('marketplace_listings').update({verified:true,active:true}).eq('provider_email',currentUser.email);if(servicesError){console.error('Error updating services:',servicesError);}// Reload data to reflect changes\nawait initializeDashboard();}catch(error){console.error('Error going live:',error);showError('Failed to go live: '+error.message);}};// Service creation handler\nconst handleCreateService=async serviceData=>{try{var _window$crypto2,_window$crypto2$rando;const currentUser=await getUserSafely();if(!currentUser){throw new Error('User not authenticated');}// Get provider data first\nconst currentProviderData=providerData||profile||{};// Check free tier limits (5 services for free users)\nconst currentServiceCount=getServicesOnly(listings).length;const subscriptionPlan=currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.subscription_plan;const isFreeTier=!subscriptionPlan||subscriptionPlan==='free'||subscriptionPlan!=='premium';if(isFreeTier&&currentServiceCount>=FREE_SERVICE_LIMIT){showError(`Free tier limit reached! You can have up to ${FREE_SERVICE_LIMIT} services. Click \"Upgrade to Premium\" to get unlimited services.`);return;}const insertData={listing_type:'service',listing_id:((_window$crypto2=window.crypto)===null||_window$crypto2===void 0?void 0:(_window$crypto2$rando=_window$crypto2.randomUUID)===null||_window$crypto2$rando===void 0?void 0:_window$crypto2$rando.call(_window$crypto2))||Math.random().toString(36),name:serviceData.title,description:serviceData.description,service_types:serviceData.service_type,price:parseFloat(serviceData.price),provider_name:(currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.full_name)||currentUser.email,provider_type:'veterinarian',provider_email:currentUser.email,provider_phone:(currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.phone)||'N/A',active:true,verified:false,rating:0.0,reviews_count:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};const{data,error}=await supabase.from('marketplace_listings').insert(insertData).select();if(error){throw new Error(`Database error: ${error.message} (Code: ${error.code})`);}showSuccess('Service created successfully!');setShowCreateServiceModal(false);await loadListings(currentUser.id);// Refresh data\n}catch(error){console.error('Error creating service:',error);showError(`Failed to create service: ${error.message}`);}};// Service editing handler\nconst handleUpdateService=async serviceData=>{try{const updateData={name:serviceData.title,description:serviceData.description,service_types:serviceData.service_type,price:parseFloat(serviceData.price),updated_at:new Date().toISOString()};const{error}=await supabase.from('marketplace_listings').update(updateData).eq('listing_id',editingService.listing_id||editingService.id);if(error){throw new Error(`Database error: ${error.message} (Code: ${error.code})`);}showSuccess('Service updated successfully!');setShowEditServiceModal(false);setEditingService(null);await loadListings(user.id);// Refresh data\n}catch(error){console.error('Error updating service:',error);showError(`Failed to update service: ${error.message}`);}};// Role-based service options\nconst getServiceOptions=providerType=>{const baseServices=[{value:\"Mobile Consultation\",label:\"Mobile Consultation\"},{value:\"Mobile Emergency Care\",label:\"Mobile Emergency Care\"}];// Veterinarian services\nreturn[...baseServices,{value:\"Clinic Consultation\",label:\"Clinic Consultation\"},{value:\"Surgery Services\",label:\"Surgery Services\"},{value:\"Diagnostic Testing\",label:\"Diagnostic Testing\"},{value:\"Preventive Care\",label:\"Preventive Care\"},{value:\"Dental Care\",label:\"Dental Care\"},{value:\"Orthopedic Care\",label:\"Orthopedic Care\"},{value:\"Laboratory Services\",label:\"Laboratory Services\"},{value:\"Telemedicine Consultation\",label:\"Telemedicine Consultation\"},{value:\"Emergency Surgery\",label:\"Emergency Surgery\"},{value:\"Specialist Referral\",label:\"Specialist Referral\"},{value:\"Prescription Management\",label:\"Prescription Management\"},{value:\"Vaccination Programs\",label:\"Vaccination Programs\"}];};// Service edit component\nconst ServiceEditForm=_ref=>{let{service,onClose}=_ref;const[serviceData,setServiceData]=useState({title:service.name||service.title||'',description:service.description||'',price:service.price||service.price_from||'',service_type:service.service_types||service.service_type||''});const handleSubmit=async e=>{e.preventDefault();await handleUpdateService(serviceData);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Edit Service\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600 text-2xl\",children:\"\\xD7\"})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Service Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:serviceData.title,onChange:e=>setServiceData({...serviceData,title:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., Veterinary Consultation\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Service Type *\"}),/*#__PURE__*/_jsxs(\"select\",{required:true,value:serviceData.service_type,onChange:e=>setServiceData({...serviceData,service_type:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select service type\"}),getServiceOptions('veterinarian').map(service=>/*#__PURE__*/_jsx(\"option\",{value:service.value,children:service.label},service.value))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Price *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:true,min:\"0\",step:\"0.01\",value:serviceData.price,onChange:e=>setServiceData({...serviceData,price:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"150.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:serviceData.description,onChange:e=>setServiceData({...serviceData,description:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",rows:\"3\",placeholder:\"Describe your service...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"check\",className:\"w-4 h-4 mr-2\"}),\"Update Service\"]})]})]})]})});};// Service creation component\nconst ServiceCreateForm=_ref2=>{let{onClose}=_ref2;const[serviceData,setServiceData]=useState({title:'',description:'',price:'',service_type:''});const handleSubmit=async e=>{e.preventDefault();await handleCreateService(serviceData);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Create New Service\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600 text-2xl\",children:\"\\xD7\"})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Service Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:serviceData.title,onChange:e=>setServiceData({...serviceData,title:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., Veterinary Consultation\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Service Type *\"}),/*#__PURE__*/_jsxs(\"select\",{required:true,value:serviceData.service_type,onChange:e=>setServiceData({...serviceData,service_type:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select service type\"}),getServiceOptions('veterinarian').map(service=>/*#__PURE__*/_jsx(\"option\",{value:service.value,children:service.label},service.value))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Price *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:true,min:\"0\",step:\"0.01\",value:serviceData.price,onChange:e=>setServiceData({...serviceData,price:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"150.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:serviceData.description,onChange:e=>setServiceData({...serviceData,description:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",rows:\"3\",placeholder:\"Describe your service...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"plus\",className:\"w-4 h-4 mr-2\"}),\"Create Service\"]})]})]})]})});};const renderProfileSection=()=>{var _providerData$special;return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-6\",children:\"Veterinarian Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-4\",children:\"Professional Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:(profile===null||profile===void 0?void 0:profile.full_name)||'Not set'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:user===null||user===void 0?void 0:user.email})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:(profile===null||profile===void 0?void 0:profile.phone)||'Not set'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Practice/Organization\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:(profile===null||profile===void 0?void 0:profile.organization)||'Not set'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-4\",children:\"Practice Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Specializations\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:(providerData===null||providerData===void 0?void 0:(_providerData$special=providerData.specializations)===null||_providerData$special===void 0?void 0:_providerData$special.join(', '))||'General Practice'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Years of Experience\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-900\",children:[(providerData===null||providerData===void 0?void 0:providerData.years_experience)||0,\" years\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"License Status\"}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 text-xs rounded-full ${providerData!==null&&providerData!==void 0&&providerData.verified?'bg-green-100 text-green-800':'bg-yellow-100 text-yellow-800'}`,children:providerData!==null&&providerData!==void 0&&providerData.verified?'Verified':'Pending Verification'})]})]})]})]})]})});};const renderAnalyticsSection=()=>{// Calculate financial metrics\nconst calculateRevenue=()=>{const completedBookings=appointments.filter(apt=>apt.status==='completed');const serviceRevenue=completedBookings.reduce((total,appointment)=>{// Estimate revenue from appointments\nconst estimatedPrice=150;// Average vet consultation price\nconst netEarnings=estimatedPrice*0.85;// 15% platform fee\nreturn total+netEarnings;},0);// Estimate product revenue (since we don't have actual sales data)\nconst productRevenue=listings.length*25;// Estimated average monthly revenue per listing\n// Package revenue estimation\nconst packageRevenue=listings.filter(l=>l.active).reduce((total,listing)=>{const price=parseFloat(listing.price_from||listing.price||0);return total+price*0.1;// Estimated 10% of listing price as monthly package revenue\n},0);return{total:serviceRevenue+productRevenue+packageRevenue,services:serviceRevenue,products:productRevenue,packages:packageRevenue};};const revenue=calculateRevenue();const thisMonthAppointments=appointments.filter(apt=>{const appointmentDate=new Date(apt.created_at);const now=new Date();return appointmentDate.getMonth()===now.getMonth()&&appointmentDate.getFullYear()===now.getFullYear();});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 mb-2\",children:\"Financial Analytics\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Track your earnings from consultations, services, and products. All figures show net earnings after platform fees.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 border border-green-200 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-green-600\",children:\"Total Earnings\"}),/*#__PURE__*/_jsx(UIIcon,{type:\"earnings\",className:\"w-6 h-6 text-green-500\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-green-900\",children:[\"$\",revenue.total.toFixed(2)]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-green-600 mt-1\",children:\"Net earnings (after fees)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-blue-600\",children:\"Consultation Revenue\"}),/*#__PURE__*/_jsx(UIIcon,{type:\"consultation\",className:\"w-6 h-6 text-blue-500\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-blue-900\",children:[\"$\",revenue.services.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-600 mt-1\",children:[appointments.filter(apt=>apt.status==='completed').length,\" completed consultations\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-orange-50 border border-orange-200 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-orange-600\",children:\"Service Listings\"}),/*#__PURE__*/_jsx(UIIcon,{type:\"listings\",className:\"w-6 h-6 text-orange-500\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-orange-900\",children:[\"$\",revenue.products.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-orange-600 mt-1\",children:[listings.length,\" services listed\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-50 border border-purple-200 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-purple-600\",children:\"Package Revenue\"}),/*#__PURE__*/_jsx(UIIcon,{type:\"package\",className:\"w-6 h-6 text-purple-500\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-purple-900\",children:[\"$\",revenue.packages.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-purple-600 mt-1\",children:[listings.filter(l=>l.active).length,\" active listings\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Revenue Breakdown\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-green-500 rounded-full mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Consultations\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold text-gray-900\",children:[\"$\",revenue.services.toFixed(2)]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-32 bg-gray-200 rounded-full h-2 mt-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-500 h-2 rounded-full\",style:{width:`${revenue.total>0?revenue.services/revenue.total*100:0}%`}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-green-400 rounded-full mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Services\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold text-gray-900\",children:[\"$\",revenue.products.toFixed(2)]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-32 bg-gray-200 rounded-full h-2 mt-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-400 h-2 rounded-full\",style:{width:`${revenue.total>0?revenue.products/revenue.total*100:0}%`}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-green-300 rounded-full mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Packages\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold text-gray-900\",children:[\"$\",revenue.packages.toFixed(2)]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-32 bg-gray-200 rounded-full h-2 mt-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-300 h-2 rounded-full\",style:{width:`${revenue.total>0?revenue.packages/revenue.total*100:0}%`}})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Performance Metrics\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Consultation Success Rate\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold text-green-600\",children:[appointments.length>0?Math.round(appointments.filter(apt=>apt.status==='completed').length/appointments.length*100):0,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Average Service Price\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-bold text-gray-900\",children:[\"$\",listings.length>0?(listings.reduce((sum,l)=>sum+parseFloat(l.price_from||0),0)/listings.length).toFixed(2):'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"This Month Appointments\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold text-green-600\",children:thisMonthAppointments.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Active Listings\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold text-gray-900\",children:listings.filter(l=>l.active).length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Patient Rating\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold text-yellow-600\",children:stats.averageRating>0?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[stats.averageRating,/*#__PURE__*/_jsx(UIIcon,{type:\"rating\",className:\"w-4 h-4 text-yellow-500 ml-1\"})]}):'No ratings yet'})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Recent Transactions\"}),appointments.filter(apt=>apt.status==='completed').length>0?/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Service\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Patient\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Earnings\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:appointments.filter(apt=>apt.status==='completed').slice(0,5).map(appointment=>{var _appointment$pet_prof3;const estimatedPrice=150;// Average vet consultation price\nconst earnings=(estimatedPrice*0.85).toFixed(2);// 15% platform fee\nreturn/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\",children:appointment.consultation_type||'Veterinary Consultation'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:((_appointment$pet_prof3=appointment.pet_profiles)===null||_appointment$pet_prof3===void 0?void 0:_appointment$pet_prof3.name)||'Patient'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:new Date(appointment.created_at).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600\",children:[\"$\",earnings]})]},appointment.id);})})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(UIIcon,{type:\"earnings\",className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No completed transactions yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Once you complete consultations, your earnings will appear here.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-3\",children:\"Tips to Increase Earnings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"growth\",className:\"w-6 h-6 text-green-500 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-gray-900\",children:\"Offer Specialized Services\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Provide specialized veterinary services for higher-value consultations\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"rating\",className:\"w-6 h-6 text-green-500 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-gray-900\",children:\"Maintain High Ratings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Better ratings lead to more bookings and higher consultation fees\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"products\",className:\"w-6 h-6 text-green-500 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-gray-900\",children:\"Recommend Products\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Recommend veterinary products for additional income\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"availability\",className:\"w-6 h-6 text-green-500 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-gray-900\",children:\"Increase Availability\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"More availability means more consultation opportunities\"})]})]})]})]})]});};// Package creation component\nconst PackageForm=_ref3=>{let{isEdit=false,initialData={},onClose}=_ref3;const[packageData,setPackageData]=useState({name:initialData.name||'',description:initialData.description||'',selectedServices:initialData.service_ids||[],packagePrice:initialData.package_price||'',isActive:initialData.is_active!==undefined?initialData.is_active:true});const handleServiceToggle=serviceId=>{setPackageData(prev=>({...prev,selectedServices:prev.selectedServices.includes(serviceId)?prev.selectedServices.filter(id=>id!==serviceId):[...prev.selectedServices,serviceId]}));};const getOriginalPrice=()=>{return getServicesOnly(listings).filter(service=>packageData.selectedServices.includes(service.listing_id||service.id)).reduce((total,service)=>total+parseFloat(service.price||service.price_from||0),0);};const getSavings=()=>{const original=getOriginalPrice();const packagePrice=parseFloat(packageData.packagePrice||0);return original-packagePrice;};const handleSubmit=async e=>{e.preventDefault();if(!isEdit&&packageData.selectedServices.length<2){showError('Please select at least 2 services for a package');return;}try{var _window$crypto3,_window$crypto3$rando,_currentUser$email;const currentUser=await getUserSafely();if(!currentUser)throw new Error('User not authenticated');// Check free tier limits (3 packages for free users)\nconst currentPackageCount=packages.length;const currentProviderData=providerData||profile||{};const subscriptionPlan=currentProviderData===null||currentProviderData===void 0?void 0:currentProviderData.subscription_plan;const isFreeTier=!subscriptionPlan||subscriptionPlan==='free'||subscriptionPlan!=='premium';const packageInfo={listing_type:'package',listing_id:isEdit?initialData.id:((_window$crypto3=window.crypto)===null||_window$crypto3===void 0?void 0:(_window$crypto3$rando=_window$crypto3.randomUUID)===null||_window$crypto3$rando===void 0?void 0:_window$crypto3$rando.call(_window$crypto3))||Math.random().toString(36),name:packageData.name,description:packageData.description,price:parseFloat(packageData.packagePrice),service_types:'package',provider_email:currentUser.email,provider_name:(profile===null||profile===void 0?void 0:profile.full_name)||(providerData===null||providerData===void 0?void 0:providerData.name)||((_currentUser$email=currentUser.email)===null||_currentUser$email===void 0?void 0:_currentUser$email.split('@')[0]),provider_type:'veterinarian',active:packageData.isActive,verified:false,rating:0.0,reviews_count:0,created_at:isEdit?undefined:new Date().toISOString(),updated_at:new Date().toISOString()};// Save to marketplace_listings\nlet savedPackage;if(isEdit){const{data,error}=await supabase.from('marketplace_listings').update(packageInfo).eq('listing_id',initialData.id).eq('provider_email',currentUser.email).select().single();if(error)throw error;savedPackage=data;}else{const{data,error}=await supabase.from('marketplace_listings').insert([packageInfo]).select().single();if(error)throw error;savedPackage=data;}// Refresh data to show updated packages\nawait Promise.all([loadListings(currentUser.id),loadPackages(currentUser.id)]);showSuccess(`Package ${isEdit?'updated':'created'} successfully!`);onClose();}catch(error){console.error('Error saving package:',error);showError('Failed to save package: '+error.message);}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:isEdit?'Edit Package':'Create Package'}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600 text-2xl\",children:\"\\xD7\"})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Package Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:packageData.name,onChange:e=>setPackageData({...packageData,name:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"e.g., Complete Veterinary Care Package\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Package Price *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:true,min:\"0\",step:\"0.01\",value:packageData.packagePrice,onChange:e=>setPackageData({...packageData,packagePrice:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",placeholder:\"250.00\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:packageData.description,onChange:e=>setPackageData({...packageData,description:e.target.value}),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\",rows:\"3\",placeholder:\"Describe what's included in this veterinary package...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-4\",children:\"Select Services *\"}),getServicesOnly(listings).length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-3\",children:getServicesOnly(listings).map(service=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:`package-service-${service.listing_id||service.id}`,checked:packageData.selectedServices.includes(service.listing_id||service.id),onChange:()=>handleServiceToggle(service.listing_id||service.id),className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:`package-service-${service.listing_id||service.id}`,className:\"ml-3 flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:service.name||service.title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:service.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"font-bold text-gray-900\",children:[\"$\",service.price||service.price_from]})]},service.listing_id||service.id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"You need to create services first before you can bundle them into packages.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{onClose();handleAddNewService();},className:\"mt-3 text-blue-600 hover:text-blue-800 font-medium\",children:\"Create Your First Service \\u2192\"})]})]}),packageData.selectedServices.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center mb-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:\"Package Summary\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Original Price:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",getOriginalPrice().toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Package Price:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",parseFloat(packageData.packagePrice||0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between font-bold text-green-600\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Customer Saves:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",getSavings().toFixed(2)]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"package-active\",checked:packageData.isActive,onChange:e=>setPackageData({...packageData,isActive:e.target.checked}),className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"package-active\",className:\"ml-2 text-sm text-gray-700\",children:\"Make this package available to customers\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:!isEdit&&packageData.selectedServices.length<2,className:`inline-flex items-center px-4 py-2 rounded-lg text-white text-sm font-medium ${isEdit||packageData.selectedServices.length>=2?'bg-blue-600 hover:bg-blue-700':'bg-gray-400 cursor-not-allowed'}`,children:[/*#__PURE__*/_jsx(UIIcon,{type:\"check\",className:\"w-4 h-4 mr-2\"}),isEdit?'Update Package':'Create Package']})]})]})]})});};// Main render function\nconst renderActiveSection=()=>{switch(activeSection){case'overview':return renderOverviewSection();case'patients':return renderPatientsSection();case'appointments':return renderAppointmentsSection();case'diagnoses':return renderDiagnosesSection();case'prescriptions':return renderPrescriptionsSection();case'triage':return renderTriageSection();case'marketplace':return renderMarketplaceSection();case'analytics':return renderAnalyticsSection();case'profile':return renderProfileSection();default:return renderOverviewSection();}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Loading veterinarian dashboard...\"})]})});}return/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:hidden bg-white border-b border-gray-200 px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h4\",{className:\"text-md font-medium text-gray-900\",children:[\"Welcome back, Dr. \",(profile===null||profile===void 0?void 0:profile.full_name)||'Veterinarian']})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAvailabilityModal(true),className:\"px-3 py-1.5 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm\",children:\"Schedule\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:hidden bg-white border-b border-gray-200 px-2 py-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex overflow-x-auto space-x-1 pb-2\",children:navigationSections.map(section=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveSection(section.id),className:`flex-shrink-0 flex items-center px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${activeSection===section.id?'bg-green-100 text-green-700':'text-gray-600 hover:text-gray-900 hover:bg-gray-50'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-1.5\",children:section.icon}),section.name]},section.id))})}),/*#__PURE__*/_jsx(\"div\",{className:\"hidden lg:block w-64 bg-white shadow-sm border-r border-gray-200 min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://wagrmmbkukwblfpfxxcb.supabase.co/storage/v1/object/public/web-img/vet.svg\",alt:\"Veterinarian\",className:\"w-10 h-10\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-semibold text-gray-900 truncate\",children:\"Veterinarian\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 truncate\",children:profile===null||profile===void 0?void 0:profile.full_name})]})]})}),/*#__PURE__*/_jsx(\"nav\",{className:\"space-y-2\",children:navigationSections.map(section=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveSection(section.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${activeSection===section.id?'bg-green-100 text-green-700':'text-gray-600 hover:text-gray-900 hover:bg-gray-50'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-3\",children:section.icon}),section.name]},section.id))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 p-3 sm:p-4 lg:p-6\",children:renderActiveSection()})]}),showAvailabilityModal&&/*#__PURE__*/_jsx(ProviderAvailability,{isOpen:showAvailabilityModal,onClose:()=>setShowAvailabilityModal(false),providerData:providerData}),showCreateServiceModal&&/*#__PURE__*/_jsx(ServiceCreateForm,{onClose:()=>setShowCreateServiceModal(false)}),showEditServiceModal&&editingService&&/*#__PURE__*/_jsx(ServiceEditForm,{service:editingService,onClose:()=>{setShowEditServiceModal(false);setEditingService(null);}}),showAddProductModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:editingProduct?'Edit Product':'Add Product'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAddProductModal(false);setEditingProduct(null);setProductForm({name:'',description:'',price:'',category:'Accessories',brand:'',stockQuantity:'',photos:[],specifications:''});},className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(UIIcon,{type:\"close\",className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleAddProduct();},className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Product Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:productForm.name,onChange:e=>setProductForm({...productForm,name:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"e.g., Premium Dog Food\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Brand\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:productForm.brand,onChange:e=>setProductForm({...productForm,brand:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"e.g., Royal Canin\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:productForm.description,onChange:e=>setProductForm({...productForm,description:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",rows:\"3\",placeholder:\"Describe the product, its benefits, and usage instructions...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Price ($) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",value:productForm.price,onChange:e=>setProductForm({...productForm,price:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"0.00\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Category *\"}),/*#__PURE__*/_jsxs(\"select\",{value:productForm.category,onChange:e=>setProductForm({...productForm,category:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Accessories\",children:\"Accessories\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Supplements\",children:\"Supplements\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Stock Quantity *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:productForm.stockQuantity,onChange:e=>setProductForm({...productForm,stockQuantity:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"0\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Product Photos (up to 4)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"photo-upload\",multiple:true,accept:\"image/*\",onChange:handlePhotoUpload,className:\"hidden\",disabled:productForm.photos.length>=4}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"photo-upload\",className:`cursor-pointer ${productForm.photos.length>=4?'cursor-not-allowed opacity-50':''}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"image\",className:\"mx-auto h-8 w-8 text-gray-400\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-blue-600 hover:text-blue-500\",children:\"Click to upload photos\"}),/*#__PURE__*/_jsx(\"span\",{children:\" or drag and drop\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"PNG, JPG, GIF up to 10MB each\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[productForm.photos.length,\"/4 photos uploaded\"]})]})})]}),productForm.photos.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3\",children:productForm.photos.map((photo,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"img\",{src:photo.url,alt:`Product view ${index+1}`,className:\"w-full h-20 object-cover rounded-lg border border-gray-200\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removePhoto(photo.id),className:\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity\",children:\"\\xD7\"}),index===0&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-1 left-1 bg-blue-500 text-white text-xs px-1 py-0.5 rounded\",children:\"Main\"})]},photo.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Specifications\"}),/*#__PURE__*/_jsx(\"textarea\",{value:productForm.specifications,onChange:e=>setProductForm({...productForm,specifications:e.target.value}),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",rows:\"3\",placeholder:\"Size, weight, ingredients, dosage instructions, etc...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowAddProductModal(false);setEditingProduct(null);setProductForm({name:'',description:'',price:'',category:'Accessories',brand:'',stockQuantity:'',photos:[],specifications:''});},className:\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\",children:editingProduct?'Update Product':'Add Product'})]})]})]})}),showPackageModal&&/*#__PURE__*/_jsx(PackageForm,{isEdit:!!editingPackage,initialData:editingPackage||{},onClose:()=>{setShowPackageModal(false);setEditingPackage(null);}}),showPayPerListingModal&&payPerListingType&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl max-w-md w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:[\"Add More \",payPerListingType==='service'?'Services':payPerListingType==='product'?'Products':'Packages']}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPayPerListingModal(false),className:\"text-gray-400 hover:text-gray-600 text-2xl\",children:\"\\xD7\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:[\"Expand Your \",payPerListingType==='service'?'Services':payPerListingType==='product'?'Products':'Packages']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 text-sm\",children:[\"You have \",payPerListingType==='service'?`${getServicesOnly(listings).length}/${FREE_SERVICE_LIMIT} services`:payPerListingType==='product'?`${products.length}/${FREE_PRODUCT_LIMIT} products`:`${packages.length}/${FREE_PACKAGE_LIMIT} packages`,\". Add more to grow your business!\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-100 p-1 rounded-lg flex\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setBillingPeriod('monthly'),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${billingPeriod==='monthly'?'bg-white text-gray-900 shadow-sm':'text-gray-600 hover:text-gray-900'}`,children:\"Monthly\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setBillingPeriod('yearly'),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${billingPeriod==='yearly'?'bg-white text-gray-900 shadow-sm':'text-gray-600 hover:text-gray-900'}`,children:[\"Yearly\",/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 text-xs text-green-600 font-semibold\",children:\"SAVE 17%\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// TODO: Implement payment processing\nshowSuccess(`Payment integration coming soon! Contact support to add ${billingPeriod} billing for 1 ${payPerListingType} listing.`,5000);setShowPayPerListingModal(false);},className:\"w-full border border-gray-200 rounded-lg p-4 hover:border-green-300 hover:bg-gray-50 transition-colors text-left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900\",children:[\"1 \",payPerListingType==='service'?'Service':payPerListingType==='product'?'Product':'Package']})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-gray-900\",children:[\"$\",getIndividualPrice(payPerListingType)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"$\",billingPeriod==='yearly'?(getIndividualPrice(payPerListingType)/12).toFixed(2)+'/month':getIndividualPrice(payPerListingType)+'/month',billingPeriod==='yearly'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 ml-1\",children:\"(billed yearly)\"})]})]})]})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{// TODO: Implement payment processing\nshowSuccess(`Payment integration coming soon! Contact support to add ${billingPeriod} billing for 3 ${payPerListingType} listings.`,5000);setShowPayPerListingModal(false);},className:\"w-full border-2 border-green-200 rounded-lg p-4 bg-green-50 hover:bg-green-100 transition-colors text-left relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-2 left-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"bg-green-500 text-white px-2 py-1 rounded text-xs font-medium\",children:\"POPULAR\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900\",children:[\"3 \",payPerListingType==='service'?'Services':payPerListingType==='product'?'Products':'Packages']}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-700\",children:\"Save money\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-green-600\",children:[\"$\",get3PackPrice(payPerListingType)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-green-600\",children:[\"$\",billingPeriod==='yearly'?(get3PackPrice(payPerListingType)/12/3).toFixed(2)+'/month each':(get3PackPrice(payPerListingType)/3).toFixed(2)+'/month each',billingPeriod==='yearly'&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-1\",children:\"(billed yearly)\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{// TODO: Implement payment processing\nshowSuccess(`Payment integration coming soon! Contact support to add ${billingPeriod} billing for 5 ${payPerListingType} listings.`,5000);setShowPayPerListingModal(false);},className:\"w-full border-2 border-blue-200 rounded-lg p-4 bg-blue-50 hover:bg-blue-100 transition-colors text-left relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-2 left-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"bg-blue-500 text-white px-2 py-1 rounded text-xs font-medium\",children:\"BEST VALUE\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900\",children:[\"5 \",payPerListingType==='service'?'Services':payPerListingType==='product'?'Products':'Packages']}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-700\",children:\"Best value\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-bold text-blue-600\",children:[\"$\",get5PackPrice(payPerListingType)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-600\",children:[\"$\",billingPeriod==='yearly'?(get5PackPrice(payPerListingType)/12/5).toFixed(2)+'/month each':(get5PackPrice(payPerListingType)/5).toFixed(2)+'/month each',billingPeriod==='yearly'&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-1\",children:\"(billed yearly)\"})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-3\",children:\"What you get:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"space-y-2 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"check\",className:\"w-4 h-4 text-green-500 mr-2\"}),\"Active \",payPerListingType==='service'?'service listing':payPerListingType==='product'?'product listing':'service package listing',billingPeriod==='yearly'?'s':'',\" while subscribed\"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"check\",className:\"w-4 h-4 text-green-500 mr-2\"}),\"Full marketplace visibility\"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"check\",className:\"w-4 h-4 text-green-500 mr-2\"}),\"Same commission rates (\",payPerListingType==='service'?SERVICE_COMMISSION_RATE*100:PRODUCT_COMMISSION_RATE*100,\"%)\"]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"check\",className:\"w-4 h-4 text-green-500 mr-2\"}),billingPeriod==='yearly'?'Save 17% with yearly billing':'Flexible monthly billing']}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(UIIcon,{type:\"check\",className:\"w-4 h-4 text-green-500 mr-2\"}),\"Cancel anytime\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPayPerListingModal(false),className:\"text-gray-500 hover:text-gray-700 transition-colors text-sm underline\",children:\"Maybe Later\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 text-center mt-4\",children:[\"Secure payment processing \\u2022 \",billingPeriod==='yearly'?'Yearly billing (save 17%)':'Monthly billing',\" \\u2022 Cancel anytime\"]})]})]})})]})});};export default VetDashboard;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","supabase","getUserSafely","useNotificationContext","ProviderAvailability","StatsOverview","MarketplaceSummary","MarketplaceManager","CasesSummary","ErrorBoundary","Sentry","PROVIDER_TYPES","getProviderConfig","getProviderLabels","getProviderNavigation","UIIcon","PRICING_LIMITS","COMMISSION_RATES","MONTHLY_FEES","getIndividualPrice","get3PackPrice","get5PackPrice","calculateServiceCommission","calculateProductCommission","getNetEarnings","jsx","_jsx","jsxs","_jsxs","VetDashboard","showInfo","showSuccess","showError","navigate","user","setUser","profile","setProfile","providerData","setProviderData","listings","setListings","patients","setPatients","appointments","setAppointments","diagnoses","setDiagnoses","prescriptions","setPrescriptions","triageCases","setTriageCases","stats","setStats","loading","setLoading","activeSection","setActiveSection","showAvailabilityModal","setShowAvailabilityModal","products","setProducts","packages","setPackages","openDropdown","setOpenDropdown","showAddProductModal","setShowAddProductModal","showEditServiceModal","setShowEditServiceModal","showPackageModal","setShowPackageModal","editingService","setEditingService","editingProduct","setEditingProduct","editingPackage","setEditingPackage","showPayPerListingModal","setShowPayPerListingModal","payPerListingType","setPayPerListingType","billingPeriod","setBillingPeriod","showCreateServiceModal","setShowCreateServiceModal","showScheduleModal","setShowScheduleModal","showMessagesModal","setShowMessagesModal","showAnalyticsModal","setShowAnalyticsModal","FREE_SERVICE_LIMIT","FREE_PRODUCT_LIMIT","FREE_PACKAGE_LIMIT","SERVICE_COMMISSION_RATE","PRODUCT_COMMISSION_RATE","SERVICE_MONTHLY_FEE","PRODUCT_MONTHLY_FEE","PACKAGE_MONTHLY_FEE","SERVICE_YEARLY_FEE","PRODUCT_YEARLY_FEE","PACKAGE_YEARLY_FEE","SERVICE_3_PACK_MONTHLY","SERVICE_5_PACK_MONTHLY","PRODUCT_3_PACK_MONTHLY","PRODUCT_5_PACK_MONTHLY","PACKAGE_3_PACK_MONTHLY","PACKAGE_5_PACK_MONTHLY","SERVICE_3_PACK_YEARLY","SERVICE_5_PACK_YEARLY","PRODUCT_3_PACK_YEARLY","PRODUCT_5_PACK_YEARLY","PACKAGE_3_PACK_YEARLY","PACKAGE_5_PACK_YEARLY","productForm","setProductForm","name","description","price","category","brand","stockQuantity","photos","specifications","profileForm","setProfileForm","fullName","phone","address","serviceAreas","maxTravelDistance","yearsOfExperience","profilePicture","formInitialized","setFormInitialized","providerType","VETERINARIAN","providerConfig","providerLabels","type","parseFloat","toFixed","isProduct","arguments","length","undefined","commission","getServicesOnly","filter","listing","listing_type","service_types","service_type","handleAddNewService","currentServiceCount","isFreeTier","subscription_plan","handleAddProductModal","currentProductCount","handleAddNewPackage","handleDeleteService","serviceId","serviceName","window","confirm","data","auth","getUser","Error","error","from","delete","eq","email","updatedListings","listing_id","console","message","handleDeleteListing","handleDeleteProduct","productId","productName","updatedProducts","p","id","handleDeletePackage","packageId","packageName","updatedPackages","handleAddProduct","isNaN","stock","parseInt","photoDataSize","JSON","stringify","_window$crypto","_window$crypto$random","_user$email","currentProviderData","subscriptionPlan","productData","crypto","randomUUID","call","Math","random","toString","trim","stock_quantity","provider_email","provider_name","full_name","split","provider_type","active","image_url","url","created_at","Date","toISOString","updated_at","savedProduct","update","select","single","insert","newProduct","createdAt","updatedAt","map","Promise","all","loadListings","loadProducts","includes","handlePhotoUpload","event","files","Array","target","maxFiles","forEach","file","startsWith","size","reader","FileReader","onload","e","img","Image","canvas","document","createElement","ctx","getContext","width","height","maxDimension","drawImage","compressedDataUrl","toDataURL","newPhoto","now","prev","src","result","readAsDataURL","removePhoto","photoId","photo","initializeDashboard","_user$email2","service_areas","max_travel_distance","profile_picture","avatar_url","handleClickOutside","closest","addEventListener","removeEventListener","currentUser","log","profileData","profileError","role","loadProviderData","loadPatients","loadAppointments","loadDiagnoses","loadPrescriptions","loadTriageCases","loadPackages","calculateDashboardStats","captureException","userId","defaultProvider","user_id","bio","specializations","years_experience","verified","is_active","not","uniquePatients","patientIds","Set","booking","pet_profiles","has","add","push","order","ascending","productsFromMarketplace","totalPatients","todayAppointments","apt","today","toDateString","scheduled_date","urgentCases","case_","priority","activePrescriptions","rx","status","totalDiagnoses","totalListings","navigationSections","icon","className","renderOverviewSection","children","onClick","slice","_case_$pet_profiles","chief_complaint","appointment","_appointment$pet_prof","toLocaleTimeString","renderPatientsSection","patient","species","age","renderAppointmentsSection","_appointment$pet_prof2","_appointment$profiles","profiles","toLocaleDateString","renderDiagnosesSection","diagnosis","_diagnosis$pet_profil","notes","renderPrescriptionsSection","prescription","_prescription$pet_pro","medication","renderTriageSection","_case_$pet_profiles2","renderMarketplaceSection","handleGoLive","open","title","product","pkg","_pkg$service_ids","_pkg$package_price","service_ids","package_price","existingProvider","updateError","providerProfile","newProviderData","business_name","city","country","offers_services","offers_products","featured","rating","reviews_count","profile_image_url","insertError","servicesError","handleCreateService","serviceData","_window$crypto2","_window$crypto2$rando","insertData","provider_phone","code","handleUpdateService","updateData","getServiceOptions","baseServices","value","label","ServiceEditForm","_ref","service","onClose","setServiceData","price_from","handleSubmit","preventDefault","onSubmit","required","onChange","placeholder","min","step","rows","ServiceCreateForm","_ref2","renderProfileSection","_providerData$special","organization","join","renderAnalyticsSection","calculateRevenue","completedBookings","serviceRevenue","reduce","total","estimatedPrice","netEarnings","productRevenue","packageRevenue","l","services","revenue","thisMonthAppointments","appointmentDate","getMonth","getFullYear","style","round","sum","averageRating","_appointment$pet_prof3","earnings","consultation_type","PackageForm","_ref3","isEdit","initialData","packageData","setPackageData","selectedServices","packagePrice","isActive","handleServiceToggle","getOriginalPrice","getSavings","original","_window$crypto3","_window$crypto3$rando","_currentUser$email","currentPackageCount","packageInfo","savedPackage","checked","htmlFor","disabled","renderActiveSection","section","alt","isOpen","multiple","accept","index"],"sources":["/workspace/src/components/VetDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../lib/supabase.js';\nimport { getUserSafely } from '../lib/supabase-utils.js';\nimport { useNotificationContext } from '../contexts/NotificationContext';\nimport ProviderAvailability from './ProviderAvailability';\nimport StatsOverview from './dashboard/StatsOverview';\nimport MarketplaceSummary from './dashboard/MarketplaceSummary';\nimport MarketplaceManager from './dashboard/MarketplaceManager';\nimport CasesSummary from './dashboard/CasesSummary';\nimport ErrorBoundary from './common/ErrorBoundary';\nimport * as Sentry from '@sentry/react';\nimport { PROVIDER_TYPES } from '../constants/providerTypes';\nimport { getProviderConfig, getProviderLabels, getProviderNavigation } from '../config/providerConfig';\nimport { UIIcon } from './MinimalIcons';\nimport { \n  PRICING_LIMITS, \n  COMMISSION_RATES, \n  MONTHLY_FEES,\n  getIndividualPrice, \n  get3PackPrice, \n  get5PackPrice, \n  calculateServiceCommission, \n  calculateProductCommission, \n  getNetEarnings \n} from '../constants/pricingConstants';\n\n// Veterinarian Dashboard - Designed specifically for veterinarians\nconst VetDashboard = () => {\n  const { showInfo, showSuccess, showError } = useNotificationContext();\n  const navigate = useNavigate();\n\n  // State management\n  const [user, setUser] = useState(null);\n  const [profile, setProfile] = useState(null);\n  const [providerData, setProviderData] = useState(null);\n  const [listings, setListings] = useState([]);\n  const [patients, setPatients] = useState([]);\n  const [appointments, setAppointments] = useState([]);\n  const [diagnoses, setDiagnoses] = useState([]);\n  const [prescriptions, setPrescriptions] = useState([]);\n  const [triageCases, setTriageCases] = useState([]);\n  const [stats, setStats] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [activeSection, setActiveSection] = useState('overview');\n  const [showAvailabilityModal, setShowAvailabilityModal] = useState(false);\n\n  // Marketplace functionality state variables\n  const [products, setProducts] = useState([]);\n  const [packages, setPackages] = useState([]);\n  const [openDropdown, setOpenDropdown] = useState(null);\n  const [showAddProductModal, setShowAddProductModal] = useState(false);\n  const [showEditServiceModal, setShowEditServiceModal] = useState(false);\n  const [showPackageModal, setShowPackageModal] = useState(false);\n  const [editingService, setEditingService] = useState(null);\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [editingPackage, setEditingPackage] = useState(null);\n  const [showPayPerListingModal, setShowPayPerListingModal] = useState(false);\n  const [payPerListingType, setPayPerListingType] = useState('service');\n  const [billingPeriod, setBillingPeriod] = useState('monthly'); // 'monthly' or 'yearly'\n  const [showCreateServiceModal, setShowCreateServiceModal] = useState(false);\n  const [showScheduleModal, setShowScheduleModal] = useState(false);\n  const [showMessagesModal, setShowMessagesModal] = useState(false);\n  const [showAnalyticsModal, setShowAnalyticsModal] = useState(false);\n  \n  // MVP Pricing Constants\n  const FREE_SERVICE_LIMIT = 5;\n  const FREE_PRODUCT_LIMIT = 5;\n  const FREE_PACKAGE_LIMIT = 3; // 3 packages for free users\n  const SERVICE_COMMISSION_RATE = 0.18; // 18%\n  const PRODUCT_COMMISSION_RATE = 0.10; // 10%\n  \n  // Monthly Listing Fees (Individual)\n  const SERVICE_MONTHLY_FEE = 1.99; // $1.99/month per additional service listing\n  const PRODUCT_MONTHLY_FEE = 1.49; // $1.49/month per additional product listing\n  const PACKAGE_MONTHLY_FEE = 2.49; // $2.49/month per additional package listing\n  \n  // Yearly Listing Fees (Individual - 2 months free = ~17% off)\n  const SERVICE_YEARLY_FEE = 19.90; // $19.90/year per service ($1.66/month equivalent)\n  const PRODUCT_YEARLY_FEE = 14.90; // $14.90/year per product ($1.24/month equivalent)\n  const PACKAGE_YEARLY_FEE = 24.90; // $24.90/year per package ($2.08/month equivalent)\n  \n  // Bundle Monthly Fees (Better Value)\n  const SERVICE_3_PACK_MONTHLY = 4.99;   // 3 services for $4.99/month ($1.66 each)\n  const SERVICE_5_PACK_MONTHLY = 7.99;   // 5 services for $7.99/month ($1.60 each)\n  const PRODUCT_3_PACK_MONTHLY = 3.99;   // 3 products for $3.99/month ($1.33 each)\n  const PRODUCT_5_PACK_MONTHLY = 5.99;   // 5 products for $5.99/month ($1.20 each)\n  const PACKAGE_3_PACK_MONTHLY = 6.99;   // 3 packages for $6.99/month ($2.33 each)\n  const PACKAGE_5_PACK_MONTHLY = 9.99;   // 5 packages for $9.99/month ($2.00 each)\n  \n  // Bundle Yearly Fees (Best Value - 2 months free = ~17% off)\n  const SERVICE_3_PACK_YEARLY = 49.90;   // 3 services for $49.90/year ($4.16/month equivalent)\n  const SERVICE_5_PACK_YEARLY = 79.90;   // 5 services for $79.90/year ($6.66/month equivalent)\n  const PRODUCT_3_PACK_YEARLY = 39.90;   // 3 products for $39.90/year ($3.33/month equivalent)\n  const PRODUCT_5_PACK_YEARLY = 59.90;   // 5 products for $59.90/year ($4.99/month equivalent)\n  const PACKAGE_3_PACK_YEARLY = 69.90;   // 3 packages for $69.90/year ($5.83/month equivalent)\n  const PACKAGE_5_PACK_YEARLY = 99.90;   // 5 packages for $99.90/year ($8.33/month equivalent)\n\n  // Product form states\n  const [productForm, setProductForm] = useState({\n    name: '',\n    description: '',\n    price: '',\n    category: 'Accessories', // Default to Accessories\n    brand: '',\n    stockQuantity: '',\n    photos: [],\n    specifications: ''\n  });\n\n  // Profile form states\n  const [profileForm, setProfileForm] = useState({\n    fullName: '',\n    phone: '',\n    address: '',\n    description: '',\n    serviceAreas: '',\n    maxTravelDistance: '25',\n    yearsOfExperience: '',\n    profilePicture: ''\n  });\n  const [formInitialized, setFormInitialized] = useState(false);\n\n  // Veterinarian-specific configuration\n  const providerType = PROVIDER_TYPES.VETERINARIAN;\n  const providerConfig = getProviderConfig(providerType);\n  const providerLabels = getProviderLabels(providerType);\n\n  // Pricing helper functions\n  const getIndividualPrice = (type) => {\n    if (billingPeriod === 'yearly') {\n      return type === 'service' ? SERVICE_YEARLY_FEE : \n             type === 'product' ? PRODUCT_YEARLY_FEE : \n             PACKAGE_YEARLY_FEE;\n    }\n    return type === 'service' ? SERVICE_MONTHLY_FEE : \n           type === 'product' ? PRODUCT_MONTHLY_FEE : \n           PACKAGE_MONTHLY_FEE;\n  };\n\n  const get3PackPrice = (type) => {\n    if (billingPeriod === 'yearly') {\n      return type === 'service' ? SERVICE_3_PACK_YEARLY : \n             type === 'product' ? PRODUCT_3_PACK_YEARLY : \n             PACKAGE_3_PACK_YEARLY;\n    }\n    return type === 'service' ? SERVICE_3_PACK_MONTHLY : \n           type === 'product' ? PRODUCT_3_PACK_MONTHLY : \n           PACKAGE_3_PACK_MONTHLY;\n  };\n\n  const get5PackPrice = (type) => {\n    if (billingPeriod === 'yearly') {\n      return type === 'service' ? SERVICE_5_PACK_YEARLY : \n             type === 'product' ? PRODUCT_5_PACK_YEARLY : \n             PACKAGE_5_PACK_YEARLY;\n    }\n    return type === 'service' ? SERVICE_5_PACK_MONTHLY : \n           type === 'product' ? PRODUCT_5_PACK_MONTHLY : \n           PACKAGE_5_PACK_MONTHLY;\n  };\n\n  // Commission calculation functions\n  const calculateServiceCommission = (price) => {\n    return (parseFloat(price) * SERVICE_COMMISSION_RATE).toFixed(2);\n  };\n\n  const calculateProductCommission = (price) => {\n    return (parseFloat(price) * PRODUCT_COMMISSION_RATE).toFixed(2);\n  };\n\n  const getNetEarnings = (price, isProduct = false) => {\n    const commission = isProduct ? calculateProductCommission(price) : calculateServiceCommission(price);\n    return (parseFloat(price) - parseFloat(commission)).toFixed(2);\n  };\n\n  // Helper function to filter only services (exclude products and packages)\n  const getServicesOnly = (listings) => {\n    return listings.filter(listing => {\n      // Explicitly check for service type\n      return listing.listing_type === 'service' || \n             (listing.listing_type !== 'product' && \n              listing.listing_type !== 'package' && \n              (listing.service_types || listing.service_type) !== 'product' && \n              (listing.service_types || listing.service_type) !== 'package');\n    });\n  };\n\n  // Helper functions for marketplace\n  const handleAddNewService = () => {\n    const currentServiceCount = getServicesOnly(listings).length;\n    const isFreeTier = !providerData?.subscription_plan || providerData?.subscription_plan === 'free';\n    \n    if (isFreeTier && currentServiceCount >= FREE_SERVICE_LIMIT) {\n      setPayPerListingType('service');\n      setShowPayPerListingModal(true);\n      return;\n    }\n    \n    setShowCreateServiceModal(true);\n  };\n\n  const handleAddProductModal = () => {\n    const currentProductCount = products.length;\n    const isFreeTier = !providerData?.subscription_plan || providerData?.subscription_plan === 'free';\n    \n    if (isFreeTier && currentProductCount >= FREE_PRODUCT_LIMIT) {\n      setPayPerListingType('product');\n      setShowPayPerListingModal(true);\n      return;\n    }\n    \n    setShowAddProductModal(true);\n  };\n\n  const handleAddNewPackage = () => {\n    const isFreeTier = !providerData?.subscription_plan || providerData?.subscription_plan === 'free';\n    \n    if (isFreeTier && packages.length >= FREE_PACKAGE_LIMIT) {\n      setPayPerListingType('package');\n      setShowPayPerListingModal(true);\n      return;\n    }\n    \n    setShowPackageModal(true);\n  };\n\n  const handleDeleteService = async (serviceId, serviceName) => {\n    if (!window.confirm(`Are you sure you want to delete \"${serviceName}\"?`)) return;\n    \n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n\n      const { error } = await supabase\n        .from('marketplace_listings')\n        .delete()\n        .eq('listing_id', serviceId)\n        .eq('provider_email', user.email);\n\n      if (error) throw error;\n\n      const updatedListings = listings.filter(listing => listing.listing_id !== serviceId);\n      setListings(updatedListings);\n      showSuccess('Service deleted successfully');\n    } catch (error) {\n      console.error('Error deleting service:', error);\n      showError(`Error deleting service: ${error.message}`);\n    }\n  };\n\n  // Alias for marketplace section compatibility\n  const handleDeleteListing = handleDeleteService;\n\n  const handleDeleteProduct = async (productId, productName) => {\n    if (!window.confirm(`Are you sure you want to delete \"${productName}\"?`)) return;\n    \n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n\n      const { error } = await supabase\n        .from('marketplace_listings')\n        .delete()\n        .eq('listing_id', productId)\n        .eq('provider_email', user.email)\n        .eq('listing_type', 'product');\n\n      if (error) throw error;\n\n      const updatedProducts = products.filter(p => p.id !== productId);\n      setProducts(updatedProducts);\n      showSuccess('Product deleted successfully');\n    } catch (error) {\n      console.error('Error deleting product:', error);\n      showError(`Error deleting product: ${error.message}`);\n    }\n  };\n\n  const handleDeletePackage = async (packageId, packageName) => {\n    if (!window.confirm(`Are you sure you want to delete \"${packageName}\"?`)) return;\n    \n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n\n      const { error } = await supabase\n        .from('packages')\n        .delete()\n        .eq('id', packageId)\n        .eq('provider_id', user.id);\n\n      if (error) throw error;\n\n      const updatedPackages = packages.filter(p => p.id !== packageId);\n      setPackages(updatedPackages);\n      showSuccess('Package deleted successfully');\n    } catch (error) {\n      console.error('Error deleting package:', error);\n      showError(`Error deleting package: ${error.message}`);\n    }\n  };\n\n  // Product management functions\n  const handleAddProduct = async () => {\n    if (!productForm.name || !productForm.price || !productForm.category || !productForm.stockQuantity) {\n      showError('Please fill in all required fields (name, price, category, stock quantity)');\n      return;\n    }\n\n    // Validate price\n    const price = parseFloat(productForm.price);\n    if (isNaN(price) || price < 0) {\n      showError('Please enter a valid price');\n      return;\n    }\n\n    // Validate stock quantity\n    const stock = parseInt(productForm.stockQuantity);\n    if (isNaN(stock) || stock < 0) {\n      showError('Please enter a valid stock quantity (0 or greater)');\n      return;\n    }\n\n    const photoDataSize = JSON.stringify(productForm.photos).length;\n    if (photoDataSize > 2000000) {\n      showError('Photos are too large. Please use smaller images or reduce the number of photos.');\n      return;\n    }\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n\n      // Check free tier limits (5 products for free users)\n      const currentProductCount = products.length;\n      const currentProviderData = providerData || profile || {};\n      // Default to free tier if no subscription plan is set\n      const subscriptionPlan = currentProviderData?.subscription_plan;\n      const isFreeTier = !subscriptionPlan || subscriptionPlan === 'free' || subscriptionPlan !== 'premium';\n\n      if (isFreeTier && currentProductCount >= FREE_PRODUCT_LIMIT && !editingProduct) {\n        setPayPerListingType('product');\n        setShowPayPerListingModal(true);\n        return;\n      }\n\n      // Use marketplace_listings instead of separate products table\n      const productData = {\n        listing_type: 'product',\n        listing_id: editingProduct ? (editingProduct.listing_id || editingProduct.id) : window.crypto?.randomUUID?.() || Math.random().toString(36),\n        name: productForm.name.trim(),\n        description: productForm.description.trim(),\n        price: price,\n        category: productForm.category || 'Accessories',\n        brand: productForm.brand.trim() || null,\n        stock_quantity: stock,\n        service_types: 'product',\n        provider_email: user.email,\n        provider_name: profile?.full_name || providerData?.name || user.email?.split('@')[0],\n        provider_type: profile?.provider_type || providerData?.provider_type || 'veterinarian',\n        active: true,\n        image_url: productForm.photos.length > 0 ? productForm.photos[0].url : null,\n        created_at: editingProduct ? undefined : new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      };\n\n      let savedProduct;\n      if (editingProduct) {\n        const { data, error } = await supabase\n          .from('marketplace_listings')\n          .update(productData)\n          .eq('listing_id', editingProduct.listing_id || editingProduct.id)\n          .eq('provider_email', user.email)\n          .select()\n          .single();\n\n        if (error) throw error;\n        savedProduct = data;\n      } else {\n        const { data, error } = await supabase\n          .from('marketplace_listings')\n          .insert([productData])\n          .select()\n          .single();\n\n        if (error) throw error;\n        savedProduct = data;\n      }\n\n      // Update local products state with the saved product\n      const newProduct = {\n        id: savedProduct.listing_id,\n        name: savedProduct.name,\n        description: savedProduct.description,\n        price: savedProduct.price,\n        category: savedProduct.category,\n        brand: savedProduct.brand,\n        stockQuantity: savedProduct.stock_quantity,\n        photos: productForm.photos, // Keep the photo objects for display\n        specifications: productForm.specifications, // Keep form data since DB doesn't store this\n        createdAt: savedProduct.created_at,\n        updatedAt: savedProduct.updated_at,\n        type: 'product'\n      };\n\n      let updatedProducts;\n      if (editingProduct) {\n        updatedProducts = products.map(p => p.id === editingProduct.id ? newProduct : p);\n      } else {\n        updatedProducts = [...products, newProduct];\n      }\n\n      setProducts(updatedProducts);\n      \n      // Refresh data to show updated product\n      await Promise.all([\n        loadListings(user.id),\n        loadProducts(user.id)\n      ]);\n\n      // Reset form\n      setProductForm({\n        name: '',\n        description: '',\n        price: '',\n        category: 'Accessories',\n        brand: '',\n        stockQuantity: '',\n        photos: [],\n        specifications: ''\n      });\n      setShowAddProductModal(false);\n      setEditingProduct(null);\n\n      showSuccess(`Product ${editingProduct ? 'updated' : 'created'} successfully!`);\n\n    } catch (error) {\n      console.error('Error saving product:', error);\n      if (error.name === 'QuotaExceededError' || error.message.includes('quota')) {\n        showError('Error: Product photos are too large. Please use smaller images or reduce the number of photos.');\n      } else if (error.message.includes('JSON')) {\n        showError('Error: Invalid product data. Please check your inputs and try again.');\n      } else {\n        showError(`Error saving product: ${error.message}. Please try again.`);\n      }\n    }\n  };\n\n  // Photo handling functions\n  const handlePhotoUpload = (event) => {\n    const files = Array.from(event.target.files);\n    const maxFiles = 4;\n    \n    if (productForm.photos.length + files.length > maxFiles) {\n      showError(`You can only upload up to ${maxFiles} photos`);\n      return;\n    }\n\n    files.forEach(file => {\n      if (file.type.startsWith('image/')) {\n        // Check file size (10MB limit per file)\n        if (file.size > 10 * 1024 * 1024) {\n          showError(`File ${file.name} is too large. Please use images under 10MB.`);\n          return;\n        }\n\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          // Create an image to compress it\n          const img = new Image();\n          img.onload = () => {\n            const canvas = document.createElement('canvas');\n            const ctx = canvas.getContext('2d');\n            \n            // Calculate new dimensions (max 800px width/height)\n            let { width, height } = img;\n            const maxDimension = 800;\n            \n            if (width > height) {\n              if (width > maxDimension) {\n                height = (height * maxDimension) / width;\n                width = maxDimension;\n              }\n            } else {\n              if (height > maxDimension) {\n                width = (width * maxDimension) / height;\n                height = maxDimension;\n              }\n            }\n            \n            canvas.width = width;\n            canvas.height = height;\n            \n            // Draw and compress\n            ctx.drawImage(img, 0, 0, width, height);\n            const compressedDataUrl = canvas.toDataURL('image/jpeg', 0.8);\n            \n            const newPhoto = {\n              id: Date.now() + Math.random(),\n              file: file,\n              url: compressedDataUrl,\n              name: file.name\n            };\n            \n            setProductForm(prev => ({\n              ...prev,\n              photos: [...prev.photos, newPhoto]\n            }));\n          };\n          img.src = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      } else {\n        showError('Please select only image files');\n      }\n    });\n  };\n\n  const removePhoto = (photoId) => {\n    setProductForm(prev => ({\n      ...prev,\n      photos: prev.photos.filter(photo => photo.id !== photoId)\n    }));\n  };\n\n  useEffect(() => {\n    initializeDashboard();\n  }, []);\n\n  // Initialize form when profile or provider data first loads (but preserve user changes)\n  useEffect(() => {\n    if ((profile || providerData || user) && !formInitialized) {\n      // Prioritize the more complete name (providerData?.name is usually more complete)\n      const fullName = (providerData?.name && providerData.name.trim().split(' ').length > 1) \n        ? providerData.name \n        : (profile?.full_name || providerData?.name || user?.email?.split('@')[0] || 'User');\n\n      setProfileForm(prev => ({\n        ...prev,\n        fullName: fullName,\n        phone: providerData?.phone || '',\n        address: providerData?.address || '',\n        description: providerData?.description || '',\n        serviceAreas: providerData?.service_areas || 'Auckland',\n        maxTravelDistance: providerData?.max_travel_distance || '25',\n        profilePicture: providerData?.profile_picture || profile?.avatar_url || ''\n      }));\n      setFormInitialized(true);\n    }\n  }, [profile, providerData, user, formInitialized]);\n\n  // Update product form when editing\n  useEffect(() => {\n    if (editingProduct) {\n      setProductForm({\n        name: editingProduct.name || '',\n        description: editingProduct.description || '',\n        price: (editingProduct.price || 0).toString(),\n        category: editingProduct.category || 'Accessories',\n        brand: editingProduct.brand || '',\n        stockQuantity: (editingProduct.stockQuantity || editingProduct.stock_quantity || 0).toString(),\n        photos: editingProduct.photos || [],\n        specifications: editingProduct.specifications || ''\n      });\n    }\n  }, [editingProduct]);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (openDropdown && !event.target.closest('.relative')) {\n        setOpenDropdown(null);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [openDropdown]);\n\n  const initializeDashboard = async () => {\n    try {\n      setLoading(true);\n      \n      // Get current user\n      const currentUser = await getUserSafely();\n      if (!currentUser) {\n        console.log('VetDashboard: No user found, redirecting to home');\n        navigate('/');\n        return;\n      }\n      \n      setUser(currentUser);\n      console.log('VetDashboard: User found:', currentUser.email);\n\n      // Get profile data\n      const { data: profileData, error: profileError } = await supabase\n        .from('profiles')\n        .select('role, full_name, phone, location, organization')\n        .eq('id', currentUser.id)\n        .single();\n\n      if (profileError || !profileData) {\n        console.log('VetDashboard: No profile data found');\n        navigate('/');\n        return;\n      }\n      \n      console.log('VetDashboard: Profile data:', profileData);\n      \n      // Strict role validation - only veterinarians allowed\n      if (profileData.role !== 'veterinarian') {\n        console.log('VetDashboard: Access denied. Expected: veterinarian, Got:', profileData.role);\n        navigate('/');\n        return;\n      }\n      \n      console.log('VetDashboard: Access granted for veterinarian');\n      setProfile(profileData);\n\n      // Load all dashboard data\n      await Promise.all([\n        loadProviderData(currentUser.id),\n        loadPatients(currentUser.id),\n        loadAppointments(currentUser.id),\n        loadDiagnoses(currentUser.id),\n        loadPrescriptions(currentUser.id),\n        loadTriageCases(currentUser.id),\n        loadListings(currentUser.id),\n        loadProducts(currentUser.id),\n        loadPackages(currentUser.id)\n      ]);\n\n      // Calculate stats\n      calculateDashboardStats();\n\n    } catch (error) {\n      console.error('VetDashboard: Error in initialization:', error);\n      Sentry.captureException(error);\n      showError('Failed to load dashboard data. Please refresh the page.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadProviderData = async (userId) => {\n    try {\n      const { data, error } = await supabase\n        .from('providers')\n        .select('*')\n        .eq('user_id', userId)\n        .single();\n\n      if (data) {\n        setProviderData(data);\n      } else {\n        // Create default provider profile for veterinarian\n        const defaultProvider = {\n          id: userId,\n          user_id: userId,\n          provider_type: 'veterinarian',\n          full_name: profile?.full_name || user?.email,\n          email: user?.email,\n          phone: profile?.phone || null,\n          bio: 'Professional veterinarian providing comprehensive medical care for animals.',\n          specializations: ['General Practice'],\n          years_experience: 0,\n          verified: false,\n          is_active: true\n        };\n        setProviderData(defaultProvider);\n      }\n    } catch (error) {\n      console.error('Error loading provider data:', error);\n    }\n  };\n\n  const loadPatients = async (userId) => {\n    try {\n      // Get patients only from consultation bookings and appointments\n      const { data, error } = await supabase\n        .from('consultation_bookings')\n        .select(`\n          pet_profiles (\n            id,\n            name,\n            species,\n            age,\n            created_at\n          )\n        `)\n        .eq('provider_id', userId)\n        .not('pet_profiles', 'is', null);\n\n      if (error) throw error;\n      \n      // Extract unique patients from bookings\n      const uniquePatients = [];\n      const patientIds = new Set();\n      \n      data?.forEach(booking => {\n        if (booking.pet_profiles && !patientIds.has(booking.pet_profiles.id)) {\n          patientIds.add(booking.pet_profiles.id);\n          uniquePatients.push(booking.pet_profiles);\n        }\n      });\n      \n      setPatients(uniquePatients || []);\n    } catch (error) {\n      console.error('Error loading patients:', error);\n      // Fallback to empty array\n      setPatients([]);\n    }\n  };\n\n  const loadAppointments = async (userId) => {\n    try {\n      const { data, error } = await supabase\n        .from('bookings')\n        .select('*, pet_profiles(name, species), profiles(full_name)')\n        .eq('provider_id', userId)\n        .order('scheduled_date', { ascending: true });\n\n      if (error) throw error;\n      setAppointments(data || []);\n    } catch (error) {\n      console.error('Error loading appointments:', error);\n    }\n  };\n\n  const loadDiagnoses = async (userId) => {\n    try {\n      const { data, error } = await supabase\n        .from('medical_records')\n        .select('*, pet_profiles(name, species)')\n        .eq('veterinarian_id', userId)\n        .eq('record_type', 'diagnosis')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setDiagnoses(data || []);\n    } catch (error) {\n      console.error('Error loading diagnoses:', error);\n    }\n  };\n\n  const loadPrescriptions = async (userId) => {\n    try {\n      const { data, error } = await supabase\n        .from('medical_records')\n        .select('*, pet_profiles(name, species)')\n        .eq('veterinarian_id', userId)\n        .eq('record_type', 'prescription')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setPrescriptions(data || []);\n    } catch (error) {\n      console.error('Error loading prescriptions:', error);\n    }\n  };\n\n  const loadTriageCases = async (userId) => {\n    try {\n      const { data, error } = await supabase\n        .from('triage_cases')\n        .select('*, pet_profiles(name, species)')\n        .eq('assigned_vet_id', userId)\n        .order('priority', { ascending: false });\n\n      if (error) throw error;\n      setTriageCases(data || []);\n    } catch (error) {\n      console.error('Error loading triage cases:', error);\n    }\n  };\n\n  const loadListings = async (userId) => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      const { data, error } = await supabase\n        .from('marketplace_listings')\n        .select('*')\n        .eq('provider_email', user.email)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setListings(data || []);\n    } catch (error) {\n      console.error('Error loading listings:', error);\n    }\n  };\n\n  const loadProducts = async (userId) => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      const { data, error } = await supabase\n        .from('marketplace_listings')\n        .select('*')\n        .eq('provider_email', user.email)\n        .eq('listing_type', 'product')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      \n      const productsFromMarketplace = (data || []).map(listing => ({\n        id: listing.listing_id,\n        name: listing.name,\n        description: listing.description,\n        price: listing.price,\n        category: listing.category,\n        brand: listing.brand,\n        stockQuantity: listing.stock_quantity,\n        photos: listing.image_url ? [{ id: 1, url: listing.image_url, name: 'Product Image' }] : [],\n        specifications: ''\n      }));\n      \n      setProducts(productsFromMarketplace);\n    } catch (error) {\n      console.error('Error loading products:', error);\n    }\n  };\n\n  const loadPackages = async (userId) => {\n    try {\n      const { data, error } = await supabase\n        .from('packages')\n        .select('*')\n        .eq('provider_id', userId)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setPackages(data || []);\n    } catch (error) {\n      console.error('Error loading packages:', error);\n    }\n  };\n\n  const calculateDashboardStats = () => {\n    const totalPatients = patients.length;\n    const todayAppointments = appointments.filter(apt => {\n      const today = new Date().toDateString();\n      return new Date(apt.scheduled_date).toDateString() === today;\n    }).length;\n    const urgentCases = triageCases.filter(case_ => case_.priority === 'urgent').length;\n    const activePrescriptions = prescriptions.filter(rx => rx.status === 'active').length;\n\n    setStats({\n      totalPatients,\n      todayAppointments,\n      urgentCases,\n      activePrescriptions,\n      totalDiagnoses: diagnoses.length,\n      totalListings: listings.length\n    });\n  };\n\n  // Veterinarian-specific navigation sections\n  const navigationSections = [\n    { \n      id: 'overview', \n      name: 'Overview', \n      icon: <UIIcon type=\"overview\" className=\"w-5 h-5\" />\n    },\n    { \n      id: 'patients', \n      name: 'Patients', \n      icon: <UIIcon type=\"patients\" className=\"w-5 h-5\" />\n    },\n    { \n      id: 'appointments', \n      name: 'Bookings', \n      icon: <UIIcon type=\"appointments\" className=\"w-5 h-5\" />\n    },\n    { \n      id: 'diagnoses', \n      name: 'Diagnoses', \n      icon: <UIIcon type=\"procedures\" className=\"w-5 h-5\" />\n    },\n    { \n      id: 'prescriptions', \n      name: 'Prescriptions', \n      icon: <UIIcon type=\"prescriptions\" className=\"w-5 h-5\" />\n    },\n    { \n      id: 'triage', \n      name: 'Triage Cases', \n      icon: <UIIcon type=\"triageCases\" className=\"w-5 h-5\" />\n    },\n    { \n      id: 'marketplace', \n      name: 'Marketplace', \n      icon: <UIIcon type=\"marketplace\" className=\"w-5 h-5\" />\n    },\n    { \n      id: 'analytics', \n      name: 'Analytics', \n      icon: <UIIcon type=\"analytics\" className=\"w-5 h-5\" />\n    },\n    { \n      id: 'profile', \n      name: 'Profile', \n      icon: <UIIcon type=\"profile\" className=\"w-5 h-5\" />\n    }\n  ];\n\n  // Render functions for each section\n  const renderOverviewSection = () => (\n    <div className=\"space-y-6\">\n      {/* Header with quick actions */}\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"lg:block hidden\">\n            <p className=\"text-xl font-bold text-gray-900\">Welcome back, Dr. {profile?.full_name || 'Veterinarian'}</p>\n          </div>\n          <button\n            onClick={() => setShowAvailabilityModal(true)}\n            className=\"hidden lg:flex px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors items-center text-sm sm:text-base\"\n          >\n            <span className=\"hidden sm:inline\">Manage Schedule</span>\n            <span className=\"sm:hidden\">Schedule</span>\n          </button>\n        </div>\n\n        {/* Quick Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div className=\"bg-green-50 p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-green-600 text-sm font-medium\">Today's Appointments</p>\n                <p className=\"text-2xl font-bold text-green-900\">{stats.todayAppointments || 0}</p>\n              </div>\n              <UIIcon type=\"appointments\" className=\"w-8 h-8 text-green-600\" />\n            </div>\n          </div>\n          \n          <div className=\"bg-blue-50 p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-blue-600 text-sm font-medium\">Total Patients</p>\n                <p className=\"text-2xl font-bold text-blue-900\">{stats.totalPatients || 0}</p>\n              </div>\n              <UIIcon type=\"patients\" className=\"w-8 h-8 text-blue-600\" />\n            </div>\n          </div>\n          \n          <div className=\"bg-red-50 p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-red-600 text-sm font-medium\">Urgent Cases</p>\n                <p className=\"text-2xl font-bold text-red-900\">{stats.urgentCases || 0}</p>\n              </div>\n              <UIIcon type=\"urgentCases\" className=\"w-8 h-8 text-red-600\" />\n            </div>\n          </div>\n          \n          <div className=\"bg-purple-50 p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-purple-600 text-sm font-medium\">Active Prescriptions</p>\n                <p className=\"text-2xl font-bold text-purple-900\">{stats.activePrescriptions || 0}</p>\n              </div>\n              <UIIcon type=\"prescriptions\" className=\"w-8 h-8 text-purple-600\" />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* First Row - Marketplace Summary and Urgent Cases */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Marketplace Summary */}\n        <MarketplaceSummary \n          listings={listings}\n          packages={packages}\n          products={products}\n          setActiveSection={setActiveSection}\n        />\n\n        {/* Urgent Cases */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n            Urgent Cases\n          </h3>\n          {triageCases.filter(case_ => case_.priority === 'urgent').length === 0 ? (\n            <p className=\"text-gray-500\">No urgent cases at the moment</p>\n          ) : (\n            <div className=\"space-y-3\">\n              {triageCases.filter(case_ => case_.priority === 'urgent').slice(0, 3).map((case_) => (\n                <div key={case_.id} className=\"flex items-center justify-between p-3 bg-red-50 rounded-lg\">\n                  <div>\n                    <p className=\"font-medium text-gray-900\">{case_.pet_profiles?.name}</p>\n                    <p className=\"text-sm text-gray-600\">{case_.chief_complaint}</p>\n                  </div>\n                  <button \n                    onClick={() => setActiveSection('triage')}\n                    className=\"text-red-600 hover:text-red-800 text-sm font-medium\"\n                  >\n                    Review \n                  </button>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Second Row - Today's Schedule */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n\n        {/* Today's Appointments */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\n            Today's Booking\n          </h3>\n          {appointments.filter(apt => {\n            const today = new Date().toDateString();\n            return new Date(apt.scheduled_date).toDateString() === today;\n          }).length === 0 ? (\n            <p className=\"text-gray-500\">No appointments scheduled for today</p>\n          ) : (\n            <div className=\"space-y-3\">\n              {appointments.filter(apt => {\n                const today = new Date().toDateString();\n                return new Date(apt.scheduled_date).toDateString() === today;\n              }).slice(0, 3).map((appointment) => (\n                <div key={appointment.id} className=\"flex items-center justify-between p-3 bg-green-50 rounded-lg\">\n                  <div>\n                    <p className=\"font-medium text-gray-900\">{appointment.pet_profiles?.name}</p>\n                    <p className=\"text-sm text-gray-600\">{new Date(appointment.scheduled_date).toLocaleTimeString()}</p>\n                  </div>\n                  <button \n                    onClick={() => setActiveSection('appointments')}\n                    className=\"text-blue-600 hover:text-blue-800 text-sm font-medium\"\n                  >\n                    View \n                  </button>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderPatientsSection = () => (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-gray-900\">My Patients</h2>\n\n        </div>\n        \n        {patients.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n              <UIIcon type=\"patients\" className=\"w-8 h-8 text-gray-400\" />\n            </div>\n            <p className=\"text-gray-500 mt-2\">No patients from marketplace bookings yet</p>\n            <p className=\"text-sm text-gray-400 mt-1\">Patients will appear here when pet owners book your services</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {patients.map((patient) => (\n              <div key={patient.id} className=\"border rounded-lg p-4 hover:shadow-md transition-shadow\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <h3 className=\"font-semibold text-gray-900\">{patient.name}</h3>\n                  <span className=\"text-sm text-gray-500\">{patient.species}</span>\n                </div>\n                <p className=\"text-sm text-gray-600 mb-3\">Age: {patient.age || 'Unknown'}</p>\n                <button className=\"w-full text-sm bg-green-50 text-green-700 py-2 rounded hover:bg-green-100\">\n                  View Records\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderAppointmentsSection = () => (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-gray-900\">Marketplace Bookings</h2>\n\n        </div>\n        \n        {appointments.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n              <UIIcon type=\"appointments\" className=\"w-8 h-8 text-gray-400\" />\n            </div>\n            <p className=\"text-gray-500 mt-2\">No marketplace bookings yet</p>\n            <p className=\"text-sm text-gray-400 mt-1\">Pet owners can book your services through the Luniby marketplace</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {appointments.map((appointment) => (\n              <div key={appointment.id} className=\"border rounded-lg p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h3 className=\"font-semibold text-gray-900\">{appointment.pet_profiles?.name}</h3>\n                    <p className=\"text-sm text-gray-600\">Owner: {appointment.profiles?.full_name}</p>\n                    <p className=\"text-sm text-gray-500\">\n                      {new Date(appointment.scheduled_date).toLocaleDateString()} at {new Date(appointment.scheduled_date).toLocaleTimeString()}\n                    </p>\n                  </div>\n                  <div className=\"text-right\">\n                    <span className={`px-2 py-1 text-xs rounded-full ${\n                      appointment.status === 'confirmed' ? 'bg-green-100 text-green-800' :\n                      appointment.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {appointment.status}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderDiagnosesSection = () => (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-gray-900\">Diagnosis & Treatment Plans</h2>\n\n        </div>\n        \n        {diagnoses.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n              <UIIcon type=\"diagnosis\" className=\"w-8 h-8 text-gray-400\" />\n            </div>\n            <p className=\"text-gray-500 mt-2\">No diagnoses recorded yet</p>\n            <p className=\"text-sm text-gray-400 mt-1\">Create diagnoses during marketplace consultations</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {diagnoses.map((diagnosis) => (\n              <div key={diagnosis.id} className=\"border rounded-lg p-4\">\n                <div className=\"flex items-start justify-between\">\n                  <div>\n                    <h3 className=\"font-semibold text-gray-900\">{diagnosis.pet_profiles?.name}</h3>\n                    <p className=\"text-sm text-gray-600 mt-1\">{diagnosis.diagnosis || diagnosis.notes}</p>\n                    <p className=\"text-xs text-gray-500 mt-2\">\n                      {new Date(diagnosis.created_at).toLocaleDateString()}\n                    </p>\n                  </div>\n                  <button className=\"text-green-600 hover:text-green-800 text-sm font-medium\">\n                    Edit \n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderPrescriptionsSection = () => (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-gray-900\">Prescription Management</h2>\n\n        </div>\n        \n        {prescriptions.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n              <UIIcon type=\"prescriptions\" className=\"w-8 h-8 text-gray-400\" />\n            </div>\n            <p className=\"text-gray-500 mt-2\">No prescriptions issued yet</p>\n            <p className=\"text-sm text-gray-400 mt-1\">Issue prescriptions during marketplace consultations</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {prescriptions.map((prescription) => (\n              <div key={prescription.id} className=\"border rounded-lg p-4\">\n                <div className=\"flex items-start justify-between\">\n                  <div>\n                    <h3 className=\"font-semibold text-gray-900\">{prescription.pet_profiles?.name}</h3>\n                    <p className=\"text-sm text-gray-600 mt-1\">{prescription.medication || prescription.notes}</p>\n                    <p className=\"text-xs text-gray-500 mt-2\">\n                      Prescribed: {new Date(prescription.created_at).toLocaleDateString()}\n                    </p>\n                  </div>\n                  <div className=\"text-right\">\n                    <span className={`px-2 py-1 text-xs rounded-full ${\n                      prescription.status === 'active' ? 'bg-green-100 text-green-800' :\n                      prescription.status === 'completed' ? 'bg-gray-100 text-gray-800' :\n                      'bg-yellow-100 text-yellow-800'\n                    }`}>\n                      {prescription.status || 'active'}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderTriageSection = () => (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Triage Cases</h2>\n        \n        {triageCases.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n              <UIIcon type=\"triageCases\" className=\"w-8 h-8 text-gray-400\" />\n            </div>\n            <p className=\"text-gray-500 mt-2\">No triage cases assigned</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {triageCases.map((case_) => (\n              <div key={case_.id} className={`border rounded-lg p-4 ${\n                case_.priority === 'urgent' ? 'border-red-200 bg-red-50' :\n                case_.priority === 'high' ? 'border-yellow-200 bg-yellow-50' :\n                'border-gray-200'\n              }`}>\n                <div className=\"flex items-start justify-between\">\n                  <div>\n                    <h3 className=\"font-semibold text-gray-900\">{case_.pet_profiles?.name}</h3>\n                    <p className=\"text-sm text-gray-600 mt-1\">{case_.chief_complaint}</p>\n                    <div className=\"flex items-center gap-4 mt-2\">\n                      <span className={`px-2 py-1 text-xs rounded-full ${\n                        case_.priority === 'urgent' ? 'bg-red-100 text-red-800' :\n                        case_.priority === 'high' ? 'bg-yellow-100 text-yellow-800' :\n                        'bg-gray-100 text-gray-800'\n                      }`}>\n                        {case_.priority} priority\n                      </span>\n                      <span className=\"text-xs text-gray-500\">\n                        {new Date(case_.created_at).toLocaleDateString()}\n                      </span>\n                    </div>\n                  </div>\n                  <button className=\"text-green-600 hover:text-green-800 text-sm font-medium\">\n                    Review Case \n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  const renderMarketplaceSection = () => (\n    <div className=\"p-6 space-y-0\">\n      {/* Marketplace Status Container - Full Width */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Marketplace</h3>\n            <p className=\"text-gray-600 text-sm\">\n              {providerData?.verified \n                ? \"Your profile is live and accepting bookings from customers\" \n                : listings.length > 0 \n                  ? \"Ready to publish your services to the marketplace\"\n                  : \"Create services to get started on the marketplace\"\n              }\n            </p>\n          </div>\n          {!providerData?.verified && listings.length > 0 && (\n            <button\n              onClick={handleGoLive}\n              className=\"px-4 sm:px-6 py-2 sm:py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 text-sm sm:text-base\"\n            >\n              <UIIcon type=\"rocket\" className=\"w-4 h-4 sm:w-5 sm:h-5\" />\n              <span className=\"hidden sm:inline\">Go Live on Marketplace</span>\n              <span className=\"sm:hidden\">Go Live</span>\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Detailed Marketplace Section with Limits */}\n      <div className=\"bg-white shadow rounded-lg\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <div className=\"flex justify-between items-center\">\n            <div>\n\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"p-6\">\n          {/* Services Section */}\n          <div className=\"mb-8\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex items-center gap-2\">\n                <h4 className=\"text-md font-medium text-gray-900\">Services</h4>\n                <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                  {getServicesOnly(listings).length}\n                  {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n                    `/${FREE_SERVICE_LIMIT}`\n                  }\n                </span>\n                {getServicesOnly(listings).length > 0 && (\n                  <button\n                    onClick={() => {\n                      window.open('/marketplace', '_blank');\n                    }}\n                    className=\"inline-flex items-center text-gray-500 hover:text-green-600 text-xs font-medium\"\n                    title=\"View Service Listings\"\n                  >\n                    <UIIcon type=\"search\" className=\"w-4 h-4 mr-1\" />\n                    View Listing\n                  </button>\n                )}\n              </div>\n              <div className=\"flex items-center gap-2\">\n                {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n                  getServicesOnly(listings).length >= FREE_SERVICE_LIMIT && (\n                  <span className=\"text-xs text-green-600 font-medium\">\n                    At limit - ${SERVICE_MONTHLY_FEE}/month each\n                  </span>\n                )}\n                <button \n                  onClick={handleAddNewService} \n                  className=\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\"\n                >\n                  <UIIcon type=\"plus\" className=\"w-4 h-4 mr-2\" />\n                  Add Service\n                </button>\n              </div>\n            </div>\n            \n            {getServicesOnly(listings).length > 0 ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {getServicesOnly(listings).map((listing) => (\n                  <div key={listing.listing_id || listing.id} className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                    <div className=\"flex justify-between items-start mb-3\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <h3 className=\"font-semibold text-gray-900\">{listing.name || listing.title}</h3>\n                        </div>\n                        <p className=\"text-sm text-gray-600\">{listing.description}</p>\n                      </div>\n                      <div className=\"relative\">\n                        <button \n                          onClick={() => setOpenDropdown(openDropdown === `service-${listing.listing_id || listing.id}` ? null : `service-${listing.listing_id || listing.id}`)}\n                          className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors\"\n                          title=\"More options\"\n                        >\n                          <UIIcon type=\"menu\" className=\"w-4 h-4\" />\n                        </button>\n                        \n                        {openDropdown === `service-${listing.listing_id || listing.id}` && (\n                          <div className=\"absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\n                            <div className=\"py-1\">\n                              <button\n                                onClick={() => {\n                                  setEditingService(listing);\n                                  setShowEditServiceModal(true);\n                                  setOpenDropdown(null);\n                                }}\n                                className=\"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                              >\n                                Edit\n                              </button>\n                              <button\n                                onClick={() => {\n                                  handleDeleteService(listing.listing_id || listing.id, listing.name || listing.title);\n                                  setOpenDropdown(null);\n                                }}\n                                className=\"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50\"\n                              >\n                                Delete\n                              </button>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div className=\"space-y-2 mt-3\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-gray-600\">Price:</span>\n                        <span className=\"font-semibold text-green-600\">${listing.price}</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-gray-600\">Commission:</span>\n                        <span className=\"text-xs text-gray-500\">${calculateServiceCommission(listing.price)}</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-gray-600\">You earn:</span>\n                        <span className=\"text-sm font-medium text-gray-900\">${getNetEarnings(listing.price)}</span>\n                      </div>\n                      {listing.active !== undefined && (\n                        <div className=\"mt-2\">\n                          <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n                            listing.active \n                              ? 'bg-green-100 text-green-800' \n                              : 'bg-yellow-100 text-yellow-800'\n                          }`}>\n                            {listing.active ? 'Active' : 'Inactive'}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n                  <UIIcon type=\"listings\" className=\"w-8 h-8 text-gray-400\" />\n                </div>\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No services added yet</h3>\n                <p className=\"text-gray-600 mb-4\">\n                  Create your first veterinary service to start earning on the marketplace.\n                </p>\n\n              </div>\n            )}\n          </div>\n\n          {/* Products Section */}\n          <div className=\"border-t border-gray-200 pt-8 mb-8\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex items-center gap-2\">\n                <h4 className=\"text-md font-medium text-gray-900\">Products</h4>\n                <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                  {products.length}\n                  {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n                    `/${FREE_PRODUCT_LIMIT}`\n                  }\n                </span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n                  products.length >= FREE_PRODUCT_LIMIT && (\n                  <span className=\"text-xs text-green-600 font-medium\">\n                    At limit - ${PRODUCT_MONTHLY_FEE}/month each\n                  </span>\n                )}\n                <button \n                  onClick={handleAddProductModal} \n                  className=\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\"\n                >\n                  <UIIcon type=\"plus\" className=\"w-4 h-4 mr-2\" />\n                  Add Product\n                </button>\n              </div>\n            </div>\n            \n            {products.length > 0 ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {products.map((product) => (\n                  <div key={product.id} className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                    <div className=\"flex justify-between items-start mb-3\">\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold text-gray-900\">{product.name}</h3>\n                        <p className=\"text-sm text-gray-600\">{product.category}</p>\n                        {product.brand && (\n                          <p className=\"text-xs text-gray-500 mt-1\">Brand: {product.brand}</p>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div className=\"space-y-2 mt-3\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-gray-600\">Price:</span>\n                        <span className=\"font-semibold text-blue-600\">${product.price}</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-gray-600\">Commission:</span>\n                        <span className=\"text-xs text-gray-500\">${calculateProductCommission(product.price)}</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-gray-600\">You earn:</span>\n                        <span className=\"text-sm font-medium text-gray-900\">${getNetEarnings(product.price, true)}</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-gray-600\">Stock:</span>\n                        <span className={`text-xs font-medium ${\n                          (product.stockQuantity || 0) > 0 ? 'text-green-600' : 'text-red-600'\n                        }`}>\n                          {(product.stockQuantity || 0) > 0 ? `${product.stockQuantity} in stock` : 'Out of stock'}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n                  <UIIcon type=\"products\" className=\"w-8 h-8 text-gray-400\" />\n                </div>\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No products added yet</h3>\n                <p className=\"text-gray-600 mb-4\">\n                  Add veterinary products to sell alongside your services.\n                </p>\n\n              </div>\n            )}\n          </div>\n\n          {/* Packages Section */}\n          <div className=\"border-t border-gray-200 pt-8\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex items-center gap-2\">\n                <h4 className=\"text-md font-medium text-gray-900\">Packages</h4>\n                <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n                  {packages.length}\n                  {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n                    `/${FREE_PACKAGE_LIMIT}`\n                  }\n                </span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                {(!providerData?.subscription_plan || providerData?.subscription_plan === 'free') && \n                  packages.length >= FREE_PACKAGE_LIMIT && (\n                  <span className=\"text-xs text-purple-600 font-medium\">\n                    At limit - ${PACKAGE_MONTHLY_FEE}/month each\n                  </span>\n                )}\n                <button \n                  onClick={handleAddNewPackage} \n                  className=\"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium\"\n                >\n                  <UIIcon type=\"plus\" className=\"w-4 h-4 mr-2\" />\n                  Add Package\n                </button>\n              </div>\n            </div>\n            \n            {packages.length > 0 ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {packages.map((pkg) => (\n                  <div key={pkg.id} className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                    <div className=\"flex justify-between items-start mb-3\">\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold text-gray-900\">{pkg.name}</h3>\n                        <p className=\"text-sm text-gray-600\">{pkg.service_ids?.length || 0} services included</p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"space-y-2 mt-3\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-gray-600\">Package Price:</span>\n                        <span className=\"font-semibold text-purple-600\">${pkg.package_price?.toFixed(2)}</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-gray-600\">Status:</span>\n                        <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n                          pkg.is_active ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n                        }`}>\n                          {pkg.is_active ? 'Active' : 'Inactive'}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n                  <UIIcon type=\"package\" className=\"w-8 h-8 text-gray-400\" />\n                </div>\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No packages created yet</h3>\n                <p className=\"text-gray-600 mb-4\">\n                  Bundle services together to offer better value to customers.\n                </p>\n\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  // Go Live function - publishes provider profile to marketplace\n  const handleGoLive = async () => {\n    try {\n      const currentUser = await getUserSafely();\n      if (!currentUser) {\n        showError('User not authenticated');\n        return;\n      }\n\n      // Check if provider record exists\n      const { data: existingProvider } = await supabase\n        .from('providers')\n        .select('id, verified')\n        .eq('id', currentUser.id)\n        .single();\n\n      if (existingProvider) {\n        // Update existing provider to be verified/live\n        const { error: updateError } = await supabase\n          .from('providers')\n          .update({ verified: true, is_active: true })\n          .eq('id', currentUser.id);\n\n        if (updateError) throw updateError;\n        \n        showSuccess(' Your profile is now live on the marketplace! You can view it using \"View My Listing\".');\n      } else {\n        // Create new provider record\n        const providerProfile = profile || {};\n        const newProviderData = {\n          id: currentUser.id,\n          name: providerProfile?.full_name || currentUser.email,\n          email: currentUser.email,\n          phone: providerProfile?.phone || null,\n          provider_type: 'veterinarian',\n          business_name: providerProfile?.business_name || null,\n          address: null,\n          city: 'Location TBD',\n          country: 'Australia',\n          bio: 'Professional veterinarian providing comprehensive medical care for animals.',\n          offers_services: true,\n          offers_products: false,\n          verified: true, // Live on marketplace\n          is_active: true,\n          featured: false,\n          rating: 0.00,\n          reviews_count: 0,\n          profile_image_url: null,\n          service_types: ['Veterinary Services']\n        };\n\n        const { error: insertError } = await supabase.from('providers').insert(newProviderData);\n        if (insertError) throw insertError;\n\n        showSuccess(' Your profile is now live on the marketplace! You can view it using \"View My Listing\".');\n      }\n\n      // Update all services to be verified/active\n      const { error: servicesError } = await supabase\n        .from('marketplace_listings')\n        .update({ verified: true, active: true })\n        .eq('provider_email', currentUser.email);\n\n      if (servicesError) {\n        console.error('Error updating services:', servicesError);\n      }\n\n      // Reload data to reflect changes\n      await initializeDashboard();\n      \n    } catch (error) {\n      console.error('Error going live:', error);\n      showError('Failed to go live: ' + error.message);\n    }\n  };\n\n  // Service creation handler\n  const handleCreateService = async (serviceData) => {\n    try {\n      const currentUser = await getUserSafely();\n      if (!currentUser) {\n        throw new Error('User not authenticated');\n      }\n\n      // Get provider data first\n      const currentProviderData = providerData || profile || {};\n      \n      // Check free tier limits (5 services for free users)\n      const currentServiceCount = getServicesOnly(listings).length;\n      const subscriptionPlan = currentProviderData?.subscription_plan;\n      const isFreeTier = !subscriptionPlan || subscriptionPlan === 'free' || subscriptionPlan !== 'premium';\n\n      if (isFreeTier && currentServiceCount >= FREE_SERVICE_LIMIT) {\n        showError(`Free tier limit reached! You can have up to ${FREE_SERVICE_LIMIT} services. Click \"Upgrade to Premium\" to get unlimited services.`);\n        return;\n      }\n      \n      const insertData = {\n        listing_type: 'service',\n        listing_id: window.crypto?.randomUUID?.() || Math.random().toString(36),\n        name: serviceData.title,\n        description: serviceData.description,\n        service_types: serviceData.service_type,\n        price: parseFloat(serviceData.price),\n        provider_name: currentProviderData?.full_name || currentUser.email,\n        provider_type: 'veterinarian',\n        provider_email: currentUser.email,\n        provider_phone: currentProviderData?.phone || 'N/A',\n        active: true,\n        verified: false,\n        rating: 0.0,\n        reviews_count: 0,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      };\n\n      const { data, error } = await supabase\n        .from('marketplace_listings')\n        .insert(insertData)\n        .select();\n        \n      if (error) {\n        throw new Error(`Database error: ${error.message} (Code: ${error.code})`);\n      }\n      \n      showSuccess('Service created successfully!');\n      setShowCreateServiceModal(false);\n      await loadListings(currentUser.id); // Refresh data\n    } catch (error) {\n      console.error('Error creating service:', error);\n      showError(`Failed to create service: ${error.message}`);\n    }\n  };\n\n  // Service editing handler\n  const handleUpdateService = async (serviceData) => {\n    try {\n      const updateData = {\n        name: serviceData.title,\n        description: serviceData.description,\n        service_types: serviceData.service_type,\n        price: parseFloat(serviceData.price),\n        updated_at: new Date().toISOString()\n      };\n      \n      const { error } = await supabase\n        .from('marketplace_listings')\n        .update(updateData)\n        .eq('listing_id', editingService.listing_id || editingService.id);\n\n      if (error) {\n        throw new Error(`Database error: ${error.message} (Code: ${error.code})`);\n      }\n      \n      showSuccess('Service updated successfully!');\n      setShowEditServiceModal(false);\n      setEditingService(null);\n      await loadListings(user.id); // Refresh data\n    } catch (error) {\n      console.error('Error updating service:', error);\n      showError(`Failed to update service: ${error.message}`);\n    }\n  };\n\n  // Role-based service options\n  const getServiceOptions = (providerType) => {\n    const baseServices = [\n      { value: \"Mobile Consultation\", label: \"Mobile Consultation\" },\n      { value: \"Mobile Emergency Care\", label: \"Mobile Emergency Care\" }\n    ];\n    \n    // Veterinarian services\n    return [\n      ...baseServices,\n      { value: \"Clinic Consultation\", label: \"Clinic Consultation\" },\n      { value: \"Surgery Services\", label: \"Surgery Services\" },\n      { value: \"Diagnostic Testing\", label: \"Diagnostic Testing\" },\n      { value: \"Preventive Care\", label: \"Preventive Care\" },\n      { value: \"Dental Care\", label: \"Dental Care\" },\n      { value: \"Orthopedic Care\", label: \"Orthopedic Care\" },\n      { value: \"Laboratory Services\", label: \"Laboratory Services\" },\n      { value: \"Telemedicine Consultation\", label: \"Telemedicine Consultation\" },\n      { value: \"Emergency Surgery\", label: \"Emergency Surgery\" },\n      { value: \"Specialist Referral\", label: \"Specialist Referral\" },\n      { value: \"Prescription Management\", label: \"Prescription Management\" },\n      { value: \"Vaccination Programs\", label: \"Vaccination Programs\" }\n    ];\n  };\n\n  // Service edit component\n  const ServiceEditForm = ({ service, onClose }) => {\n    const [serviceData, setServiceData] = useState({\n      title: service.name || service.title || '',\n      description: service.description || '',\n      price: service.price || service.price_from || '',\n      service_type: service.service_types || service.service_type || ''\n    });\n\n    const handleSubmit = async (e) => {\n      e.preventDefault();\n      await handleUpdateService(serviceData);\n    };\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n        <div className=\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-2xl font-bold text-gray-900\">Edit Service</h2>\n              <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 text-2xl\"></button>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Service Title *</label>\n              <input\n                type=\"text\"\n                required\n                value={serviceData.title}\n                onChange={(e) => setServiceData({...serviceData, title: e.target.value})}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"e.g., Veterinary Consultation\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Service Type *</label>\n              <select\n                required\n                value={serviceData.service_type}\n                onChange={(e) => setServiceData({...serviceData, service_type: e.target.value})}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              >\n                <option value=\"\">Select service type</option>\n                {getServiceOptions('veterinarian').map((service) => (\n                  <option key={service.value} value={service.value}>\n                    {service.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Price *</label>\n              <input\n                type=\"number\"\n                required\n                min=\"0\"\n                step=\"0.01\"\n                value={serviceData.price}\n                onChange={(e) => setServiceData({...serviceData, price: e.target.value})}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"150.00\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n              <textarea\n                value={serviceData.description}\n                onChange={(e) => setServiceData({...serviceData, description: e.target.value})}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows=\"3\"\n                placeholder=\"Describe your service...\"\n              />\n            </div>\n\n            <div className=\"flex justify-end space-x-3 pt-6 border-t border-gray-200\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium\"\n              >\n                <UIIcon type=\"check\" className=\"w-4 h-4 mr-2\" />\n                Update Service\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n\n  // Service creation component\n  const ServiceCreateForm = ({ onClose }) => {\n    const [serviceData, setServiceData] = useState({\n      title: '',\n      description: '',\n      price: '',\n      service_type: ''\n    });\n\n    const handleSubmit = async (e) => {\n      e.preventDefault();\n      await handleCreateService(serviceData);\n    };\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n        <div className=\"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-2xl font-bold text-gray-900\">Create New Service</h2>\n              <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 text-2xl\"></button>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Service Title *</label>\n              <input\n                type=\"text\"\n                required\n                value={serviceData.title}\n                onChange={(e) => setServiceData({...serviceData, title: e.target.value})}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"e.g., Veterinary Consultation\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Service Type *</label>\n              <select\n                required\n                value={serviceData.service_type}\n                onChange={(e) => setServiceData({...serviceData, service_type: e.target.value})}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              >\n                <option value=\"\">Select service type</option>\n                {getServiceOptions('veterinarian').map((service) => (\n                  <option key={service.value} value={service.value}>\n                    {service.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Price *</label>\n              <input\n                type=\"number\"\n                required\n                min=\"0\"\n                step=\"0.01\"\n                value={serviceData.price}\n                onChange={(e) => setServiceData({...serviceData, price: e.target.value})}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"150.00\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n              <textarea\n                value={serviceData.description}\n                onChange={(e) => setServiceData({...serviceData, description: e.target.value})}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows=\"3\"\n                placeholder=\"Describe your service...\"\n              />\n            </div>\n\n            <div className=\"flex justify-end space-x-3 pt-6 border-t border-gray-200\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                className=\"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium\"\n              >\n                <UIIcon type=\"plus\" className=\"w-4 h-4 mr-2\" />\n                Create Service\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n\n  const renderProfileSection = () => (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Veterinarian Profile</h2>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div>\n            <h3 className=\"font-semibold text-gray-900 mb-4\">Professional Information</h3>\n            <div className=\"space-y-3\">\n              <div>\n                <label className=\"text-sm font-medium text-gray-700\">Full Name</label>\n                <p className=\"text-gray-900\">{profile?.full_name || 'Not set'}</p>\n              </div>\n              <div>\n                <label className=\"text-sm font-medium text-gray-700\">Email</label>\n                <p className=\"text-gray-900\">{user?.email}</p>\n              </div>\n              <div>\n                <label className=\"text-sm font-medium text-gray-700\">Phone</label>\n                <p className=\"text-gray-900\">{profile?.phone || 'Not set'}</p>\n              </div>\n              <div>\n                <label className=\"text-sm font-medium text-gray-700\">Practice/Organization</label>\n                <p className=\"text-gray-900\">{profile?.organization || 'Not set'}</p>\n              </div>\n            </div>\n          </div>\n          \n          <div>\n            <h3 className=\"font-semibold text-gray-900 mb-4\">Practice Details</h3>\n            <div className=\"space-y-3\">\n              <div>\n                <label className=\"text-sm font-medium text-gray-700\">Specializations</label>\n                <p className=\"text-gray-900\">{providerData?.specializations?.join(', ') || 'General Practice'}</p>\n              </div>\n              <div>\n                <label className=\"text-sm font-medium text-gray-700\">Years of Experience</label>\n                <p className=\"text-gray-900\">{providerData?.years_experience || 0} years</p>\n              </div>\n              <div>\n                <label className=\"text-sm font-medium text-gray-700\">License Status</label>\n                <span className={`px-2 py-1 text-xs rounded-full ${\n                  providerData?.verified ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'\n                }`}>\n                  {providerData?.verified ? 'Verified' : 'Pending Verification'}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderAnalyticsSection = () => {\n    // Calculate financial metrics\n    const calculateRevenue = () => {\n      const completedBookings = appointments.filter(apt => apt.status === 'completed');\n      const serviceRevenue = completedBookings.reduce((total, appointment) => {\n        // Estimate revenue from appointments\n        const estimatedPrice = 150; // Average vet consultation price\n        const netEarnings = estimatedPrice * 0.85; // 15% platform fee\n        return total + netEarnings;\n      }, 0);\n\n      // Estimate product revenue (since we don't have actual sales data)\n      const productRevenue = listings.length * 25; // Estimated average monthly revenue per listing\n\n      // Package revenue estimation\n      const packageRevenue = listings.filter(l => l.active).reduce((total, listing) => {\n        const price = parseFloat(listing.price_from || listing.price || 0);\n        return total + (price * 0.1); // Estimated 10% of listing price as monthly package revenue\n      }, 0);\n\n      return {\n        total: serviceRevenue + productRevenue + packageRevenue,\n        services: serviceRevenue,\n        products: productRevenue,\n        packages: packageRevenue\n      };\n    };\n\n    const revenue = calculateRevenue();\n    const thisMonthAppointments = appointments.filter(apt => {\n      const appointmentDate = new Date(apt.created_at);\n      const now = new Date();\n      return appointmentDate.getMonth() === now.getMonth() && appointmentDate.getFullYear() === now.getFullYear();\n    });\n\n    return (\n      <div className=\"p-6 space-y-6\">\n        {/* Header */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Financial Analytics</h3>\n          <p className=\"text-sm text-gray-600\">\n            Track your earnings from consultations, services, and products. All figures show net earnings after platform fees.\n          </p>\n        </div>\n\n        {/* Revenue Overview Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          <div className=\"bg-green-50 border border-green-200 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <h4 className=\"text-sm font-medium text-green-600\">Total Earnings</h4>\n              <UIIcon type=\"earnings\" className=\"w-6 h-6 text-green-500\" />\n            </div>\n            <p className=\"text-3xl font-bold text-green-900\">${revenue.total.toFixed(2)}</p>\n            <p className=\"text-xs text-green-600 mt-1\">Net earnings (after fees)</p>\n          </div>\n          \n          <div className=\"bg-blue-50 border border-blue-200 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <h4 className=\"text-sm font-medium text-blue-600\">Consultation Revenue</h4>\n              <UIIcon type=\"consultation\" className=\"w-6 h-6 text-blue-500\" />\n            </div>\n            <p className=\"text-3xl font-bold text-blue-900\">${revenue.services.toFixed(2)}</p>\n            <p className=\"text-xs text-blue-600 mt-1\">{appointments.filter(apt => apt.status === 'completed').length} completed consultations</p>\n          </div>\n          \n          <div className=\"bg-orange-50 border border-orange-200 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <h4 className=\"text-sm font-medium text-orange-600\">Service Listings</h4>\n              <UIIcon type=\"listings\" className=\"w-6 h-6 text-orange-500\" />\n            </div>\n            <p className=\"text-3xl font-bold text-orange-900\">${revenue.products.toFixed(2)}</p>\n            <p className=\"text-xs text-orange-600 mt-1\">{listings.length} services listed</p>\n          </div>\n          \n          <div className=\"bg-purple-50 border border-purple-200 p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <h4 className=\"text-sm font-medium text-purple-600\">Package Revenue</h4>\n              <UIIcon type=\"package\" className=\"w-6 h-6 text-purple-500\" />\n            </div>\n            <p className=\"text-3xl font-bold text-purple-900\">${revenue.packages.toFixed(2)}</p>\n            <p className=\"text-xs text-purple-600 mt-1\">{listings.filter(l => l.active).length} active listings</p>\n          </div>\n        </div>\n\n        {/* Revenue Breakdown Chart */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Revenue Breakdown */}\n          <div className=\"bg-white shadow rounded-lg p-6\">\n            <h4 className=\"text-lg font-medium text-gray-900 mb-4\">Revenue Breakdown</h4>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-4 h-4 bg-green-500 rounded-full mr-3\"></div>\n                  <span className=\"text-sm font-medium text-gray-700\">Consultations</span>\n                </div>\n                <div className=\"text-right\">\n                  <span className=\"text-sm font-bold text-gray-900\">${revenue.services.toFixed(2)}</span>\n                  <div className=\"w-32 bg-gray-200 rounded-full h-2 mt-1\">\n                    <div \n                      className=\"bg-green-500 h-2 rounded-full\" \n                      style={{ width: `${revenue.total > 0 ? (revenue.services / revenue.total) * 100 : 0}%` }}\n                    ></div>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-4 h-4 bg-green-400 rounded-full mr-3\"></div>\n                  <span className=\"text-sm font-medium text-gray-700\">Services</span>\n                </div>\n                <div className=\"text-right\">\n                  <span className=\"text-sm font-bold text-gray-900\">${revenue.products.toFixed(2)}</span>\n                  <div className=\"w-32 bg-gray-200 rounded-full h-2 mt-1\">\n                    <div \n                      className=\"bg-green-400 h-2 rounded-full\" \n                      style={{ width: `${revenue.total > 0 ? (revenue.products / revenue.total) * 100 : 0}%` }}\n                    ></div>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-4 h-4 bg-green-300 rounded-full mr-3\"></div>\n                  <span className=\"text-sm font-medium text-gray-700\">Packages</span>\n                </div>\n                <div className=\"text-right\">\n                  <span className=\"text-sm font-bold text-gray-900\">${revenue.packages.toFixed(2)}</span>\n                  <div className=\"w-32 bg-gray-200 rounded-full h-2 mt-1\">\n                    <div \n                      className=\"bg-green-300 h-2 rounded-full\" \n                      style={{ width: `${revenue.total > 0 ? (revenue.packages / revenue.total) * 100 : 0}%` }}\n                    ></div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Performance Metrics */}\n          <div className=\"bg-white shadow rounded-lg p-6\">\n            <h4 className=\"text-lg font-medium text-gray-900 mb-4\">Performance Metrics</h4>\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-gray-600\">Consultation Success Rate</span>\n                <span className=\"text-sm font-bold text-green-600\">\n                  {appointments.length > 0 ? Math.round((appointments.filter(apt => apt.status === 'completed').length / appointments.length) * 100) : 0}%\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-gray-600\">Average Service Price</span>\n                <span className=\"text-sm font-bold text-gray-900\">\n                  ${listings.length > 0 ? (listings.reduce((sum, l) => sum + parseFloat(l.price_from || 0), 0) / listings.length).toFixed(2) : '0.00'}\n                </span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-gray-600\">This Month Appointments</span>\n                <span className=\"text-sm font-bold text-green-600\">{thisMonthAppointments.length}</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-gray-600\">Active Listings</span>\n                <span className=\"text-sm font-bold text-gray-900\">{listings.filter(l => l.active).length}</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-gray-600\">Patient Rating</span>\n                <span className=\"text-sm font-bold text-yellow-600\">\n                  {stats.averageRating > 0 ? (\n                    <span className=\"flex items-center\">\n                      {stats.averageRating}\n                      <UIIcon type=\"rating\" className=\"w-4 h-4 text-yellow-500 ml-1\" />\n                    </span>\n                  ) : 'No ratings yet'}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Recent Transactions */}\n        <div className=\"bg-white shadow rounded-lg p-6\">\n          <h4 className=\"text-lg font-medium text-gray-900 mb-4\">Recent Transactions</h4>\n          {appointments.filter(apt => apt.status === 'completed').length > 0 ? (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Service</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Patient</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Earnings</th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {appointments.filter(apt => apt.status === 'completed').slice(0, 5).map((appointment) => {\n                    const estimatedPrice = 150; // Average vet consultation price\n                    const earnings = (estimatedPrice * 0.85).toFixed(2); // 15% platform fee\n                    \n                    return (\n                      <tr key={appointment.id}>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                          {appointment.consultation_type || 'Veterinary Consultation'}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                          {appointment.pet_profiles?.name || 'Patient'}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                          {new Date(appointment.created_at).toLocaleDateString()}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600\">\n                          ${earnings}\n                        </td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"text-center py-8\">\n              <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n                <UIIcon type=\"earnings\" className=\"w-8 h-8 text-gray-400\" />\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No completed transactions yet</h3>\n              <p className=\"text-gray-500\">\n                Once you complete consultations, your earnings will appear here.\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Earning Tips */}\n        <div className=\"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6\">\n          <h4 className=\"text-lg font-medium text-gray-900 mb-3\">Tips to Increase Earnings</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"flex items-start space-x-3\">\n              <UIIcon type=\"growth\" className=\"w-6 h-6 text-green-500 mt-1\" />\n              <div>\n                <h5 className=\"font-medium text-gray-900\">Offer Specialized Services</h5>\n                <p className=\"text-sm text-gray-600\">Provide specialized veterinary services for higher-value consultations</p>\n              </div>\n            </div>\n            <div className=\"flex items-start space-x-3\">\n              <UIIcon type=\"rating\" className=\"w-6 h-6 text-green-500 mt-1\" />\n              <div>\n                <h5 className=\"font-medium text-gray-900\">Maintain High Ratings</h5>\n                <p className=\"text-sm text-gray-600\">Better ratings lead to more bookings and higher consultation fees</p>\n              </div>\n            </div>\n            <div className=\"flex items-start space-x-3\">\n              <UIIcon type=\"products\" className=\"w-6 h-6 text-green-500 mt-1\" />\n              <div>\n                <h5 className=\"font-medium text-gray-900\">Recommend Products</h5>\n                <p className=\"text-sm text-gray-600\">Recommend veterinary products for additional income</p>\n              </div>\n            </div>\n            <div className=\"flex items-start space-x-3\">\n              <UIIcon type=\"availability\" className=\"w-6 h-6 text-green-500 mt-1\" />\n              <div>\n                <h5 className=\"font-medium text-gray-900\">Increase Availability</h5>\n                <p className=\"text-sm text-gray-600\">More availability means more consultation opportunities</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  // Package creation component\n  const PackageForm = ({ isEdit = false, initialData = {}, onClose }) => {\n    const [packageData, setPackageData] = useState({\n      name: initialData.name || '',\n      description: initialData.description || '',\n      selectedServices: initialData.service_ids || [],\n      packagePrice: initialData.package_price || '',\n      isActive: initialData.is_active !== undefined ? initialData.is_active : true\n    });\n\n    const handleServiceToggle = (serviceId) => {\n      setPackageData(prev => ({\n        ...prev,\n        selectedServices: prev.selectedServices.includes(serviceId)\n          ? prev.selectedServices.filter(id => id !== serviceId)\n          : [...prev.selectedServices, serviceId]\n      }));\n    };\n\n    const getOriginalPrice = () => {\n      return getServicesOnly(listings)\n        .filter(service => packageData.selectedServices.includes(service.listing_id || service.id))\n        .reduce((total, service) => total + parseFloat(service.price || service.price_from || 0), 0);\n    };\n\n    const getSavings = () => {\n      const original = getOriginalPrice();\n      const packagePrice = parseFloat(packageData.packagePrice || 0);\n      return original - packagePrice;\n    };\n\n    const handleSubmit = async (e) => {\n      e.preventDefault();\n      \n      if (!isEdit && packageData.selectedServices.length < 2) {\n        showError('Please select at least 2 services for a package');\n        return;\n      }\n\n      try {\n        const currentUser = await getUserSafely();\n        if (!currentUser) throw new Error('User not authenticated');\n\n        // Check free tier limits (3 packages for free users)\n        const currentPackageCount = packages.length;\n        const currentProviderData = providerData || profile || {};\n        const subscriptionPlan = currentProviderData?.subscription_plan;\n        const isFreeTier = !subscriptionPlan || subscriptionPlan === 'free' || subscriptionPlan !== 'premium';\n\n        const packageInfo = {\n          listing_type: 'package',\n          listing_id: isEdit ? initialData.id : window.crypto?.randomUUID?.() || Math.random().toString(36),\n          name: packageData.name,\n          description: packageData.description,\n          price: parseFloat(packageData.packagePrice),\n          service_types: 'package',\n          provider_email: currentUser.email,\n          provider_name: profile?.full_name || providerData?.name || currentUser.email?.split('@')[0],\n          provider_type: 'veterinarian',\n          active: packageData.isActive,\n          verified: false,\n          rating: 0.0,\n          reviews_count: 0,\n          created_at: isEdit ? undefined : new Date().toISOString(),\n          updated_at: new Date().toISOString()\n        };\n\n        // Save to marketplace_listings\n        let savedPackage;\n        if (isEdit) {\n          const { data, error } = await supabase\n            .from('marketplace_listings')\n            .update(packageInfo)\n            .eq('listing_id', initialData.id)\n            .eq('provider_email', currentUser.email)\n            .select()\n            .single();\n\n          if (error) throw error;\n          savedPackage = data;\n        } else {\n          const { data, error } = await supabase\n            .from('marketplace_listings')\n            .insert([packageInfo])\n            .select()\n            .single();\n\n          if (error) throw error;\n          savedPackage = data;\n        }\n\n        // Refresh data to show updated packages\n        await Promise.all([\n          loadListings(currentUser.id),\n          loadPackages(currentUser.id)\n        ]);\n\n        showSuccess(`Package ${isEdit ? 'updated' : 'created'} successfully!`);\n        onClose();\n        \n      } catch (error) {\n        console.error('Error saving package:', error);\n        showError('Failed to save package: ' + error.message);\n      }\n    };\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n        <div className=\"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-2xl font-bold text-gray-900\">\n                {isEdit ? 'Edit Package' : 'Create Package'}\n              </h2>\n              <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 text-2xl\"></button>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Package Name *</label>\n                <input\n                  type=\"text\"\n                  required\n                  value={packageData.name}\n                  onChange={(e) => setPackageData({...packageData, name: e.target.value})}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"e.g., Complete Veterinary Care Package\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Package Price *</label>\n                <input\n                  type=\"number\"\n                  required\n                  min=\"0\"\n                  step=\"0.01\"\n                  value={packageData.packagePrice}\n                  onChange={(e) => setPackageData({...packageData, packagePrice: e.target.value})}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"250.00\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Description</label>\n              <textarea\n                value={packageData.description}\n                onChange={(e) => setPackageData({...packageData, description: e.target.value})}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                rows=\"3\"\n                placeholder=\"Describe what's included in this veterinary package...\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-4\">Select Services *</label>\n              {getServicesOnly(listings).length > 0 ? (\n                <div className=\"grid grid-cols-1 gap-3\">\n                  {getServicesOnly(listings).map((service) => (\n                    <div key={service.listing_id || service.id} className=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50\">\n                      <div className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          id={`package-service-${service.listing_id || service.id}`}\n                          checked={packageData.selectedServices.includes(service.listing_id || service.id)}\n                          onChange={() => handleServiceToggle(service.listing_id || service.id)}\n                          className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                        />\n                        <label htmlFor={`package-service-${service.listing_id || service.id}`} className=\"ml-3 flex-1\">\n                          <div className=\"font-medium text-gray-900\">{service.name || service.title}</div>\n                          <div className=\"text-sm text-gray-500\">{service.description}</div>\n                        </label>\n                      </div>\n                      <div className=\"font-bold text-gray-900\">${service.price || service.price_from}</div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\n                  <p className=\"text-gray-600\">You need to create services first before you can bundle them into packages.</p>\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      onClose();\n                      handleAddNewService();\n                    }}\n                    className=\"mt-3 text-blue-600 hover:text-blue-800 font-medium\"\n                  >\n                    Create Your First Service \n                  </button>\n                </div>\n              )}\n            </div>\n\n            {packageData.selectedServices.length > 0 && (\n              <div className=\"bg-blue-50 rounded-lg p-4\">\n                <div className=\"flex justify-between items-center mb-2\">\n                  <span className=\"font-medium text-gray-900\">Package Summary</span>\n                </div>\n                <div className=\"space-y-1 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span>Original Price:</span>\n                    <span>${getOriginalPrice().toFixed(2)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Package Price:</span>\n                    <span>${parseFloat(packageData.packagePrice || 0).toFixed(2)}</span>\n                  </div>\n                  <div className=\"flex justify-between font-bold text-green-600\">\n                    <span>Customer Saves:</span>\n                    <span>${getSavings().toFixed(2)}</span>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                id=\"package-active\"\n                checked={packageData.isActive}\n                onChange={(e) => setPackageData({...packageData, isActive: e.target.checked})}\n                className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n              />\n              <label htmlFor=\"package-active\" className=\"ml-2 text-sm text-gray-700\">\n                Make this package available to customers\n              </label>\n            </div>\n\n            <div className=\"flex justify-end space-x-3 pt-6 border-t border-gray-200\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={!isEdit && packageData.selectedServices.length < 2}\n                className={`inline-flex items-center px-4 py-2 rounded-lg text-white text-sm font-medium ${\n                  (isEdit || packageData.selectedServices.length >= 2)\n                    ? 'bg-blue-600 hover:bg-blue-700'\n                    : 'bg-gray-400 cursor-not-allowed'\n                }`}\n              >\n                <UIIcon type=\"check\" className=\"w-4 h-4 mr-2\" />\n                {isEdit ? 'Update Package' : 'Create Package'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  };\n\n  // Main render function\n  const renderActiveSection = () => {\n    switch (activeSection) {\n      case 'overview':\n        return renderOverviewSection();\n      case 'patients':\n        return renderPatientsSection();\n      case 'appointments':\n        return renderAppointmentsSection();\n      case 'diagnoses':\n        return renderDiagnosesSection();\n      case 'prescriptions':\n        return renderPrescriptionsSection();\n      case 'triage':\n        return renderTriageSection();\n      case 'marketplace':\n        return renderMarketplaceSection();\n      case 'analytics':\n        return renderAnalyticsSection();\n      case 'profile':\n        return renderProfileSection();\n      default:\n        return renderOverviewSection();\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading veterinarian dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <ErrorBoundary>\n      <div className=\"min-h-screen bg-gray-50\">\n        <div className=\"flex flex-col lg:flex-row\">\n          {/* Mobile Header */}\n          <div className=\"lg:hidden bg-white border-b border-gray-200 px-4 py-3\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h4 className=\"text-md font-medium text-gray-900\">Welcome back, Dr. {profile?.full_name || 'Veterinarian'}</h4>\n              </div>\n              <button\n                onClick={() => setShowAvailabilityModal(true)}\n                className=\"px-3 py-1.5 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm\"\n              >\n                Schedule\n              </button>\n            </div>\n          </div>\n\n          {/* Mobile Navigation */}\n          <div className=\"lg:hidden bg-white border-b border-gray-200 px-2 py-2\">\n            <div className=\"flex overflow-x-auto space-x-1 pb-2\">\n              {navigationSections.map((section) => (\n                <button\n                  key={section.id}\n                  onClick={() => setActiveSection(section.id)}\n                  className={`flex-shrink-0 flex items-center px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${\n                    activeSection === section.id\n                      ? 'bg-green-100 text-green-700'\n                      : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                  }`}\n                >\n                  <span className=\"mr-1.5\">{section.icon}</span>\n                  {section.name}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Desktop Sidebar */}\n          <div className=\"hidden lg:block w-64 bg-white shadow-sm border-r border-gray-200 min-h-screen\">\n            <div className=\"p-6\">\n              <div className=\"mb-6\">\n                <div className=\"flex items-center space-x-3 mb-3\">\n                  <img \n                    src=\"https://wagrmmbkukwblfpfxxcb.supabase.co/storage/v1/object/public/web-img/vet.svg\" \n                    alt=\"Veterinarian\" \n                    className=\"w-10 h-10\"\n                  />\n                  <div className=\"min-w-0 flex-1\">\n                    <h1 className=\"text-lg font-semibold text-gray-900 truncate\">Veterinarian</h1>\n                    <p className=\"text-sm text-gray-600 truncate\">{profile?.full_name}</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Navigation */}\n              <nav className=\"space-y-2\">\n                {navigationSections.map((section) => (\n                  <button\n                    key={section.id}\n                    onClick={() => setActiveSection(section.id)}\n                    className={`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${\n                      activeSection === section.id\n                        ? 'bg-green-100 text-green-700'\n                        : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n                    }`}\n                  >\n                    <span className=\"mr-3\">{section.icon}</span>\n                    {section.name}\n                  </button>\n                ))}\n              </nav>\n            </div>\n          </div>\n\n          {/* Main Content */}\n          <div className=\"flex-1 p-3 sm:p-4 lg:p-6\">\n            {renderActiveSection()}\n          </div>\n        </div>\n\n        {/* Modals */}\n        {showAvailabilityModal && (\n          <ProviderAvailability\n            isOpen={showAvailabilityModal}\n            onClose={() => setShowAvailabilityModal(false)}\n            providerData={providerData}\n          />\n        )}\n        \n        {showCreateServiceModal && (\n          <ServiceCreateForm\n            onClose={() => setShowCreateServiceModal(false)}\n          />\n        )}\n        \n        {showEditServiceModal && editingService && (\n          <ServiceEditForm\n            service={editingService}\n            onClose={() => {\n              setShowEditServiceModal(false);\n              setEditingService(null);\n            }}\n          />\n        )}\n        \n        {/* Add Product Modal */}\n        {showAddProductModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-2xl font-bold\">\n                  {editingProduct ? 'Edit Product' : 'Add Product'}\n                </h2>\n                <button\n                  onClick={() => {\n                    setShowAddProductModal(false);\n                    setEditingProduct(null);\n                    setProductForm({\n                      name: '',\n                      description: '',\n                      price: '',\n                      category: 'Accessories',\n                      brand: '',\n                      stockQuantity: '',\n                      photos: [],\n                      specifications: ''\n                    });\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <UIIcon type=\"close\" className=\"w-6 h-6\" />\n                </button>\n              </div>\n              \n              <form onSubmit={(e) => { e.preventDefault(); handleAddProduct(); }} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Product Name *\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={productForm.name}\n                      onChange={(e) => setProductForm({...productForm, name: e.target.value})}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      placeholder=\"e.g., Premium Dog Food\"\n                      required\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Brand\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={productForm.brand}\n                      onChange={(e) => setProductForm({...productForm, brand: e.target.value})}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      placeholder=\"e.g., Royal Canin\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Description\n                  </label>\n                  <textarea\n                    value={productForm.description}\n                    onChange={(e) => setProductForm({...productForm, description: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    rows=\"3\"\n                    placeholder=\"Describe the product, its benefits, and usage instructions...\"\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Price ($) *\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      value={productForm.price}\n                      onChange={(e) => setProductForm({...productForm, price: e.target.value})}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      placeholder=\"0.00\"\n                      required\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Category *\n                    </label>\n                    <select\n                      value={productForm.category}\n                      onChange={(e) => setProductForm({...productForm, category: e.target.value})}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      required\n                    >\n                      <option value=\"Accessories\">Accessories</option>\n                      <option value=\"Supplements\">Supplements</option>\n                    </select>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Stock Quantity *\n                    </label>\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      value={productForm.stockQuantity}\n                      onChange={(e) => setProductForm({...productForm, stockQuantity: e.target.value})}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      placeholder=\"0\"\n                      required\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Product Photos (up to 4)\n                  </label>\n                  \n                  {/* Photo Upload Area */}\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors\">\n                    <input\n                      type=\"file\"\n                      id=\"photo-upload\"\n                      multiple\n                      accept=\"image/*\"\n                      onChange={handlePhotoUpload}\n                      className=\"hidden\"\n                      disabled={productForm.photos.length >= 4}\n                    />\n                    <label \n                      htmlFor=\"photo-upload\" \n                      className={`cursor-pointer ${productForm.photos.length >= 4 ? 'cursor-not-allowed opacity-50' : ''}`}\n                    >\n                      <div className=\"space-y-2\">\n                        <UIIcon type=\"image\" className=\"mx-auto h-8 w-8 text-gray-400\" />\n                        <div className=\"text-sm text-gray-600\">\n                          <span className=\"font-medium text-blue-600 hover:text-blue-500\">\n                            Click to upload photos\n                          </span>\n                          <span> or drag and drop</span>\n                        </div>\n                        <p className=\"text-xs text-gray-500\">PNG, JPG, GIF up to 10MB each</p>\n                        <p className=\"text-xs text-gray-500\">\n                          {productForm.photos.length}/4 photos uploaded\n                        </p>\n                      </div>\n                    </label>\n                  </div>\n\n                  {/* Photo Preview Grid */}\n                  {productForm.photos.length > 0 && (\n                    <div className=\"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3\">\n                      {productForm.photos.map((photo, index) => (\n                        <div key={photo.id} className=\"relative group\">\n                          <img\n                            src={photo.url}\n                            alt={`Product view ${index + 1}`}\n                            className=\"w-full h-20 object-cover rounded-lg border border-gray-200\"\n                          />\n                          <button\n                            type=\"button\"\n                            onClick={() => removePhoto(photo.id)}\n                            className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity\"\n                          >\n                            \n                          </button>\n                          {index === 0 && (\n                            <div className=\"absolute bottom-1 left-1 bg-blue-500 text-white text-xs px-1 py-0.5 rounded\">\n                              Main\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Specifications\n                  </label>\n                  <textarea\n                    value={productForm.specifications}\n                    onChange={(e) => setProductForm({...productForm, specifications: e.target.value})}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    rows=\"3\"\n                    placeholder=\"Size, weight, ingredients, dosage instructions, etc...\"\n                  />\n                </div>\n\n                <div className=\"flex justify-end space-x-3 pt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setShowAddProductModal(false);\n                      setEditingProduct(null);\n                      setProductForm({\n                         name: '',\n                         description: '',\n                         price: '',\n                         category: 'Accessories',\n                         brand: '',\n                         stockQuantity: '',\n                         photos: [],\n                         specifications: ''\n                       });\n                    }}\n                    className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n                  >\n                    {editingProduct ? 'Update Product' : 'Add Product'}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n        \n        {/* Package Modal */}\n        {showPackageModal && (\n          <PackageForm\n            isEdit={!!editingPackage}\n            initialData={editingPackage || {}}\n            onClose={() => {\n              setShowPackageModal(false);\n              setEditingPackage(null);\n            }}\n          />\n        )}\n        \n        {/* Pay-Per-Listing Modal */}\n        {showPayPerListingModal && payPerListingType && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-2xl max-w-md w-full\">\n              <div className=\"p-6 border-b border-gray-200\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-xl font-bold text-gray-900\">\n                    Add More {payPerListingType === 'service' ? 'Services' : payPerListingType === 'product' ? 'Products' : 'Packages'}\n                  </h2>\n                  <button \n                    onClick={() => setShowPayPerListingModal(false)} \n                    className=\"text-gray-400 hover:text-gray-600 text-2xl\"\n                  >\n                    \n                  </button>\n                </div>\n              </div>\n\n              <div className=\"p-6\">\n                <div className=\"text-center mb-6\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                    Expand Your {payPerListingType === 'service' ? 'Services' : payPerListingType === 'product' ? 'Products' : 'Packages'}\n                  </h3>\n                  <p className=\"text-gray-600 text-sm\">\n                    You have {payPerListingType === 'service' ? \n                      `${getServicesOnly(listings).length}/${FREE_SERVICE_LIMIT} services` :\n                      payPerListingType === 'product' ? \n                      `${products.length}/${FREE_PRODUCT_LIMIT} products` :\n                      `${packages.length}/${FREE_PACKAGE_LIMIT} packages`\n                    }. Add more to grow your business!\n                  </p>\n                </div>\n\n                {/* Billing Period Toggle */}\n                <div className=\"flex items-center justify-center mb-6\">\n                  <div className=\"bg-gray-100 p-1 rounded-lg flex\">\n                    <button\n                      onClick={() => setBillingPeriod('monthly')}\n                      className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n                        billingPeriod === 'monthly'\n                          ? 'bg-white text-gray-900 shadow-sm'\n                          : 'text-gray-600 hover:text-gray-900'\n                      }`}\n                    >\n                      Monthly\n                    </button>\n                    <button\n                      onClick={() => setBillingPeriod('yearly')}\n                      className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n                        billingPeriod === 'yearly'\n                          ? 'bg-white text-gray-900 shadow-sm'\n                          : 'text-gray-600 hover:text-gray-900'\n                      }`}\n                    >\n                      Yearly\n                      <span className=\"ml-1 text-xs text-green-600 font-semibold\">SAVE 17%</span>\n                    </button>\n                  </div>\n                </div>\n\n                {/* Pricing Options */}\n                <div className=\"space-y-3 mb-6\">\n                  {/* Individual Option */}\n                  <button \n                    onClick={() => {\n                      // TODO: Implement payment processing\n                      showSuccess(`Payment integration coming soon! Contact support to add ${billingPeriod} billing for 1 ${payPerListingType} listing.`, 5000);\n                      setShowPayPerListingModal(false);\n                    }}\n                    className=\"w-full border border-gray-200 rounded-lg p-4 hover:border-green-300 hover:bg-gray-50 transition-colors text-left\"\n                  >\n                    <div className=\"flex justify-between items-center\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">\n                          1 {payPerListingType === 'service' ? 'Service' : payPerListingType === 'product' ? 'Product' : 'Package'}\n                        </p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-xl font-bold text-gray-900\">\n                           ${getIndividualPrice(payPerListingType)}\n                         </p>\n                         <p className=\"text-xs text-gray-500\">\n                           ${billingPeriod === 'yearly' ? (getIndividualPrice(payPerListingType) / 12).toFixed(2) + '/month' : getIndividualPrice(payPerListingType) + '/month'}\n                           {billingPeriod === 'yearly' && <span className=\"text-green-600 ml-1\">(billed yearly)</span>}\n                         </p>\n                      </div>\n                    </div>\n                  </button>\n\n                  {/* 3-Pack Option */}\n                  <button \n                    onClick={() => {\n                      // TODO: Implement payment processing\n                      showSuccess(`Payment integration coming soon! Contact support to add ${billingPeriod} billing for 3 ${payPerListingType} listings.`, 5000);\n                      setShowPayPerListingModal(false);\n                    }}\n                    className=\"w-full border-2 border-green-200 rounded-lg p-4 bg-green-50 hover:bg-green-100 transition-colors text-left relative\"\n                  >\n                    <div className=\"absolute -top-2 left-4\">\n                      <span className=\"bg-green-500 text-white px-2 py-1 rounded text-xs font-medium\">\n                        POPULAR\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">\n                          3 {payPerListingType === 'service' ? 'Services' : payPerListingType === 'product' ? 'Products' : 'Packages'}\n                        </p>\n                        <p className=\"text-sm text-green-700\">Save money</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-xl font-bold text-green-600\">\n                           ${get3PackPrice(payPerListingType)}\n                        </p>\n                        <p className=\"text-xs text-green-600\">\n                           ${billingPeriod === 'yearly' ? (get3PackPrice(payPerListingType) / 12 / 3).toFixed(2) + '/month each' : (get3PackPrice(payPerListingType) / 3).toFixed(2) + '/month each'}\n                           {billingPeriod === 'yearly' && <span className=\"ml-1\">(billed yearly)</span>}\n                        </p>\n                      </div>\n                    </div>\n                  </button>\n\n                  {/* 5-Pack Option */}\n                  <button \n                    onClick={() => {\n                      // TODO: Implement payment processing\n                      showSuccess(`Payment integration coming soon! Contact support to add ${billingPeriod} billing for 5 ${payPerListingType} listings.`, 5000);\n                      setShowPayPerListingModal(false);\n                    }}\n                    className=\"w-full border-2 border-blue-200 rounded-lg p-4 bg-blue-50 hover:bg-blue-100 transition-colors text-left relative\"\n                  >\n                    <div className=\"absolute -top-2 left-4\">\n                      <span className=\"bg-blue-500 text-white px-2 py-1 rounded text-xs font-medium\">\n                        BEST VALUE\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">\n                          5 {payPerListingType === 'service' ? 'Services' : payPerListingType === 'product' ? 'Products' : 'Packages'}\n                        </p>\n                        <p className=\"text-sm text-blue-700\">Best value</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-xl font-bold text-blue-600\">\n                           ${get5PackPrice(payPerListingType)}\n                        </p>\n                        <p className=\"text-xs text-blue-600\">\n                           ${billingPeriod === 'yearly' ? (get5PackPrice(payPerListingType) / 12 / 5).toFixed(2) + '/month each' : (get5PackPrice(payPerListingType) / 5).toFixed(2) + '/month each'}\n                           {billingPeriod === 'yearly' && <span className=\"ml-1\">(billed yearly)</span>}\n                        </p>\n                      </div>\n                    </div>\n                  </button>\n                </div>\n\n                <div className=\"mb-6\">\n                  <h4 className=\"font-medium text-gray-900 mb-3\">What you get:</h4>\n                  <ul className=\"space-y-2 text-sm text-gray-600\">\n                    <li className=\"flex items-center\">\n                      <UIIcon type=\"check\" className=\"w-4 h-4 text-green-500 mr-2\" />\n                      Active {payPerListingType === 'service' ? 'service listing' : payPerListingType === 'product' ? 'product listing' : 'service package listing'}{billingPeriod === 'yearly' ? 's' : ''} while subscribed\n                    </li>\n                    <li className=\"flex items-center\">\n                      <UIIcon type=\"check\" className=\"w-4 h-4 text-green-500 mr-2\" />\n                      Full marketplace visibility\n                    </li>\n                    <li className=\"flex items-center\">\n                      <UIIcon type=\"check\" className=\"w-4 h-4 text-green-500 mr-2\" />\n                      Same commission rates ({payPerListingType === 'service' ? SERVICE_COMMISSION_RATE * 100 : PRODUCT_COMMISSION_RATE * 100}%)\n                    </li>\n                    <li className=\"flex items-center\">\n                      <UIIcon type=\"check\" className=\"w-4 h-4 text-green-500 mr-2\" />\n                      {billingPeriod === 'yearly' ? 'Save 17% with yearly billing' : 'Flexible monthly billing'}\n                    </li>\n                    <li className=\"flex items-center\">\n                      <UIIcon type=\"check\" className=\"w-4 h-4 text-green-500 mr-2\" />\n                      Cancel anytime\n                    </li>\n                  </ul>\n                </div>\n\n                {/* Cancel Button */}\n                <div className=\"text-center\">\n                  <button\n                    onClick={() => setShowPayPerListingModal(false)}\n                    className=\"text-gray-500 hover:text-gray-700 transition-colors text-sm underline\"\n                  >\n                    Maybe Later\n                  </button>\n                </div>\n\n                <p className=\"text-xs text-gray-500 text-center mt-4\">\n                  Secure payment processing  {billingPeriod === 'yearly' ? 'Yearly billing (save 17%)' : 'Monthly billing'}  Cancel anytime\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </ErrorBoundary>\n  );\n};\n\nexport default VetDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}