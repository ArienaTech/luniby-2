"use strict";(self.webpackChunkresponsive_navbar_website=self.webpackChunkresponsive_navbar_website||[]).push([[715],{6096:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var a=t(5043),r=t(5475),l=t(1740),i=t(673),d=t(88),n=t(579);const c=()=>{const{showInfo:e}=(0,i.M)(),[s,t]=(0,a.useState)(null),[c,o]=(0,a.useState)([]),[x,m]=(0,a.useState)([]),[h,g]=(0,a.useState)([]),[u,p]=(0,a.useState)({totalUsers:0,activeProviders:0,recentIssues:0,systemHealth:"healthy"}),[N,j]=(0,a.useState)(!0),y=(0,r.Zp)();(0,a.useEffect)(()=>{v()},[]);const v=async()=>{try{const{data:{user:e}}=await l.N.auth.getUser();if(!e)return void y("/signin");const{data:s}=await l.N.from("profiles").select("*").eq("id",e.id).single();if(!s||"support"!==s.role)return void y("/");t(s);const{data:a}=await l.N.from("profiles").select("*").order("created_at",{ascending:!1}).limit(10);o(a||[]);const{data:r}=await l.N.from("consultation_bookings").select("\n          *,\n          provider_listings (\n            title,\n            provider_name\n          )\n        ").order("created_at",{ascending:!1}).limit(15);m(r||[]);const{data:i}=await l.N.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(20);g(i||[]);const{count:d}=await l.N.from("profiles").select("*",{count:"exact",head:!0}),{count:n}=await l.N.from("profiles").select("*",{count:"exact",head:!0}).eq("role","provider"),c=(i||[]).filter(e=>e.action.includes("error")||e.action.includes("failed")).length;p({totalUsers:d||0,activeProviders:n||0,recentIssues:c,systemHealth:c>5?"degraded":"healthy"})}catch(e){d.Cp(e)}finally{j(!1)}},b=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";case"completed":return"bg-[#E5F4F1] text-[#4A9A64]";default:return"bg-gray-100 text-gray-800"}},f=e=>{switch(e){case"admin":return"bg-purple-100 text-purple-800";case"provider":return"bg-[#E5F4F1] text-[#4A9A64]";case"pet_owner":return"bg-green-100 text-green-800";case"support":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return N?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#5EB47C] mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading support dashboard..."})]})}):(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("div",{className:"bg-white shadow",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Support Dashboard"}),(0,n.jsxs)("p",{className:"text-gray-600",children:["Welcome, ",(null===s||void 0===s?void 0:s.full_name)||"Support Team","!"]})]}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)(r.N_,{to:"/admin",className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700",children:"Admin Panel"}),(0,n.jsx)(r.N_,{to:"/marketplace",className:"bg-[#5EB47C] text-white px-4 py-2 rounded-lg hover:bg-[#4A9A64]",children:"View Marketplace"})]})]})})}),(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:u.totalUsers})]}),(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Active Providers"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:u.activeProviders})]}),(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Recent Issues"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:u.recentIssues})]}),(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"System Health"}),(0,n.jsx)("p",{className:"text-3xl font-bold "+("healthy"===u.systemHealth?"text-green-600":"text-yellow-600"),children:"healthy"===u.systemHealth?"\u2713 Healthy":"\u26a0 Degraded"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,n.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,n.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,n.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Recent Users"})}),(0,n.jsx)("div",{className:"p-6",children:c.length>0?(0,n.jsx)("div",{className:"space-y-4",children:c.slice(0,8).map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-medium text-gray-900",children:e.full_name||"N/A"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:["Joined: ",new Date(e.created_at).toLocaleDateString()]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end space-y-1",children:[(0,n.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${f(e.role)}`,children:"pet_owner"===e.role?"Pet Owner":e.role}),(0,n.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"})]})]},e.id))}):(0,n.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No users found"})})]}),(0,n.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,n.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,n.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Recent Bookings"})}),(0,n.jsx)("div",{className:"p-6",children:x.length>0?(0,n.jsx)("div",{className:"space-y-4",children:x.slice(0,8).map(e=>{var s,t;return(0,n.jsx)("div",{className:"border border-gray-200 rounded-lg p-3",children:(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-medium text-gray-900",children:(null===(s=e.provider_listings)||void 0===s?void 0:s.title)||"Service Booking"}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:["Provider: ",null===(t=e.provider_listings)||void 0===t?void 0:t.provider_name]}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.consultation_date).toLocaleDateString()})]}),(0,n.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b(e.status)}`,children:e.status})]})},e.id)})}):(0,n.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No bookings found"})})]})]}),(0,n.jsxs)("div",{className:"mt-8 bg-white shadow rounded-lg",children:[(0,n.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,n.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Support Tools"})}),(0,n.jsx)("div",{className:"p-6",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,n.jsxs)(r.N_,{to:"/admin",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-purple-600 text-sm",children:"\ud83d\udc51"})})}),(0,n.jsxs)("div",{className:"ml-4",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Admin Panel"}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Full admin access"})]})]}),(0,n.jsxs)("button",{onClick:()=>e("Feature coming soon: User lookup and assistance"),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("div",{className:"w-8 h-8 bg-[#E5F4F1] rounded-lg flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-[#5EB47C] text-sm",children:"\ud83d\udd0d"})})}),(0,n.jsxs)("div",{className:"ml-4",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"User Lookup"}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Find user accounts"})]})]}),(0,n.jsxs)("button",{onClick:()=>e("Feature coming soon: Booking management tools"),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-green-600 text-sm",children:"\ud83d\udcc5"})})}),(0,n.jsxs)("div",{className:"ml-4",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Booking Support"}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Manage bookings"})]})]}),(0,n.jsxs)("button",{onClick:()=>e("Feature coming soon: System diagnostics"),className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-orange-600 text-sm",children:"\ud83d\udd27"})})}),(0,n.jsxs)("div",{className:"ml-4",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Diagnostics"}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"System health"})]})]})]})})]}),(0,n.jsxs)("div",{className:"mt-8 bg-white shadow rounded-lg",children:[(0,n.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,n.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Recent System Activity"})}),(0,n.jsx)("div",{className:"p-6",children:h.length>0?(0,n.jsx)("div",{className:"space-y-3",children:h.slice(0,10).map(e=>{return(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("div",{className:"w-2 h-2 rounded-full "+(e.action.includes("error")||e.action.includes("failed")?"bg-red-400":e.action.includes("created")||e.action.includes("updated")?"bg-green-400":"bg-[#5EB47C]")})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("p",{className:"text-sm text-gray-900",children:[(s=e.action,{account_created:"Account created",profile_updated:"Profile updated",booking_created:"New booking made",booking_cancelled:"Booking cancelled",data_exported:"Data exported",login:"User signed in",error_occurred:"System error",rate_limit_exceeded:"Rate limit hit"}[s]||s.replace("_"," ")),e.resource_type&&(0,n.jsxs)("span",{className:"text-gray-500",children:[" on ",e.resource_type]})]}),(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:[new Date(e.created_at).toLocaleString(),e.user_id&&(0,n.jsxs)("span",{className:"ml-2",children:["User: ",e.user_id.substring(0,8),"..."]})]})]})]},e.id);var s})}):(0,n.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"})})]})]})]})}}}]);
//# sourceMappingURL=715.224a80d0.chunk.js.map