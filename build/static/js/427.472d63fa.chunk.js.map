{"version":3,"file":"static/js/427.472d63fa.chunk.js","mappings":"wNAKA,MAodA,EApdsBA,KAAO,IAADC,EAC1B,MAAM,UAAEC,IAAcC,EAAAA,EAAAA,MACfC,EAASC,IAAcC,EAAAA,EAAAA,UAAS,OAChCC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,OAClCG,EAAiBC,IAAsBJ,EAAAA,EAAAA,UAAS,KAChDK,EAASC,IAAcN,EAAAA,EAAAA,WAAS,IAChCO,EAAUC,IAAeR,EAAAA,EAAAA,UAAS,IAClCS,EAAsBC,IAA2BV,EAAAA,EAAAA,WAAS,GAC3DW,GAAsBC,EAAAA,EAAAA,QAAO,MAuEnC,OArEAC,EAAAA,EAAAA,WAAU,KAkDJjB,GAjDoBkB,WACtB,IAEE,MAAQC,KAAMC,EAAaC,MAAOC,SAAuBC,EAAAA,EACtDC,KAAK,YACLC,OAAO,KACPC,GAAG,KAAM1B,GACT2B,SAEH,GAAIL,EAGF,YADAZ,GAAW,GAIbP,EAAWiB,GAGX,MAAQD,KAAMS,EAAcP,MAAOQ,SAAwBN,EAAAA,EACxDC,KAAK,aACLC,OAAO,KACPC,GAAG,KAAMN,EAAYU,aACrBH,SAEEE,GACHvB,EAAYsB,GAId,MAAQT,KAAMY,EAAaV,MAAOW,SAAuBT,EAAAA,EACtDC,KAAK,YACLC,OAAO,KACPC,GAAG,cAAeN,EAAYU,aAC9BJ,GAAG,aAAa,GAChBO,GAAG,iBAAkB,GACrBC,IAAI,KAAMlC,GACVmC,MAAM,GAEJH,GACHxB,EAAmBuB,GAAe,IAGpCrB,GAAW,EACb,CAAE,MAAOW,GAEPX,GAAW,EACb,GAIA0B,IAED,CAACpC,KAGJiB,EAAAA,EAAAA,WAAU,KACR,MAAMoB,EAAsBC,IACtBvB,EAAoBwB,UAAYxB,EAAoBwB,QAAQC,SAASF,EAAMG,SAC7E3B,GAAwB,IAK5B,OADA4B,SAASC,iBAAiB,YAAaN,GAChC,KACLK,SAASE,oBAAoB,YAAaP,KAE3C,IAEC5B,GAEAoC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,2DAA0DC,UACvEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,cAAaC,SAAA,EAC1BF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oFACfD,EAAAA,EAAAA,KAAA,KAAGC,UAAU,gCAA+BC,SAAC,oCAMhD7C,GAuBH8C,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBC,SAAA,EAEtCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oCAAmCC,UAChDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,sDAAqDC,UAClEF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,sCAAsC,aAAW,aAAYC,UAC1EC,EAAAA,EAAAA,MAAA,MAAIF,UAAU,6DAA4DC,SAAA,EACxEF,EAAAA,EAAAA,KAAA,MAAAE,UACEF,EAAAA,EAAAA,KAACI,EAAAA,GAAI,CAACC,GAAG,eAAeJ,UAAU,oDAAmDC,SAAC,mBAIxFF,EAAAA,EAAAA,KAAA,MAAAE,UACEF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,sCAAsCK,KAAK,eAAeC,QAAQ,YAAWL,UAC1FF,EAAAA,EAAAA,KAAA,QAAMQ,SAAS,UAAUC,EAAE,qHAAqHC,SAAS,iBAG7JV,EAAAA,EAAAA,KAAA,MAAAE,UACEF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gCAA+BC,SAAE7C,EAAQsD,cAE3DX,EAAAA,EAAAA,KAAA,MAAAE,UACEF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,sCAAsCK,KAAK,eAAeC,QAAQ,YAAWL,UAC1FF,EAAAA,EAAAA,KAAA,QAAMQ,SAAS,UAAUC,EAAE,qHAAqHC,SAAS,iBAG7JV,EAAAA,EAAAA,KAAA,MAAAE,UACEF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,4CAA2CC,SAAE7C,EAAQuD,mBAQ/ET,EAAAA,EAAAA,MAAA,OAAKF,UAAU,sDAAqDC,SAAA,EAClEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+DAA8DC,SAAA,EAE3EF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,wBAAuBC,UACpCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qGAAoGC,SAChH7C,EAAQwD,WACPb,EAAAA,EAAAA,KAAA,OACEc,IAAKzD,EAAQwD,UACbE,IAAK1D,EAAQuD,KACbX,UAAU,yCAGZD,EAAAA,EAAAA,KAAA,OAAKC,UAAU,0DAAyDC,SAAC,sBAM/EC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wCAAuCC,SAAA,EACpDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,SAAQC,UACrBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,gFAA+EC,SAC1F7C,EAAQuD,UAGbZ,EAAAA,EAAAA,KAACgB,EAAAA,GAAc,CACbC,UAAW5D,EAAQ6D,GACnBC,YAAY,UACZC,KAAK,KACLnB,UAAU,2BAGdE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,SAAQC,UACrBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+BAA8BC,SAAA,EAC3CF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,kHAAiHC,SAC9H7C,EAAQsD,WAEVtD,EAAQgE,cACPrB,EAAAA,EAAAA,KAAA,QAAMC,UAAU,wCAAuCC,SACpD7C,EAAQgE,cAGZhE,EAAQiE,QACPnB,EAAAA,EAAAA,MAAA,QAAMF,UAAU,wCAAuCC,SAAA,CAAC,MAClD7C,EAAQiE,eAKpBtB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,aAAYC,UACzBC,EAAAA,EAAAA,MAAA,KAAGF,UAAU,kDAAiDC,SAAA,CAAC,IAC3D7C,EAAQkE,cAMf/D,IACCwC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,iCAAgCC,UAC7CC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oBAAmBC,SAAA,EAChCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,8EAA6EC,UAC1FF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,yDAAwDC,UACxD,QAAbhD,EAAAM,EAASoD,YAAI,IAAA1D,OAAA,EAAbA,EAAesE,OAAO,KAAM,SAGjCrB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,SAAQC,SAAA,EACrBC,EAAAA,EAAAA,MAAA,KAAGF,UAAU,4CAA2CC,SAAA,CAAC,WAC9C1C,EAASiE,eAAiBjE,EAASoD,SAE9CT,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBC,SAAA,CACrC1C,EAASkE,WACRvB,EAAAA,EAAAA,MAAA,QAAMF,UAAU,sHAAqHC,SAAA,EACnIF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,eAAeK,KAAK,eAAeC,QAAQ,YAAWL,UACnEF,EAAAA,EAAAA,KAAA,QAAMQ,SAAS,UAAUC,EAAE,wIAAwIC,SAAS,cACxK,cAITlD,EAASmE,OAAS,IACjBxB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oBAAmBC,SAAA,EAChCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,4BAA2BC,SACvC,IAAI0B,MAAM,IAAIC,IAAI,CAACC,EAAGC,KACrB/B,EAAAA,EAAAA,KAAA,OAAaC,UAAU,UAAUK,KAAK,eAAeC,QAAQ,YAAWL,UACtEF,EAAAA,EAAAA,KAAA,QAAMS,EAAE,8VADAsB,OAKd5B,EAAAA,EAAAA,MAAA,QAAMF,UAAU,wCAAuCC,SAAA,CACpD1C,EAASmE,OAAO,KAAGnE,EAASwE,cAAc,iBAMrDhC,EAAAA,EAAAA,KAACI,EAAAA,GAAI,CACHC,GAAI,aAAa7C,EAAS0D,KAC1BjB,UAAU,8EAA6EC,SACxF,oBAQN7C,EAAQ4E,cACP9B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,yDAAwDC,SAAC,iBAGvEF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,gDAA+CC,SACzD7C,EAAQ4E,kBAMf9B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,yDAAwDC,SAAC,qBAGvEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iCAAgCC,SAAA,CAC5C7C,EAAQ6E,MACP/B,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gCAA+BC,SAAC,UAChDF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,qCAAoCC,SAAE7C,EAAQ6E,SAGjE7E,EAAQ8E,YACPhC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gCAA+BC,SAAC,aAChDC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,qCAAoCC,SAAA,CAAE7C,EAAQ8E,UAAU,YAG3E9E,EAAQ+E,aACPjC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gCAA+BC,SAAC,iBAChDF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,qCAAoCC,SAAE7C,EAAQ+E,gBAGjE/E,EAAQgF,YACPlC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gCAA+BC,SAAC,gBAChDF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,qCAAoCC,SAAE7C,EAAQgF,eAGjEhF,EAAQiF,WACPnC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gCAA+BC,SAAC,eAChDF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,qCAAoCC,SAAE7C,EAAQiF,cAGjEjF,EAAQkF,kBACPvC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,aAAYC,UACzBF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,8GAA6GC,SAAC,+CASrI7C,EAAQmF,MAAQnF,EAAQmF,KAAKC,OAAS,IACrCtC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,yDAAwDC,SAAC,UAGvEF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,uBAAsBC,SAClC7C,EAAQmF,KAAKX,IAAI,CAACa,EAAKC,KACtBxC,EAAAA,EAAAA,MAAA,QAEEF,UAAU,gHAA+GC,SAAA,CAC1H,IACGwC,IAHGC,UAWfxC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,UAASC,SAAA,EACtBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yCAAwCC,SAAA,EACrDF,EAAAA,EAAAA,KAAA,OAAAE,UACEF,EAAAA,EAAAA,KAAA,QAAMC,UAAW,wFACf5C,EAAQuF,eAAiB,GACrB,8BACAvF,EAAQuF,eAAiB,EACzB,gCACA,2BACH1C,SACA7C,EAAQuF,eAAiB,GAAK,WAC9BvF,EAAQuF,eAAiB,EAAI,GAAGvF,EAAQuF,sBAAwB,mBAIpEvF,EAAQuF,eAAiB,IACxBzC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAA0B4C,IAAK3E,EAAoBgC,SAAA,EAChEF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,oDAAmDC,SAAC,eAGrEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBC,EAAAA,EAAAA,MAAA,UACE2C,KAAK,SACLC,QAASA,IAAM9E,GAAyBD,GACxCiC,UAAU,8OAA6OC,SAAA,EAEvPF,EAAAA,EAAAA,KAAA,QAAAE,SAAOpC,KACPkC,EAAAA,EAAAA,KAAA,OACEC,UAAW,sCAAqCjC,EAAuB,aAAe,IACtFsC,KAAK,OACL0C,OAAO,eACPzC,QAAQ,YAAWL,UAEnBF,EAAAA,EAAAA,KAAA,QAAMiD,cAAc,QAAQC,eAAe,QAAQC,YAAa,EAAG1C,EAAE,wBAIxEzC,IACCgC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yLAAwLC,SACpM,IAAI0B,MAAMwB,KAAKC,IAAIhG,EAAQuF,eAAgB,MAAMf,IAAI,CAACC,EAAGC,KACxD/B,EAAAA,EAAAA,KAAA,UAEE8C,KAAK,SACLC,QAASA,KACPhF,EAAYgE,EAAI,GAChB9D,GAAwB,IAE1BgC,UAAW,yFACTnC,IAAaiE,EAAI,EAAI,8BAAgC,mBACnDA,EAAI,EAAI,2BAA6B,KAAK7B,SAE7C6B,EAAI,GAVAA,EAAI,gBAoBzB5B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,2CAA0CC,SAAA,EACvDF,EAAAA,EAAAA,KAAA,UACEsD,SAAqC,IAA3BjG,EAAQuF,eAClB3C,UAAW,sFACT5C,EAAQuF,eAAiB,EACrB,6CACA,gDACH1C,SAEF7C,EAAQuF,eAAiB,EAAI,cAAgB,kBAEhD5C,EAAAA,EAAAA,KAAA,UACEsD,SAAqC,IAA3BjG,EAAQuF,eAClB3C,UAAW,0GACT5C,EAAQuF,eAAiB,EACrB,qDACA,oDACH1C,SACJ,wBASRxC,EAAgB+E,OAAS,IACxBtC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEC,EAAAA,EAAAA,MAAA,MAAIF,UAAU,8EAA6EC,SAAA,CAAC,cACvE,OAAR1C,QAAQ,IAARA,OAAQ,EAARA,EAAUiE,iBAAyB,OAARjE,QAAQ,IAARA,OAAQ,EAARA,EAAUoD,UAElDZ,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gEAA+DC,SAC3ExC,EAAgBmE,IAAK0B,IACpBvD,EAAAA,EAAAA,KAACI,EAAAA,GAAI,CAEHC,GAAI,YAAYkD,EAAerC,KAC/BjB,UAAU,QAAOC,UAEjBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uHAAsHC,SAAA,EACnIF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qHAAoHC,SAChIqD,EAAe1C,WACdb,EAAAA,EAAAA,KAAA,OACEc,IAAKyC,EAAe1C,UACpBE,IAAKwC,EAAe3C,KACpBX,UAAU,yCAGZD,EAAAA,EAAAA,KAAA,OAAKC,UAAU,2DAA0DC,SAAC,oBAM9EC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,kGAAiGC,SAC5GqD,EAAe3C,QAElBT,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oCAAmCC,SAAA,EAChDC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,kDAAiDC,SAAA,CAAC,IAC9DqD,EAAehC,UAEnBvB,EAAAA,EAAAA,KAAA,QAAMC,UAAU,kHAAiHC,SAC9HqD,EAAe5C,qBA5BnB4C,EAAerC,iBA7UhClB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,2DAA0DC,UACvEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,cAAaC,SAAA,EAC1BF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,mFAAkFC,UAC/FF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,0BAA0BK,KAAK,OAAO0C,OAAO,eAAezC,QAAQ,YAAWL,UAC5FF,EAAAA,EAAAA,KAAA,QAAMiD,cAAc,QAAQC,eAAe,QAAQC,YAAY,IAAI1C,EAAE,oDAGzET,EAAAA,EAAAA,KAAA,MAAIC,UAAU,yDAAwDC,SAAC,uBACvEF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,qCAAoCC,SAAC,mDAClDF,EAAAA,EAAAA,KAACI,EAAAA,GAAI,CACHC,GAAG,eACHJ,UAAU,6HAA4HC,SACvI,6B","sources":["components/ProductDetail.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { supabase } from '../lib/supabase.js';\nimport FavoriteButton from './FavoriteButton';\n\nconst ProductDetail = () => {\n  const { productId } = useParams();\n  const [product, setProduct] = useState(null);\n  const [provider, setProvider] = useState(null);\n  const [relatedProducts, setRelatedProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [quantity, setQuantity] = useState(1);\n  const [quantityDropdownOpen, setQuantityDropdownOpen] = useState(false);\n  const quantityDropdownRef = useRef(null);\n\n  useEffect(() => {\n    const loadProductData = async () => {\n      try {\n        // Load product details\n        const { data: productData, error: productError } = await supabase\n          .from('products')\n          .select('*')\n          .eq('id', productId)\n          .single();\n\n        if (productError) {\n          // Product loading error - handled by UI state\n          setLoading(false);\n          return;\n        }\n\n        setProduct(productData);\n\n        // Load provider details\n        const { data: providerData, error: providerError } = await supabase\n          .from('providers')\n          .select('*')\n          .eq('id', productData.provider_id)\n          .single();\n\n        if (!providerError) {\n          setProvider(providerData);\n        }\n\n        // Load related products from the same provider\n        const { data: relatedData, error: relatedError } = await supabase\n          .from('products')\n          .select('*')\n          .eq('provider_id', productData.provider_id)\n          .eq('is_active', true)\n          .gt('stock_quantity', 0)\n          .neq('id', productId)\n          .limit(3);\n\n        if (!relatedError) {\n          setRelatedProducts(relatedData || []);\n        }\n\n        setLoading(false);\n      } catch (error) {\n        // Error loading product data - handled by UI state\n        setLoading(false);\n      }\n    };\n\n    if (productId) {\n      loadProductData();\n    }\n  }, [productId]);\n\n  // Close quantity dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (quantityDropdownRef.current && !quantityDropdownRef.current.contains(event.target)) {\n        setQuantityDropdownOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600 font-montserrat\">Loading product details...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!product) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n            <svg className=\"w-12 h-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\" />\n            </svg>\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2 font-montserrat\">Product not found</h3>\n          <p className=\"text-gray-500 font-montserrat mb-4\">The product you're looking for doesn't exist.</p>\n          <Link\n            to=\"/marketplace\"\n            className=\"inline-flex items-center px-4 py-2 bg-[#5EB47C] text-white rounded-lg hover:bg-[#4A9A64] transition-colors font-montserrat\"\n          >\n            Back to Marketplace\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Breadcrumb */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4\">\n          <nav className=\"flex overflow-x-auto scrollbar-hide\" aria-label=\"Breadcrumb\">\n            <ol className=\"flex items-center space-x-2 sm:space-x-4 whitespace-nowrap\">\n              <li>\n                <Link to=\"/marketplace\" className=\"text-gray-500 hover:text-gray-700 font-montserrat\">\n                  Marketplace\n                </Link>\n              </li>\n              <li>\n                <svg className=\"flex-shrink-0 h-5 w-5 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clipRule=\"evenodd\" />\n                </svg>\n              </li>\n              <li>\n                <span className=\"text-gray-500 font-montserrat\">{product.category}</span>\n              </li>\n              <li>\n                <svg className=\"flex-shrink-0 h-5 w-5 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clipRule=\"evenodd\" />\n                </svg>\n              </li>\n              <li>\n                <span className=\"text-gray-900 font-montserrat font-medium\">{product.name}</span>\n              </li>\n            </ol>\n          </nav>\n        </div>\n      </div>\n\n      {/* Product Details */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8 mb-8 lg:mb-12\">\n          {/* Product Image */}\n          <div className=\"aspect-w-1 aspect-h-1\">\n            <div className=\"bg-gradient-to-br from-primary-100 to-primary-200 rounded-2xl h-64 sm:h-80 lg:h-96 overflow-hidden\">\n              {product.image_url ? (\n                <img\n                  src={product.image_url}\n                  alt={product.name}\n                  className=\"w-full h-full object-cover border-0\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center text-6xl\">üì¶</div>\n              )}\n            </div>\n          </div>\n\n          {/* Product Information */}\n          <div className=\"flex flex-col\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div className=\"flex-1\">\n                <h1 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-2 font-montserrat\">\n                  {product.name}\n                </h1>\n              </div>\n              <FavoriteButton\n                listingId={product.id}\n                listingType=\"product\"\n                size=\"md\"\n                className=\"ml-4 flex-shrink-0\"\n              />\n            </div>\n            <div className=\"mb-4\">\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-3 mb-4\">\n                  <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 font-montserrat\">\n                    {product.category}\n                  </span>\n                  {product.subcategory && (\n                    <span className=\"text-sm text-gray-500 font-montserrat\">\n                      {product.subcategory}\n                    </span>\n                  )}\n                  {product.brand && (\n                    <span className=\"text-sm text-gray-500 font-montserrat\">\n                      by {product.brand}\n                    </span>\n                  )}\n                </div>\n              </div>\n              <div className=\"text-right\">\n                <p className=\"text-lg font-bold text-gray-900 font-montserrat\">\n                  ${product.price}\n                </p>\n              </div>\n            </div>\n\n            {/* Provider Info */}\n            {provider && (\n              <div className=\"bg-gray-50 rounded-xl p-4 mb-6\">\n                <div className=\"flex items-center\">\n                  <div className=\"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mr-4\">\n                    <span className=\"text-primary-600 font-medium text-base font-montserrat\">\n                      {provider.name?.charAt(0) || 'P'}\n                    </span>\n                  </div>\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium text-gray-900 font-montserrat\">\n                      Sold by {provider.business_name || provider.name}\n                    </p>\n                    <div className=\"flex items-center gap-2\">\n                      {provider.verified && (\n                        <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary-100 text-primary-800 font-montserrat\">\n                          <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                          </svg>\n                          Verified\n                        </span>\n                      )}\n                      {provider.rating > 0 && (\n                        <div className=\"flex items-center\">\n                          <div className=\"flex text-yellow-400 mr-1\">\n                            {[...Array(5)].map((_, i) => (\n                              <svg key={i} className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                              </svg>\n                            ))}\n                          </div>\n                          <span className=\"text-xs text-gray-500 font-montserrat\">\n                            {provider.rating} ({provider.reviews_count})\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <Link\n                    to={`/provider/${provider.id}`}\n                    className=\"text-primary-600 hover:text-primary-700 text-sm font-medium font-montserrat\"\n                  >\n                    View Store\n                  </Link>\n                </div>\n              </div>\n            )}\n\n            {/* Product Description */}\n            {product.description && (\n              <div className=\"mb-6\">\n                <h3 className=\"text-lg font-medium text-gray-900 mb-3 font-montserrat\">\n                  Description\n                </h3>\n                <p className=\"text-gray-700 font-montserrat leading-relaxed\">\n                  {product.description}\n                </p>\n              </div>\n            )}\n\n            {/* Product Details */}\n            <div className=\"mb-6\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-3 font-montserrat\">\n                Product Details\n              </h3>\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                {product.sku && (\n                  <div>\n                    <span className=\"text-gray-500 font-montserrat\">SKU:</span>\n                    <span className=\"ml-2 text-gray-900 font-montserrat\">{product.sku}</span>\n                  </div>\n                )}\n                {product.weight_kg && (\n                  <div>\n                    <span className=\"text-gray-500 font-montserrat\">Weight:</span>\n                    <span className=\"ml-2 text-gray-900 font-montserrat\">{product.weight_kg} kg</span>\n                  </div>\n                )}\n                {product.dimensions && (\n                  <div>\n                    <span className=\"text-gray-500 font-montserrat\">Dimensions:</span>\n                    <span className=\"ml-2 text-gray-900 font-montserrat\">{product.dimensions}</span>\n                  </div>\n                )}\n                {product.age_group && (\n                  <div>\n                    <span className=\"text-gray-500 font-montserrat\">Age Group:</span>\n                    <span className=\"ml-2 text-gray-900 font-montserrat\">{product.age_group}</span>\n                  </div>\n                )}\n                {product.pet_type && (\n                  <div>\n                    <span className=\"text-gray-500 font-montserrat\">Pet Type:</span>\n                    <span className=\"ml-2 text-gray-900 font-montserrat\">{product.pet_type}</span>\n                  </div>\n                )}\n                {product.is_prescription && (\n                  <div className=\"col-span-2\">\n                    <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 font-montserrat\">\n                      ‚ö†Ô∏è Prescription Required\n                    </span>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Tags */}\n            {product.tags && product.tags.length > 0 && (\n              <div className=\"mb-6\">\n                <h3 className=\"text-lg font-medium text-gray-900 mb-3 font-montserrat\">\n                  Tags\n                </h3>\n                <div className=\"flex flex-wrap gap-2\">\n                  {product.tags.map((tag, index) => (\n                    <span\n                      key={index}\n                      className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 font-montserrat\"\n                    >\n                      #{tag}\n                    </span>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Stock and Purchase */}\n            <div className=\"mt-auto\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div>\n                  <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium font-montserrat ${\n                    product.stock_quantity > 10 \n                      ? 'bg-green-100 text-green-800' \n                      : product.stock_quantity > 0 \n                      ? 'bg-yellow-100 text-yellow-800'\n                      : 'bg-red-100 text-red-800'\n                  }`}>\n                    {product.stock_quantity > 10 ? 'In Stock' : \n                     product.stock_quantity > 0 ? `${product.stock_quantity} left` : 'Out of Stock'}\n                  </span>\n                </div>\n                \n                {product.stock_quantity > 0 && (\n                  <div className=\"flex items-center gap-3\" ref={quantityDropdownRef}>\n                    <label className=\"text-sm font-medium text-gray-700 font-montserrat\">\n                      Quantity:\n                    </label>\n                    <div className=\"relative\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setQuantityDropdownOpen(!quantityDropdownOpen)}\n                        className=\"border border-gray-300 rounded-lg px-3 py-2 text-sm font-montserrat bg-white text-left flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent min-w-[60px]\"\n                      >\n                        <span>{quantity}</span>\n                        <svg\n                          className={`w-4 h-4 ml-2 transition-transform ${quantityDropdownOpen ? 'rotate-180' : ''}`}\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          viewBox=\"0 0 24 24\"\n                        >\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                        </svg>\n                      </button>\n                      \n                      {quantityDropdownOpen && (\n                        <div className=\"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-xl ring-1 ring-black ring-opacity-5 z-50 overflow-hidden max-h-60 overflow-y-auto min-w-[60px]\">\n                          {[...Array(Math.min(product.stock_quantity, 10))].map((_, i) => (\n                            <button\n                              key={i + 1}\n                              type=\"button\"\n                              onClick={() => {\n                                setQuantity(i + 1);\n                                setQuantityDropdownOpen(false);\n                              }}\n                              className={`w-full px-3 py-2 text-sm text-left hover:bg-gray-50 flex items-center font-montserrat ${\n                                quantity === i + 1 ? 'bg-[#E5F4F1] text-[#4A9A64]' : 'text-gray-900'\n                              } ${i > 0 ? 'border-t border-gray-200' : ''}`}\n                            >\n                              {i + 1}\n                            </button>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"flex flex-col sm:flex-row gap-3 sm:gap-4\">\n                <button\n                  disabled={product.stock_quantity === 0}\n                  className={`flex-1 py-3 px-4 sm:px-6 rounded-xl font-medium font-montserrat transition-colors ${\n                    product.stock_quantity > 0\n                      ? 'bg-[#5EB47C] text-white hover:bg-[#4A9A64]'\n                      : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                  }`}\n                >\n                  {product.stock_quantity > 0 ? 'Add to Cart' : 'Out of Stock'}\n                </button>\n                <button\n                  disabled={product.stock_quantity === 0}\n                  className={`flex-1 sm:flex-none px-4 sm:px-6 py-3 rounded-xl font-medium font-montserrat border transition-colors ${\n                    product.stock_quantity > 0\n                      ? 'border-[#5EB47C] text-[#5EB47C] hover:bg-[#E5F4F1]'\n                      : 'border-gray-300 text-gray-500 cursor-not-allowed'\n                  }`}\n                >\n                  Buy Now\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Related Products */}\n        {relatedProducts.length > 0 && (\n          <div>\n            <h2 className=\"text-lg sm:text-xl font-semibold text-gray-900 mb-4 sm:mb-6 font-montserrat\">\n              More from {provider?.business_name || provider?.name}\n            </h2>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6\">\n              {relatedProducts.map((relatedProduct) => (\n                <Link\n                  key={relatedProduct.id}\n                  to={`/product/${relatedProduct.id}`}\n                  className=\"group\"\n                >\n                  <div className=\"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-300\">\n                    <div className=\"aspect-w-1 aspect-h-1 bg-gradient-to-br from-primary-100 to-primary-200 h-28 sm:h-32 rounded-t-2xl overflow-hidden\">\n                      {relatedProduct.image_url ? (\n                        <img\n                          src={relatedProduct.image_url}\n                          alt={relatedProduct.name}\n                          className=\"w-full h-full object-cover border-0\"\n                        />\n                      ) : (\n                        <div className=\"w-full h-full flex items-center justify-center text-base\">\n                          üì¶\n                        </div>\n                      )}\n                    </div>\n                    \n                    <div className=\"p-3 sm:p-4\">\n                      <h3 className=\"font-semibold text-gray-900 mb-2 font-montserrat group-hover:text-primary-600 transition-colors\">\n                        {relatedProduct.name}\n                      </h3>\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-lg font-bold text-gray-900 font-montserrat\">\n                          ${relatedProduct.price}\n                        </span>\n                        <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 font-montserrat\">\n                          {relatedProduct.category}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ProductDetail;"],"names":["ProductDetail","_provider$name","productId","useParams","product","setProduct","useState","provider","setProvider","relatedProducts","setRelatedProducts","loading","setLoading","quantity","setQuantity","quantityDropdownOpen","setQuantityDropdownOpen","quantityDropdownRef","useRef","useEffect","async","data","productData","error","productError","supabase","from","select","eq","single","providerData","providerError","provider_id","relatedData","relatedError","gt","neq","limit","loadProductData","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","_jsx","className","children","_jsxs","Link","to","fill","viewBox","fillRule","d","clipRule","category","name","image_url","src","alt","FavoriteButton","listingId","id","listingType","size","subcategory","brand","price","charAt","business_name","verified","rating","Array","map","_","i","reviews_count","description","sku","weight_kg","dimensions","age_group","pet_type","is_prescription","tags","length","tag","index","stock_quantity","ref","type","onClick","stroke","strokeLinecap","strokeLinejoin","strokeWidth","Math","min","disabled","relatedProduct"],"sourceRoot":""}