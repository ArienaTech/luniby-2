{"version":3,"file":"static/js/715.224a80d0.chunk.js","mappings":"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","sources":["components/SupportDashboard.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { supabase } from '../lib/supabase.js';\nimport { useNotificationContext } from '../contexts/NotificationContext';\nimport * as Sentry from '@sentry/react';\n\nconst SupportDashboard = () => {\n  const { showInfo } = useNotificationContext();\n  const [profile, setProfile] = useState(null);\n  const [recentUsers, setRecentUsers] = useState([]);\n  const [recentBookings, setRecentBookings] = useState([]);\n  const [auditLogs, setAuditLogs] = useState([]);\n  const [stats, setStats] = useState({\n    totalUsers: 0,\n    activeProviders: 0,\n    recentIssues: 0,\n    systemHealth: 'healthy'\n  });\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    checkUserAndLoadData();\n  }, []);\n\n  const checkUserAndLoadData = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        navigate('/signin');\n        return;\n      }\n\n      // Get user profile\n      const { data: profileData } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', user.id)\n        .single();\n\n      if (!profileData || profileData.role !== 'support') {\n        navigate('/');\n        return;\n      }\n\n      setProfile(profileData);\n\n      // Load recent users (for support assistance)\n      const { data: usersData } = await supabase\n        .from('profiles')\n        .select('*')\n        .order('created_at', { ascending: false })\n        .limit(10);\n\n      setRecentUsers(usersData || []);\n\n      // Load recent bookings (for support monitoring)\n      const { data: bookingsData } = await supabase\n        .from('consultation_bookings')\n        .select(`\n          *,\n          provider_listings (\n            title,\n            provider_name\n          )\n        `)\n        .order('created_at', { ascending: false })\n        .limit(15);\n\n      setRecentBookings(bookingsData || []);\n\n      // Load recent audit logs (for troubleshooting)\n      const { data: auditData } = await supabase\n        .from('audit_logs')\n        .select('*')\n        .order('created_at', { ascending: false })\n        .limit(20);\n\n      setAuditLogs(auditData || []);\n\n      // Calculate stats\n      const { count: userCount } = await supabase\n        .from('profiles')\n        .select('*', { count: 'exact', head: true });\n\n      const { count: providerCount } = await supabase\n        .from('profiles')\n        .select('*', { count: 'exact', head: true })\n        .eq('role', 'provider');\n\n      const recentIssues = (auditData || []).filter(log => \n        log.action.includes('error') || log.action.includes('failed')\n      ).length;\n\n      setStats({\n        totalUsers: userCount || 0,\n        activeProviders: providerCount || 0,\n        recentIssues,\n        systemHealth: recentIssues > 5 ? 'degraded' : 'healthy'\n      });\n\n    } catch (error) {\n      Sentry.captureException(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'confirmed': return 'bg-green-100 text-green-800';\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\n      case 'cancelled': return 'bg-red-100 text-red-800';\n      case 'completed': return 'bg-[#E5F4F1] text-[#4A9A64]';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getRoleColor = (role) => {\n    switch (role) {\n      case 'admin': return 'bg-purple-100 text-purple-800';\n      case 'provider': return 'bg-[#E5F4F1] text-[#4A9A64]';\n      case 'pet_owner': return 'bg-green-100 text-green-800';\n      case 'support': return 'bg-orange-100 text-orange-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const formatActivityAction = (action) => {\n    const actionMap = {\n      'account_created': 'Account created',\n      'profile_updated': 'Profile updated',\n      'booking_created': 'New booking made',\n      'booking_cancelled': 'Booking cancelled',\n      'data_exported': 'Data exported',\n      'login': 'User signed in',\n      'error_occurred': 'System error',\n      'rate_limit_exceeded': 'Rate limit hit'\n    };\n    return actionMap[action] || action.replace('_', ' ');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#5EB47C] mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading support dashboard...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center py-6\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">Support Dashboard</h1>\n              <p className=\"text-gray-600\">Welcome, {profile?.full_name || 'Support Team'}!</p>\n            </div>\n            <div className=\"flex space-x-4\">\n              <Link\n                to=\"/admin\"\n                className=\"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700\"\n              >\n                Admin Panel\n              </Link>\n              <Link\n                to=\"/marketplace\"\n                className=\"bg-[#5EB47C] text-white px-4 py-2 rounded-lg hover:bg-[#4A9A64]\"\n              >\n                View Marketplace\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n          <div className=\"bg-white p-6 rounded-lg shadow\">\n            <h3 className=\"text-sm font-medium text-gray-500\">Total Users</h3>\n            <p className=\"text-3xl font-bold text-gray-900\">{stats.totalUsers}</p>\n          </div>\n          <div className=\"bg-white p-6 rounded-lg shadow\">\n            <h3 className=\"text-sm font-medium text-gray-500\">Active Providers</h3>\n            <p className=\"text-3xl font-bold text-gray-900\">{stats.activeProviders}</p>\n          </div>\n          <div className=\"bg-white p-6 rounded-lg shadow\">\n            <h3 className=\"text-sm font-medium text-gray-500\">Recent Issues</h3>\n            <p className=\"text-3xl font-bold text-gray-900\">{stats.recentIssues}</p>\n          </div>\n          <div className=\"bg-white p-6 rounded-lg shadow\">\n            <h3 className=\"text-sm font-medium text-gray-500\">System Health</h3>\n            <p className={`text-3xl font-bold ${\n              stats.systemHealth === 'healthy' ? 'text-green-600' : 'text-yellow-600'\n            }`}>\n              {stats.systemHealth === 'healthy' ? '‚úì Healthy' : '‚ö† Degraded'}\n            </p>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n          {/* Recent Users */}\n          <div className=\"bg-white shadow rounded-lg\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <h2 className=\"text-lg font-medium text-gray-900\">Recent Users</h2>\n            </div>\n            <div className=\"p-6\">\n              {recentUsers.length > 0 ? (\n                <div className=\"space-y-4\">\n                  {recentUsers.slice(0, 8).map((user) => (\n                    <div key={user.id} className=\"flex items-center justify-between border border-gray-200 rounded-lg p-3\">\n                      <div>\n                        <h3 className=\"font-medium text-gray-900\">\n                          {user.full_name || 'N/A'}\n                        </h3>\n                        <p className=\"text-sm text-gray-600\">{user.email}</p>\n                        <p className=\"text-sm text-gray-500\">\n                          Joined: {new Date(user.created_at).toLocaleDateString()}\n                        </p>\n                      </div>\n                      <div className=\"flex flex-col items-end space-y-1\">\n                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getRoleColor(user.role)}`}>\n                          {user.role === 'pet_owner' ? 'Pet Owner' : user.role}\n                        </span>\n                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                          user.is_active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                        }`}>\n                          {user.is_active ? 'Active' : 'Inactive'}\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <p className=\"text-gray-500 text-center py-4\">No users found</p>\n              )}\n            </div>\n          </div>\n\n          {/* Recent Bookings */}\n          <div className=\"bg-white shadow rounded-lg\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <h2 className=\"text-lg font-medium text-gray-900\">Recent Bookings</h2>\n            </div>\n            <div className=\"p-6\">\n              {recentBookings.length > 0 ? (\n                <div className=\"space-y-4\">\n                  {recentBookings.slice(0, 8).map((booking) => (\n                    <div key={booking.id} className=\"border border-gray-200 rounded-lg p-3\">\n                      <div className=\"flex justify-between items-start\">\n                        <div>\n                          <h3 className=\"font-medium text-gray-900\">\n                            {booking.provider_listings?.title || 'Service Booking'}\n                          </h3>\n                          <p className=\"text-sm text-gray-600\">\n                            Provider: {booking.provider_listings?.provider_name}\n                          </p>\n                          <p className=\"text-sm text-gray-500\">\n                            {new Date(booking.consultation_date).toLocaleDateString()}\n                          </p>\n                        </div>\n                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(booking.status)}`}>\n                          {booking.status}\n                        </span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <p className=\"text-gray-500 text-center py-4\">No bookings found</p>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Quick Actions */}\n        <div className=\"mt-8 bg-white shadow rounded-lg\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-medium text-gray-900\">Support Tools</h2>\n          </div>\n          <div className=\"p-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n              <Link\n                to=\"/admin\"\n                className=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50\"\n              >\n                <div className=\"flex-shrink-0\">\n                  <div className=\"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center\">\n                    <span className=\"text-purple-600 text-sm\">üëë</span>\n                  </div>\n                </div>\n                <div className=\"ml-4\">\n                  <h3 className=\"text-sm font-medium text-gray-900\">Admin Panel</h3>\n                  <p className=\"text-sm text-gray-500\">Full admin access</p>\n                </div>\n              </Link>\n\n              <button\n                onClick={() => showInfo('Feature coming soon: User lookup and assistance')}\n                className=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50\"\n              >\n                <div className=\"flex-shrink-0\">\n                              <div className=\"w-8 h-8 bg-[#E5F4F1] rounded-lg flex items-center justify-center\">\n              <span className=\"text-[#5EB47C] text-sm\">üîç</span>\n                  </div>\n                </div>\n                <div className=\"ml-4\">\n                  <h3 className=\"text-sm font-medium text-gray-900\">User Lookup</h3>\n                  <p className=\"text-sm text-gray-500\">Find user accounts</p>\n                </div>\n              </button>\n\n              <button\n                onClick={() => showInfo('Feature coming soon: Booking management tools')}\n                className=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50\"\n              >\n                <div className=\"flex-shrink-0\">\n                  <div className=\"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center\">\n                    <span className=\"text-green-600 text-sm\">üìÖ</span>\n                  </div>\n                </div>\n                <div className=\"ml-4\">\n                  <h3 className=\"text-sm font-medium text-gray-900\">Booking Support</h3>\n                  <p className=\"text-sm text-gray-500\">Manage bookings</p>\n                </div>\n              </button>\n\n              <button\n                onClick={() => showInfo('Feature coming soon: System diagnostics')}\n                className=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50\"\n              >\n                <div className=\"flex-shrink-0\">\n                  <div className=\"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center\">\n                    <span className=\"text-orange-600 text-sm\">üîß</span>\n                  </div>\n                </div>\n                <div className=\"ml-4\">\n                  <h3 className=\"text-sm font-medium text-gray-900\">Diagnostics</h3>\n                  <p className=\"text-sm text-gray-500\">System health</p>\n                </div>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Recent Activity / Audit Logs */}\n        <div className=\"mt-8 bg-white shadow rounded-lg\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-medium text-gray-900\">Recent System Activity</h2>\n          </div>\n          <div className=\"p-6\">\n            {auditLogs.length > 0 ? (\n              <div className=\"space-y-3\">\n                {auditLogs.slice(0, 10).map((log) => (\n                  <div key={log.id} className=\"flex items-center space-x-3\">\n                    <div className=\"flex-shrink-0\">\n                      <div className={`w-2 h-2 rounded-full ${\n                        log.action.includes('error') || log.action.includes('failed') \n                          ? 'bg-red-400' \n                          : log.action.includes('created') || log.action.includes('updated')\n                          ? 'bg-green-400'\n                          : 'bg-[#5EB47C]'\n                      }`}></div>\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm text-gray-900\">\n                        {formatActivityAction(log.action)}\n                        {log.resource_type && (\n                          <span className=\"text-gray-500\"> on {log.resource_type}</span>\n                        )}\n                      </p>\n                      <p className=\"text-sm text-gray-500\">\n                        {new Date(log.created_at).toLocaleString()}\n                        {log.user_id && <span className=\"ml-2\">User: {log.user_id.substring(0, 8)}...</span>}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <p className=\"text-gray-500 text-center py-4\">No recent activity</p>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SupportDashboard;"],"names":["SupportDashboard","showInfo","useNotificationContext","profile","setProfile","useState","recentUsers","setRecentUsers","recentBookings","setRecentBookings","auditLogs","setAuditLogs","stats","setStats","totalUsers","activeProviders","recentIssues","systemHealth","loading","setLoading","navigate","useNavigate","useEffect","checkUserAndLoadData","async","data","user","supabase","auth","getUser","profileData","from","select","eq","id","single","role","usersData","order","ascending","limit","bookingsData","auditData","count","userCount","head","providerCount","filter","log","action","includes","length","error","Sentry","getStatusColor","status","getRoleColor","_jsx","className","children","_jsxs","full_name","Link","to","slice","map","email","Date","created_at","toLocaleDateString","is_active","booking","_booking$provider_lis","_booking$provider_lis2","provider_listings","title","provider_name","consultation_date","onClick","replace","resource_type","toLocaleString","user_id","substring"],"sourceRoot":""}