"use strict";(self.webpackChunkresponsive_navbar_website=self.webpackChunkresponsive_navbar_website||[]).push([[782],{8782:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var r=t(5043),a=t(5475),i=t(1740),l=t(5064),n=t(673),o=t(579);const d=e=>{let{providerData:s,onClose:a,onSubmissionComplete:l}=e;const{showInfo:d}=(0,n.M)(),[c,m]=(0,r.useState)({license_number:"",qualification_type:"",institution:"",graduation_year:"",experience_years:"",specializations:"",additional_notes:""}),[x,u]=(0,r.useState)(!1),g=(0,r.useCallback)((e,s)=>{m(t=>({...t,[e]:s}))},[]),h=(0,r.useCallback)(async e=>{e.preventDefault(),u(!0);try{const{data:{user:e}}=await i.N.auth.getUser(),{data:n,error:o}=await i.N.from("provider_qualifications").insert({provider_id:e.id,provider_email:s.email,provider_name:s.name,provider_type:s.provider_type,license_number:c.license_number||null,qualification_type:c.qualification_type,institution:c.institution,graduation_year:parseInt(c.graduation_year),experience_years:parseInt(c.experience_years),specializations:c.specializations||null,additional_notes:c.additional_notes||null,status:"pending",submitted_at:(new Date).toISOString()}).select();if(o)return void d("Failed to submit qualifications. Please try again.","error");d("Qualifications submitted successfully! Admin will review within 2-3 business days.","success"),l(n[0]),a();try{const e=await t.e(886).then(t.bind(t,5886));await e.default.sendAdminQualificationNotification({provider_name:s.name,provider_email:s.email,provider_type:s.provider_type,license_number:c.license_number||"Not provided",qualification_type:c.qualification_type,institution:c.institution,experience_years:c.experience_years,submitted_at:(new Date).toISOString()})}catch(r){}}catch(n){d("Failed to submit qualifications. Please try again.","error")}finally{u(!1)}},[c,s,d,a,l]);return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Submit Your Qualifications"}),(0,o.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",type:"button",children:"\u2715"})]}),(0,o.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["License/Registration Number ",(0,o.jsx)("span",{className:"text-gray-500 font-normal",children:"(if applicable)"})]}),(0,o.jsx)("input",{type:"text",value:c.license_number,onChange:e=>g("license_number",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent",placeholder:"e.g., WA: VN12345, VNCA: AVNAT123, or leave blank if not required in your state",autoComplete:"off"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Qualification Type *"}),(0,o.jsxs)("select",{required:!0,value:c.qualification_type,onChange:e=>g("qualification_type",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent",children:[(0,o.jsx)("option",{value:"",children:"Select qualification"}),(0,o.jsx)("option",{value:"Certificate IV in Veterinary Nursing",children:"Certificate IV in Veterinary Nursing"}),(0,o.jsx)("option",{value:"Diploma of Veterinary Nursing",children:"Diploma of Veterinary Nursing"}),(0,o.jsx)("option",{value:"Bachelor of Veterinary Science",children:"Bachelor of Veterinary Science"}),(0,o.jsx)("option",{value:"Veterinary Nurse Registration",children:"Veterinary Nurse Registration"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Institution *"}),(0,o.jsx)("input",{type:"text",required:!0,value:c.institution,onChange:e=>g("institution",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent",placeholder:"e.g., TAFE NSW, Massey University",autoComplete:"off"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Graduation Year *"}),(0,o.jsx)("input",{type:"number",required:!0,min:"1980",max:(new Date).getFullYear(),value:c.graduation_year,onChange:e=>g("graduation_year",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent",placeholder:"2020",autoComplete:"off"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Years of Experience *"}),(0,o.jsx)("input",{type:"number",required:!0,min:"0",max:"50",value:c.experience_years,onChange:e=>g("experience_years",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent",placeholder:"3",autoComplete:"off"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specializations"}),(0,o.jsx)("input",{type:"text",value:c.specializations,onChange:e=>g("specializations",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent",placeholder:"e.g., Surgery, Emergency Care, Dental",autoComplete:"off"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),(0,o.jsx)("textarea",{rows:"4",value:c.additional_notes,onChange:e=>g("additional_notes",e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#5EB47C] focus:border-transparent",placeholder:"Any additional information about your qualifications, certifications, or experience..."})]}),(0,o.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,o.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\ud83d\udccb Required Documents"}),(0,o.jsx)("p",{className:"text-sm text-blue-700",children:"Please prepare digital copies of your license and certificates. You can upload them after submitting this form or email them to hello@luniby.com with your license number as reference."})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,o.jsx)("button",{type:"button",onClick:a,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,o.jsx)("button",{type:"submit",disabled:x,className:"px-6 py-2 bg-[#5EB47C] text-white rounded-lg hover:bg-[#4A9A64] disabled:opacity-50",children:x?"Submitting...":"Submit Qualifications"})]})]})]})})};var c=t(3019),m=(t(5326),t(5789)),x=(t(166),t(4699)),u=t(3003),g=t(88),h=(t(8680),t(2896));const p=e=>{let{caseId:s,existingNote:t,onSave:a,onCancel:l}=e;const[n,d]=(0,r.useState)({subjective:"",objective:"",assessment:"",plan:"",priority:"moderate",recommendations:"",follow_up_required:!1,follow_up_date:""}),[c,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{u(null===s||void 0===s?void 0:s.toString().startsWith("triage_")),t&&d({subjective:t.subjective||"",objective:t.objective||"",assessment:t.assessment||"",plan:t.plan||"",priority:t.priority||"moderate",recommendations:t.recommendations||"",follow_up_required:t.follow_up_required||!1,follow_up_date:t.follow_up_date||""})},[s,t]);return(0,o.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,o.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white",children:(0,o.jsxs)("div",{className:"mt-3",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:x?"LuniTriage Assessment":"SOAP Note Editor"}),(0,o.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority Level"}),(0,o.jsxs)("select",{value:n.priority,onChange:e=>d(s=>({...s,priority:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,o.jsx)("option",{value:"low",children:"Low Priority"}),(0,o.jsx)("option",{value:"moderate",children:"Moderate Priority"}),(0,o.jsx)("option",{value:"urgent",children:"Urgent"}),(0,o.jsx)("option",{value:"emergency",children:"Emergency"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subjective (S) - Chief Complaint & History"}),(0,o.jsx)("textarea",{value:n.subjective,onChange:e=>d(s=>({...s,subjective:e.target.value})),rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"What the pet owner reports, symptoms observed, history..."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Objective (O) - Physical Findings"}),(0,o.jsx)("textarea",{value:n.objective,onChange:e=>d(s=>({...s,objective:e.target.value})),rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Physical examination findings, vital signs, observable facts..."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assessment (A) - Diagnosis & Analysis"}),(0,o.jsx)("textarea",{value:n.assessment,onChange:e=>d(s=>({...s,assessment:e.target.value})),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Professional assessment, differential diagnosis, analysis..."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plan (P) - Treatment & Next Steps"}),(0,o.jsx)("textarea",{value:n.plan,onChange:e=>d(s=>({...s,plan:e.target.value})),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Treatment plan, medications, procedures, monitoring..."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recommendations & Instructions"}),(0,o.jsx)("textarea",{value:n.recommendations,onChange:e=>d(s=>({...s,recommendations:e.target.value})),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Home care instructions, when to return, warning signs..."})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",checked:n.follow_up_required,onChange:e=>d(s=>({...s,follow_up_required:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Follow-up required"})]}),n.follow_up_required&&(0,o.jsx)("div",{children:(0,o.jsx)("input",{type:"date",value:n.follow_up_date,onChange:e=>d(s=>({...s,follow_up_date:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t",children:[(0,o.jsx)("button",{onClick:l,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{if(m(!0),x){console.log("Saving triage assessment:",n);const e=s.replace("triage_",""),{error:t}=await i.N.from("consultation_bookings").update({status:"assessed",triage_notes:JSON.stringify(n),priority:n.priority,updated_at:(new Date).toISOString()}).eq("id",e);if(t)throw t}else{const e={case_id:s,subjective:n.subjective,objective:n.objective,assessment:n.assessment,plan:n.plan,priority:n.priority,recommendations:n.recommendations,follow_up_required:n.follow_up_required,follow_up_date:n.follow_up_date||null,status:"completed",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};if(t){const{error:s}=await i.N.from("soap_notes").update(e).eq("id",t.id);if(s)throw s}else{const{error:s}=await i.N.from("soap_notes").insert([e]);if(s)throw s}}a()}catch(e){console.error("Error saving SOAP note:",e),alert("Failed to save SOAP note. Please try again.")}finally{m(!1)}},disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:c?"Saving...":x?"Complete Assessment":"Save SOAP Note"})]})]})})})},v=e=>{let{nurseId:s,initialFilter:t="all"}=e;const[a,l]=(0,r.useState)([]),[n,d]=(0,r.useState)(!0),[c,m]=(0,r.useState)(null),[x,u]=(0,r.useState)(!1),[g,h]=(0,r.useState)(null),[v,b]=(0,r.useState)(t),[f,y]=(0,r.useState)(""),[j,N]=(0,r.useState)("severity"),w={emergency:{label:"Emergency",color:"bg-red-100 text-red-800 border-red-200",icon:"\ud83d\udea8",priority:4,description:"Immediate veterinary attention required"},serious:{label:"Serious",color:"bg-orange-100 text-orange-800 border-orange-200",icon:"\u26a0\ufe0f",priority:3,description:"Urgent veterinary care needed"},moderate:{label:"Moderate",color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:"\ud83d\udccb",priority:2,description:"Veterinary assessment recommended"},mild:{label:"Mild",color:"bg-green-100 text-green-800 border-green-200",icon:"\u2705",priority:1,description:"Monitor and routine care"},pending:{label:"Pending Assessment",color:"bg-blue-100 text-blue-800 border-blue-200",icon:"\u23f3",priority:0,description:"Awaiting triage assessment"}},k={"LuniTriage SOAP Review":{icon:"\ud83d\udccb",label:"SOAP Review",color:"bg-purple-100 text-purple-800"},"LuniTriage Consultation":{icon:"\ud83d\udcac",label:"Consultation",color:"bg-blue-100 text-blue-800"},"Mobile Consultation":{icon:"\ud83c\udfe0",label:"Mobile Visit",color:"bg-green-100 text-green-800"},"Emergency Care":{icon:"\ud83d\udea8",label:"Emergency",color:"bg-red-100 text-red-800"},"Health Check":{icon:"\ud83e\ude7a",label:"Health Check",color:"bg-teal-100 text-teal-800"},"Follow-up":{icon:"\ud83d\udd04",label:"Follow-up",color:"bg-gray-100 text-gray-800"}},_=[{id:"all",name:"All Cases",count:a.length},{id:"emergency",name:"Emergency",count:a.filter(e=>"emergency"===e.severity).length,color:"text-red-600"},{id:"serious",name:"Serious",count:a.filter(e=>"serious"===e.severity).length,color:"text-orange-600"},{id:"moderate",name:"Moderate",count:a.filter(e=>"moderate"===e.severity).length,color:"text-yellow-600"},{id:"mild",name:"Mild",count:a.filter(e=>"mild"===e.severity).length,color:"text-green-600"},{id:"pending",name:"Pending Assessment",count:a.filter(e=>"pending"===e.severity).length,color:"text-blue-600"},{id:"assigned",name:"My Cases",count:a.filter(e=>e.assigned_nurse_id===s).length,color:"text-purple-600"}];(0,r.useEffect)(()=>{t&&"all"!==t&&b(t)},[t]),(0,r.useEffect)(()=>{C()},[s]);const C=async()=>{try{if(d(!0),h(null),!s)return d(!1),void l([]);const e=await Promise.allSettled([S(),P(),L()]),t=[];e.forEach((e,s)=>{"fulfilled"===e.status&&e.value&&t.push(...e.value)}),t.sort((e,s)=>{var t,r;const a=(null===(t=w[e.severity])||void 0===t?void 0:t.priority)||0;return((null===(r=w[s.severity])||void 0===r?void 0:r.priority)||0)-a}),l(t)}catch(e){console.error("Error loading cases:",e),h("general_error"),l([])}finally{d(!1)}},S=async()=>{try{var e;const{data:t,error:r}=await i.N.from("cases").select("\n          *,\n          customer:profiles!cases_customer_id_fkey(full_name, email),\n          soap_notes(id, status, created_at)\n        ").or(`assigned_nurse_id.eq.${s},status.eq.new`);if(r&&(null===(e=r.message)||void 0===e||!e.includes('relation "cases" does not exist')))throw r;return(t||[]).map(e=>({...e,source:"cases",service_type:e.case_type||"General Case",severity:e.priority||"pending"}))}catch(t){return console.error("Error loading regular cases:",t),[]}},P=async()=>{try{const{data:e,error:s}=await i.N.from("consultation_bookings").select("\n          *,\n          marketplace_listings (name, service_types)\n        ").in("consultation_type",["LuniTriage SOAP Review","LuniTriage Consultation"]).in("status",["pending","confirmed","in_progress"]);if(s)throw s;return(e||[]).map(e=>({id:`booking_${e.id}`,case_number:`LT-${e.id}`,title:`${e.pet_name} - ${e.consultation_type}`,description:e.consultation_reason||"LuniTriage assessment required",severity:e.triage_priority||"pending",status:"pending"===e.status?"pending_assessment":e.status,pet_name:e.pet_name,customer_name:e.customer_name,customer_email:e.customer_email,service_type:e.consultation_type,created_at:e.created_at,updated_at:e.updated_at,source:"triage_booking",customer:{full_name:e.customer_name,email:e.customer_email},booking_data:{appointment_date:e.appointment_date,appointment_time:e.appointment_time,booking_id:e.id}}))}catch(e){return console.error("Error loading triage bookings:",e),[]}},L=async()=>{try{const{data:e,error:s}=await i.N.from("consultation_bookings").select("\n          *,\n          marketplace_listings (name, service_types)\n        ").not("consultation_type","in",["LuniTriage SOAP Review","LuniTriage Consultation"]).in("status",["pending","confirmed","in_progress"]);if(s)throw s;return(e||[]).map(e=>({id:`consultation_${e.id}`,case_number:`CS-${e.id}`,title:`${e.pet_name} - ${e.consultation_type||"Consultation"}`,description:e.consultation_reason||"Consultation scheduled",severity:"moderate",status:e.status,pet_name:e.pet_name,customer_name:e.customer_name,customer_email:e.customer_email,service_type:e.consultation_type||"Consultation",created_at:e.created_at,updated_at:e.updated_at,source:"consultation_booking",customer:{full_name:e.customer_name,email:e.customer_email},booking_data:{appointment_date:e.appointment_date,appointment_time:e.appointment_time,booking_id:e.id}}))}catch(e){return console.error("Error loading consultation bookings:",e),[]}},M=e=>{const s=w[e]||w.pending;return(0,o.jsxs)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${s.color}`,children:[(0,o.jsx)("span",{className:"mr-1",children:s.icon}),s.label]})},A=e=>{const s=k[e]||{icon:"\ud83d\udcc4",label:e,color:"bg-gray-100 text-gray-800"};return(0,o.jsxs)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.color}`,children:[(0,o.jsx)("span",{className:"mr-1",children:s.icon}),s.label]})},D=e=>{m(e),"triage_booking"===e.source&&console.log("Opening triage case for assessment:",e),u(!0)},E=e=>{const s=new Date(e),t=new Date,r=Math.floor((t-s)/6e4);return r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:`${Math.floor(r/1440)}d ago`},T=(()=>{let e=a;if("all"!==v&&"assigned"!==v?e=e.filter(e=>e.severity===v):"assigned"===v&&(e=e.filter(e=>e.assigned_nurse_id===s)),f){const s=f.toLowerCase();e=e.filter(e=>{var t,r,a,i,l;return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(s))||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(s))||(null===(a=e.case_number)||void 0===a?void 0:a.toLowerCase().includes(s))||(null===(i=e.pet_name)||void 0===i?void 0:i.toLowerCase().includes(s))||(null===(l=e.customer_name)||void 0===l?void 0:l.toLowerCase().includes(s))})}return"severity"===j?e.sort((e,s)=>{var t,r;const a=(null===(t=w[e.severity])||void 0===t?void 0:t.priority)||0;return((null===(r=w[s.severity])||void 0===r?void 0:r.priority)||0)-a}):"created_at"===j&&e.sort((e,s)=>new Date(s.created_at)-new Date(e.created_at)),e})();return"migration_needed"===g?(0,o.jsx)("div",{className:"space-y-6",children:(0,o.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[(0,o.jsx)("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,o.jsx)("span",{className:"text-2xl",children:"\u2699\ufe0f"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-yellow-800 mb-2",children:"Database Setup Required"}),(0,o.jsx)("p",{className:"text-yellow-700 mb-4",children:"The case management system needs to be set up in your database. Please run the case management migration to enable this feature."}),(0,o.jsxs)("div",{className:"bg-yellow-100 border border-yellow-300 rounded p-3 text-left",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Migration File:"}),(0,o.jsx)("code",{className:"text-xs text-yellow-700 bg-yellow-200 px-2 py-1 rounded",children:"database/migrations/011_case_management_system.sql"})]}),(0,o.jsxs)("button",{onClick:C,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-yellow-700 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry"]})]})}):"general_error"===g?(0,o.jsx)("div",{className:"space-y-6",children:(0,o.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,o.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,o.jsx)("span",{className:"text-2xl",children:"\u274c"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Database Error"}),(0,o.jsx)("p",{className:"text-red-700 mb-4",children:"There was an error connecting to the case management system. Please try again or contact support."}),(0,o.jsxs)("button",{onClick:C,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry"]})]})}):x&&c?(0,o.jsx)(p,{caseId:c.id,existingNote:null===(B=c.soap_notes)||void 0===B?void 0:B[0],onSave:()=>{u(!1),m(null),C()},onCancel:()=>{u(!1),m(null)}}):(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Cases"}),(0,o.jsx)("p",{className:"text-sm text-gray-700",children:"All cases with LuniTriage severity assessment"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsxs)("span",{className:"text-sm text-gray-500",children:[T.length," case",1!==T.length?"s":""]}),(0,o.jsxs)("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"New Case"]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mt-4 w-full",children:[(0,o.jsxs)("div",{className:"md:col-span-3",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,o.jsx)("input",{type:"text",value:f,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search cases..."})]}),(0,o.jsxs)("div",{className:"md:col-span-2",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Severity"}),(0,o.jsx)("select",{value:v,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:_.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.name," (",e.count,")"]},e.id))})]}),(0,o.jsxs)("div",{className:"md:col-span-1",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),(0,o.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,o.jsx)("option",{value:"severity",children:"Severity (Most Urgent)"}),(0,o.jsx)("option",{value:"created_at",children:"Newest First"}),(0,o.jsx)("option",{value:"case_number",children:"Case Number"})]})]})]})]}),n?(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,o.jsx)("p",{className:"text-gray-600 mt-4",children:"Loading cases..."})]}):0===T.length?(0,o.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border p-6",children:[(0,o.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udccb"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No cases found"}),(0,o.jsx)("p",{className:"text-gray-600",children:f||"all"!==v||"assigned"!==v?"Try adjusting your filters to see more cases.":"New cases will appear here when customers book consultations."})]}):(0,o.jsx)("div",{className:"space-y-4",children:T.map(e=>{var s,t;return(0,o.jsx)("div",{className:"bg-white rounded-lg shadow border-2 hover:shadow-lg transition-all cursor-pointer "+("emergency"===e.severity?"border-red-300 bg-red-50":"serious"===e.severity?"border-orange-300 bg-orange-50":"moderate"===e.severity?"border-yellow-300 bg-yellow-50":"mild"===e.severity?"border-green-300 bg-green-50":"border-blue-300 bg-blue-50"),onClick:()=>D(e),children:(0,o.jsx)("div",{className:"p-6",children:(0,o.jsxs)("div",{className:"flex items-start justify-between",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.title}),(0,o.jsxs)("span",{className:"text-sm font-mono text-gray-500",children:["#",e.case_number]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[M(e.severity),A(e.service_type)]}),(0,o.jsx)("p",{className:"text-gray-700 mb-4 line-clamp-2",children:e.description}),(0,o.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(null===(s=e.customer)||void 0===s?void 0:s.full_name)||e.customer_name||"Unknown Customer"]}),e.pet_name&&(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"Pet: ",e.pet_name]}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),E(e.created_at)]}),e.due_date&&(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Due: ",new Date(e.due_date).toLocaleDateString()]}),(null===(t=e.soap_notes)||void 0===t?void 0:t.length)>0&&(0,o.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"SOAP Note Available"]})]})]}),(0,o.jsxs)("div",{className:"flex flex-col items-end space-y-3 ml-6",children:[(0,o.jsx)("div",{className:"text-xs text-gray-500",children:E(e.created_at)}),(0,o.jsxs)("button",{onClick:s=>{s.stopPropagation(),D(e)},className:"inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium text-white transition-colors "+("emergency"===e.severity?"bg-red-600 hover:bg-red-700":"serious"===e.severity?"bg-orange-600 hover:bg-orange-700":"moderate"===e.severity?"bg-yellow-600 hover:bg-yellow-700":"mild"===e.severity?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"),children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"pending"===e.severity?"Start Triage":"triage_booking"===e.source?"Review":"View Details"]}),"pending"===e.severity&&(0,o.jsxs)("select",{onChange:s=>{s.stopPropagation(),s.target.value&&(async(e,s)=>{try{const t=a.find(s=>s.id===e);if(!t)return;if("triage_booking"===t.source){const e=t.booking_data.booking_id,{error:r}=await i.N.from("consultation_bookings").update({triage_priority:s,status:"assessed",updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r}else if("cases"===t.source){const{error:t}=await i.N.from("cases").update({priority:s,updated_at:(new Date).toISOString()}).eq("id",e);if(t)throw t}l(t=>t.map(t=>t.id===e?{...t,severity:s}:t))}catch(t){console.error("Error updating severity:",t)}})(e.id,s.target.value)},className:"text-xs px-2 py-1 border border-gray-300 rounded bg-white text-gray-700 focus:ring-2 focus:ring-blue-500",defaultValue:"",onClick:e=>e.stopPropagation(),children:[(0,o.jsx)("option",{value:"",children:"Quick Assess"}),(0,o.jsx)("option",{value:"mild",children:"\u2705 Mild"}),(0,o.jsx)("option",{value:"moderate",children:"\ud83d\udccb Moderate"}),(0,o.jsx)("option",{value:"serious",children:"\u26a0\ufe0f Serious"}),(0,o.jsx)("option",{value:"emergency",children:"\ud83d\udea8 Emergency"})]})]})]})})},e.id)})})]});var B},b=()=>{const{showInfo:e,showSuccess:s,showError:t}=(0,n.M)(),p=1.49,b=e=>"yearly"===K?"service"===e?19.9:"product"===e?14.9:24.9:"service"===e?1.99:"product"===e?p:2.49,f=e=>"yearly"===K?"service"===e?49.9:"product"===e?39.9:69.9:"service"===e?4.99:"product"===e?3.99:6.99,y=e=>"yearly"===K?"service"===e?79.9:"product"===e?59.9:99.9:"service"===e?7.99:"product"===e?5.99:9.99,j=function(e){const s=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(e=>(.1*parseFloat(e)).toFixed(2))(e):(e=>(.18*parseFloat(e)).toFixed(2))(e);return(parseFloat(e)-parseFloat(s)).toFixed(2)},N=e=>e.filter(e=>"service"===e.listing_type||"product"!==e.listing_type&&"package"!==e.listing_type&&"product"!==(e.service_types||e.service_type)&&"package"!==(e.service_types||e.service_type)),[w,k]=(0,r.useState)(null),[_,C]=(0,r.useState)(null),[S,P]=(0,r.useState)(null),[L,M]=(0,r.useState)([]),[A,D]=(0,r.useState)([]),[E,T]=(0,r.useState)([]),[B,$]=(0,r.useState)([]),[F,q]=(0,r.useState)(null),[V,O]=(0,r.useState)(!1),[I,W]=(0,r.useState)(!1),[R,z]=(0,r.useState)(!1),[H,U]=(0,r.useState)(!1),[Q,Y]=(0,r.useState)(!1),[G,J]=(0,r.useState)(null),[K,X]=(0,r.useState)("monthly"),[Z,ee]=(0,r.useState)(null),[se,te]=(0,r.useState)(!1),[re,ae]=(0,r.useState)(!1),[ie,le]=(0,r.useState)(!1),[ne,oe]=(0,r.useState)([]),[de,ce]=(0,r.useState)(!1),[me,xe]=(0,r.useState)(!1),[ue,ge]=(0,r.useState)(null),[he,pe]=(0,r.useState)(null),[ve,be]=(0,r.useState)(null),[fe,ye]=(0,r.useState)("overview"),[je,Ne]=(0,r.useState)([]),[we,ke]=(0,r.useState)([]),[_e,Ce]=(0,r.useState)(!1),[Se,Pe]=(0,r.useState)(!1),[Le,Me]=(0,r.useState)(null),[Ae,De]=(0,r.useState)(null),[Ee,Te]=(0,r.useState)(null),[Be,$e]=(0,r.useState)({fullName:"",phone:"",address:"",description:"",serviceAreas:"",maxTravelDistance:"25",yearsOfExperience:"",profilePicture:""}),[Fe,qe]=(0,r.useState)(!1),[Ve,Oe]=(0,r.useState)({name:"",description:"",price:"",category:"Accessories",brand:"",stockQuantity:"",photos:[],specifications:""}),[Ie,We]=(0,r.useState)({totalListings:0,activeBookings:0,totalBookings:0,totalEarnings:0,averageRating:0,triageCasesHandled:0,clientsHelped:0}),[Re,ze]=(0,r.useState)(!0),He=(0,a.Zp)(),Ue=(Qe=null===S||void 0===S?void 0:S.provider_type,(0,h.lA)(Qe));var Qe;const Ye=e=>{const s=[{value:"Mobile Consultation",label:"Mobile Consultation"},{value:"Mobile Emergency Care",label:"Mobile Emergency Care"}];return"veterinarian"===e?[...s,{value:"Clinic Consultation",label:"Clinic Consultation"},{value:"Surgery Services",label:"Surgery Services"},{value:"Diagnostic Testing",label:"Diagnostic Testing"},{value:"Preventive Care",label:"Preventive Care"},{value:"Dental Care",label:"Dental Care"},{value:"Orthopedic Care",label:"Orthopedic Care"},{value:"Laboratory Services",label:"Laboratory Services"},{value:"Telemedicine Consultation",label:"Telemedicine Consultation"},{value:"Emergency Surgery",label:"Emergency Surgery"},{value:"Specialist Referral",label:"Specialist Referral"},{value:"Prescription Management",label:"Prescription Management"},{value:"Vaccination Programs",label:"Vaccination Programs"}]:[...s,{value:"Mobile Health Check",label:"Mobile Health Check"},{value:"Mobile Vaccination",label:"Mobile Vaccination"},{value:"Mobile Nail Trimming",label:"Mobile Nail Trimming"},{value:"Mobile Grooming",label:"Mobile Grooming"},{value:"LuniTriage SOAP Review",label:"LuniTriage SOAP Review"},{value:"LuniTriage Consultation",label:"LuniTriage Consultation"}]};(0,r.useEffect)(()=>{Ke()},[]),(0,r.useEffect)(()=>{if("marketplace"===fe){localStorage.getItem("lastProductsReload"),Date.now()}},[fe]),(0,r.useEffect)(()=>{if((_||S||w)&&!Fe){var e;const s=null!==S&&void 0!==S&&S.name&&S.name.trim().split(" ").length>1?S.name:(null===_||void 0===_?void 0:_.full_name)||(null===S||void 0===S?void 0:S.name)||(null===w||void 0===w||null===(e=w.email)||void 0===e?void 0:e.split("@")[0])||"User";$e(e=>({...e,fullName:s,phone:(null===S||void 0===S?void 0:S.phone)||"",address:(null===S||void 0===S?void 0:S.address)||"",description:(null===S||void 0===S?void 0:S.description)||"",serviceAreas:(null===S||void 0===S?void 0:S.service_areas)||"Auckland",maxTravelDistance:(null===S||void 0===S?void 0:S.max_travel_distance)||"25",profilePicture:(null===S||void 0===S?void 0:S.profile_picture)||(null===_||void 0===_?void 0:_.avatar_url)||""})),qe(!0)}},[_,S,w,Fe]),(0,r.useEffect)(()=>{ue&&Oe({name:ue.name||"",description:ue.description||"",price:(ue.price||0).toString(),category:ue.category||"Accessories",brand:ue.brand||"",stockQuantity:(ue.stockQuantity||ue.stock_quantity||0).toString(),photos:ue.photos||[],specifications:ue.specifications||""})},[ue]),(0,r.useEffect)(()=>{const e=e=>{ve&&!e.target.closest(".relative")&&be(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[ve]);const Ge=async()=>{if(!await(async()=>{try{const{error:e}=await i.N.from("products").select("id").limit(1);if(e&&e.message.includes("does not exist"))return alert("Products table needs to be created. Please check the console for SQL to run in Supabase."),!1;{const{data:e}=await i.N.from("products").select("*").limit(1);if(e&&e.length>0);else{const e=["food","treats","toys","accessories","health","grooming","medication","supplements","supplies","other"];for(const s of e){const{error:e}=await i.N.from("products").insert([{name:"TEST_PRODUCT_DELETE_ME",description:"Test product",price:1,category:s,provider_id:1,is_active:!1}]);if(!e){await i.N.from("products").delete().eq("name","TEST_PRODUCT_DELETE_ME");break}}}}return!0}catch(e){return!1}})())return;if(!Ve.name||!Ve.price||!Ve.category||!Ve.stockQuantity)return void alert("Please fill in all required fields (name, price, category, stock quantity)");const e=parseFloat(Ve.price);if(isNaN(e)||e<0)return void alert("Please enter a valid price");const s=parseInt(Ve.stockQuantity);if(isNaN(s)||s<0)return void alert("Please enter a valid stock quantity (0 or greater)");if(JSON.stringify(Ve.photos).length>2e6)alert("Photos are too large. Please use smaller images or reduce the number of photos.");else try{var t,r,a;const{data:{user:n}}=await i.N.auth.getUser();if(!n)throw new Error("User not authenticated");const o=B.length,d=S||_||{},c=null===d||void 0===d?void 0:d.subscription_plan,m=!c||"free"===c||"premium"!==c;if(console.log("Product creation limit check:",{currentProductCount:o,FREE_PRODUCT_LIMIT:5,isFreeTier:m,editingProduct:!!ue,subscription_plan:null===d||void 0===d?void 0:d.subscription_plan}),m&&o>=5&&!ue)return J("product"),void Y(!0);const x={listing_type:"product",listing_id:ue?ue.listing_id||ue.id:(null===(t=window.crypto)||void 0===t||null===(r=t.randomUUID)||void 0===r?void 0:r.call(t))||Math.random().toString(36),name:Ve.name.trim(),description:Ve.description.trim(),price:e,category:Ve.category||"Accessories",brand:Ve.brand.trim()||null,stock_quantity:s,service_types:"product",provider_email:n.email,provider_name:(null===_||void 0===_?void 0:_.full_name)||(null===S||void 0===S?void 0:S.name)||(null===(a=n.email)||void 0===a?void 0:a.split("@")[0]),provider_type:(null===_||void 0===_?void 0:_.provider_type)||(null===S||void 0===S?void 0:S.provider_type)||"Vet Nurse",active:!0,image_url:Ve.photos.length>0?Ve.photos[0].url:null,created_at:ue?void 0:(new Date).toISOString(),updated_at:(new Date).toISOString()};let u;if(ue){const{data:e,error:s}=await i.N.from("marketplace_listings").update(x).eq("listing_id",ue.listing_id||ue.id).eq("provider_email",n.email).select().single();if(s)throw s;u=e}else{const{data:e,error:s}=await i.N.from("marketplace_listings").insert([x]).select().single();if(s){if(s.message.includes("check constraint")&&s.message.includes("category")){const{data:e}=await i.N.from("products").select("category").limit(50);if(e&&e.length>0){const s=[...new Set(e.map(e=>e.category))];alert(`Category constraint error. Allowed categories appear to be: ${s.join(", ")}`)}else alert("Category constraint error. Please check the console and try a different category.")}throw s}u=e}const{data:g}=await i.N.from("marketplace_listings").select("*").eq("listing_type","product").eq("listing_id",u.listing_id||u.id);g&&0!==g.length||alert("Product saved but may not appear in public marketplace. The view might need to be updated.");const h={id:u.id,name:u.name,description:u.description,price:u.price,category:u.category,brand:u.brand,stockQuantity:u.stock_quantity,photos:Ve.photos,specifications:Ve.specifications,createdAt:u.created_at,updatedAt:u.updated_at,type:"product"};let p;p=ue?B.map(e=>e.id===ue.id?h:e):[...B,h],$(p);try{localStorage.setItem(`products_${n.id}`,JSON.stringify(p))}catch(l){}Ke(),Oe({name:"",description:"",price:"",category:"Accessories",brand:"",stockQuantity:"",photos:[],specifications:""}),xe(!1),ge(null)}catch(n){"QuotaExceededError"===n.name||n.message.includes("quota")?alert("Error: Product photos are too large. Please use smaller images or reduce the number of photos."):n.message.includes("JSON")?alert("Error: Invalid product data. Please check your inputs and try again."):alert(`Error saving product: ${n.message}. Please try again.`)}},Je=async(e,s)=>{if(window.confirm(`Are you sure you want to delete "${s}"? This action cannot be undone.`))try{const{data:{user:s}}=await i.N.auth.getUser();if(!s)throw new Error("User not authenticated");const{error:r}=await i.N.from("marketplace_listings").delete().eq("listing_id",e).eq("provider_email",s.email).eq("listing_type","product");if(r)throw r;const a=B.filter(s=>s.id!==e);$(a);try{localStorage.setItem(`products_${s.id}`,JSON.stringify(a))}catch(t){}const l=L.filter(s=>s.id!==`product_${e}`);M(l)}catch(r){alert(`Error deleting product: ${r.message}. Please try again.`)}},Ke=async()=>{try{var e;const s=await(0,l.Mu)();if(!s)return void He("/signin");k(s);const{data:t,error:r}=await i.N.from("profiles").select("*").eq("id",s.id).single();if(!t)return console.log("VetNurseDashboard Debug - No profile data found"),void He("/");if(console.log("VetNurseDashboard Debug - Profile data:",t),console.log("VetNurseDashboard Debug - Role:",t.role),"vet_nurse"!==t.role&&"veterinarian"!==t.role)return console.log("VetNurseDashboard Debug - Wrong role, redirecting to home. Expected: vet_nurse or veterinarian, Got:",t.role),void He("/");console.log("VetNurseDashboard Debug - Access granted for",t.role),C(t);const{data:a,error:n}=await i.N.from("providers").select("*").eq("id",s.id).single();P(a);const o={fullName:(null===t||void 0===t?void 0:t.full_name)||(null===a||void 0===a?void 0:a.name)||(null===s||void 0===s||null===(e=s.email)||void 0===e?void 0:e.split("@")[0])||"Unknown User",phone:(null===a||void 0===a?void 0:a.phone)||"",address:(null===a||void 0===a?void 0:a.address)||"",description:(null===a||void 0===a?void 0:a.description)||"",serviceAreas:(null===a||void 0===a?void 0:a.service_areas)||"Auckland",maxTravelDistance:(null===a||void 0===a?void 0:a.max_travel_distance)||"25",yearsOfExperience:(null===a||void 0===a?void 0:a.years_experience)||"",profilePicture:(null===a||void 0===a?void 0:a.profile_picture)||(null===t||void 0===t?void 0:t.avatar_url)||""};$e(o);const{data:d}=await i.N.from("provider_qualifications").select("*").eq("provider_id",s.id).single();q(d);const{data:c}=await i.N.from("marketplace_listings").select("*").eq("provider_email",t.email).order("created_at",{ascending:!1});M(c||[]);const m=(c||[]).filter(e=>"package"===e.listing_type||"package"===e.service_types||"string"===typeof e.service_types&&e.service_types.toLowerCase().includes("package")).map(e=>({id:e.listing_id,name:e.name,description:e.description,service_ids:[],original_price:1.2*e.price,package_price:e.price,savings:.2*e.price,is_active:!1!==e.active,provider_id:e.provider_id,created_at:e.created_at,updated_at:e.updated_at}));oe(m);const x=(c||[]).filter(e=>"product"===e.listing_type||"product"===e.service_types).map(e=>({id:e.listing_id,name:e.name,description:e.description,price:e.price,category:e.category,brand:e.brand,stockQuantity:e.stock_quantity,photos:e.image_url?[{id:1,url:e.image_url,name:"Product Image"}]:[],specifications:"",createdAt:e.created_at,updatedAt:e.updated_at,type:"product"}));$(x);const{data:u}=await i.N.from("consultation_bookings").select("\n          *,\n          marketplace_listings (\n            name,\n            service_types\n          )\n        ").in("listing_id",(c||[]).map(e=>e.listing_id)).order("created_at",{ascending:!1}).limit(20);D(u||[]);let g=[];if(null!==a&&void 0!==a&&a.verified?(g=(u||[]).filter(e=>{var s;const t=(null===(s=e.marketplace_listings)||void 0===s?void 0:s.service_types)||e.consultation_type;return"LuniTriage SOAP Review"===t||"LuniTriage Consultation"===t}),T(g)):T([]),"veterinarian"===t.role){const{data:e}=await i.N.from("patients").select("*").eq("provider_id",s.id).order("created_at",{ascending:!1});Ne(e||[]);const{data:t}=await i.N.from("procedures").select("*").eq("provider_id",s.id).order("scheduled_date",{ascending:!0});ke(t||[])}const h=(u||[]).filter(e=>"confirmed"===e.status||"pending"===e.status).length,{data:p}=await i.N.from("providers").select("id, verified").eq("id",s.id).single();p&&S&&P({...S,verified:p.verified});const v=(c||[]).reduce((e,s)=>e+(s.rating||0),0)/Math.max((c||[]).length,1);We({totalListings:(c||[]).length,activeBookings:h,totalBookings:(u||[]).length,totalEarnings:0,averageRating:Math.round(10*v)/10,triageCasesHandled:null!==a&&void 0!==a&&a.verified?g.length:0,clientsHelped:(u||[]).filter(e=>"completed"===e.status).length})}catch(s){g.Cp(s)}finally{ze(!1)}},Xe=(0,r.useCallback)(e=>{q(e)},[]),Ze=()=>{const e=S||_||{},s=N(L).length,t=null===e||void 0===e?void 0:e.subscription_plan,r=!t||"free"===t||"premium"!==t;if(console.log("Add New Service button limit check:",{currentServiceCount:s,FREE_SERVICE_LIMIT:5,isFreeTier:r,subscriptionPlan:t}),r&&s>=5)return J("service"),void Y(!0);z(!0)},es=()=>{const e=S||_||{},s=ne.length,t=null===e||void 0===e?void 0:e.subscription_plan,r=!t||"free"===t||"premium"!==t;if(console.log("Add New Package button limit check:",{currentPackageCount:s,FREE_PACKAGE_LIMIT:3,isFreeTier:r,subscriptionPlan:t}),r&&s>=3)return J("package"),void Y(!0);ce(!0)},ss=t=>{var a,l,n;let{service:d,onClose:c}=t;const[m,x]=(0,r.useState)({title:d.name||d.title||"",description:d.description||"",price_from:d.price||d.price_from||"",service_type:d.service_types||d.service_type||""});return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Service"}),(0,o.jsx)("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]})}),(0,o.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const{data:{user:e}}=await i.N.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:t,error:r}=await i.N.from("marketplace_listings").update({name:m.title,description:m.description,price:parseFloat(m.price_from),service_types:m.service_type,updated_at:(new Date).toISOString()}).eq("listing_id",d.listing_id||d.id).select();if(r)throw r;s("Service updated successfully!",4e3),c(),Ke()}catch(r){e(`Failed to update service: ${r.message}`,"error")}},className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Title *"}),(0,o.jsx)("input",{type:"text",required:!0,value:m.title,onChange:e=>x({...m,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Mobile Health Check"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Type *"}),(0,o.jsxs)("select",{required:!0,value:m.service_type,onChange:e=>x({...m,service_type:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,o.jsx)("option",{value:"",children:"Select service type"}),Ye(null===S||void 0===S?void 0:S.provider_type).map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Price *",(null===(a=m.service_type)||void 0===a?void 0:a.includes("LuniTriage"))&&(0,o.jsx)("span",{className:"text-sm text-blue-600 ml-2",children:"(Fixed pricing)"})]}),(0,o.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:m.price_from,onChange:e=>x({...m,price_from:e.target.value}),disabled:null===(l=m.service_type)||void 0===l?void 0:l.includes("LuniTriage"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 "+(null!==(n=m.service_type)&&void 0!==n&&n.includes("LuniTriage")?"bg-gray-100":""),placeholder:"50.00"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,o.jsx)("textarea",{value:m.description,onChange:e=>x({...m,description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Describe your service..."})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,o.jsx)("button",{type:"button",onClick:c,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium",children:"Cancel"}),(0,o.jsxs)("button",{type:"submit",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Update Service"]})]})]})]})})},ts=t=>{let{isEdit:a=!1,initialData:l={},onClose:n}=t;const[d,c]=(0,r.useState)({name:l.name||"",description:l.description||"",selectedServices:l.service_ids||[],packagePrice:l.package_price||"",isActive:void 0===l.is_active||l.is_active}),m=()=>N(L).filter(e=>d.selectedServices.includes(e.listing_id||e.id)).reduce((e,s)=>e+parseFloat(s.price||s.price_from||0),0);return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:a?"Edit Package":"Create Package"}),(0,o.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]})}),(0,o.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!a&&d.selectedServices.length<2)e("Please select at least 2 services for a package","error");else try{var r,o,c;const{data:{user:e}}=await i.N.auth.getUser();if(!e)throw new Error("User not authenticated");const t=ne.length,m=S||_||{},x=null===m||void 0===m?void 0:m.subscription_plan,u=!x||"free"===x||"premium"!==x;console.log("Package creation limit check:",{currentPackageCount:t,FREE_PACKAGE_LIMIT:3,isFreeTier:u,isEdit:a,subscription_plan:null===m||void 0===m?void 0:m.subscription_plan});const g={listing_type:"package",listing_id:a?l.id:(null===(r=window.crypto)||void 0===r||null===(o=r.randomUUID)||void 0===o?void 0:o.call(r))||Math.random().toString(36),name:d.name,description:d.description,price:parseFloat(d.packagePrice),service_types:"package",provider_email:e.email,provider_name:(null===_||void 0===_?void 0:_.full_name)||(null===S||void 0===S?void 0:S.name)||(null===(c=e.email)||void 0===c?void 0:c.split("@")[0]),provider_type:(null===_||void 0===_?void 0:_.provider_type)||(null===S||void 0===S?void 0:S.provider_type)||"Vet Nurse",active:d.isActive,verified:!1,rating:0,reviews_count:0,created_at:a?void 0:(new Date).toISOString(),updated_at:(new Date).toISOString()};let h;if(a){const{data:s,error:t}=await i.N.from("marketplace_listings").update(g).eq("listing_id",l.id).eq("provider_email",e.email).select().single();if(t)throw t;h=s}else{const{data:e,error:s}=await i.N.from("marketplace_listings").insert([g]).select().single();if(s)throw s;h=e}Ke(),s(`Package ${a?"updated":"created"} successfully!`,4e3),n()}catch(m){e("Failed to save package","error")}},className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Package Name *"}),(0,o.jsx)("input",{type:"text",required:!0,value:d.name,onChange:e=>c({...d,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Wellness Package"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Package Price *"}),(0,o.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:d.packagePrice,onChange:e=>c({...d,packagePrice:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"120.00"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,o.jsx)("textarea",{value:d.description,onChange:e=>c({...d,description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Describe what's included in this package..."})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Select Services *"}),(0,o.jsx)("div",{className:"grid grid-cols-1 gap-3",children:N(L).map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:`package-service-${e.listing_id||e.id}`,checked:d.selectedServices.includes(e.listing_id||e.id),onChange:()=>{return s=e.listing_id||e.id,void c(e=>({...e,selectedServices:e.selectedServices.includes(s)?e.selectedServices.filter(e=>e!==s):[...e.selectedServices,s]}));var s},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsxs)("label",{htmlFor:`package-service-${e.listing_id||e.id}`,className:"ml-3 flex-1",children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:e.name||e.title}),(0,o.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]}),(0,o.jsxs)("div",{className:"font-bold text-gray-900",children:["$",e.price||e.price_from]})]},e.listing_id||e.id))})]}),d.selectedServices.length>0&&(0,o.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,o.jsx)("span",{className:"font-medium text-gray-900",children:"Package Summary"})}),(0,o.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Original Price:"}),(0,o.jsxs)("span",{children:["$",m().toFixed(2)]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Package Price:"}),(0,o.jsxs)("span",{children:["$",parseFloat(d.packagePrice||0).toFixed(2)]})]}),(0,o.jsxs)("div",{className:"flex justify-between font-bold text-green-600",children:[(0,o.jsx)("span",{children:"Customer Saves:"}),(0,o.jsxs)("span",{children:["$",(m()-parseFloat(d.packagePrice||0)).toFixed(2)]})]})]})]}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"package-active",checked:d.isActive,onChange:e=>c({...d,isActive:e.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("label",{htmlFor:"package-active",className:"ml-2 text-sm text-gray-700",children:"Make this package available to customers"})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,o.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium",children:"Cancel"}),(0,o.jsxs)("button",{type:"submit",disabled:!a&&d.selectedServices.length<2,className:"inline-flex items-center px-4 py-2 rounded-lg text-white text-sm font-medium "+(a||d.selectedServices.length>=2?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"),children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a?"Update Package":"Create Package"]})]})]})]})})},rs=t=>{let{onClose:a}=t;const[l,n]=(0,r.useState)([]),[d,c]=(0,r.useState)({}),m=(e=>{const s=[{id:"consultation",title:"Mobile Consultation",description:"Professional consultation at your location",defaultPrice:"veterinarian"===e?120:75,category:"Mobile Consultation",icon:"\ud83e\ude7a",preset:!1},{id:"emergency",title:"Mobile Emergency Care",description:"Emergency care service at your location",defaultPrice:"veterinarian"===e?200:150,category:"Mobile Emergency Care",icon:"\ud83d\udea8",preset:!1}];return"veterinarian"===e?[...s,{id:"clinicConsult",title:"Clinic Consultation",description:"In-clinic veterinary consultation",defaultPrice:80,category:"Clinic Consultation",icon:"\ud83c\udfe5",preset:!1},{id:"surgery",title:"Surgery Services",description:"Surgical procedures and operations",defaultPrice:300,category:"Surgery Services",icon:"\u2695\ufe0f",preset:!1},{id:"diagnostic",title:"Diagnostic Testing",description:"Laboratory tests and diagnostic procedures",defaultPrice:150,category:"Diagnostic Testing",icon:"\ud83d\udd2c",preset:!1},{id:"preventive",title:"Preventive Care",description:"Wellness exams and preventive treatments",defaultPrice:100,category:"Preventive Care",icon:"\ud83d\udee1\ufe0f",preset:!1}]:[...s,{id:"lunisoap",title:"LuniTriage SOAP Review",description:"Professional assessment of SOAP notes within 2 hours",defaultPrice:4.99,category:"LuniTriage SOAP Review",icon:"\ud83d\udccb",preset:!0},{id:"luniconsult",title:"LuniTriage Consultation",description:"15-minute consultation to assess if vet visit needed",defaultPrice:14.99,category:"LuniTriage Consultation",icon:"\ud83d\udcac",preset:!0},{id:"nailtrim",title:"Mobile Nail Trimming",description:"Professional nail trimming service at your location",defaultPrice:50,category:"Mobile Nail Trimming",icon:"\u2702\ufe0f",preset:!1},{id:"healthcheck",title:"Mobile Health Check",description:"Comprehensive health assessment at your home",defaultPrice:75,category:"Mobile Health Check",icon:"\ud83c\udfe5",preset:!1},{id:"vaccination",title:"Mobile Vaccination",description:"Vaccination service at your location",defaultPrice:60,category:"Mobile Vaccination",icon:"\ud83d\udc89",preset:!1}]})(null===S||void 0===S?void 0:S.provider_type);return(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Add Services"}),(0,o.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,o.jsx)("p",{className:"text-gray-600 mt-2",children:"Select services you want to offer and set your prices"})]}),(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:m.map(e=>{const s=l.find(s=>s.id===e.id),t=d[e.id]||e.defaultPrice;return(0,o.jsx)("div",{className:"border-2 rounded-xl p-4 cursor-pointer transition-all "+(s?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>(e=>{if(l.find(s=>s.id===e.id)){n(l.filter(s=>s.id!==e.id));const s={...d};delete s[e.id],c(s)}else n([...l,e]),c({...d,[e.id]:e.defaultPrice})})(e),children:(0,o.jsxs)("div",{className:"flex items-start justify-between",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"flex items-center mb-2",children:[(0,o.jsx)("span",{className:"text-2xl mr-3",children:e.icon}),(0,o.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),e.preset&&(0,o.jsx)("span",{className:"ml-2 bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full",children:"LuniTriage"})]}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),s&&(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Price:"}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("span",{className:"text-gray-500 mr-1",children:"$"}),(0,o.jsx)("input",{type:"number",step:"0.01",min:"0",value:t,onChange:s=>{return t=e.id,r=s.target.value,void c({...d,[t]:parseFloat(r)||0});var t,r},onClick:e=>e.stopPropagation(),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm "+(e.preset?"bg-gray-100 cursor-not-allowed":""),disabled:e.preset})]}),e.preset&&(0,o.jsx)("span",{className:"text-xs text-gray-500",children:"Fixed price"})]})]}),(0,o.jsx)("div",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center "+(s?"border-blue-500 bg-blue-500":"border-gray-300"),children:s&&(0,o.jsx)("span",{className:"text-white text-sm",children:"\u2713"})})]})},e.id)})}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[(0,o.jsx)("button",{onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 text-sm font-medium",children:"Cancel"}),(0,o.jsxs)("button",{onClick:async()=>{if(0!==l.length)try{const{data:{user:e}}=await i.N.auth.getUser();if(!e)throw new Error("User not authenticated");const t=S||_||{},r=N(L).length,n=null===t||void 0===t?void 0:t.subscription_plan,o=!n||"free"===n||"premium"!==n;if(console.log("Bulk service creation limit check:",{currentServiceCount:r,selectedServicesCount:l.length,totalAfterCreation:r+l.length,FREE_SERVICE_LIMIT:5,isFreeTier:o,subscriptionPlan:n}),o&&r+l.length>5)return J("service"),void Y(!0);const c=_||{},m=l.map(s=>{var t,r;const a={listing_type:"service",listing_id:(null===(t=window.crypto)||void 0===t||null===(r=t.randomUUID)||void 0===r?void 0:r.call(t))||Math.random().toString(36),name:s.title,description:s.description,service_types:s.category,price:d[s.id]||s.defaultPrice,provider_name:(null===c||void 0===c?void 0:c.full_name)||e.email,provider_type:(null===c||void 0===c?void 0:c.provider_type)||"vet_nurse",provider_email:e.email,provider_phone:(null===c||void 0===c?void 0:c.phone)||"N/A",active:!0,verified:!1,rating:0,reviews_count:0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};return i.N.from("marketplace_listings").insert(a).select()}),x=(await Promise.all(m)).filter(e=>e.error);if(x.length>0)throw new Error(`Failed to create ${x.length} services`);s(`\u2705 ${l.length} services created! Ready to go live.`,4e3),a(),Ke()}catch(t){e("Failed to create services: "+t.message,"error")}else e("Please select at least one service","error")},disabled:0===l.length,className:"inline-flex items-center px-4 py-2 rounded-lg text-white text-sm font-medium "+(l.length>0?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"),children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add ",l.length," Service",1!==l.length?"s":""]})]})]})]})})},as=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";case"completed":return"bg-[#E5F4F1] text-[#4A9A64]";default:return"bg-gray-100 text-gray-800"}};if(Re)return(0,o.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-600 font-montserrat",children:"Loading vet nurse dashboard..."})]})});const is=async()=>{try{const{data:{user:t}}=await i.N.auth.getUser();if(!t)return void e("User not authenticated","error");const r={};Be.phone&&(r.phone=Be.phone),Be.address&&(r.address=Be.address),Be.description&&(r.description=Be.description),Be.serviceAreas&&(r.service_areas=Be.serviceAreas),Be.maxTravelDistance&&(r.max_travel_distance=Be.maxTravelDistance),Be.profilePicture&&(r.profile_picture=Be.profilePicture);const{data:a,error:l}=await i.N.from("providers").select("id").eq("id",t.id).single();if(l||!a)return void e("Provider record not found. Please complete your provider registration first.","error");const{error:n}=await i.N.from("providers").update(r).eq("id",t.id);if(n){if(!n.message||!n.message.includes("column"))return void e(`Failed to update provider information: ${n.message}`,"error");{const s={};Be.phone&&(s.phone=Be.phone),Be.address&&(s.address=Be.address),Be.description&&(s.description=Be.description);const{error:r}=await i.N.from("providers").update(s).eq("id",t.id);if(r)return void e(`Failed to update provider information: ${r.message}`,"error")}}const o={};if(Be.fullName&&(o.full_name=Be.fullName),Be.phone&&(o.phone=Be.phone),Object.keys(o).length>0){const{error:s}=await i.N.from("profiles").update(o).eq("id",t.id);s&&e(`Warning: Provider updated but profile update failed: ${s.message}`,"warning")}await new Promise(e=>setTimeout(e,500)),qe(!1),await Ke(),s("Profile updated successfully!",4e3)}catch(t){e("Failed to save profile changes","error")}},ls=async s=>{const t=s.target.files[0];if(t)if(t.type.startsWith("image/"))if(t.size>5242880)e("Image must be smaller than 5MB","error");else try{const{data:{user:s}}=await i.N.auth.getUser();if(!s)return void e("User not authenticated","error");const r=t.name.split(".").pop(),a=`${s.id}-profile.${r}`,{data:l,error:n}=await i.N.storage.from("profile-pictures").upload(a,t,{upsert:!0});if(n)return void e("Failed to upload image","error");const{data:{publicUrl:o}}=i.N.storage.from("profile-pictures").getPublicUrl(a);$e(e=>({...e,profilePicture:o})),e("Profile picture uploaded successfully!","success")}catch(r){e("Failed to upload profile picture","error")}else e("Please select an image file","error")},ns=(e=>(0,h.kp)(e))(null===S||void 0===S?void 0:S.provider_type),os=()=>(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,o.jsx)("div",{className:"lg:block hidden",children:(0,o.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["Welcome back, ",(null===_||void 0===_?void 0:_.full_name)||"Vet Nurse"]})}),(0,o.jsxs)("button",{onClick:()=>W(!0),className:"hidden lg:flex px-3 sm:px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors items-center text-sm sm:text-base",children:[(0,o.jsx)("span",{className:"hidden sm:inline",children:"Manage Schedule"}),(0,o.jsx)("span",{className:"sm:hidden",children:"Schedule"})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,o.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-green-600 text-sm font-medium",children:"Total Cases"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-green-900",children:(null===E||void 0===E?void 0:E.length)||0})]}),(0,o.jsx)("div",{className:"w-8 h-8 text-green-600",children:(0,o.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),(0,o.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-blue-600 text-sm font-medium",children:"My Services"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:Ie.totalListings||0})]}),(0,o.jsx)("div",{className:"w-8 h-8 text-blue-600",children:(0,o.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})})]})}),(0,o.jsx)("div",{className:"bg-purple-50 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-purple-600 text-sm font-medium",children:"Service Packages"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:(null===ne||void 0===ne?void 0:ne.length)||0})]}),(0,o.jsx)("div",{className:"w-8 h-8 text-purple-600",children:(0,o.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})]})}),(0,o.jsx)("div",{className:"bg-orange-50 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-orange-600 text-sm font-medium",children:"Total Bookings"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:(null===A||void 0===A?void 0:A.length)||0})]}),(0,o.jsx)("div",{className:"w-8 h-8 text-orange-600",children:(0,o.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,o.jsx)(m.A,{listings:L,packages:ne,products:B,setActiveSection:ye}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Bookings"}),(0,o.jsx)("button",{onClick:()=>ye("schedule"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All \u2192"})]}),A.length>0?(0,o.jsxs)("div",{className:"space-y-3",children:[A.filter(e=>new Date(e.appointment_date)>=new Date).sort((e,s)=>new Date(e.appointment_date)-new Date(s.appointment_date)).slice(0,3).map((e,s)=>{var t,r;return(0,o.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"font-medium text-gray-900",children:e.pet_name}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:(null===(t=e.marketplace_listings)||void 0===t?void 0:t.name)||(null===(r=e.marketplace_listings)||void 0===r?void 0:r.service_types)})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:new Date(e.appointment_date).toLocaleDateString()}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:e.appointment_time||"Time TBD"}),(0,o.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("confirmed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.status||"Pending"})]})]},s)}),A.filter(e=>new Date(e.appointment_date)>=new Date).length>3&&(0,o.jsxs)("p",{className:"text-sm text-gray-500 text-center pt-2",children:["+",A.filter(e=>new Date(e.appointment_date)>=new Date).length-3," more bookings"]})]}):(0,o.jsxs)("div",{className:"text-center py-4",children:[(0,o.jsx)("p",{className:"text-gray-500 mb-2",children:"No upcoming bookings"}),(0,o.jsx)("p",{className:"text-sm text-gray-400",children:"Customer bookings will appear here"})]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,o.jsx)(x.A,{triageCases:E,setActiveSection:ye}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("button",{onClick:()=>ye("marketplace"),className:"w-full flex items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors text-left",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center mr-3",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:"Manage Marketplace"}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:"Services & packages"})]})]}),("vet_nurse"===(null===S||void 0===S?void 0:S.provider_type)||!(null!==S&&void 0!==S&&S.provider_type))&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:()=>ye("cases"),className:"w-full flex items-center p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors text-left",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center mr-3",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:"Cases"}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:"All cases with triage assessment"})]})]}),E.filter(e=>"pending"===e.status).length>0&&(0,o.jsxs)("button",{onClick:()=>{ye("cases")},className:"w-full flex items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors text-left",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center mr-3",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:"Pending Assessment"}),(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:[E.filter(e=>"pending"===e.status).length," cases need triage"]})]})]})]}),(0,o.jsxs)("button",{onClick:()=>ye("schedule"),className:"w-full flex items-center p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors text-left",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center mr-3",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:"View Bookings"}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:"Manage appointments"})]})]}),(0,o.jsxs)("button",{onClick:()=>ye("messages"),className:"w-full flex items-center p-3 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors text-left",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-orange-500 rounded-md flex items-center justify-center mr-3",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:"Open Messages"}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:"View client messages"})]})]})]})]})]}),"veterinarian"===(null===S||void 0===S?void 0:S.provider_type)&&(0,o.jsxs)(r.Fragment,{children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\ud83c\udfe5 Clinic Overview"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-sm text-gray-600",children:"Today's Appointments"}),(0,o.jsx)("span",{className:"font-medium text-gray-900",children:A.filter(e=>new Date(e.created_at).toDateString()===(new Date).toDateString()).length})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-sm text-gray-600",children:"Surgeries Scheduled"}),(0,o.jsx)("span",{className:"font-medium text-gray-900",children:"0"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-sm text-gray-600",children:"Emergency Cases"}),(0,o.jsx)("span",{className:"font-medium text-gray-900",children:"0"})]})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\u2695\ufe0f Recent Procedures"}),(0,o.jsxs)("div",{className:"text-center py-4",children:[(0,o.jsx)("p",{className:"text-gray-500 mb-2",children:"No recent procedures"}),(0,o.jsx)("p",{className:"text-sm text-gray-400",children:"Completed surgeries and treatments will appear here"})]})]})]})]}),ds=()=>(0,o.jsx)("div",{className:"space-y-6",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,o.jsx)("div",{className:"flex justify-between items-center",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"My Services"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage your service offerings and create service packages"})]})})}),(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Services"}),(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[N(L).length,(!(null!==S&&void 0!==S&&S.subscription_plan)||"free"===(null===S||void 0===S?void 0:S.subscription_plan))&&"/5"]}),N(L).length>0&&(0,o.jsxs)("button",{onClick:()=>{window.open("/marketplace","_blank")},className:"inline-flex items-center text-gray-500 hover:text-green-600 text-xs font-medium",title:"View Service Listings",children:[(0,o.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Listing"]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(!(null!==S&&void 0!==S&&S.subscription_plan)||"free"===(null===S||void 0===S?void 0:S.subscription_plan))&&N(L).length>=5&&(0,o.jsxs)("span",{className:"text-xs text-green-600 font-medium",children:["At limit - $",1.99,"/month each"]}),(0,o.jsxs)("button",{onClick:Ze,className:"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Service"]})]})]}),N(L).length>0?(0,o.jsx)("div",{className:"space-y-6",children:N(L).map(e=>(0,o.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,o.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name||e.title}),"product"===(e.service_types||e.service_type)&&(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Product"})]}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),e.brand&&(0,o.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Brand: ",e.brand]})]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("button",{onClick:()=>be(ve===`service-${e.listing_id||e.id}`?null:`service-${e.listing_id||e.id}`),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"More options",children:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})}),ve===`service-${e.listing_id||e.id}`&&(0,o.jsx)("div",{className:"absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsxs)("button",{onClick:()=>{if("product"===(e.service_types||e.service_type)){const s={id:e.listing_id||e.id,name:e.name,description:e.description,price:e.price,category:e.category,brand:e.brand,stock_quantity:e.stock_quantity,stockQuantity:e.stock_quantity,photos:e.image_url?[{id:1,url:e.image_url,name:"Product Image"}]:[],specifications:""};ge(s),xe(!0)}else ee(e),U(!0);be(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),(0,o.jsxs)("button",{onClick:()=>{if("product"===(e.service_types||e.service_type)){const s=(e.listing_id||e.id).replace("product_","");Je(s,e.name||e.title)}else(async(e,r)=>{if(window.confirm(`Are you sure you want to delete "${r}"? This action cannot be undone.`))try{const{data:{user:t}}=await i.N.auth.getUser();if(!t)throw new Error("User not authenticated");console.log("Attempting to delete service with ID:",e);const{data:r,error:l}=await i.N.from("marketplace_listings").select("listing_id, name, provider_email").eq("listing_id",e).eq("provider_email",t.email);if(l)throw l;if(!r||0===r.length)throw console.log("Service not found, refreshing data..."),Ke(),new Error("Service not found. The listing may have been already deleted or the page data is outdated. Please refresh and try again.");const{data:n,error:o}=await i.N.from("marketplace_listings").delete().eq("listing_id",e).eq("provider_email",t.email).select();if(o)throw o;if(!n||0===n.length)throw new Error(`Service not found or you don't have permission to delete it (ID: ${e})`);const d=L.filter(s=>s.listing_id!==e);M(d),We(e=>({...e,totalListings:d.length})),s("Service deleted successfully!",4e3);try{const{data:e}=await i.N.from("consultation_bookings").select("\n            *,\n            marketplace_listings (\n              name,\n              service_types\n            )\n          ").in("listing_id",d.map(e=>e.listing_id)).order("created_at",{ascending:!1}).limit(20);D(e||[])}catch(a){console.warn("Failed to refresh bookings after service deletion:",a)}}catch(l){console.error("Delete service error:",l),t(`Failed to delete service: ${l.message}`),(l.message.includes("not found")||l.message.includes("outdated"))&&setTimeout(()=>{Ke()},2e3)}})(e.listing_id||e.id,e.name||e.title);be(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})})]})]}),"product"===(e.service_types||e.service_type)&&e.photos&&e.photos.length>0&&(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("img",{src:e.photos[0].url,alt:e.name||e.title,className:"w-full h-24 object-cover rounded-lg"}),e.photos.length>1&&(0,o.jsxs)("div",{className:"absolute top-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-full",children:["+",e.photos.length-1," more"]})]})}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"product"===(e.service_types||e.service_type)?e.category:e.service_types||e.service_type}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["$",e.price||e.price_from]}),(0,o.jsxs)("p",{className:"text-xs text-gray-500",children:["You earn: $",j(e.price||e.price_from,"product"===(e.service_types||e.service_type))]}),"product"===(e.service_types||e.service_type)&&(0,o.jsx)("p",{className:"text-xs "+((e.stockQuantity||0)>0?"text-green-600":"text-red-600"),children:(e.stockQuantity||0)>0?`${e.stockQuantity||0} in stock`:"Out of stock"})]})]})]},e.listing_id||e.id))}):(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,o.jsx)("span",{className:"text-2xl",children:"\ud83c\udfe5"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No services yet"}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:"Create your first service to start accepting bookings."})]})]}),(0,o.jsxs)("div",{className:"border-t border-gray-200 pt-8",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Packages"}),(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[ne.length,(!(null!==S&&void 0!==S&&S.subscription_plan)||"free"===(null===S||void 0===S?void 0:S.subscription_plan))&&"/3"]})]}),(null===S||void 0===S||!S.subscription_plan||"free"===(null===S||void 0===S?void 0:S.subscription_plan))&&ne.length>=3?(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsxs)("span",{className:"text-xs text-green-600 font-medium",children:["At limit - $",2.49,"/month each"]}),(0,o.jsxs)("button",{onClick:es,className:"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Package"]})]}):(0,o.jsxs)("button",{onClick:es,className:"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Package"]})]}),ne.length>0?(0,o.jsx)("div",{className:"space-y-6",children:ne.map(e=>{var r,a,l,n;return(0,o.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_active?"Active":"Inactive"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("button",{onClick:()=>be(ve===`package-${e.id}`?null:`package-${e.id}`),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"More options",children:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})}),ve===`package-${e.id}`&&(0,o.jsx)("div",{className:"absolute right-0 mt-2 w-36 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsxs)("button",{onClick:()=>{pe(e),ce(!0),be(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),(0,o.jsxs)("button",{onClick:async()=>{try{const{data:{user:s}}=await i.N.auth.getUser();if(!s)return;const{error:t}=await i.N.from("packages").update({is_active:!e.is_active}).eq("id",e.id).eq("provider_id",s.id);if(t)throw t;const r=ne.map(s=>s.id===e.id?{...s,is_active:!s.is_active}:s);oe(r),be(null)}catch(s){console.error("Error updating package status:",s)}},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:e.is_active?"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21":"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}),e.is_active?"Deactivate":"Activate"]}),(0,o.jsxs)("button",{onClick:()=>{(async(e,r)=>{if(window.confirm(`Are you sure you want to delete "${r}" package? This action cannot be undone.`))try{const{data:{user:t}}=await i.N.auth.getUser();if(!t)throw new Error("User not authenticated");const{error:r}=await i.N.from("packages").delete().eq("id",e).eq("provider_id",t.id);if(r)throw r;const a=ne.filter(s=>s.id!==e);oe(a),s("Package deleted successfully!",4e3)}catch(a){t(`Failed to delete package: ${a.message}`)}})(e.id,e.name),be(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})})]})]})]}),(0,o.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-gray-600",children:"Services included:"}),(0,o.jsx)("span",{className:"font-medium",children:(null===(r=e.service_ids)||void 0===r?void 0:r.length)||0})]}),(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-gray-600",children:"Original price:"}),(0,o.jsxs)("span",{className:"line-through text-gray-500",children:["$",null===(a=e.original_price)||void 0===a?void 0:a.toFixed(2)]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"font-medium",children:"Package price:"}),(0,o.jsxs)("span",{className:"font-bold text-green-600",children:["$",null===(l=e.package_price)||void 0===l?void 0:l.toFixed(2)]})]}),(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-green-600",children:"Customer saves:"}),(0,o.jsxs)("span",{className:"font-medium text-green-600",children:["$",null===(n=e.savings)||void 0===n?void 0:n.toFixed(2)]})]})]})]},e.id)})}):(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udce6"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No packages created yet"}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:"Create service packages to offer customers better deals and increase your booking value."})]})]}),(0,o.jsxs)("div",{className:"border-t border-gray-200 pt-8",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Products"}),(0,o.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[B.length,(!(null!==S&&void 0!==S&&S.subscription_plan)||"free"===(null===S||void 0===S?void 0:S.subscription_plan))&&"/5"]})]}),(null===S||void 0===S||!S.subscription_plan||"free"===(null===S||void 0===S?void 0:S.subscription_plan))&&B.length>=5?(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsxs)("span",{className:"text-xs text-green-600 font-medium",children:["At limit - $",p,"/month each"]}),(0,o.jsxs)("button",{onClick:()=>{J("product"),Y(!0)},className:"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add More Products"]})]}):(0,o.jsxs)("button",{onClick:()=>xe(!0),className:"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Product"]})]}),B.length>0?(0,o.jsx)("div",{className:"space-y-6",children:B.map(e=>(0,o.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:e.name}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.brand}),(0,o.jsx)("p",{className:"text-xs text-gray-500 line-clamp-2",children:e.description})]}),(0,o.jsxs)("div",{className:"relative ml-2",children:[(0,o.jsx)("button",{onClick:()=>be(ve===`product-${e.id}`?null:`product-${e.id}`),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded transition-colors",children:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})}),ve===`product-${e.id}`&&(0,o.jsxs)("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:[(0,o.jsx)("button",{onClick:()=>{ge(e),xe(!0),be(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg",children:"Edit Product"}),(0,o.jsx)("button",{onClick:()=>{Je(e.id,e.name),be(null)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-b-lg",children:"Delete Product"})]})]})]}),e.photos&&e.photos.length>0&&(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("img",{src:e.photos[0].url,alt:e.name,className:"w-full h-32 object-cover rounded-lg"})}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["$",e.price]}),(0,o.jsxs)("p",{className:"text-xs text-gray-500",children:["Stock: ",e.stockQuantity]})]}),(0,o.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:e.category})]})]},e.id))}):(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udecd\ufe0f"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products created yet"}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:"Add veterinary products and supplies to sell to pet parents."})]})]})]})]})}),cs=async(e,r)=>{if(window.confirm(`Are you sure you want to delete patient "${r}"? This action cannot be undone.`))try{const{error:t}=await i.N.from("patients").delete().eq("id",e);if(t)throw t;Ne(s=>s.filter(s=>s.id!==e)),s("Patient deleted successfully!",4e3)}catch(a){t(`Failed to delete patient: ${a.message}`)}},ms=async(e,r)=>{if(window.confirm(`Are you sure you want to delete procedure "${r}"? This action cannot be undone.`))try{const{error:t}=await i.N.from("procedures").delete().eq("id",e);if(t)throw t;ke(s=>s.filter(s=>s.id!==e)),s("Procedure deleted successfully!",4e3)}catch(a){t(`Failed to delete procedure: ${a.message}`)}};return(0,o.jsx)(u.A,{message:"There was an error loading your dashboard. Please try refreshing the page.",children:(0,o.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,o.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,o.jsx)("div",{className:"lg:hidden bg-white border-b border-gray-200 px-4 py-3",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsx)("div",{children:(0,o.jsxs)("h4",{className:"text-md font-medium text-gray-900",children:["Welcome back, ",(null===_||void 0===_?void 0:_.full_name)||"Vet Nurse"]})}),(0,o.jsx)("button",{onClick:()=>W(!0),className:"px-3 py-1.5 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm",children:"Schedule"})]})}),(0,o.jsx)("div",{className:"lg:hidden bg-white border-b border-gray-200 px-2 py-2",children:(0,o.jsx)("div",{className:"flex overflow-x-auto space-x-1 pb-2",children:ns.map(e=>(0,o.jsxs)("button",{onClick:()=>ye(e.id),className:"flex-shrink-0 flex items-center px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap "+(fe===e.id?"bg-green-100 text-green-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,o.jsx)("span",{className:"mr-1.5",children:e.icon}),e.name]},e.id))})}),(0,o.jsx)("div",{className:"hidden lg:block w-64 bg-white shadow-sm border-r border-gray-200 min-h-screen",children:(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsx)("div",{className:"mb-6",children:(0,o.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,o.jsx)("img",{src:"https://wagrmmbkukwblfpfxxcb.supabase.co/storage/v1/object/public/web-img/vet-nurse%20(1).svg",alt:"Vet Nurse",className:"w-10 h-10"}),(0,o.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,o.jsx)("h1",{className:"text-lg font-semibold text-gray-900 truncate",children:"Vet Nurse"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 truncate",children:null===_||void 0===_?void 0:_.full_name})]})]})}),(0,o.jsx)("nav",{className:"space-y-2",children:ns.map(e=>(0,o.jsxs)("button",{onClick:()=>ye(e.id),className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors "+(fe===e.id?"bg-green-100 text-green-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,o.jsx)("span",{className:"mr-3",children:e.icon}),e.name]},e.id))})]})}),(0,o.jsx)("div",{className:"flex-1 p-3 sm:p-4 lg:p-6",children:(()=>{switch(fe){case"overview":default:return os();case"marketplace":return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,o.jsx)("div",{className:"flex items-center justify-between",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Marketplace"}),(0,o.jsx)("p",{className:"text-gray-600 text-sm",children:null!==S&&void 0!==S&&S.verified?"Your profile is live and accepting bookings":L.length>0?"Ready to publish your services to the marketplace":"Create services to get started on the marketplace"})]})})}),ds()]});case"services":case"packages":return ds();case"cases":return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return(0,o.jsx)(v,{nurseId:null===w||void 0===w?void 0:w.id,initialFilter:e})}();case"patients":return(0,o.jsx)("div",{className:"space-y-6",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Patient Management"}),(0,o.jsxs)("button",{onClick:()=>Ce(!0),className:"inline-flex items-center bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Patient"]})]})}),(0,o.jsx)("div",{className:"p-6",children:je.length>0?(0,o.jsx)("div",{className:"space-y-6",children:je.map(e=>(0,o.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:e.name}),(0,o.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[e.breed," \u2022 ",e.species]}),(0,o.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:[e.age," years \u2022 ",e.weight," kg"]}),(0,o.jsxs)("p",{className:"text-xs text-gray-500",children:["Owner: ",e.owner_name]})]}),(0,o.jsxs)("div",{className:"relative ml-2",children:[(0,o.jsx)("button",{onClick:()=>be(ve===`patient-${e.id}`?null:`patient-${e.id}`),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded transition-colors",children:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})}),ve===`patient-${e.id}`&&(0,o.jsxs)("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:[(0,o.jsx)("button",{onClick:()=>{Me(e),Ce(!0),be(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg",children:"Edit Patient"}),(0,o.jsx)("button",{onClick:()=>{cs(e.id,e.name),be(null)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-b-lg",children:"Delete Patient"})]})]})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-gray-600",children:"Phone:"}),(0,o.jsx)("span",{className:"font-medium",children:e.owner_phone})]}),(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,o.jsx)("span",{className:"font-medium",children:e.owner_email})]}),e.medical_history&&(0,o.jsxs)("div",{className:"mt-3 p-2 bg-gray-50 rounded text-xs text-gray-600",children:[(0,o.jsx)("strong",{children:"Medical History:"})," ",e.medical_history]})]})]},e.id))}):(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udc15"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No patients added yet"}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:"Start managing your patients by adding their information and medical records."}),(0,o.jsxs)("button",{onClick:()=>Ce(!0),className:"inline-flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Your First Patient"]})]})})]})});case"procedures":return(0,o.jsx)("div",{className:"space-y-6",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Procedure Management"}),(0,o.jsxs)("button",{onClick:()=>Pe(!0),className:"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Schedule Procedure"]})]})}),(0,o.jsx)("div",{className:"p-6",children:we.length>0?(0,o.jsx)("div",{className:"space-y-6",children:we.map(e=>(0,o.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:e.procedure_type}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:new Date(e.scheduled_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,o.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["Duration: ",e.estimated_duration," minutes"]}),(0,o.jsxs)("p",{className:"text-xs text-gray-500",children:["Status: ",e.status]})]}),(0,o.jsxs)("div",{className:"relative ml-2",children:[(0,o.jsx)("button",{onClick:()=>be(ve===`procedure-${e.id}`?null:`procedure-${e.id}`),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded transition-colors",children:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})}),ve===`procedure-${e.id}`&&(0,o.jsxs)("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:[(0,o.jsx)("button",{onClick:()=>{De(e),Pe(!0),be(null)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-t-lg",children:"Edit Procedure"}),(0,o.jsx)("button",{onClick:()=>{ms(e.id,e.procedure_type),be(null)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-b-lg",children:"Delete Procedure"})]})]})]}),e.notes&&(0,o.jsxs)("div",{className:"mt-3 p-2 bg-gray-50 rounded text-xs text-gray-600",children:[(0,o.jsx)("strong",{children:"Notes:"})," ",e.notes]}),(0,o.jsx)("div",{className:"mt-3 flex items-center justify-between",children:(0,o.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("scheduled"===e.status?"bg-blue-100 text-blue-800":"completed"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]},e.id))}):(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,o.jsx)("span",{className:"text-2xl",children:"\ud83c\udfe5"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No procedures scheduled yet"}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:"Schedule medical procedures, surgeries, and diagnostic tests for your patients."}),(0,o.jsxs)("button",{onClick:()=>Pe(!0),className:"inline-flex items-center bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Schedule Your First Procedure"]})]})})]})});case"schedule":return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Bookings & Availability"}),(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Available Today"}),(0,o.jsxs)("button",{className:"inline-flex items-center bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Block Time"]})]})]})}),(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:["Today - ",(new Date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("div",{className:"text-gray-400 text-4xl mb-4",children:"\ud83d\udcc5"}),(0,o.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No appointments today"}),(0,o.jsx)("p",{className:"text-gray-600 text-sm",children:"Today's appointments will appear here once they're scheduled"})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,o.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,o.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Available for bookings"}),(0,o.jsx)("p",{className:"text-xs text-gray-600",children:"Open time slot"})]})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"4:00 PM - 5:00 PM"}),(0,o.jsx)("p",{className:"text-xs text-green-600",children:"Available"})]})]})]})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,o.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"This Week"})}),(0,o.jsx)("div",{className:"p-6",children:(0,o.jsx)("div",{className:"grid grid-cols-7 gap-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((e,s)=>(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-xs font-medium text-gray-500 mb-2",children:e}),(0,o.jsx)("div",{className:"w-full h-16 rounded-lg border-2 border-dashed flex items-center justify-center text-xs "+(2===s?"border-blue-300 bg-blue-50 text-blue-600":4===s?"border-yellow-300 bg-yellow-50 text-yellow-600":"border-gray-300 bg-gray-50 text-gray-500"),children:2===s?"3 appts":4===s?"2 appts":"Available"})]},e))})})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,o.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Quick Actions"})}),(0,o.jsx)("div",{className:"p-6",children:(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("button",{className:"flex items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors text-left",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center mr-3",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:"Set Availability"}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:"Update your working hours"})]})]}),(0,o.jsxs)("button",{className:"flex items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors text-left",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center mr-3",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:"Block Time"}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:"Reserve time slots"})]})]}),(0,o.jsxs)("button",{className:"flex items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors text-left",children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center mr-3",children:(0,o.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-medium text-gray-900",children:"View All Bookings"}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:"See upcoming appointments"})]})]})]})})]})]});case"messages":return(0,o.jsx)("div",{className:"space-y-6",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Messages"}),(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"1 unread"})]})}),(0,o.jsx)("div",{className:"p-6",children:(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\ud83d\udcac"}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No messages yet"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Patient messages and communications will appear here"})]})})]})});case"analytics":return(()=>{const e=(()=>{const e=A.filter(e=>"completed"===e.status).reduce((e,s)=>{const t=L.find(e=>e.id===s.listing_id);if(t){const s=parseFloat(t.price_from||t.price||0);return e+parseFloat(j(s,"product"===t.service_type))}return e},0),s=25*B.length,t=ne.filter(e=>e.is_active).reduce((e,s)=>e+2*s.package_price,0);return{total:e+s+t,services:e,products:s,packages:t}})(),s=A.filter(e=>{const s=new Date(e.created_at),t=new Date;return s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear()});return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Financial Analytics"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Track your earnings from services, products, and packages. All figures show net earnings after platform fees."})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,o.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-green-600 text-sm font-medium",children:"Total Earnings"}),(0,o.jsxs)("p",{className:"text-2xl font-bold text-green-900",children:["$",e.total.toFixed(2)]})]}),(0,o.jsx)("div",{className:"w-8 h-8 text-green-600",children:(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb5"})})]})}),(0,o.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-blue-600 text-sm font-medium",children:"Service Revenue"}),(0,o.jsxs)("p",{className:"text-2xl font-bold text-blue-900",children:["$",e.services.toFixed(2)]})]}),(0,o.jsx)("div",{className:"w-8 h-8 text-blue-600",children:(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udee0\ufe0f"})})]})}),(0,o.jsx)("div",{className:"bg-purple-50 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-purple-600 text-sm font-medium",children:"Product Sales"}),(0,o.jsxs)("p",{className:"text-2xl font-bold text-purple-900",children:["$",e.products.toFixed(2)]})]}),(0,o.jsx)("div",{className:"w-8 h-8 text-purple-600",children:(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udce6"})})]})}),(0,o.jsx)("div",{className:"bg-orange-50 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-orange-600 text-sm font-medium",children:"Package Revenue"}),(0,o.jsxs)("p",{className:"text-2xl font-bold text-orange-900",children:["$",e.packages.toFixed(2)]})]}),(0,o.jsx)("div",{className:"w-8 h-8 text-orange-600",children:(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udccb"})})]})})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,o.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Revenue Breakdown"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded-full mr-3"}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Services"})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:["$",e.services.toFixed(2)]}),(0,o.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2 mt-1",children:(0,o.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:(e.total>0?e.services/e.total*100:0)+"%"}})})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-purple-500 rounded-full mr-3"}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Products"})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:["$",e.products.toFixed(2)]}),(0,o.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2 mt-1",children:(0,o.jsx)("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:(e.total>0?e.products/e.total*100:0)+"%"}})})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"w-4 h-4 bg-orange-500 rounded-full mr-3"}),(0,o.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Packages"})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:["$",e.packages.toFixed(2)]}),(0,o.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2 mt-1",children:(0,o.jsx)("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:(e.total>0?e.packages/e.total*100:0)+"%"}})})]})]})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,o.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Performance Metrics"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-sm text-gray-600",children:"Booking Success Rate"}),(0,o.jsxs)("span",{className:"text-sm font-bold text-green-600",children:[A.length>0?Math.round(A.filter(e=>"completed"===e.status).length/A.length*100):0,"%"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-sm text-gray-600",children:"Average Service Price"}),(0,o.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:["$",L.length>0?(L.reduce((e,s)=>e+parseFloat(s.price_from||0),0)/L.length).toFixed(2):"0.00"]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-sm text-gray-600",children:"This Month Bookings"}),(0,o.jsx)("span",{className:"text-sm font-bold text-blue-600",children:s.length})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-sm text-gray-600",children:"Active Listings"}),(0,o.jsx)("span",{className:"text-sm font-bold text-gray-900",children:L.filter(e=>e.active).length})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-sm text-gray-600",children:"Customer Rating"}),(0,o.jsx)("span",{className:"text-sm font-bold text-yellow-600",children:Ie.averageRating>0?`${Ie.averageRating} \u2b50`:"No ratings yet"})]})]})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,o.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Transactions"}),A.filter(e=>"completed"===e.status).length>0?(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Earnings"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:A.filter(e=>"completed"===e.status).slice(0,5).map(e=>{const s=L.find(s=>s.id===e.listing_id),t=s?parseFloat(s.price_from||s.price||0):0,r=s?j(t,"product"===s.service_type):"0.00";return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.consultation_type||"Service"}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.customer_name||"Customer"}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,o.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:["$",r]})]},e.id)})})]})}):(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("span",{className:"text-4xl mb-4 block",children:"\ud83d\udcb8"}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No completed transactions yet"}),(0,o.jsx)("p",{className:"text-gray-500",children:"Once you complete services, your earnings will appear here."})]})]}),(0,o.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 border border-blue-200 rounded-lg p-6",children:[(0,o.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-3",children:"Tips to Increase Earnings"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)("span",{className:"text-blue-500 mt-1",children:"\ud83d\udcc8"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h5",{className:"font-medium text-gray-900",children:"Create Package Deals"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Bundle services together for higher-value bookings"})]})]}),(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)("span",{className:"text-green-500 mt-1",children:"\u2b50"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h5",{className:"font-medium text-gray-900",children:"Maintain High Ratings"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Better ratings lead to more bookings and higher prices"})]})]}),(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)("span",{className:"text-purple-500 mt-1",children:"\ud83d\udecd\ufe0f"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h5",{className:"font-medium text-gray-900",children:"Add Products"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Sell veterinary products for additional passive income"})]})]}),(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)("span",{className:"text-orange-500 mt-1",children:"\ud83d\udcc5"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h5",{className:"font-medium text-gray-900",children:"Update Availability"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"More availability means more booking opportunities"})]})]})]})]})]})})();case"profile":return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,o.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Profile Information"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage your public profile and contact details"})]}),(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-6 flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("div",{className:"relative",children:(0,o.jsxs)("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-200",children:[Be.profilePicture?(0,o.jsx)("img",{src:Be.profilePicture,alt:"Profile",className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,o.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400 "+(Be.profilePicture?"hidden":"flex"),style:{display:Be.profilePicture?"none":"flex"},children:(0,o.jsx)("span",{className:"text-xl",children:"\ud83d\udc64"})})]})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium text-gray-900",children:Be.fullName||"Your Name"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Profile Picture \u2022 Verified User"})]})]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("button",{onClick:()=>be("profile-pic"===ve?null:"profile-pic"),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full",children:(0,o.jsx)("span",{className:"text-lg",children:"\u22ee"})}),"profile-pic"===ve&&(0,o.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:(0,o.jsxs)("div",{className:"py-1",children:[(0,o.jsxs)("button",{onClick:()=>{document.getElementById("profile-picture-input").click(),be(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,o.jsx)("span",{className:"mr-3",children:"\ud83d\udcf7"}),"Upload Photo"]}),Be.profilePicture&&(0,o.jsxs)("button",{onClick:()=>{$e(e=>({...e,profilePicture:""})),be(null)},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:[(0,o.jsx)("span",{className:"mr-3",children:"\ud83d\uddd1\ufe0f"}),"Remove Photo"]})]})})]}),(0,o.jsx)("input",{id:"profile-picture-input",type:"file",accept:"image/*",onChange:ls,className:"hidden"})]}),(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,o.jsx)("input",{type:"text",value:Be.fullName||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed",placeholder:"Verified name cannot be changed"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Name is locked after verification for security"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,o.jsx)("input",{type:"email",value:(null===_||void 0===_?void 0:_.email)||(null===w||void 0===w?void 0:w.email)||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600",placeholder:"Email address"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,o.jsx)("input",{type:"tel",value:Be.phone,onChange:e=>$e(s=>({...s,phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"+64279293666"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,o.jsx)("input",{type:"text",value:Be.address,onChange:e=>$e(s=>({...s,address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"2 Heller Road"})]})]}),(0,o.jsxs)("div",{className:"mt-6",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"About/Bio"}),(0,o.jsx)("textarea",{value:Be.description,onChange:e=>$e(s=>({...s,description:e.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Tell customers about yourself and your services..."})]}),(0,o.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200 flex justify-between items-center",children:[(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Changes will be reflected across your marketplace listing"})}),(0,o.jsxs)("button",{onClick:is,className:"inline-flex items-center bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Save Changes"]})]})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,o.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Business Information"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Your professional credentials and status"})]}),(0,o.jsx)("div",{className:"p-6",children:(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900",children:Ue.businessType}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Vet Nurse Business Type"})]}),(0,o.jsx)("span",{className:"text-lg",children:"\ud83e\ude7a"})]})}),(0,o.jsx)("div",{className:"p-4 bg-green-50 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Verified"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Status"})]}),(0,o.jsx)("span",{className:"w-3 h-3 bg-green-400 rounded-full"})]})}),(0,o.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[(null===S||void 0===S?void 0:S.years_experience)||Be.yearsOfExperience||"Not specified",((null===S||void 0===S?void 0:S.years_experience)||Be.yearsOfExperience)&&" years"]}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"Experience"}),((null===S||void 0===S?void 0:S.years_experience)||Be.yearsOfExperience)&&(0,o.jsx)("div",{className:"mt-1",children:(()=>{const e=(s=(null===S||void 0===S?void 0:S.years_experience)||Be.yearsOfExperience,null===S||void 0===S||S.provider_type,s&&0!==s?s<=3?{level:"Veterinarian",color:"blue",description:"Qualified veterinarian"}:s<=7?{level:"Experienced Veterinarian",color:"green",description:"Experienced professional"}:s<=12?{level:"Senior Veterinarian",color:"purple",description:"Highly experienced"}:{level:"Expert Veterinarian",color:"gold",description:"Expert level"}:{level:"Vet Professional",color:"blue",description:"Qualified professional"});var s;return(0,o.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${{gray:"bg-gray-100 text-gray-800",blue:"bg-blue-100 text-blue-800",green:"bg-green-100 text-green-800",purple:"bg-purple-100 text-purple-800",gold:"bg-yellow-100 text-yellow-800"}[e.color]}`,children:e.level})})()})]}),(0,o.jsx)("span",{className:"text-lg",children:"\u2b50"})]})})]})})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,o.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Service Areas"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Define where you provide services"})]}),(0,o.jsx)("div",{className:"p-6",children:(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cities/Areas You Serve"}),(0,o.jsx)("input",{type:"text",value:Be.serviceAreas,onChange:e=>$e(s=>({...s,serviceAreas:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Auckland, Hamilton, Tauranga"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple areas with commas"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Travel Distance"}),(0,o.jsxs)("select",{value:Be.maxTravelDistance,onChange:e=>$e(s=>({...s,maxTravelDistance:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[(0,o.jsx)("option",{value:"10",children:"10 km"}),(0,o.jsx)("option",{value:"25",children:"25 km"}),(0,o.jsx)("option",{value:"50",children:"50 km"}),(0,o.jsx)("option",{value:"100",children:"100 km"})]}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum distance you'll travel"})]})]})})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Account Settings"})}),(0,o.jsx)("div",{className:"p-6",children:(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Email Notifications"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Receive booking and message notifications"})]}),(0,o.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,o.jsx)("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),(0,o.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"SMS Notifications"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Receive urgent notifications via SMS"})]}),(0,o.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,o.jsx)("input",{type:"checkbox",className:"sr-only peer"}),(0,o.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Marketing Emails"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Receive tips and platform updates"})]}),(0,o.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,o.jsx)("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),(0,o.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-l-4 border-red-400",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,o.jsx)("h3",{className:"text-lg font-medium text-red-600",children:"Account Management"})}),(0,o.jsx)("div",{className:"p-6",children:(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Temporarily Disable Account"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Hide your profile from customers temporarily"})]}),(0,o.jsxs)("button",{className:"inline-flex items-center bg-yellow-600 text-white px-3 py-2 rounded-lg hover:bg-yellow-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})}),"Disable"]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Delete Account"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Permanently delete your account and all data"})]}),(0,o.jsxs)("button",{className:"inline-flex items-center bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 text-sm font-medium",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})})]})]})}})()})]}),V&&(0,o.jsx)(d,{providerData:S,onClose:()=>O(!1),onSubmissionComplete:Xe}),I&&(0,o.jsx)(c.A,{providerId:null===_||void 0===_?void 0:_.id,onClose:()=>W(!1)}),R&&(0,o.jsx)(rs,{onClose:()=>z(!1)}),de&&(0,o.jsx)(ts,{isEdit:!!he,initialData:he||{},onClose:()=>{ce(!1),pe(null)}}),H&&Z&&(0,o.jsx)(ss,{service:Z,onClose:()=>{U(!1),ee(null)}}),se&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold",children:"Today's Bookings"}),(0,o.jsx)("button",{onClick:()=>te(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,o.jsx)("h3",{className:"font-medium text-blue-900",children:"\ud83d\udcc5 Today's Appointments"}),(0,o.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:(new Date).toLocaleDateString("en-AU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),A.filter(e=>new Date(e.preferred_date).toDateString()===(new Date).toDateString()).length>0?(0,o.jsx)("div",{className:"space-y-3",children:A.filter(e=>new Date(e.preferred_date).toDateString()===(new Date).toDateString()).map(e=>(0,o.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,o.jsxs)("div",{className:"flex justify-between items-start",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium text-gray-900",children:e.preferred_time}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:[e.customer_name," - ",e.pet_name," (",e.pet_species,")"]}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:e.consultation_type})]}),(0,o.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${as(e.status)}`,children:e.status})]})},e.id))}):(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc5"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No appointments today"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Your schedule is clear for today."})]}),(0,o.jsx)("div",{className:"flex justify-end pt-4",children:(0,o.jsx)("button",{onClick:()=>te(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Close"})})]})]})}),re&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold",children:"Messages"}),(0,o.jsx)("button",{onClick:()=>ae(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,o.jsx)("h3",{className:"font-medium text-purple-900",children:"\ud83d\udcac Recent Messages"}),(0,o.jsx)("p",{className:"text-sm text-purple-700 mt-1",children:"Communicate with pet owners about their bookings and consultations."})]}),A.length>0?(0,o.jsx)("div",{className:"space-y-3",children:A.slice(0,5).map(e=>(0,o.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,o.jsxs)("div",{className:"flex justify-between items-start",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium text-gray-900",children:e.customer_name}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["Pet: ",e.pet_name," (",e.pet_species,")"]}),(0,o.jsxs)("p",{className:"text-xs text-gray-500",children:["Booking: ",new Date(e.preferred_date).toLocaleDateString()," at ",e.preferred_time]})]}),(0,o.jsx)("button",{className:"text-[#5EB47C] hover:text-[#4A9A64] text-sm font-medium",children:"Message"})]})},e.id))}):(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,o.jsx)("span",{className:"text-2xl",children:"\ud83d\udcac"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No messages yet"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Messages from pet owners will appear here."})]}),(0,o.jsx)("div",{className:"flex justify-end pt-4",children:(0,o.jsx)("button",{onClick:()=>ae(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Close"})})]})]})}),ie&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold",children:"Analytics Dashboard"}),(0,o.jsx)("button",{onClick:()=>le(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,o.jsx)("h3",{className:"font-medium text-green-900",children:"\ud83d\udcca Performance Overview"}),(0,o.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"Track your service performance and client satisfaction."})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,o.jsxs)("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Total Bookings"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:A.length}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"All time"})]}),(0,o.jsxs)("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Completed Services"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:A.filter(e=>"completed"===e.status).length}),(0,o.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Success rate: ",A.length>0?Math.round(A.filter(e=>"completed"===e.status).length/A.length*100):0,"%"]})]}),(0,o.jsxs)("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Active Services"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:L.filter(e=>e.active).length}),(0,o.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Out of ",L.length," total"]})]}),(0,o.jsxs)("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:[(0,o.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Avg. Rating"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Ie.averageRating>0?`${Ie.averageRating} \u2b50`:"N/A"}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Based on reviews"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-3",children:"Recent Activity"}),A.length>0?(0,o.jsx)("div",{className:"space-y-2",children:A.slice(0,5).map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"font-medium",children:e.customer_name}),(0,o.jsxs)("span",{className:"text-gray-500 text-sm ml-2",children:["booked ",e.consultation_type]})]}),(0,o.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]},e.id))}):(0,o.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"})]}),(0,o.jsx)("div",{className:"flex justify-end pt-4",children:(0,o.jsx)("button",{onClick:()=>le(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Close"})})]})]})}),me&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold",children:ue?"Edit Product":"Add Product"}),(0,o.jsx)("button",{onClick:()=>{xe(!1),ge(null),Oe({name:"",description:"",price:"",category:"Accessories",brand:"",stockQuantity:"",photos:[],specifications:""})},className:"text-gray-400 hover:text-gray-600",children:(0,o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Ge()},className:"space-y-4",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),(0,o.jsx)("input",{type:"text",value:Ve.name,onChange:e=>Oe({...Ve,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Premium Dog Food",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),(0,o.jsx)("input",{type:"text",value:Ve.brand,onChange:e=>Oe({...Ve,brand:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Royal Canin"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,o.jsx)("textarea",{value:Ve.description,onChange:e=>Oe({...Ve,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Describe the product, its benefits, and usage instructions..."})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($) *"}),(0,o.jsx)("input",{type:"number",step:"0.01",min:"0",value:Ve.price,onChange:e=>Oe({...Ve,price:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,o.jsxs)("select",{value:Ve.category,onChange:e=>Oe({...Ve,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,o.jsx)("option",{value:"Accessories",children:"Accessories"}),(0,o.jsx)("option",{value:"Supplements",children:"Supplements"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Quantity *"}),(0,o.jsx)("input",{type:"number",min:"0",value:Ve.stockQuantity,onChange:e=>Oe({...Ve,stockQuantity:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",required:!0})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Photos (up to 4)"}),(0,o.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",children:[(0,o.jsx)("input",{type:"file",id:"photo-upload",multiple:!0,accept:"image/*",onChange:e=>{const s=Array.from(e.target.files);Ve.photos.length+s.length>4?alert("You can only upload up to 4 photos"):s.forEach(e=>{if(e.type.startsWith("image/")){if(e.size>10485760)return void alert(`File ${e.name} is too large. Please use images under 10MB.`);const s=new FileReader;s.onload=s=>{const t=new Image;t.onload=()=>{const s=document.createElement("canvas"),r=s.getContext("2d");let{width:a,height:i}=t;const l=800;a>i?a>l&&(i=i*l/a,a=l):i>l&&(a=a*l/i,i=l),s.width=a,s.height=i,r.drawImage(t,0,0,a,i);const n=s.toDataURL("image/jpeg",.8),o={id:Date.now()+Math.random(),file:e,url:n,name:e.name};Oe(e=>({...e,photos:[...e.photos,o]}))},t.src=s.target.result},s.readAsDataURL(e)}else alert("Please select only image files")})},className:"hidden",disabled:Ve.photos.length>=4}),(0,o.jsx)("label",{htmlFor:"photo-upload",className:"cursor-pointer "+(Ve.photos.length>=4?"cursor-not-allowed opacity-50":""),children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("svg",{className:"mx-auto h-8 w-8 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,o.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,o.jsx)("span",{className:"font-medium text-blue-600 hover:text-blue-500",children:"Click to upload photos"}),(0,o.jsx)("span",{children:" or drag and drop"})]}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB each"}),(0,o.jsxs)("p",{className:"text-xs text-gray-500",children:[Ve.photos.length,"/4 photos uploaded"]})]})})]}),Ve.photos.length>0&&(0,o.jsx)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-3",children:Ve.photos.map((e,s)=>(0,o.jsxs)("div",{className:"relative group",children:[(0,o.jsx)("img",{src:e.url,alt:`Product view ${s+1}`,className:"w-full h-20 object-cover rounded-lg border border-gray-200"}),(0,o.jsx)("button",{type:"button",onClick:()=>{return s=e.id,void Oe(e=>({...e,photos:e.photos.filter(e=>e.id!==s)}));var s},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"\xd7"}),0===s&&(0,o.jsx)("div",{className:"absolute bottom-1 left-1 bg-blue-500 text-white text-xs px-1 py-0.5 rounded",children:"Main"})]},e.id))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specifications"}),(0,o.jsx)("textarea",{value:Ve.specifications,onChange:e=>Oe({...Ve,specifications:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Size, weight, ingredients, dosage instructions, etc..."})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,o.jsx)("button",{type:"button",onClick:()=>{xe(!1),ge(null),Oe({name:"",description:"",price:"",category:"Accessories",brand:"",stockQuantity:"",photos:[],specifications:""})},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,o.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:ue?"Update Product":"Add Product"})]})]})]})}),Q&&G&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full",children:[(0,o.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["Add More ","service"===G?"Services":"product"===G?"Products":"Packages"]}),(0,o.jsx)("button",{onClick:()=>Y(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]})}),(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"text-center mb-6",children:[(0,o.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Expand Your ","service"===G?"Services":"product"===G?"Products":"Packages"]}),(0,o.jsxs)("p",{className:"text-gray-600 text-sm",children:["You have ","service"===G?`${N(L).length}/5 services`:"product"===G?`${B.length}/5 products`:`${ne.length}/3 packages`,". Add more to grow your business!"]})]}),(0,o.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,o.jsxs)("div",{className:"bg-gray-100 p-1 rounded-lg flex",children:[(0,o.jsx)("button",{onClick:()=>X("monthly"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("monthly"===K?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Monthly"}),(0,o.jsxs)("button",{onClick:()=>X("yearly"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("yearly"===K?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:["Yearly",(0,o.jsx)("span",{className:"ml-1 text-xs text-green-600 font-semibold",children:"SAVE 17%"})]})]})}),(0,o.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,o.jsx)("button",{onClick:()=>{s(`Payment integration coming soon! Contact support to add ${K} billing for 1 ${G} listing.`,5e3),Y(!1)},className:"w-full border border-gray-200 rounded-lg p-4 hover:border-green-300 hover:bg-gray-50 transition-colors text-left",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("div",{children:(0,o.jsxs)("p",{className:"font-medium text-gray-900",children:["1 ","service"===G?"Service":"product"===G?"Product":"Package"]})}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["$",b(G)]}),(0,o.jsxs)("p",{className:"text-xs text-gray-500",children:["$","yearly"===K?(b(G)/12).toFixed(2)+"/month":b(G)+"/month","yearly"===K&&(0,o.jsx)("span",{className:"text-green-600 ml-1",children:"(billed yearly)"})]})]})]})}),(0,o.jsxs)("button",{onClick:()=>{s(`Payment integration coming soon! Contact support to add ${K} billing for 3 ${G} listings.`,5e3),Y(!1)},className:"w-full border-2 border-green-200 rounded-lg p-4 bg-green-50 hover:bg-green-100 transition-colors text-left relative",children:[(0,o.jsx)("div",{className:"absolute -top-2 left-4",children:(0,o.jsx)("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-xs font-medium",children:"POPULAR"})}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"font-medium text-gray-900",children:["3 ","service"===G?"Services":"product"===G?"Products":"Packages"]}),(0,o.jsx)("p",{className:"text-sm text-green-700",children:"Save money"})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("p",{className:"text-xl font-bold text-green-600",children:["$",f(G)]}),(0,o.jsxs)("p",{className:"text-xs text-green-600",children:["$","yearly"===K?(f(G)/12/3).toFixed(2)+"/month each":(f(G)/3).toFixed(2)+"/month each","yearly"===K&&(0,o.jsx)("span",{className:"ml-1",children:"(billed yearly)"})]})]})]})]}),(0,o.jsxs)("button",{onClick:()=>{s(`Payment integration coming soon! Contact support to add ${K} billing for 5 ${G} listings.`,5e3),Y(!1)},className:"w-full border-2 border-blue-200 rounded-lg p-4 bg-blue-50 hover:bg-blue-100 transition-colors text-left relative",children:[(0,o.jsx)("div",{className:"absolute -top-2 left-4",children:(0,o.jsx)("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-xs font-medium",children:"BEST VALUE"})}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"font-medium text-gray-900",children:["5 ","service"===G?"Services":"product"===G?"Products":"Packages"]}),(0,o.jsx)("p",{className:"text-sm text-blue-700",children:"Best value"})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:["$",y(G)]}),(0,o.jsxs)("p",{className:"text-xs text-blue-600",children:["$","yearly"===K?(y(G)/12/5).toFixed(2)+"/month each":(y(G)/5).toFixed(2)+"/month each","yearly"===K&&(0,o.jsx)("span",{className:"ml-1",children:"(billed yearly)"})]})]})]})]})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"What you get:"}),(0,o.jsxs)("ul",{className:"space-y-2 text-sm text-gray-600",children:[(0,o.jsxs)("li",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Active ","service"===G?"service listing":"product"===G?"product listing":"service package listing","yearly"===K?"s":""," while subscribed"]}),(0,o.jsxs)("li",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Full marketplace visibility"]}),(0,o.jsxs)("li",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Same commission rates (","service"===G?18:10,"%)"]}),(0,o.jsxs)("li",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"yearly"===K?"Save 17% with yearly billing":"Flexible monthly billing"]}),(0,o.jsxs)("li",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Cancel anytime"]})]})]}),(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)("button",{onClick:()=>Y(!1),className:"text-gray-500 hover:text-gray-700 transition-colors text-sm underline",children:"Maybe Later"})}),(0,o.jsxs)("p",{className:"text-xs text-gray-500 text-center mt-4",children:["Secure payment processing \u2022 ","yearly"===K?"Yearly billing (save 17%)":"Monthly billing"," \u2022 Cancel anytime"]})]})]})}),_e&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:Le?"Edit Patient":"Add New Patient"}),(0,o.jsx)("button",{onClick:()=>Ce(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]})}),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault();const r=new FormData(e.target);(async e=>{try{const{data:{user:t}}=await i.N.auth.getUser();if(!t)throw new Error("User not authenticated");const r={provider_id:t.id,name:e.name,species:e.species,breed:e.breed,age:e.age,weight:e.weight,owner_name:e.ownerName,owner_phone:e.ownerPhone,owner_email:e.ownerEmail,medical_history:e.medicalHistory||"",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{data:a,error:l}=await i.N.from("patients").insert([r]).select();if(l)throw l;Ne(e=>[...e,a[0]]),s("Patient added successfully!",4e3),Ce(!1)}catch(r){t(`Failed to add patient: ${r.message}`)}})({name:r.get("name"),species:r.get("species"),breed:r.get("breed"),age:r.get("age"),weight:r.get("weight"),ownerName:r.get("ownerName"),ownerPhone:r.get("ownerPhone"),ownerEmail:r.get("ownerEmail"),medicalHistory:r.get("medicalHistory")})},className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pet Name *"}),(0,o.jsx)("input",{type:"text",name:"name",required:!0,defaultValue:(null===Le||void 0===Le?void 0:Le.name)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Max"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Species *"}),(0,o.jsxs)("select",{name:"species",required:!0,defaultValue:(null===Le||void 0===Le?void 0:Le.species)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,o.jsx)("option",{value:"",children:"Select species"}),(0,o.jsx)("option",{value:"Dog",children:"Dog"}),(0,o.jsx)("option",{value:"Cat",children:"Cat"}),(0,o.jsx)("option",{value:"Bird",children:"Bird"}),(0,o.jsx)("option",{value:"Rabbit",children:"Rabbit"}),(0,o.jsx)("option",{value:"Horse",children:"Horse"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Breed"}),(0,o.jsx)("input",{type:"text",name:"breed",defaultValue:(null===Le||void 0===Le?void 0:Le.breed)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Golden Retriever"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Age (years)"}),(0,o.jsx)("input",{type:"number",name:"age",min:"0",step:"0.1",defaultValue:(null===Le||void 0===Le?void 0:Le.age)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 3"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight (kg)"}),(0,o.jsx)("input",{type:"number",name:"weight",min:"0",step:"0.1",defaultValue:(null===Le||void 0===Le?void 0:Le.weight)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 25.5"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner Name *"}),(0,o.jsx)("input",{type:"text",name:"ownerName",required:!0,defaultValue:(null===Le||void 0===Le?void 0:Le.owner_name)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., John Smith"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner Phone *"}),(0,o.jsx)("input",{type:"tel",name:"ownerPhone",required:!0,defaultValue:(null===Le||void 0===Le?void 0:Le.owner_phone)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., +1 234 567 8900"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner Email"}),(0,o.jsx)("input",{type:"email",name:"ownerEmail",defaultValue:(null===Le||void 0===Le?void 0:Le.owner_email)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., john@example.com"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical History"}),(0,o.jsx)("textarea",{name:"medicalHistory",rows:"3",defaultValue:(null===Le||void 0===Le?void 0:Le.medical_history)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Any relevant medical history, allergies, or special needs..."})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,o.jsx)("button",{type:"button",onClick:()=>Ce(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,o.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:Le?"Update Patient":"Add Patient"})]})]})]})}),Se&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:Ae?"Edit Procedure":"Schedule New Procedure"}),(0,o.jsx)("button",{onClick:()=>Pe(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]})}),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault();const r=new FormData(e.target);(async e=>{try{const{data:{user:t}}=await i.N.auth.getUser();if(!t)throw new Error("User not authenticated");const r={provider_id:t.id,patient_id:e.patientId,procedure_type:e.procedureType,scheduled_date:e.scheduledDate,estimated_duration:e.estimatedDuration,notes:e.notes||"",status:"scheduled",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{data:a,error:l}=await i.N.from("procedures").insert([r]).select();if(l)throw l;ke(e=>[...e,a[0]]),s("Procedure scheduled successfully!",4e3),Pe(!1)}catch(r){t(`Failed to schedule procedure: ${r.message}`)}})({patientId:r.get("patientId"),procedureType:r.get("procedureType"),scheduledDate:r.get("scheduledDate"),estimatedDuration:r.get("estimatedDuration"),notes:r.get("notes")})},className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient *"}),(0,o.jsxs)("select",{name:"patientId",required:!0,defaultValue:(null===Ae||void 0===Ae?void 0:Ae.patient_id)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,o.jsx)("option",{value:"",children:"Select patient"}),je.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.name," (",e.species,")"]},e.id))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Procedure Type *"}),(0,o.jsxs)("select",{name:"procedureType",required:!0,defaultValue:(null===Ae||void 0===Ae?void 0:Ae.procedure_type)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,o.jsx)("option",{value:"",children:"Select procedure type"}),(0,o.jsx)("option",{value:"Consultation",children:"Consultation"}),(0,o.jsx)("option",{value:"Vaccination",children:"Vaccination"}),(0,o.jsx)("option",{value:"Surgery",children:"Surgery"}),(0,o.jsx)("option",{value:"Dental Cleaning",children:"Dental Cleaning"}),(0,o.jsx)("option",{value:"Blood Test",children:"Blood Test"}),(0,o.jsx)("option",{value:"X-Ray",children:"X-Ray"}),(0,o.jsx)("option",{value:"Ultrasound",children:"Ultrasound"}),(0,o.jsx)("option",{value:"Emergency Care",children:"Emergency Care"}),(0,o.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scheduled Date *"}),(0,o.jsx)("input",{type:"datetime-local",name:"scheduledDate",required:!0,defaultValue:null!==Ae&&void 0!==Ae&&Ae.scheduled_date?Ae.scheduled_date.slice(0,16):"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Duration (minutes)"}),(0,o.jsx)("input",{type:"number",name:"estimatedDuration",min:"15",step:"15",defaultValue:(null===Ae||void 0===Ae?void 0:Ae.estimated_duration)||"60",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 60"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,o.jsx)("textarea",{name:"notes",rows:"3",defaultValue:(null===Ae||void 0===Ae?void 0:Ae.notes)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Any special instructions, preparation requirements, or additional notes..."})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,o.jsx)("button",{type:"button",onClick:()=>Pe(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,o.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:Ae?"Update Procedure":"Schedule Procedure"})]})]})]})})]})})}}}]);
//# sourceMappingURL=782.05250882.chunk.js.map