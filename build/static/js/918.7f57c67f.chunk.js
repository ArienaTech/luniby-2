"use strict";(self.webpackChunkresponsive_navbar_website=self.webpackChunkresponsive_navbar_website||[]).push([[918],{8918:(e,r,i)=>{i.r(r),i.d(r,{default:()=>t});var a=i(5043),n=(i(5475),i(1740)),o=i(579);const t=()=>{const[e,r]=(0,a.useState)({firstName:"",lastName:"",email:"",password:"",phone:"",providerType:""}),[i,t]=(0,a.useState)(!1),[s,p]=(0,a.useState)(""),d=i=>{r({...e,[i.target.name]:i.target.value})};return(0,o.jsxs)("div",{style:{maxWidth:"500px",margin:"50px auto",padding:"20px"},children:[(0,o.jsx)("h2",{children:"\ud83e\uddea Simple Provider Signup Test"}),(0,o.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),t(!0),p("Creating account..."),!e.phone||""===e.phone.trim())return p("\u274c Phone number is required"),void t(!1);if(e.phone===e.email)return p("\u274c Phone number cannot be the same as email"),void t(!1);try{const r={email:e.email,password:e.password,options:{data:{user_type:"provider",phone:e.phone||null,full_name:`${e.firstName} ${e.lastName}`,provider_type:e.providerType,first_name:e.firstName,last_name:e.lastName}}},{data:i,error:a}=await n.N.auth.signUp(r);if(a)return p(`\u274c Signup failed: ${a.message}`),void t(!1);i.user?(p(`\u2705 Success! User created: ${i.user.email}`),setTimeout(async()=>{try{const{data:r,error:a}=await n.N.rpc("create_provider_record",{provider_name:`${e.firstName} ${e.lastName}`,provider_email:e.email,provider_phone:e.phone,provider_type:e.providerType});a?p(e=>e+`\n\u26a0\ufe0f Provider record failed: ${a.message}`):r&&!1===r.success?p(e=>e+`\n\u26a0\ufe0f Provider record failed: ${r.error||"Unknown error"}`):r&&!0===r.success?p(e=>e+`\n\u2705 Provider record created successfully! Type: ${r.provider_type||"unknown"}`):p(e=>e+"\n\u26a0\ufe0f Provider record: Unexpected response format");const{data:o,error:t}=await n.N.from("profiles").select("role, phone").eq("id",i.user.id).single();p(t?e=>e+`\n\u26a0\ufe0f Could not verify profile: ${t.message}`:e=>e+`\n\u2705 Profile role: ${o.role}, Phone: ${o.phone||"Not set"}`)}catch(r){p(e=>e+`\n\u26a0\ufe0f Provider record error: ${r.message}`)}t(!1)},2e3)):(p("\u274c No user data returned"),t(!1))}catch(i){p(`\u274c Error: ${i.message}`),t(!1)}},style:{display:"flex",flexDirection:"column",gap:"15px"},children:[(0,o.jsx)("input",{name:"firstName",placeholder:"First Name",value:e.firstName,onChange:d,required:!0,style:{padding:"10px",fontSize:"16px"}}),(0,o.jsx)("input",{name:"lastName",placeholder:"Last Name",value:e.lastName,onChange:d,required:!0,style:{padding:"10px",fontSize:"16px"}}),(0,o.jsx)("input",{name:"email",type:"email",placeholder:"Email",value:e.email,onChange:d,required:!0,style:{padding:"10px",fontSize:"16px"}}),(0,o.jsx)("input",{name:"password",type:"password",placeholder:"Password (min 6 chars)",value:e.password,onChange:d,required:!0,minLength:"6",style:{padding:"10px",fontSize:"16px"}}),(0,o.jsx)("input",{name:"phone",placeholder:"Phone Number",value:e.phone,onChange:d,required:!0,style:{padding:"10px",fontSize:"16px"}}),(0,o.jsxs)("select",{name:"providerType",value:e.providerType,onChange:d,required:!0,style:{padding:"10px",fontSize:"16px"},children:[(0,o.jsx)("option",{value:"",children:"Select Provider Type"}),(0,o.jsx)("option",{value:"veterinarian",children:"Veterinarian"}),(0,o.jsx)("option",{value:"vet_nurse",children:"Vet Nurse"}),(0,o.jsx)("option",{value:"groomer",children:"Groomer"}),(0,o.jsx)("option",{value:"trainer",children:"Trainer"}),(0,o.jsx)("option",{value:"breeder",children:"Breeder"}),(0,o.jsx)("option",{value:"nutritionist",children:"Nutritionist"}),(0,o.jsx)("option",{value:"pet_business",children:"Pet Business"}),(0,o.jsx)("option",{value:"holistic_care",children:"Holistic Care"}),(0,o.jsx)("option",{value:"other",children:"Other"})]}),(0,o.jsx)("button",{type:"submit",disabled:i,style:{padding:"15px",fontSize:"18px",backgroundColor:i?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:i?"not-allowed":"pointer"},children:i?"Creating Account...":"Sign Up as Provider"})]}),(0,o.jsx)("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"5px",whiteSpace:"pre-line",fontFamily:"monospace",minHeight:"100px"},children:s||"Fill out the form and click Sign Up to test"})]})}}}]);
//# sourceMappingURL=918.7f57c67f.chunk.js.map