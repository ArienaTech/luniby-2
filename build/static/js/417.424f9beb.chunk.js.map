{"version":3,"file":"static/js/417.424f9beb.chunk.js","mappings":"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","sources":["components/DataPrivacy.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabase.js';\nimport { useNotificationContext } from '../contexts/NotificationContext';\nimport { useNavigate } from 'react-router-dom';\n\nconst DataPrivacy = () => {\n  const { showSuccess, showError, showWarning } = useNotificationContext();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [exportLoading, setExportLoading] = useState(false);\n  const [deleteLoading, setDeleteLoading] = useState(false);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n  const [deleteConfirmText, setDeleteConfirmText] = useState('');\n  const [userData, setUserData] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    checkUser();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const checkUser = async () => {\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        navigate('/signin');\n        return;\n      }\n      setUser(user);\n      await loadUserData(user.id);\n    } catch (error) {\n      console.error('Error checking user:', error);\n      navigate('/signin');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadUserData = async (userId) => {\n    try {\n      // Get user profile\n      const { data: profile } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', userId)\n        .single();\n\n      // Get user's bookings\n      const { data: bookings } = await supabase\n        .from('consultation_bookings')\n        .select('*')\n        .eq('user_id', userId);\n\n      // Get user's provider listings if they are a provider\n      const { data: listings } = await supabase\n        .from('marketplace_listings')\n        .select('*')\n        .eq('provider_email', profile?.email);\n\n      setUserData({\n        profile,\n        bookings: bookings || [],\n        listings: listings || []\n      });\n    } catch (error) {\n      console.error('Error loading user data:', error);\n    }\n  };\n\n  const exportUserData = async () => {\n    setExportLoading(true);\n    try {\n      if (!userData) {\n        await loadUserData(user.id);\n      }\n\n      // Create comprehensive data export\n      const exportData = {\n        profile: userData.profile,\n        bookings: userData.bookings,\n        listings: userData.listings,\n        exportDate: new Date().toISOString(),\n        dataTypes: [\n          'Personal Information',\n          'Booking History',\n          'Provider Listings',\n          'Account Settings'\n        ]\n      };\n\n      // Log audit event\n      await supabase.rpc('log_audit_event', {\n        p_action: 'data_exported',\n        p_resource_type: 'user_data',\n        p_resource_id: user.id,\n        p_details: { export_date: new Date().toISOString() }\n      });\n\n      // Create and download JSON file\n      const dataStr = JSON.stringify(exportData, null, 2);\n      const dataBlob = new Blob([dataStr], { type: 'application/json' });\n      const url = URL.createObjectURL(dataBlob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `my-data-export-${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n\n      showSuccess('Your data has been exported successfully!');\n    } catch (error) {\n      console.error('Error exporting data:', error);\n      showError('Failed to export data. Please try again.');\n    } finally {\n      setExportLoading(false);\n    }\n  };\n\n  const deleteUserData = async () => {\n    if (deleteConfirmText !== 'DELETE MY ACCOUNT') {\n      showWarning('Please type \"DELETE MY ACCOUNT\" to confirm');\n      return;\n    }\n\n    setDeleteLoading(true);\n    try {\n      // Log audit event before deletion\n      await supabase.rpc('log_audit_event', {\n        p_action: 'account_deletion_requested',\n        p_resource_type: 'user_account',\n        p_resource_id: user.id,\n        p_details: { deletion_date: new Date().toISOString() }\n      });\n\n      // Delete user's bookings\n      await supabase\n        .from('consultation_bookings')\n        .delete()\n        .eq('user_id', user.id);\n\n      // Delete user's provider listings\n      if (userData?.profile?.email) {\n        await supabase\n          .from('marketplace_listings')\n          .delete()\n          .eq('provider_email', userData.profile.email);\n      }\n\n      // Delete user profile (this will cascade to auth.users due to foreign key)\n      await supabase\n        .from('profiles')\n        .delete()\n        .eq('id', user.id);\n\n      // Sign out the user\n      await supabase.auth.signOut();\n\n      showSuccess('Your account and all associated data have been deleted.');\n      navigate('/');\n    } catch (error) {\n      console.error('Error deleting account:', error);\n      showError('Failed to delete account. Please contact support.');\n    } finally {\n      setDeleteLoading(false);\n      setShowDeleteConfirm(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading privacy settings...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-12\">\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"bg-white shadow rounded-lg\">\n          <div className=\"px-4 py-5 sm:p-6\">\n            <div className=\"mb-8\">\n              <h1 className=\"text-3xl font-bold text-gray-900\">Data Privacy & Control</h1>\n              <p className=\"mt-2 text-gray-600\">\n                Manage your personal data and privacy settings in compliance with GDPR regulations.\n              </p>\n            </div>\n\n            {/* Data Overview */}\n            <div className=\"mb-8\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Your Data Overview</h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"bg-blue-50 p-4 rounded-lg\">\n                  <h3 className=\"font-medium text-blue-900\">Profile Information</h3>\n                  <p className=\"text-sm text-blue-700 mt-1\">\n                    Basic account details, contact information\n                  </p>\n                </div>\n                <div className=\"bg-green-50 p-4 rounded-lg\">\n                  <h3 className=\"font-medium text-green-900\">Booking History</h3>\n                  <p className=\"text-sm text-green-700 mt-1\">\n                    {userData?.bookings?.length || 0} consultation bookings\n                  </p>\n                </div>\n                <div className=\"bg-purple-50 p-4 rounded-lg\">\n                  <h3 className=\"font-medium text-purple-900\">Provider Data</h3>\n                  <p className=\"text-sm text-purple-700 mt-1\">\n                    {userData?.listings?.length || 0} service listings\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Privacy Rights */}\n            <div className=\"mb-8\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Your Privacy Rights</h2>\n              <div className=\"space-y-4\">\n                <div className=\"border border-gray-200 rounded-lg p-4\">\n                  <h3 className=\"font-medium text-gray-900 mb-2\">Right to Data Portability</h3>\n                  <p className=\"text-sm text-gray-600 mb-4\">\n                    Export all your personal data in a machine-readable format (JSON).\n                  </p>\n                  <button\n                    onClick={exportUserData}\n                    disabled={exportLoading}\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    {exportLoading ? 'Exporting...' : 'Export My Data'}\n                  </button>\n                </div>\n\n                <div className=\"border border-gray-200 rounded-lg p-4\">\n                  <h3 className=\"font-medium text-gray-900 mb-2\">Right to Access</h3>\n                  <p className=\"text-sm text-gray-600 mb-4\">\n                    View all personal data we have stored about you.\n                  </p>\n                  <div className=\"bg-gray-50 p-3 rounded text-sm\">\n                    <p><strong>Email:</strong> {userData?.profile?.email}</p>\n                    <p><strong>Name:</strong> {userData?.profile?.full_name || 'Not provided'}</p>\n                    <p><strong>Role:</strong> {userData?.profile?.role === 'pet_owner' ? 'Pet Owner' : userData?.profile?.role || 'Pet Owner'}</p>\n                    <p><strong>Account Created:</strong> {userData?.profile?.created_at ? new Date(userData.profile.created_at).toLocaleDateString() : 'Unknown'}</p>\n                    <p><strong>Last Updated:</strong> {userData?.profile?.updated_at ? new Date(userData.profile.updated_at).toLocaleDateString() : 'Unknown'}</p>\n                  </div>\n                </div>\n\n                <div className=\"border border-gray-200 rounded-lg p-4\">\n                  <h3 className=\"font-medium text-gray-900 mb-2\">Right to Rectification</h3>\n                  <p className=\"text-sm text-gray-600 mb-4\">\n                    Update or correct your personal information.\n                  </p>\n                  <button\n                    onClick={() => navigate('/profile')}\n                    className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700\"\n                  >\n                    Update Profile\n                  </button>\n                </div>\n\n                <div className=\"border border-red-200 rounded-lg p-4 bg-red-50\">\n                  <h3 className=\"font-medium text-red-900 mb-2\">Right to Erasure (Right to be Forgotten)</h3>\n                  <p className=\"text-sm text-red-700 mb-4\">\n                    Permanently delete your account and all associated data. This action cannot be undone.\n                  </p>\n                  {!showDeleteConfirm ? (\n                    <button\n                      onClick={() => setShowDeleteConfirm(true)}\n                      className=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700\"\n                    >\n                      Delete My Account\n                    </button>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      <div className=\"bg-white p-4 rounded border border-red-200\">\n                        <h4 className=\"font-medium text-red-900 mb-2\">Confirm Account Deletion</h4>\n                        <p className=\"text-sm text-red-700 mb-4\">\n                          This will permanently delete:\n                        </p>\n                        <ul className=\"text-sm text-red-700 list-disc list-inside mb-4\">\n                          <li>Your profile and personal information</li>\n                          <li>All booking history ({userData?.bookings?.length || 0} bookings)</li>\n                          <li>All service listings ({userData?.listings?.length || 0} listings)</li>\n                          <li>Account access and login credentials</li>\n                        </ul>\n                        <p className=\"text-sm text-red-700 mb-4\">\n                          Type <strong>\"DELETE MY ACCOUNT\"</strong> to confirm:\n                        </p>\n                        <input\n                          type=\"text\"\n                          value={deleteConfirmText}\n                          onChange={(e) => setDeleteConfirmText(e.target.value)}\n                          className=\"w-full px-3 py-2 border border-red-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 mb-4\"\n                          placeholder=\"DELETE MY ACCOUNT\"\n                        />\n                        <div className=\"flex space-x-3\">\n                          <button\n                            onClick={deleteUserData}\n                            disabled={deleteLoading || deleteConfirmText !== 'DELETE MY ACCOUNT'}\n                            className=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                          >\n                            {deleteLoading ? 'Deleting...' : 'Confirm Deletion'}\n                          </button>\n                          <button\n                            onClick={() => {\n                              setShowDeleteConfirm(false);\n                              setDeleteConfirmText('');\n                            }}\n                            className=\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400\"\n                          >\n                            Cancel\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Privacy Policy */}\n            <div className=\"mb-8\">\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Data Processing Information</h2>\n              <div className=\"bg-gray-50 p-4 rounded-lg text-sm text-gray-700\">\n                <h3 className=\"font-medium text-gray-900 mb-2\">How we use your data:</h3>\n                <ul className=\"list-disc list-inside space-y-1 mb-4\">\n                  <li>To provide and improve our pet care marketplace services</li>\n                  <li>To facilitate bookings between customers and providers</li>\n                  <li>To send important notifications about your bookings</li>\n                  <li>To ensure platform security and prevent fraud</li>\n                  <li>To comply with legal obligations</li>\n                </ul>\n                <h3 className=\"font-medium text-gray-900 mb-2\">Data retention:</h3>\n                <ul className=\"list-disc list-inside space-y-1\">\n                  <li>Profile data: Retained while your account is active</li>\n                  <li>Booking history: Retained for 7 years for business records</li>\n                  <li>Audit logs: Retained for 1 year for security purposes</li>\n                  <li>All data is permanently deleted upon account deletion request</li>\n                </ul>\n              </div>\n            </div>\n\n            {/* Contact */}\n            <div className=\"border-t border-gray-200 pt-6\">\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">Questions about your data?</h2>\n              <p className=\"text-sm text-gray-600\">\n                If you have any questions about how we handle your personal data or want to exercise any of your rights, \n                please contact our Data Protection Officer at{' '}\n                <a href=\"mailto:privacy@petcaremarketplace.com\" className=\"text-blue-600 hover:underline\">\n                  privacy@petcaremarketplace.com\n                </a>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DataPrivacy;"],"names":["DataPrivacy","_userData$bookings","_userData$listings","_userData$profile2","_userData$profile3","_userData$profile4","_userData$profile5","_userData$profile6","_userData$profile7","_userData$bookings2","_userData$listings2","showSuccess","showError","showWarning","useNotificationContext","user","setUser","useState","loading","setLoading","exportLoading","setExportLoading","deleteLoading","setDeleteLoading","showDeleteConfirm","setShowDeleteConfirm","deleteConfirmText","setDeleteConfirmText","userData","setUserData","navigate","useNavigate","useEffect","checkUser","async","data","supabase","auth","getUser","loadUserData","id","error","console","profile","from","select","eq","userId","single","bookings","listings","email","_jsx","className","children","_jsxs","length","onClick","exportData","exportDate","Date","toISOString","dataTypes","rpc","p_action","p_resource_type","p_resource_id","p_details","export_date","dataStr","JSON","stringify","dataBlob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","split","body","appendChild","click","removeChild","revokeObjectURL","disabled","full_name","role","created_at","toLocaleDateString","updated_at","value","onChange","e","target","placeholder","_userData$profile","deletion_date","delete","signOut"],"sourceRoot":""}